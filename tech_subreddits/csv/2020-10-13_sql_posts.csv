post_id,post_title,post_body,upvotes,subreddit,date
jakcjf,Best way to connect Postgresql to SQL?,"In my company there are only a handful of SQL users.... And like 50 people that only use spreadsheets. A huge problem is that sometimes they send each other spreadsheets rather than actually updating the database

What would be the best way of connecting excel to the database and let users just refresh the data rather than copying/exporting from the database onto excel?

I tried the odbc on the Postgresql but i wasn't successful. Also I'm on a mac but most people will have Windows",2,sql,2020-10-13
jajecc,"When I add a ""select"" statement, I jump from 3.6 results (correct) to 55K results. Why!?","I need a list of all students' answers to a quiz. There are 900 students &amp; 4 questions, so there should be 3,600 results. I'm inner joining all 9 tables needed to get from *students* table to the *questions* table and then the *answers selected* table.

With all these tables inner joined - INCLUDING the answers table - when I select only *students name* and *question text*, I get the correct 3.6K results - each student listed 4 times with the different question text.

e.g. 

    **With the answers table join but without the select answers statement**

    bob, cats or dogs?
    bob, coffee or tea?
    bob, ice cream or cake?
    bob, wine or beer?
    Sally, cats or dogs?
    Sally, coffee or tea?
    Sally, ice cream or cake?
    Sally, wine or beer?

Etc.

What I WANT is to have the student answers as well, like this:

    **So this is what I want**: 

    bob, cats or dogs? CATS
    bob, coffee or tea? TEA
    bob, ice cream or cake? CAKE
    bob, wine or beer? BEER
    Sally, cats or dogs? DOGS
    Sally, coffee or tea? TEA
    Sally, ice cream or cake? ICE CREAM
    Sally, wine or beer? WINE


So the solution should be just to add to the select statement, ""student answers"".

But when I do, this suddenly this jumps to around 55K results. A single student name now has 66 rows instead of 4 - it lists each question AND each answer, and some of the answers are listed multiple times. 

    **So what I get when I add to the select statement *student answers* is**

    bob, cats or dogs? CATS
    bob, cats or dogs? DOGS
    bob, coffee or tea? TEA
    bob, coffee or tea? TEA
    bob, coffee or tea? TEA
    bob, coffee or tea? COFFEE
    bob, ice cream or cake? CAKE
    bob, ice cream or cake? ICE CREAM
    bob, ice cream or cake? CAKE

Etc, going from the correct 3.6K rows to a whopping 55K rows.

I have no idea what's happening?! How does adding a select change the results? Please help!!

[**SQL in PasteBin here**](https://pastebin.pl/view/38fd1539)",2,sql,2020-10-13
jaj2ks,SQL BOOK,"I have completed all practical of sql but I want to learn what does it do,

like want to LEARN SQL THEORY FROM BEGINING.

PLEASE HELP",3,sql,2020-10-13
jae9rr,Oracle SQL: Help Addressing Date Comparison Logic,"&amp;#x200B;

|Rank|ID|Date|
|:-|:-|:-|
|1|001|7/15/2020|
|2|001|10/04/2020|
|3|001|10/14/2020|
|4|001|11/18/2020|
|5|001|2/25/2021|

Above is some fake sample data for a customer.  I have created a rank and partitioned the data based on ID and ordered by Date ascending.   Lets say this data is representing the days a customer purchased something and used a coupon.  The business rule is that you can only use a coupon every 90 days from the last valid coupon.  Based on these rule, I am trying to create a table like the following:

|Valid Coupon|Rank|ID|Date|
|:-|:-|:-|:-|
|1|1|001|7/15/2020|
|0|2|001|10/04/2020|
|1|3|001|10/14/2020|
|0|4|001|11/18/2020|
|1|5|001|2/25/2021|

The code will compare value rank 2 to 1. Then, since value 2 is less than 90, value 3 will compare to 1.  Since value 3 is &gt;=90 from 1, then 4 will compare to 3.  That value is less than 90, so value 5 will compare to value 3 and since that is &gt;=90 it is valid.

I have attempted using lag functions and nth\_value functions, but I am trying to avoid writing like 100 lines of code to account for every possible combination.  I figure there is an easier way to do this.  Any help would be greatly appreciated!",2,sql,2020-10-13
jada4u,Checks to avoid mistakes while querying the table.,"What are the checks or list you follow to make sure that the data you get is what you think you are getting.

For example, whenever I get the order details, I will always add an extra column with the count of distinct order day to make sure that the time period is correct.

Could you please share if you guys do something like this.

I am beginner and would appreciate any help.",2,sql,2020-10-13
jacrno,why is there a syntax error here?,"    select pid,
        max(case when rn = 1 then diff_seconds end) t1,
        max(case when rn = 2 then diff_seconds end) t2,
        max(case when rn = 3 then diff_seconds end) t3,
        max(case when rn = 4 then diff_seconds end) t4,
        max(case when rn = 5 then diff_seconds end) t5
    from (
        select t.*, 
            timestampdiff(second, start_time, end_time) diff_seconds,
            row_number() over(partition by pid order by id desc) rn
        from mytable t
    ) t
    where rn &lt;= 5
    group by id

mysql says syntax error:missing closing parenthesis on 'over'",2,sql,2020-10-13
jabp6x,[bgDB][OC] tiny relational database implemented from scratch,"Since COVID started I found my self with a bit of extra time during evenings and started building something that I wished to build for quite some time.

[bgDB](https://gitlab.com/aleksandartomic88/bgdb) is a tiny relational database, built from scratch, that aims to provide a platform for experimentation, make core database concepts more approachable and, well, make me happy while building it :)

It is still early in development, but it is starting to get in shape, so I hope that you guys will find it interesting.

It is still rough around the edges, but there is basic support for Write Ahead Logging, Buffer Pool, Read Committed Isolation, recovery and on Query Processing side it supports Aggregates/GroupBy, Joins and Filters.

If anyone is willing to join the development you are welcome, of course.

&amp;#x200B;

Hopefully this will be interesting to this community since it aims to make core database development concepts more approachable.",5,sql,2020-10-13
jabblx,Wrap your SQL into HTTP REST endpoints securely - #NoCode required,"For those interested in wrapping your SQL into HTTP REST endpoints, easily - Adding authentication and authorisation in the process :)

[https://www.youtube.com/watch?v=Ci6a\_ZVueXg](https://www.youtube.com/watch?v=Ci6a_ZVueXg)",17,sql,2020-10-13
jaarxr,Different course - new server or new DB for each?,I'm taking different classes on Udemy to learn SQL. Each class has their down data sets. How should I setup Postgres? Should I create a new server for each course? Or just create a new DB under the main PostgreSQL 13 Server? https://i.imgur.com/plHjj4n.png,5,sql,2020-10-13
ja8hle,SQL Courses?,"Hey so got an internship offer (paid at that) with a guaranteed job. They just want me to learn SQL, which I did briefly a few years ago when I took Database Management classes. Looking for a good course to take thats not super long, but will get me certified at the end.",4,sql,2020-10-13
ja8bae,How to check if multiple rows of the same ID have a SUM quantity over a certain amount?," Hey so I'm trying to find a ProductID from a table where the sum of the quantity of that id is above a certain amount. The table contains multiple rows of the same ProductID . I need to sum all of those ProductIDs quantities and put that ProductID into a different table.  

    INSERT INTO [Sales].[SpecialOfferProduct] (SpecialOfferID, ProductID)
    SELECT 17, [ProductID]
    FROM [Production].[ProductInventory]
    WHERE [Quantity] &gt; 1800;

 That's my code so far. Whats the syntax for getting the sum of the quantity of all the same IDs?",2,sql,2020-10-13
ja5lea,[SQLite] Recover data from Buku bookmark manager,"[Buku bookmark manager](https://github.com/jarun/Buku) uses SQLite3.  
My problem: I was using ArchLinux, with a separated partition for the HOME directory. Then I decided to do some distro hopping and switched to Manjaro with i3wm. However, I forgot to backup my buku list. Usually, I would have done something like this:   
`$ buku -e backupfile.md`   
, but I forgot to do that this time. Nonetheless, I still kept all the files in my previous home directory, including `HOMEDIR/.local/share/buku/bookmarks.db` ; although I do not know how to see any of my bookmarks.       
Is there anyway I can recover the list of all the bookmarks I had?",1,sql,2020-10-13
ja42mm,how to make future values for a view?,"Let's say i have this table (lets call this table1)





date | sku | cost
---|---|----
20190101 | A24 | 6
20190101 | B24 | 5

since i get my data feed once a week i need to make a view/query to blurt out this type of output:



date | sku | cost
---|---|----
20190101 | A24 | 6
20190101 | B24 | 5
20190102 | A24 | 6
20190102 | B24 | 5
20190103 | A24 | 6
20190103 | B24 | 5
20190104 | A24 | 6
20190104 | B24 | 5


is there a function/method im not thinking of to get this result?",2,sql,2020-10-13
ja3p1z,SQL Linked Server Question,"Hello All,

I am trying to write a SQL Code in MS SQL Server to extract a table from a linked server and insert it into my local server as a new table, where the linked server is a Server Object. The table to be extracted is very large. This code executes but seemingly takes forever:

 **SELECT \* INTO New\_Table\_Name FROM \[LinkedServer\].\[Linked\_Database\].\[Schema\].\[Table\_to\_be\_extracted\];**

I believe using this query would potentially be faster but I receive an error message 'Invalid Object Name' in reference to the new table name:

 **INSERT INTO \[Local\_Database\].schema.New\_Table\_Name SELECT \* FROM OPENQUERY(\[LinkedServer\], 'SELECT \* FROM \[Linked\_Database\].\[Schema\].\[Table\_to\_be\_extracted\]') ;**

Does anyone see why I may be receiving this error. Thank You!",1,sql,2020-10-13
ja3d09,Zheap – Reinvented PostgreSQL Storage,,1,sql,2020-10-13
ja26q5,Do people prefer to manipulate data in pandas or SQL?,"I know 2 types of people. One likes to do SELECT \* FROM table and calculate all metrics using pandas. The other kind likes to do everything in SQL and just execute query to get final result in pandas. Which kind are you?

&amp;#x200B;

&amp;#x200B;

[Pandas video](https://www.youtube.com/watch?v=4zLd9YEnABs) tutorial",2,sql,2020-10-13
ja01gj,"I feel like temp tables are almost always a better solution than a CTE or sub query, especially for long term maintainability. Agree, disagree?","I'm just looking for input. I wouldn't say I'm a DBA, but I'm probably as close as you could get being a back end dev, and frankly, feel qualified to at least do entry level DBA stuff, were that my wish.

So part of my job being senior is a lot of code reviews, and then the tasks I get are usually, we have no idea why this is broken/slow, but it involves our entire system to troubleshoot, go fix it.

In doing that I've ran across tons of times where we've had some sql that had been working fine for years, but finally hit a threshold, data wise, where they start to run super slow.

In almost every case, it's been a nested query, or CTE, or both. And the fix has usually been to break down what the script is doing into chunks and throw them into temp tables. 

Examples that come to mind are a script that grew over time to show purchases, but the purchase ""item"" came from one of three tables based on the purchase type so the query was coalescing things and doing 3 left joins. That got slow as data grew. The fix was to pull all the purchases you needed for that specific time, throw in a temp table, then run 3 updates based on inner joins. Now it's almost instant.

A different example is one I just worked on today. We had a nested select that basically joined exams back onto themselves. Essentially, you're trying to catch cheaters, so you select your set of exams, and within that, need to go back into the same table to check all other exams around the same time against it.

This query works great until you get into the million ish # of rows, then exponentially gets slower. 

The fix once again was to take the two selects, throw them in temp tables, then pull from the temp tables doing the calculations.  It took a 16 minute query down to &lt; 20 seconds. 

Am I doing things wrong or is this common? Like I said, I'm not a pure DBA so I'd love input, agreeing or not!",51,sql,2020-10-13
j9zwa1,Count records between time,"Hello

Question on Hive

I would like to count all the records every day that we get between 6:00 and 7.00

We have timestamp field in the table

How could I write a query for that the adapt every day for the current day ? 

Thanks",1,sql,2020-10-13
j9zpn2,"I'm about to tackle this SQL challenge, but I'm not sure where to start.","I'm doing [https://sqlzoo.net/](https://sqlzoo.net/)

I've done all the tutorials and quizzes. I'm at  ""Assessments: More involved examples for confident users | | ""Module Feedback"":  [https://sqlzoo.net/wiki/Module\_Feedback](https://sqlzoo.net/wiki/Module_Feedback)

When I look at the tables, I have no idea what's going on. With the previous examples, I took some time to try and understand the data in human terms. But, all these names don't make any sense.

Should I try to understand what each table means before attempting the problems? Or should I try to get at it in an abstract sense?",1,sql,2020-10-13
j9z3xy,Extract column names from JSON,"Currently if I want to extract JSON into a column, I have to do:

    json_fields-&gt;'phone_number' AS phone_number

Lets say I do not always know the number of keys stored in the json field, is there an easy way to dynamically add columns with the column name being the key name stored in the json field?

In addition, sometimes I have json nested within the key like:

    json_fields-&gt;'home_address'-&gt;'street' AS street

Would there be an easy way to also extract that information without having to specify the key for each field? Any help would be appreciated!",1,sql,2020-10-13
j9y7ho,Hard query,"Hey guys, I have a question regarding a query I need to make for an assignment.

It's a school schedule.For a particular part of the school schedule, I need to get a list of all EMPTY classrooms at a certain class time. There are two tables, the first one called ""lesson hour nr"" shows the column only the lesson hours, such as Monday the first lesson hour or Wednesday the seventh, and a key for each of these hours. the other table shows all lessons, including the class, the teacher, the subject, the lesson time and the room.So now I want when I enter a query, the query outcomes are all empty classrooms. So the classrooms where no lessons are given at that time. Can anyone help me with this query?

&amp;#x200B;

This is how the tables look like

Lessen(nl)/lessons(en):

    CREATE TABLE `lessen` (  `id_lessen` int(4) NOT NULL AUTO_INCREMENT,  `groep` varchar(6) DEFAULT NULL,  `lesuur` varchar(3) DEFAULT NULL,  `vak` varchar(3) DEFAULT NULL,  `docent` varchar(3) DEFAULT NULL,  `lokaal` varchar(3) DEFAULT NULL,  PRIMARY KEY (`id_lessen`) ) ENGINE=MyISAM AUTO_INCREMENT=1581 DEFAULT CHARSET=latin   

lesuurnr(nl)/lessonhournr(en):

    CREATE TABLE `lesuurnr` (  `lesuurnr` int(3) NOT NULL,  `lesuur` varchar(3) NOT NULL,  PRIMARY KEY (`lesuurnr`) ) ENGINE=MyISAM DEFAULT CHARSET=latin1

Unfortunately, I'm not allowed to create an extra table with all the rooms..

&amp;#x200B;

I tried this query

Dutch:

    SELECT `lessen`.`lokaal`, `lesuurnr`.`lesuur`  
    FROM `lesuurnr`, `lessen`  
    WHERE `lesuurnr`.`lesuur` = ""$"" 
    AND `lesuurnr`.`lesuur` NOT IN (SELECT `lessen`.`lesuur` FROM `lessen`);` 

English:

    SELECT `lessons`.`room`, `lessonhournr`.`lessonhour`  
    FROM `lessonhournr`, `lessons`  
    WHERE `lessonhournr`.`lessonhour` = ""$"" 
    AND `lessonhournr`.`lessonhour` NOT IN (SELECT `lessons`.`lessonhour`  FROM `lessons` 

$ is a variable for a lesson hour, like Monday first is 'ma1' ( Maandag is Monday in Dutch) and Tuesday 8th is 'di8'.

But it doesn't give me the output I want.

So the thing is when I enter a variable for a lesson hour, I'll get all the empty rooms for the entered lesson hour

EXAMPLE OUTPUT:

I want to see all the empty rooms for Tuesday 8th lessonhour (di8):

|Lessonhour|Room|
|:-|:-|
|di8|C10|
|di8|L22|

&amp;#x200B;

I think that in the FROM part of the query, you also need a table with all the rooms, but I'm not sure about that. Query for that is:

    SELECT lessen.lokaal 
    FROM lessen 
    GROUP BY lokaal 

English:

    SELECT lessons.room 
    FROM lessons 
    GROUP BY room",1,sql,2020-10-13
j9wxen,Query help question with ms access,"Hi. I have a table in a accdb thats consists of several columns. They include a social security number, several dates and monetary values. Im trying to query data in here ( there are over 600000 results in the accdb ) . I think ms access uses jet sql.

One social security can appear once or several times in a database. The dates and the monetary values that are on the same line ( in a different column ) can be different, or not.


So lets say my table looks like this:

Ssn      Date1         Date2       moneyvalue —————-
             123455 12-01-20  03-04-20     5.21           



Im trying to do several things:

First I want to only select the ssn that appear at least twice in the database (or more).

From those results i want to only get the ones where date1 is equal to date 2.

From those results i want to get the results where there are different values in moneyvalue per ssn.


Is this possible? How would i go on about this? I have to do this from within ms access sql window, i cant export the database to mssql as its protected.",3,sql,2020-10-13
j9ww7f,What is the best OS for SQL work?,"What operating system is best for SQL devs? For enterprise applications, is it mainly Windows or Linux? What OS would you recommend to someone who wants to become a DBA?",1,sql,2020-10-13
j9wiuy,Digesting XML Data,"Hello everyone. I'm anything but a SQL expert, but I've unfortunately been asked to knock out a data digestion job. I have a table with the following columns
Unique ID
DateTime
Value 530
Value 540
Value 550
Value 560

All values change at the same time and are tied to the same device (unique ID), so they are all to be contained in the same row. Basically, one unique ID, one time, and three associated values.

I have to get this data via an xml with the following format:

https://i.imgur.com/G5bF5Xb.png

I basically need to put the value correlating with the Data Number in the column with the same name as the Data Number. Ex/ Column 530 would contain 55.5555. 

I'm really struggling to see how to line up my 530 with the 530 column to deposit the data in the file. Any help would be greatly appreciated.

My goal is below:
https://i.imgur.com/HVqlvfX.png",2,sql,2020-10-13
j9vn5p,University Class Project Help,"Hi all, 

In my accounting class we went over SQL for two days and the professor just left it at that. We have a project due at the end of the month where we download data and answer the following questions. My partner and I do not remember much from class and do not want to rely on the professor's help too much. Any advice on how to tackle this project?

&amp;#x200B;

https://preview.redd.it/26125xe6bps51.png?width=432&amp;format=png&amp;auto=webp&amp;s=615ef7343d823d17acb84298b75c795ee65b3bfe",1,sql,2020-10-13
j9usjw,Database Signal and Slot - Alternative,"So i have an event and there is a flag if the event needs to run. So if it has to run, the Flag gets set to Y (for Yes), then we have an event automatically  runs every 1 minute which searches for every other event which has it eventflags set to Y. Is there a better/efiicient way to do it? It kinda reminds me like QTs Signal and Slots, where one thing emits something and if the thing is something special (for instance Flag=Y) then slots does Thing B else Thing A? Hope someone can help me with a better solution. Thanks in advance",10,sql,2020-10-13
j9rhy0,Concise SQL Case query in ClickHouse,"Hi everyone!

Currently I'm working with loads of repetitive data, namely mobile device information. Because of that I have tonnes of similar rows that can be aggregate, once normalized. But the query is huge if I try to apply CASE WHEN to every single row. 

For instance, there are multiple entries such as ""Android 8.0"", ""Android 6.2"", ""Generic Android"" and so on. I tried applying CASE clause:

`CASE WHEN device LIKE '%Galaxy%' THEN 'Samsung'`

The problem begins with the fact that there myriads of different smartphone models. When dealing with, say, Samsung or IPhone, it is pretty straightforward; but there are tonnes of Chinese brands that are registered as Y91, A35S and so on. Do I have to write a query for every single one of them? Or is there a concise way to deal with this.

Thanks in adavance!",2,sql,2020-10-13
j9pw7w,Learning SQLite- could I use it to allow visitors to search and return records on a website?,"I am learning Python and I recently discovered SQLite. It is an incredible, incredible tool. 

I do not have a specific use case in mind, but I enjoy building WordPress websites. Is it possible to use an SQLite database to store records, and then put it in the back end of a website so that users could click a button and return a certain view?

For example, let’s say I had a database with vehicles registered in a county in the past 6 months with fields for “make”, “model” etc. Could I have a button that they could click to return just the Hondas?

What is this called? Does anyone know of any resources online that would help me find something like this?",1,sql,2020-10-13
j9prug,SQL Server Always ON - why ?,"Hi All, I'm new here.

&amp;#x200B;

I have configured Distributed AG from DC1 to DC2 (SQL 2017 Ent edition with CU22 version)

&amp;#x200B;

DC1- DB1, DB2 and DC2-DB3, DB4

&amp;#x200B;

I have restarted DC1-DB1 SQL services, after restart DC1-DB2 should be primary. But still DC1-DB2 showing as secondary. Is this is the expected behaviour?

&amp;#x200B;

I have restarted DC1-DB2 SQL services, nothing happen - still DC1-DB1 is primary. Is this is the expected behaviour?",1,sql,2020-10-13
j9o95t,Date of Birth Check Query,"I have the following data validation:

CASE WHEN Date_Of_Birth not like ‘[1-2][0-9] [0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]’
and Date_Of_Birth is NULL
THEN CONCAT (Date_Of_Birth, ‘Fail’)
Else ‘’
End AS Date_Of_Birth_Flag

My problem is there is impossible dates I need to remove i.e. 1860 and 2040 etc what’s a good way of making sure I flag these ?",2,sql,2020-10-13
j9o077,Poor man's fuzzy search,Fuzzy search is costly. There are several ways to avoid the cost while maintaining fuzzy-searching capabilities. I've written a blog post on this topic: [https://patternmatchers.wordpress.com/2020/10/11/poor-mans-fuzzy-search/](https://patternmatchers.wordpress.com/2020/10/11/poor-mans-fuzzy-search/),27,sql,2020-10-13
j9m29n,Truncate &amp; Load Scenario: What's the general method for optimization ?,"So say for report X - I TRUNCATE &amp; load n tables (from n files) - and join/outer-join them to produce X.

What is the general approach in terms of performance optimization ?  Should I create index ?

thanks",1,sql,2020-10-13
j9ks37,MOOC to learn PostgreSQL using Terminal / Command Line?,Does anyone know of a MOOC that teaches Postgres using specifically CLI? I've used pgAdmin in the past but I'd like to become familiar with navigating Postgres using psql.,3,sql,2020-10-13
j9h6b0,What are the solutions to these questions?,"Hey guys. Here reading an assigned book and I was looking at some questions online thats related to sql. 

What would be the answers to these? 

&amp;#x200B;

1. Which of (a) to (d) is false about query optimization?

(a) &lt; some query optimization statement &gt;

(b) &lt; some query optimization statement &gt;

(c) &lt; some query optimization statement &gt;

(d) None of the above.

""Example: The query optimizer attempts to determine the most efficient way to execute a given query by considering the possible query plans.""

\----------------------------------------------------------------------------------------------------------------------------------------------------

Consider the following expression two query trees:

&lt; some query tree A &gt; &lt; some query tree B &gt;

These two expression query trees generate the same set of tuples (they are equivalent)?

(a) Yes

(b) No

(c) They are not related

\----------------------------------------------------------------------------------------------------------------------------------------------------

Which of the following concurrency control protocols ensure both conflict serialzability and freedom from deadlock?

(I) 2-phase locking

(II) Time-stamp ordering

(a) &lt; some combination of (I) and (II) &gt;

(b) &lt; some combination of (I) and (II) &gt;

(c) &lt; some combination of (I) and (II) &gt;

(d) Neither (I) nor (II)

\----------------------------------------------------------------------------------------------------------------------------------------------------

Which of (a) to (d) is false about PHP?

(a) &lt; some PHP statement &gt;

(b) &lt; some PHP statement &gt;

(c) &lt; some PHP statement &gt;

(d) &lt; some PHP statement &gt; Example: PHP cannon be use to add, delete, modify data from databases

\----------------------------------------------------------------------------------------------------------------------------------------------------

What should be the correct syntax to write a PHP code?

(a) &lt; some PHP simple code &gt;

(b) &lt; some PHP simple code &gt;

(c) &lt; some PHP simple code &gt; Example: &lt;?php echo “Hello everyone!”; ?&gt;

\----------------------------------------------------------------------------------------------------------------------------------------------------

Which of the following PHP statement/statements will store &lt;some integer value&gt; in variable var?

(i) &lt;some value&gt; = $var;

(ii) $var = &lt;some value&gt;;

(iii) int var = &lt;some value&gt;;

(iv) int $var = &lt;some value&gt;;

&amp;#x200B;

(a) Both (i) and (ii)

(b) (i), (ii), (iii) and (iv)

(c) Only (iii)

(d) Only (i)

(e) Only (II)

\----------------------------------------------------------------------------------------------------------------------------------------------------

This is NOT homework at all, just wanted to be able to study it soon. Any help would be greatly appreciated. Thanks in advance, stay safe guys!",0,sql,2020-10-13
j9f9bs,Free SQL Server Fundamentals Book (10/11/2020),"Hey everyone,
I've posted here before but would like to post again to help spread some knowledge. I wrote a SQL Server fundamentals book back in May 2018 and took about a year to publish. It's free today up until 11:59 pm pst. If you happen to miss it, don't worry, I'll probably do another couple of free days over the course of the next month or so.

Basically the book details the following:
1. Installing and configuring SQL Server so that you can install it at home or in a company setting.
2. Transforming data using various methods of SQL syntax.
3. Learning DDL and DML language.
4. What a database is and the objects within it.
5. What normalization is and how it's achieved.
6. The fundamentals of database administration.
7. Users, logins, and security privileges.
8. Plus a lot more!

It also contains screenshots to take the guesswork out of things, contains a free script just for checking out the book, exercises to help you retain what you learn, walks you through setting up your own instance of SQL server, creating/attaching databases, and more.

I don't get any financial gain from this promotion, but it can be hard to find the book on Amazon organically. Being that the Reddit community is so huge, I feel like it'd be a great place to share this with people who don't know where or how to start.

So, if you have the chance, grab a copy and dig in. You have nothing to lose! I've had numerous people tell me it's helped them in their profession and if you're still on the fence, check out the reviews on Amazon and see how you feel.

Note: If you can't find it based on the link below, just go to the Amazon web page for your country and type in ""Learn SQL Jacob"" and it should come up.

As always, let me know if there are questions and what you think of the book! Thanks for reading!

[Link to the book](https://www.amazon.com/dp/B07D5S2W4Y/ref=cm_sw_r_cp_api_uT4GFbBHKWRKP)",36,sql,2020-10-13
j9e4vf,Need help with E-R diagram,"I know this is basic stuff, but basically I'm designing an E-R diagram for a fictitious book store. The entities that will be included are book, customer, and order. The trouble I'm having is here: the books are offered in paperback, hardback, e-book and audiobook format. I cannot seem to figure out how I would distinguish between the formats while maintaining simplicity in the diagram. Any help would be appreciated!",3,sql,2020-10-13
j9duxm,Completed a SQL bootcamp course on Udemy.com,"I certainly enjoyed it and learned a lot but now my question is, where do I go from here? And also how do I practice to continue improving?",2,sql,2020-10-13
j9cisq,How to scan barcodes from your phone into a database,,2,sql,2020-10-13
j9cigp,Databases and dating website profiles,"Hi there. I am curious to know what databases are used for dating websites (example: match.com). How do they get all the data being submitted (age / city / eye color) merged into a single profile? Is there an easy way for me to test it on a wordpress website: (submit and retrieve(view) a simple profile).
I am very new to databases, so any input and pointers would be much appreciated. Thanks in advance.",0,sql,2020-10-13
j99i31,Recommendations on Youtube channels that walk through SQL questions?,"Are there any Youtube channels you guys would recommend to learn SQL? More specifically, how to solve problems like interview questions in SQL?

I've begun to create some of my own. Here's one of my [SQL videos](https://www.youtube.com/watch?v=hF20eWDyae8) that goes walks through a data science interview question. I'm trying to find other channels where people do the same so I can learn what they do well and how to improve. Any feedback on my videos would be great too.",19,sql,2020-10-13
j94w33,Postgresql command line on Mac,"I have previously worked with pgAdmin but I would like to get experience working with Postgres using CLI. I wasn't able to get it to work using `psql` so I thought I may have installed it incorrectly. 

I just installed Postgres again, making certain that I checked Command Line Tools: https://imgur.com/a/kpkUxat 

pgAdmin is working fine: https://i.imgur.com/ntg8iTa.png 

I used `mdfind psql` to find the path: https://dba.stackexchange.com/questions/93369/postgres-installation-on-macosx-problem-with-psql

https://i.imgur.com/qY87LO8.png 

I set my path to the following: https://dba.stackexchange.com/questions/3005/how-to-run-psql-on-mac-os-x

https://i.imgur.com/1nCO7Vh.png 

Even now, when I use `psql`, I get an error: https://i.imgur.com/G8nXguS.png

&gt;psql: error: could not connect to server: FATAL:  password authentication failed for user ""amit""

**Does anyone here know how I can set this up?**",1,sql,2020-10-13
j94si4,"I'm a beginner to SQL, and learning through Khan Academy. Can someone tell me how I am supposed to solve the underlined part.",,5,sql,2020-10-13
j946ts,Work experience before the actual job!!,,53,sql,2020-10-13
j8zfw0,SQL finding it,"Execute the script and set the following values: isbn = 1059831198 and cost = $20.00.

UPDATE orders

   SET cost = '$20.00'

WHERE ZJLB\_BOOKS in (

SELECT ZJLB\_BOOKS

FROM books

WHERE isbn = '1059831198');

&amp;#x200B;

i keep getting 

ORA-00904: ""ZJLB\_BOOKS"": invalid identifier",5,sql,2020-10-13
j8v63t,How to create Oracle SQL database,"Hello all.  I am taking a graduate class on Oracle SQL.  I'm doing rather well, except that I cannot for the life of me create a database.  (My manipulations of an existing schema went very well, for example.)  I've installed OracleXE184\_Win64.  Then I open SQL Plus.  Then every online guide I try to follow, the commands recommended fail.

1) How do I use SQL Plus to create a database?

2) How do I connect SQL Developer 20.2.0.175 to it, so I can start using my DDL script that I'm developing for the assignment?

I included specific release information because I've found stuff from 2017, for example, that just doesn't work with the recent release (so it seems).

Thanks for any help.",15,sql,2020-10-13
j8s2m9,OS/Hardware to run SQL &amp; Hass.io (HomeAssistant) on same server?,"I'm looking to run both Home Assistant and SQL on the same machine at home. 

For SQL- I won't be doing any intense web work/hosting... this is just for analyzing my own work/data. I'm hoping to use an Open Source (leaning towards MariaDB in the moment, but open to any others). Data is almost all numbers/queries and will import into PowerBI on a different machine.  


[Hass.io](https://Hass.io) \- obviously is for setting up/running home automations.

I have an old PC (i7 2200GHZ, 16gb, SSD) and an old laptop (i7 3.3ghz, 12gb, SSD) that I'd like to use. Are either of these sufficient for these tasks?  


What OS do I need to install in order to run both a form of SQL as well as HASS?  


Thank you!",3,sql,2020-10-13
j8rs1s,Merging 2 rows of the same table,"Hi- I am new to using SQL and currently have a table containing these entries, for example:

|User ID|Symbol|Amount|Price|
|:-|:-|:-|:-|
|10|F|2|7.25|
|10|F|1|7.25|
|10|TWTR|4|100.00|
|11|TSLA|2|15.22|

The first two entries have the same User ID, the same Symbol, and the same Price. Just different amounts.

I want to create a query that will merge any entries with the same id/symbol/price. When merged, the amount will be added together.

In this instance the result should be this:

|User ID|Symbol|Amount|Price|
|:-|:-|:-|:-|
|10|F|3|7.25|
|10|TWTR|4|100.00|
|11|TSLA|2|15.22|

I looked for quite a while and from what I understand i need to use GROUP\_CONCAT( ) --But I cant figure out how to specify the other logic.

Any help is greatly appreciated.. thank you :)",1,sql,2020-10-13
j8qypt,What's the most convenient way (from a hiring employer's perspective) to host a portfolio to demonstrate SQL skills?,"I'm looking to start building a personal website/blog to showcase a few projects I'm working on that could serve as a portfolio. I'm not looking for project ideas or ""how to make a website"" ideas, I'm wondering what is the most convenient way from an employer's perspective to view the projects?

Unfortunately, I have very little experience with source control or version control. All my work sits as stored procedures in the testing server and production server. I haven't had to work with github, or sourcesafe or much of anything like that. Haven't had to install or host my own server instance.

I'm willing to learn how to do all of this (eager to, actually), but since there are so many options, I'm not sure about the best way to put project code on my resume. If you're a hiring manager, is there a preferred way to view a project? Is just seeing the DDL and project code in GitHub acceptable? If my project involves a large amount of data, do you need to see it and query it to verify it?

I should add that my experience is entirely with SQL Server so I would like to build my projects in that, but I wouldn't know how to make that data available to view by an employer. I'm willing to learn to work in another RDMS if necessary.

I'm also willing to pay for hosting, but I obviously don't have access to an enterprise budget.

What I'm trying to avoid is having a hiring manager read a resume, see a link to a project or website with project information, and then have to jump through hurdles or deal with some eye-rolling new technology that makes him or her say ""ok I'm not dealing with this now"" and move on to the next applicant.",7,sql,2020-10-13
j8p734,What's new in pg_auto_failover 1.4 for HA in Postgres,,11,sql,2020-10-13
j8o3bu,[MS SQL] Is there a different (better) way to do this?,"I have one parent table(p) with primary key (id) and two child tables (c1, c2) with foreign keys (pid), i want to return all the records including no matches where id = 1.

    SELECT p.id, c1.data1, c2.data2, 
    FROM p,
    FULL JOIN c1,
    ON p.id = c1.pid,
    FULL JOIN c2,
    ON c1.pid = c2.pid,
    WHERE id = 1;

Is this the correct way to do it?

Is there a better or different way to do this using left outer joins and anchor tables?",2,sql,2020-10-13
j8lkdi,[Help] Power Designer Restriction,"Hey guys,

So, I have a table that has an attribute that can assume 5 values (Roles a person can execute). 

That table is linked to another one  (Warehouses) in which you need specifically to have one Role (Manager) in each Warehouse, but you can have several staff members that execute different roles besides being a manager and a staff can work for several warehouses.

How do I create a constraint that 'forces' a warehouse to have a Manager?  


Can you guys help?  


Thanks",1,sql,2020-10-13
j8l4wu,Bidirectional relationship,"I have a table with acctid1, acctid2, status columns. Data sample like this. 
Acctid1 -	Acctid2 - friend
Acctid1 - Acctid3 - friend
Acctid3 - Acctid4 - friend

I need to show bidirectional delationship like

Acctid1 -	Acctid2 - friend
Acctid1 - Acctid3 - friend
Acctid3 - Acctid4 - friend
Acctid2 -	Acctid1 - friend
Acctid3 - Acctid1 - friend
Acctid4 - Acctid3 - friend

I am trying self join 3 times, still trying to get the right results. Any suggestions?",7,sql,2020-10-13
j8j0fh,Version Control with MySQL Workbench and Gitlab,"I'm currently working on a project with Python and MySQL. I currently use the mysql-connector package on Python to connect my database with my python script. However, how can I use version control to update my database using git?",4,sql,2020-10-13
j8iw24,FULL Outter Join does not work and query shows only if there are 2 variables,"What my code do? :

&amp;#x200B;

My code selects SUM off all rows who have ConfirmatDe equals to 5 or 7 from the table named VanzariSala

My code selects from Table AngajatiSala every row who has SalaID equal to 1.

The final selects goes to EvidentaMembri and selects every UserID who has been selected from these two lines.

&amp;#x200B;

But, let's say that in AngajatiSala table, he founds a row, but in VanzariSala does not find any row,  it will show 0.

I want that even if it won't find any row in VanzariSala, still showing the outputs.

&amp;#x200B;

I tried with Outer join / Full Outer Join,  but it shows 0 even if both VanzariSala &amp; AngajatiSala rows are selected.

My problem is that if AngajatiSala row is found, but VanzariSala does not have 'ConfirmatDe' the necesarly UserID,  the final output will show nothing.

But if ConfirmatDe exists, it will show.

I  want to show it even if ConfirmatDe won't be found.

what should I modify oon my code so \`\`\`VanzariSala.ConfirmatDe = evidentamembri.ID\`\`\` should not be an necessity to output the query?

&amp;#x200B;

My query:

&amp;#x200B;

`SELECT *, SUM(PretProdus) as total_pretzet,` [`evidentamembri.ID`](https://evidentamembri.ID) `as evidentamembriID FROM evidentamembri`

`LEFT JOIN AngajatiSala ON AngajatiSala.UserID =` [`evidentamembri.ID`](https://evidentamembri.ID)

`LEFT JOIN VanzariSala ON VanzariSala.ConfirmatDe =` [`evidentamembri.ID`](https://evidentamembri.ID)

`WHERE` [`evidentamembri.ID`](https://evidentamembri.ID) `IN (5, 7)`

`AND AngajatiSala.SalaID = 1`

`AND VanzariSala.SalaID = 1`

`GROUP BY` [`evidentamembri.ID`](https://evidentamembri.ID)",7,sql,2020-10-13
j8fg6k,Differences between database management systems (noob question),"Hi, I'm an undergraduate student at UC Berkeley who's trying to self-learn and practice SQL on my own. 

I've been using PostgreSQL based on a LinkedIn Learning course, but wanted to ask if I could get some help understanding the most widely used and relevant management systems such as MySQL or SQL Server and just get some insight on the main differences between them, which are best for different cases, and which are used most in industry?

Many thanks in advance for any help!",4,sql,2020-10-13
j8dgxp,NoSQL: How Does it Work?,"Can you guys help me out with how NoSQL works vs. traditional databases?

I know aggregates and errors occur in the JS, but in terms of SP’s or jobs; what is the differences in infrastructure? You still need to model tables relationally or is it more a big large table with multiple columns handling various record ID’s?",2,sql,2020-10-13
j8acob,SQL issues,"i am working on a project and no what am i doing wrong.

1) Add a new row in the orders table with the following data: Order# = 1021, customer# = 1009, and order date = july 20, 2009.

2) Modify the zip code on order 1017 to 33222.

3) save the changes permanently to the database. 

&amp;#x200B;

i wrote for the first one.  ===&gt; select \* order books;

2nd one ===&gt; select \* code order;

3nd one, i have no clue what to do.

it keeps saying i am writing it wrong. can someone show me how to write it correctly.",0,sql,2020-10-13
j88q3k,Analyzing the Limits of Connection Scalability in Postgres (cross link from r/postgresql),,9,sql,2020-10-13
j884fp,Is there a SQL agnostic way to create local variables?,"I've seen people recommend using temporary tables to do this, but I'm having trouble finding a way of doing that's Redshift and T-SQL compatible.",0,sql,2020-10-13
j874oh,Query Performance Questions,"Hello,

&amp;#x200B;

I'm curious, the datasets that I'm working with commonly concatinate year and month or year and week together (IE march of 2020 would be 202003). 

&amp;#x200B;

What performance hit do I take (if any) when I work with portions and parsed out versions of the data points?

* SELECT LEFT(fiscal\_year\_week,4)
* SELECT RIGHT(fiscal\_year\_week,2)
* WHERE LEFT(fiscal\_year\_week,4)=2020
* WHERE RIGHT(fiscal\_year\_week,4)=YEAR(GETDATE())

Thanks",1,sql,2020-10-13
j86yzf,Alternative to generate_series with Redshift?,"I'm a bit lost. So, I understand that the generate\_series feature is not supported by Redshift. However, I'm trying to achieve essentially a log that also captures missing dates from the cte table. How would I be able to achieve this if generate\_series function is not available?

&amp;#x200B;

    WITH date_cte
        AS (
            SELECT CAST(CURRENT_DATE :: TIMESTAMP - (i * INTERVAL '1 day') AS DATE) AS ds
            FROM generate_series(1, 730) i
            ),
         
         cte
             AS (
                 SELECT CAST(c.date_created AS DATE) as ds,
                        p.slug
                 FROM company.company_production.clicks c
                     LEFT JOIN company.company_production.artists p
                         ON c.artists_id = p.id
                 WHERE c.clicks_booked = 'True'
                 )
    
    SELECT date_cte.ds,
           COUNT(cte.slug)
    FROM date_cte
    LEFT JOIN cte
        ON date_cte.ds = cte.ds 
    WHERE [cte.slug=artists_Filter] 
      and [date_cte.ds=daterange]
    GROUP BY 1",1,sql,2020-10-13
j84rpj,A Short Story About SQL’s Biggest Rival,,68,sql,2020-10-13
j82s99,Help with date conversion Impala,"I need to convert an integer from 20200925 to a date format, any format is fine. Trying to clean before bringing into power bi. Any thoughts? Had it done in Oracle but impala is annoying.",2,sql,2020-10-13
j82mma,Help/ Tips for Oracle to SQL Server Migration,"As a fresher ETL developer, I have to work on a project single handedly (due to last moment resource constraints). I have a fair bit of knowledge about SQL Server, but no so much for Oracle. My company doesn't use SSIS, instead they have an internal tool, but 90% of it is plain old SQL.

Are there any tips and tricks I should know? Any resources that could help me out? 

I'm honestly worried about my job at this point, since I joined as a Java developer and the deadlines are tight.

If anyone could help me out or guide me through it, please feel free to PM me. I really appreciate it.

Thanks a lot.",2,sql,2020-10-13
j7zd4u,How do I write a query for this?,"Honestly don't know how some of yall do it. I've been using SQL for the last 4 months. Does my head in trying to figure out how to write certain queries. Here's one that's driving me nuts. Seems like it should be so simple tho.

**Orders Table**

```
id | date | items_ordered
----------
1 | 2019 | 3
2 | 2019 | 3
3 | 2020 | 3
```

**Order Payments Table**

```
id | order_id | type | amount
------------------------------
1 | 1 | cash    | 100
2 | 2 | voucher | 100
2 | 3 | cash    | 50
3 | 3 | voucher | 50
```

The resulting output needs to aggregate data from the order payments table grouped by the order date.

**Output**
```
date | item_count | cash_sales | voucher_sales 
----------------------------------------------
2019 | 6 | 100 | 100
2020 | 3 | 50  | 50
```

-----

This is what I've got so far but it doesn't seem to be working very fast or maybe at all with 100k rows of order data. Maybe because there's no index on order_payment.order_id ?

```
SELECT
  o.date,
  SUM(o.items_ordered) as items_count,
  SUM(payments.cash_sales) AS cash_sales,
  SUM(payments.voucher_sales) AS voucher_sales
FROM
  orders o
  INNER JOIN LATERAL (
    SELECT
      sum(CASE WHEN op.type = 'cash' THEN op.amount ELSE 0.0 END) AS cash_sales,
      sum(CASE WHEN op.type = 'voucher' THEN op.amount ELSE 0.0 END) AS voucher_sales
    FROM order_payment op
    WHERE op.order_id = o.id
  ) payments ON true
GROUP BY o.date
```

Any ideas on how to get the result I'm after?",1,sql,2020-10-13
j7z9ho,Not Like with parameter to return rows if left blank,"Complete SQL n00b here, but trying to pick it up as part of my role so we can do more reporting ourselves rather than having to use our systems guys.

I am trying to figure out how to utilise ""Not Like"" with a parameter to exclude certain data, but also allow the parameter to be left completely blank without that also removing all rows from the return.

Currently I have:

    Where SupplierHistory.Event Like '%' + @EventType + '%' And
      SupplierHistory.ChangedByBuyerOrSupplier = 'Buyer' And
      BuyerSupplier.Status Not Like '%' + @ExcludeStatus + '%' And
      BuyerSupplier.Status Not Like '%' + @ExcludeStatus2 + '%' And
      SupplierHistory.DateTime Between @StartDate And @EndDate

This gives me five parameters to choose from. Start and End date will always be used and EventType works whether data is entered or not with it being a ""Like"" operator with wildcard values included.

The two Status parameters though *must* have data entered, otherwise the Not Like operators interpret this as Not Like '%', excluding all results.

Probably very basic stuff but I would appreciate any help!",1,sql,2020-10-13
j7z5mr,SQL Server 2016 - Applying a gMSA throws an error?,"Hello all!

I'm trying to setup SQL Server 2016 so that its services use a gMSA instead of an everyday user account (because: security).

The SQL Server Reporting Services didn't bat an eye when I changed things via the Reporting Services Configuration Manager.

Alas, whether I use the SQL Server 2016 Configuration Manager or just try to change things in the Services.msc - Any attempt to change the SQL Server service throws the error:  
""**Cannot find object or property. \[0x80092004\]**"" - or will just point blank ""fail to start in a timely fashion"".

There are also accompanying Event Log errors #17120:  
`SQL Server could not spawn FRunCommunicationsManager thread. Check the SQL Server error log and the Windows event logs for information about possible related problems.`

This is where I confess, I try not to mess with SQL. I leave it alone, and it leaves me alone. Alas, after 25 years in IT, I should probably stop being afraid of this particular lion, grab a chair and a whip, roll up my sleeves and ""get in there"" to tame the beast.

I'm reading some documentation about needing to grant the new gMSA ""logon as a service"" rights - but shouldn't the gMSA installation process have handled that for me?

I also note that I need to update/patch this SQL server, as doesn't appear to be at ALL current (the things I inherit...), so I'm planning to bring it up to 2016 SP2 CU15 this weekend. 

The question I have boils down to this:

Am I doing something wrong somewhere in setting up this gMSA to work with SQL? All the documentation everywhere boils down to ""Create the gMSA, Install it on the server, feed it to your services, and go have a beer for a job well done.""

Nowhere in my Googling am I finding a clear-cut ""Oh, it went boom? Here's what to check""

So I turn to you, the experts, who've seen the kabooms and who are ready to have a cold beer with me when we get this working.

Where have I gone wrong? :)",2,sql,2020-10-13
j7xukr,How do I order by year instead of by day?,,0,sql,2020-10-13
j7xrey,Can I just use joins instead of the set operators?,"Like:

`FULL JOIN`  for `UNION ALL`

`SELECT DISTINCT column  FROM Table_1 FULL JOIN Table_2` for `UNION`

&amp;#x200B;

`INNER JOIN` for `INTERSECT ALL`

 `SELECT DISTINCT  column  FROM Table_1  INNER JOIN Table_2` for `INTERSECT`

&amp;#x200B;

`ANTI JOIN` for `EXCEPT ALL`

`SELECT DISTINCT  column  FROM Table_1  ANTI JOIN Table_2` for `EXCEPT`

&amp;#x200B;

Is it possible? Sorry if this sounds introductory to you.",8,sql,2020-10-13
j7vo5a,Confused with Inner Join vs Intersect | Full Join vs Union | Except vs Minus vs Left Join,"I can't wrap my head around the sql joins vs the math's union, intersect and except.

I only noticed that the latter 3 combines 2 queries while the joins combine two tables with a key right? But how do they join? I get the Venn Diagram but how do they combine? Row-wise or Column-wise?",1,sql,2020-10-13
j7u2if,"Sign up to the Azure SQL Championship today to compete, learn and win!",,1,sql,2020-10-13
j7ofoe,Managing interdependent tasks.,"I am working with a Postgres DB containing workflow tasks and task dependencies. Tasks are interdependent, and a task may have more than one dependency.

For instance, say we have tasks A, B, and C. Task B depends on task A, and cannot start until it is complete. Task C depends on A and B, and cannot start until both are complete.

I want to update task to set state='wip' where all dependencies are marked state='complete'.

Edit: Only tasks where state='new', of course.

I am currently doing this at the application layer, and that works fine for my purposes, but of course it's kind of a punt.

The task\_dependency table could be reversed if it makes it easier.

Any suggestions on a good way to express this in pure SQL?

    CREATE TABLE task (
      id SERIAL PRIMARY KEY,
      name TEXT UNIQUE NOT NULL,
      description TEXT,
      state TEXT NOT NULL DEFAULT 'new' CHECK (state IN ('new','wip','complete'))
    );
    
    INSERT INTO task (name, description) VALUES
     ('task a', 'flobnar the froozdoodle'),
     ('task b', 'frooznar the flobzdoodle'),
     ('task c', 'doodlefrobz the froozdnar');
                 
    create table task_dependency (
      task_id integer references task(id),
      dependent_task_id integer references task(id),
      primary key (task_id, dependent_task_id)  
    );
                                               
    insert into task_dependency (task_id, dependent_task_id) values 
    (1, 2),
    (2, 3),
    (1, 3);",2,sql,2020-10-13
j7n2o7,How do I compare two tables in SQL?,"A first table will have students skills that they've input. A second table would have an employer's required skills that they've input. How would I compare how many of the students skills match the employer's skills? I want an output of ""70% of students skills match the employer's skills"" or along those lines.",0,sql,2020-10-13
j7mahk,How do you know when you are proficient enough in SQL to start pursuing entry level jobs for databases?,Also is there any sort of make-shift syllabus someone could lay out for me to track my progress in learning SQL to becoming advanced in it? thanks in advance,57,sql,2020-10-13
j7lvpo,"Does anybody know how to normalize data? (1nf, 2nf, 3nf)","Hi! I'm a beginner in SQL and I'm having a little bit of difficulty understanding how normalization works. I made this table in excel (which I need to import to MS Access later on) with some data in it

&amp;#x200B;

[Data Table](https://preview.redd.it/eptwsk8ruxr51.png?width=1141&amp;format=png&amp;auto=webp&amp;s=b36105d223e91d087a1c8150b3787acb9fad2a08)

I started constructing the first normal form by categorizing the data that corresponds to a particular ID (school, teacher, certification), then kind of separated those tables into three.

&amp;#x200B;

[1NF](https://preview.redd.it/hggnfxjtuxr51.png?width=835&amp;format=png&amp;auto=webp&amp;s=dddc04ac0c201ffcea8b5bfce1880782a9f1601a)

Then for the second normal form, I just took the primary keys in the teacher and certification tables and attached it to the school table

&amp;#x200B;

[2NF](https://preview.redd.it/gnp7z9hvuxr51.png?width=782&amp;format=png&amp;auto=webp&amp;s=19537781c117f45fa28555e3769352a6a21e1352)

I haven't exactly gotten to 3nf yet since I have no idea whether I'm doing this right, so can someone please tell me if I'm on the right track or if I'm botching it? I've watched so many youtube videos and read around 2 textbooks already and I'm still lost, so any help anyone could give would be greatly appreciated! Thank you!",19,sql,2020-10-13
j7jdmw,Best way to showoff SQL skills to prospective employers?,"I'm currently applying to jobs that would require SQL proficiency, and I'm looking for a way to show off my abilities. How do you show your breadth of knowledge with SQL to a potential employer?

The two options I'm considering so far are:

1. Creating a Github profile, and filling it with my solutions from LeetCode challenges - but the challenges generally require shortish queries, and without posting the whole explanation of the challenge and access to the DB, I'm not sure it would be very useful.
2. On my resume, listing SQL operations that I've used - but this seems like it would fill up quickly, and I'm not sure what I would select as ""high level"" operations.

&amp;#x200B;

Any advice would be appreciated, thank you!",2,sql,2020-10-13
j7itkt,How to convert to a specific date/time format?,"I'm currently using the query below to convert eastern time to UTC:

Convert(datetime,CreationTime, AT TIME ZONE 'Easterm Standard Time' AT TIME ZONE 'UTC')

How can I use this query and convert it to the time format below?

YYYYMMDD-HH:MM:SS.000",6,sql,2020-10-13
j7iftw,Double nested NOT EXISTS,"Hi,

I'm a little confused with NOT EXISTS in SQL (using SQL server). I need to use double nested NOT EXISTS to find which majors are offered by all schools except for one particular school I am supposed to leave out. I understand how to get the majors offered by all schools, but I don't know where to put in the extra condition of ignoring one particular school. Assume the data resides in 3 tables.. one for schools in Table A and majors in Table B, and a third table C that contains school Ids and Major Ids that relate A to B. Can anyone offer help? Thanks!!",1,sql,2020-10-13
j7gsrs,Pull First Record from each group in a recordset - How! :),"Hi All,

I have created a query 

`SELECT DISTINCT`

	`tabs.TabName,` 

	`tabs.Title,` 

	`tabs.Description,` 

	`tabs.KeyWords,` 

	`tabs.IsDeleted,` 

	`tabs.Url,` 

	`tabmodules.ModuleTitle,` 

	`modules.IsDeleted,` 

	`tabmodules.Visibility,` 

	`tabs.IsVisible,` 

	`tabmodules.IsDeleted,` 

	`tabmodules.Header,` 

	`tabmodules.Footer,` 

	`modules.ModuleID,` 

	`htmltext.Content,` 

	`tabs.TabPath,` 

	`htmltext.Version,` 

	`htmltext.StateID,` 

	`htmltext.IsPublished,` 

	`htmltext.LastModifiedOnDate`

`FROM`

	`modules`

	`INNER JOIN`

	`tabs`

	`INNER JOIN`

	`tabmodules`

	`ON` 

		`tabs.TabID = tabmodules.TabID AND`

		`modules.ModuleID = tabmodules.ModuleID`

	`INNER JOIN`

	`htmltext`

	`ON` 

		`modules.ModuleID = htmltext.ModuleID`

	`INNER JOIN`

	`contentitems`

	`ON` 

		`tabs.TabID = contentitems.TabID`

`WHERE`

	`tabs.IsDeleted = 0 AND`

	`tabs.TabName LIKE '%mexico%'`

`ORDER BY`

	`htmltext.Version DESC`

&amp;#x200B;

Which works ok 

What i want to do is pull the first record from each group (the latest version `htmltext.Version` )which is a version id.

Any ideas? Mysql!",1,sql,2020-10-13
j7fn57,Help with sql!,"Hey guys, 
I have a question regarding a query I need to make for an assignment. 

It's a school schedule.  
For a particular part of the school schedule, I need to get a list of all EMPTY classrooms at a certain class time.  There are two tables, the first one called ""lesson hour nr"" shows the column only the lesson hours, such as Monday the first lesson hour or Wednesday the seventh, and a key for each of these hours.  the other table shows all lessons, including the class, the teacher, the subject, the lesson time and the room.  
So now I want when I enter a query, the query outcomes are all empty classrooms.  So the classrooms where no lessons are given at that time.  Can anyone help me with this query?",1,sql,2020-10-13
j7fdqv,multiple joins same table,"Hi All,

I am pretty much self taught using SQL and work for a healthcare org writing SQL (oracle) on an EMR Cerner for a multisystem network. I have a long query and it is taking way long than I would like to run and I think the inefficiency is coming from the fact that I have to join to the same table 30 times (the table being the largest table in the database). At least I think this is what I need to be doing unless I am missing some other way.

&amp;#x200B;

The quick background is I have to pull a report of persons and then 30 different events from the event table each as their own column so

patient1 | BMI | Heart Rate | BP | etc x30

1234       | 25    |    80             |120/80| etc

&amp;#x200B;

without going into a lot of detail there is only one value per patient for each of these fields each join is simple and uses an index example below. Event\_cd is its own indexed field and each event 5-30 needs that second line to get the correct data. there are a few exceptions but for the most part this is the substance of the joins/query.

&amp;#x200B;

left outer join clinical\_event ce7 on ce7.encntr\_id = me.encntr\_id

  and ce7.event\_cd = xxxxx

  and ce7.ce\_dynamic\_label\_id = ce4.ce\_dynamic\_label\_id

left outer join clinical\_event ce8 on ce8.encntr\_id = me.encntr\_id

  and ce8.event\_cd = xxxxx

  and ce8.ce\_dynamic\_label\_id = ce4.ce\_dynamic\_label\_id

&amp;#x200B;

Am I doing something wrong or is there a more effecient way. If I would have say only 5 of these joins the query would run in seconds regardless how far back (a years worth) I look where currently running a weeks worth of data is taking 10 minutes and a month wont run. If more information is needed please let me know. Sorry if this isnt very clear not having a formal education in the matter is a little bit of a hinderance here.",1,sql,2020-10-13
j7e7v5,Create optimised order schedule,"Hi All,

I have been tasked with creating a work schedule that will drive business activities on the manufacturing floor, and the goal is to maximise production, aka, minimise the time when the tanks aren't in use.

From my observations on the floor, the dataset inputs required would be:  
\-the customer orders which need to be filled for the coming days  
\-the input materials required to build a product for an order  
\-the list of available materials we have in the warehouse currently to actually begin work  
\-the resources required (People, tanks, forlkifts, pallets, staging area space etc)  
\-the days/times the manufacturing site is open (split schedule now with COVID)

Let's assume I have all the datasets available, and I only have SQL server and a visualisation tool (EG: Tableau). Can I ask for your inputs on how to build this master dataset in SQL? Just so I can get my mind thinking.  
I guess, first things first, create a master date dimension (Every minute in every working day, for the days the site is open) and cross join that with all my tanks, so that now I have a mapping of all my tanks and their available production dates/times.

Now, how best to allocate orders to tanks and time slots (assume any order can go anywhere).

And from a technical point of view, how best to proceed? Create the master dataset I mentioned above as a table and join it with the orders dataset in someway so that the orders fit the schedule, and also join it with the resources required daaset, and them simply add rules? I'm honestly not sure on the best way to create an optimised schedule.

So please 'r/SQL', all information welcome!

Thanks Guys",0,sql,2020-10-13
j7e4ye,COALESCE,"I am writing a query that needs to have eMails all in the same field.  There are max of two email addresses which needs to have a comma to separate them.  If there is only one email address then that one goes into the field and if there are non the field needs to be left blank.  I tried COALESCE (firstemail address) + ',' +COALESCE  (secondemail address) As Email.  This is fine for two address, but for one it puts a comma at the end and for NULL it put a comma in the blank field.  Any suggestions",1,sql,2020-10-13
j7cmgs,Beginner - want to start learning data analytics with SQL,"Could anyone please suggest me good online courses for SQL fot beginners, also if i should start with SQL or MYSQL.",23,sql,2020-10-13
j7b9g9,Are you building your portfolio/website from scratch or using WordPress?,,0,sql,2020-10-13
j7b6f9,How to return overall average of column and the grouped averages,"Hi Guys,

New to SQL and wanted to know if it is possible to return the overall average of a column and the average of the same column grouped by second column from the same query? I don't know if I'm using the right terminology as I have been unable to find a similar query on stack exchange.

&amp;#x200B;

Thanks!",7,sql,2020-10-13
j77qvw,Why don't join results have a feature to remove the duplicate column (present in join condition) automatically?,"I can't think of a situation where the second column join condition would be necessary, especially if values are the same. Joins should automatically remove the second table's join condition column.

Eg., `select *` shouldn't contain *b.s\_id* if the join condition is `on a.id=b.s_id`

Or, if they are necessary, at least provide a keyword with join, like, say, `join nodup,` to remove the 2nd column from the result set automatically.

Why isn't this feature available?",1,sql,2020-10-13
j771c1,Hive - Start HiveServer2 &amp; Connect Beeline,,3,sql,2020-10-13
j75cdd,[NOOB] Help with Postgres SQL Query,"TABLENAME : opinions

&amp;#x200B;

|ID|PLACE|OPINION|
|:-|:-|:-|
|1|SOME NAME String|""Good"" or ""Bad""|

&amp;#x200B;

how can I select all places that have more good opinion then bad opinion

&amp;#x200B;

My Try Fails: 

 

    select PLACES, avg(OPINION) as OP from OPINIONS group by PLACES ORDER BY ASCENDING",3,sql,2020-10-13
j73rfx,"How do I create an application server to connect my front end (android studio), and backend (MySQL)?","My friends and I are creating an app for fun. I have my database created on MySQL. And my friend who is working on the front end is using Android Studio. To my understanding, I need a server to connect front end to back end.",6,sql,2020-10-13
j6z4mt,Guide: Options for storing hierarchical data in SQL,,9,sql,2020-10-13
j6z31p,Missing dates for multiple ranges,"Hi all, I have a table that has two fields I'm interested in: ID, and date, formatted as MM-YYYY. For example:

&amp;#x200B;

ID | Date

A | 03-2019

A | 04-2019

A| 07-2019

B| 12-2018

B| 02-2019

&amp;#x200B;

For each unique iD, I want to insert additional rows for every date not listed that is in the range from the earliest date to the latest date. So, the above table would then look like:

ID | Date

A | 03-2019

A | 04-2019

A | 05-2019

A |06-2019

A| 07-2019

B| 12-2018

B| 01-2019

B| 02-2019 

&amp;#x200B;

Any suggestions?",1,sql,2020-10-13
j6xlyd,Why SQL 1999 standard and later are not free?,"In the [""SQL Dialects Reference""](https://en.wikibooks.org/wiki/SQL_Dialects_Reference/References) wikibook there is information that texts of SQL:1999, 2003, 2008 and 2011 standards are not available for free. I cannot understand why SQL standard can be not available for free. Please help me understand this.",4,sql,2020-10-13
j6wapq,Access SQL Query Writing Help,Writing a few simple queries for a school project. Could use some help as I was out sick with corona and missed some stuff. Willing to pay for good help. Comment or PM me if your interested.,0,sql,2020-10-13
j6vxbl,How to add missing dates through a join?,"Hi,

I'm trying to create a report that shows number of page\_views per day. However, if no one visited the page on a particular day, a record won't exist, and therefore, a gap exists in the data. Instead of having this day reported as 0, a table just skips that date and goes to the next. How would I create a query that also includes missing dates but gives them a value of zero?

The following was the code I thought would work. 

&amp;#x200B;

    WITH cte 
        AS (
            SELECT DISTINCT(CAST(_sdc_received_at AS DATE)) AS ds
            FROM blank.segment_website_production.track
            ),
    
    cte2
        AS (
            SELECT CAST(t. timestamp AS DATE) AS ds,
                p.first_name + ' ' + p.last_name + ' ' + p.degrees AS name,
                COUNT(*) AS page_views
            FROM blank.segment_website_production.track t
            JOIN blank.blank_production.providers p
                ON t.properties__slug = p.slug
            WHERE t.context__page__path LIKE '%/before-afters%'
            GROUP BY 1,2
            )
    
    
    SELECT cte.ds,
        cte2.name,
        cte2.page_views
    FROM cte
    LEFT JOIN cte2 
        ON cte.ds = cte2.ds
    WHERE [name=Providers_Filter] AND [ds=daterange]",1,sql,2020-10-13
j6tzoi,Noob Looking for SQLite Projects,"I would truly appreciate some advice on how to find some guided SQL projects on Kaggle, GitHub or any other site. I have completed the sql modules in DataQuest but want to deepen my experience and build a portfolio. I am just a bit lost on how to actually find other guided projects on these platforms.",3,sql,2020-10-13
j6rofd,"I'm a ""Sr. Business Analyst"" with only foundational skills. Any help and advice would be appreciated!","**Background:**

I've been an Analyst in a large, healthcare insurance company for 3 years. I am now a ""Senior Business Analyst"" but feel like a fraud. I've mainly been working with basic Excel reports and pull from Access queries that have already been created for me. I understand how the basics of SQL work and can create simple queries in Access/MSSQL, then make them pretty in Tableau, but that's about it.

**My Skillset**

* **Excel: Intermediate**
* **Tableau: Beginner**
* **SQL: Beginner**
* **Python: Beginner**

**Questions:**

1. I have access to Microsoft SQL Server / Management Studio and can create queries. I think some of my permissions are locked though because we have a data management team somewhere in this huge company. Anyway, what can I exactly do in their that will be useful for future employers to see I know SQL? The tables I work with are already in Microsoft Access and when I create a query in MSSQL I don't know what to do with it. Any ideas are helpful.
2. How bad of a spot am I in to be considered a Sr. Business Analyst and only being able to do SQL basics (SELECT, GROUP BY, HAVING, JOINS, WHERE)? I feel like this is going to hurt me in the long run because employers will expect I know more. To add salt to the wounds, I have my Master's Degree in Data Analytics. This degree helped me convince my boss to buy Tableau and helped me learn SQL, but I certainly don't feel advanced. (Note: The degree mainly focused on the programming language ""R"", but I still learned A LOT. Plus, my employer paid for the degree in full.)
3. I use Tableau to connect to the MSSQL Server then joint the tables within Tableau. Is their a more manual way I can be doing this in MSSQL instead of letting Tableau do all the writing for me?
4. Any other advice or suggestions would be helpful

Edit: Grammar and wording",82,sql,2020-10-13
j6rcun,Explicit SQL Injection,,20,sql,2020-10-13
j6qej7,"Joining 3 tables, and then selecting data in one column, based on data in another column","Table 1 tb1

user\_id, billing\_state, first\_name, status

Table 2 tb2

user\_id, user\_email 

Table 3 tb3

id, custom\_field\_id, value

Table 3 is the issue, I'm trying to return ONLY the tb3.value if it has a specific tb3.custom\_field\_id. Here is my query.

SELECT tb1.first\_name, tb1.billing\_state, tb1.status , tb2.user\_email, tb3.value 

FROM tb1 JOIN tb2 ON tb2.user\_id=tb1.user\_id JOIN tb3 ON tb3.id=tb1.user\_id 

WHERE tb1.billing\_state='TX' AND tb1.status='1'  AND tb3.custom\_field\_id='34'

This query returns 0 results, which is not correct. The issue seems to be with the last line ""AND tb3.custom\_field\_id='34'"". I tried to add this here instead; 

JOIN tb3 ON tb3.id=tb1.user\_id AND tb3.custom\_field\_id='34'  

But still got zero results. I ONLY want to join the tb3 data that has a custom\_field\_id of 34, and return the tb3.value of that. There could be many other tb3.value's with the same id/user\_id, but not have 34 in the custom\_field\_id column.

I'm new to this, and this is my first SQL related post on any platform, critiques welcome! Thanks",2,sql,2020-10-13
j6pni2,SQL Server Diagnostic Queries Part 13,"In this video, we are going to cover just one query, but it is a very useful one!  This will be Query 32 – Missing Indexes All Databases. 

This series of videos is going through the complete set of my SQL Server 2019 Diagnostic Information Queries. These queries are available for free at glennsqlperformance.com/resources.

Please keep in mind that I have other sets of SQL Server diagnostic queries for other versions of SQL Server, Azure SQL Database, and SQL Managed Instance. The queries you see demonstrated in this video are very similar or identical to the queries for older versions and the same concepts apply.",1,sql,2020-10-13
j6om1y,Application testing with Apache JMeter,,8,sql,2020-10-13
j6odyl,Help with basic join 3 tables,So I am in a lesson on joining 3 tables in sql and im having trouble understanding how to use it? My main issue is how do I know which table to join and what labels. A lot of my results have ended with no results found or internal server error.,0,sql,2020-10-13
j6o7lz,"Large, complex relational datasets to practice on","Hi,

Any suggestions on where I can find large complex relational datasets? Ideally &gt; 50 GB, &gt; 100 tables, and &gt; 100 Million records.

I've already tried the usual suspects like Adventureworks, Northwind, TPC / TPCDS, etc.

This is for both practice and for benchmarking at my company, so even paid resources are fine :)

Thanks again!",24,sql,2020-10-13
j6l3kq,Can can I achieve the effect of an on clause in a union?,"I have a query like this:

    select
        yyyy_mm_dd,
        xml_id,
        feature,
        status
    from
        schema.t1
    where
        yyyy_mm_dd &gt;= '2019-02-02'

    union all

    select
        yyyy_mm_dd,
        p_id as xml_id,
        'payment' as feature,
        case
            when payment = 1 then 1
            else 0
        end as status
    from
        schema.t2
    where
        yyyy_mm_dd &gt;= '2019-02-02'

Is there a way I can ensure no side of the `union` has a greater date than the other? With a join I could enforce this with an `on` condition on `yyyy_mm_dd`. I want to maintain the union but only until the max date which is available in *both* tables. I’m using Hive",14,sql,2020-10-13
j6l0ci,what are the some fundamental steps(best practices) to carry out once we get the new dataset(database)?,"I don't know whether this question answered or not. I want to know what is your database instinct tells you when you looking at the new database.

if this is answered or any reference link exist share it please.",1,sql,2020-10-13
j6it7k,I have a date column and would like to convert it to yyyymm (I.e 202010) as a date (not INT or CHAR),"The SQL implementation is Oracle. 

For example, I have a date format (10-Oct-20) and I want it like this 202010 in a date format, not int or char datatypes. 

Thank you",6,sql,2020-10-13
j6h1be,Every time I create a new connection in Oracle SQL Developer all of the tables are still in there from the last one I made. I think I'm confused,"So can I only create one database on my computer? I want to create an entirely new database, but anytime I create a new connection everything seems to be shared between them. I am a student learning SQL and I think perhaps I don't understand how Oracle SQL Developer works. Any help you guys could give me would be super helpful.",4,sql,2020-10-13
j6eaze,Interview Question,"I was asked during my interview today, what is the best way to update a column in a table that contains a billion rows. I was stumped by this question. How would y'all answer this?

This is for MS SQL.",0,sql,2020-10-13
j6dywv,question on FROM/JOIN,"Self-teaching myself SQL using resources online. I am having trouble understanding the sample solution. Here is the link to the problem in question:

[https://www.w3resource.com/sql-exercises/movie-database-exercise/sql-exercise-movie-database-6.php](https://www.w3resource.com/sql-exercises/movie-database-exercise/sql-exercise-movie-database-6.php)

My question is the ""FROM reviewer, rating"" part.

It seems like the "", rating"" is essentially doing an inner join WHERE xyz is acting like the ON statement. Is this correct? If that is the case, is it a matter of readability/program syntax?

I have tried googling but due to the combination of keywords, I am having trouble finding an answer/solution documentation that explains this.",5,sql,2020-10-13
j6bxra,Select next 7 days on Teradata,"Hello guys,

How could I get the next 7 days on Teradata ?

At the moment is looks like :

where report_date=date



Thanks",1,sql,2020-10-13
j696c8,What is your wishlist for SQL Server new features?,What is your wishlist for SQL Server new features? I would love to have the database automatically figure out query regressions and propose ways to fix them. What about you?,18,sql,2020-10-13
j67rlw,Can someone please provide me with a written definition of how this string of code functions?,"select date\_trunc('week', event\_timestamp)::date as week\_and\_year",0,sql,2020-10-13
j65sui,Is there a way to calculate how many months of the year 2 dates cover? (Challenging),"For the sake of simplicity, I'm working with a dataset where each employee is assigned one supervisor. I have two dates: The start date and the end date. I'm trying to organize this dataset so that we can separate each employee's supervisor by year AND have a system where we can prioritize the number of months each supervisor was with an employee for a specific year. Example dataset below:

&amp;#x200B;

|Employee Name|Supervisor Name|Start Date|End Date|
|:-|:-|:-|:-|
|Mike|Adam|2019-11-10|null|
|Mike|Phil|2019-03-10|2019-11-08|
|Mike|Chris|2019-01-01|2019-03-08|

So above is the example for one employee. End Date is null because that is currently the employee's supervisor. At the moment, I can organize these values so they are in the order above, but I want to organize them so that it looks something like this:

&amp;#x200B;

|Employee Name|Supervisor Name|Year|Months with Employee|
|:-|:-|:-|:-|
|Mike|Adam|2020|10|
|Mike|Phil|2019|8|
|Mike|Chris|2019|2|

As I mentioned above, I want the data to prioritize the months the supervisor was with the employee for that year. For example, if Chris was Mike's supervisor for a longer period of 2019, I want the query to prioritize Chris and have him in the second row, rather than the third. 

I know this is a little challenging. What I've done at the moment is have a ranking system where I organize by start date, but that system doesn't allow me to prioritize by months, which has me a little lost. Like the title, if I was able to calculate the months of the year each employee had that supervisor, it would make my life easier, just don't know how to go about it. Would appreciate any and all help.",2,sql,2020-10-13
j65gn9,Question about this query,"  

I’ve been tasked with finding some data in the MES\_Data\_Job\_Serial table. I created a new table called AA\_Frame\_Serial with a single column called Serial\_Nbr. The data that I pasted into this table are of serial numbers that we are trying to see if we shipped. The data was trimmed to only show a portion of the entire serial number (only showing actual serial number)

Original: #80A881105E ###101219\*846YRN 2VMEY9Q9\*=

Trim: 846YRN 2VMEY9Q9\*=

Everything works except my last line after the AND so based on me trimming the serial number I need to do a LIKE’\*846YRN 2VMEY9Q9\*=’ but not sure on which part I need to do it.

    USE MAA_Magna_USA_CSS_Prod
    SELECT JS.Serial_Nbr, JS.CS_Type , SH.VIN_Ref_Nbr
    FROM MES_data_Job_Serial AS JS INNER JOIN
     MES_data_Job_Ctl AS JC ON JS.Job_ID = JC.Job_ID INNER JOIN
     MES_data_Scheduled_Order_Hedr AS SH ON JC.Order_ID = SH.Order_ID
    WHERE (JS.CS_Type = '36') AND (AA_Frame_Serial.Serial_Nbr IN (SELECT Serial_Nbr FROM JS.Serial_Nbr))",3,sql,2020-10-13
j64r30,Best resources for Postgres?,,5,sql,2020-10-13
j631cl,What’s wrong with this SQL statement ?,"I have been working on this H2 SQL in a Spring project for a few days but I am stumped by the error :
Error creating bean with name ‘org.springframework.boot.autoconfigure.jdbc.DataSourceInitializerInvoker’: Invocation of init method failed; nested exception is org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #11 of URL [file:/C:/Users/tangara/pet store/target/classes/db/H2/schema.sql]: CREATE TABLE users( id INTEGER PRIMARY KEY, username VARCHAR(30) firstname[*] VARCHAR(30) email VARCHAR(30) password VARCHAR(30) userStatus INTEGER(2)); expected “FOR, UNSIGNED, INVISIBLE.....)”; 

Please let me know what’s wrong.

Tks",0,sql,2020-10-13
j62ypv,Multiple Joins,"Hey everyone!

I have the following table (tblBOM):

|Parent|Child|
|:-|:-|
|A|A1|

And I have a second table (tblBranch)

|Product|Branch|
|:-|:-|
|A|Drilling|
|A1|Drilling 2|

And I have a last table (tblStatus):

|Product|Status|
|:-|:-|
|A|X|
|A1|A|

&amp;#x200B;

Now I would like to get a extract of tblBOM where

BOM.Parent &amp; BOM.Child = tblBranch.Product

And where BOM.Parent &amp; BOM.Child = tblStatus.Status = X

&amp;#x200B;

so both columns of tblBOM should just contain products, that are listed in tblBranch and tblStatus where Status = X.

&amp;#x200B;

Bow how?

    SELECT
    tblBOM.Parent,
    tblBOM.Child
    FROM
    DataBase.tblBOM",2,sql,2020-10-13
j615v9,SELECT Query Help (Noob),,1,sql,2020-10-13
j61178,"""Foreign Key"" to another field in the same table","PG 11, 12

Per the title of this post, PostgreSQL allows the creation of foreign keys to another field in the same table. If I have a table `Recipe (ID Integer, Recipe_Description Text, Master_Recipe_ID Integer...)` and `Master_Recipe_ID` is used by derivative recipes to reference original recipes in the same table, in theory it could be an FK that points to the `ID` field.

Is there any advantage to doing this, such as ensuring data integrity? What would be the drawbacks?

Thanks!",17,sql,2020-10-13
j60y90,Calculate the balance of users with only one SELECT of transactions,"Hi,

I'm trying to get each user balance from all transactions from a PostgreSQL server, I have a table with all transactions that I have (From, to, amount) I know that I can make two select and make a group by with a sum and then make a foreach loop but I'd like to make with only one SELECT is it possible?

Thanks",2,sql,2020-10-13
j604q2,How to track table historical changes.,"Hello awesome people. I have a table in MariaDB that I need to track historical changes on.I have been reading up on Slowly changing dimensions and I think that type 2 will be most appropriate for this case.However, mentally I think it is going to be very complicated when updating the changes to the persistent table which will be storing the historical changes.
The table I have has no unique Key .
How can I go about this?
Thank you.",2,sql,2020-10-13
j5zaju,Trying to optimize SQL query to return most posts,"I have a table that logs every time a post is viewed.  The create syntax looks like this:

    CREATE TABLE `story_counter` (
      `id` int(11) NOT NULL AUTO_INCREMENT,
      `ip` int(10) unsigned NOT NULL,
      `user_id` smallint(5) unsigned NOT NULL,
      `story_id` mediumint(8) unsigned NOT NULL,
      `time` int(10) unsigned NOT NULL,
      PRIMARY KEY (`id`)
    )

Something I want to get from that is to quickly get the 5 most read posts from the past day.  It keeps logs for the past month so there are tens of millions of rows.

I've gone through several trials and almost every query seems to take a while.  Right now I'm using:

    SELECT story_id, COUNT(*) AS views 
        FROM (SELECT story_id FROM story_counter ORDER BY id DESC LIMIT 10000) sid 
        GROUP BY story_id ORDER BY COUNT(*) DESC LIMIT 5

That only searches the last 10,000 posts instead of the past day.  Still takes 50-100ms, which is longer than I'd like.  If I try something trying to get the posts from the past day like:

    SELECT story_id, COUNT(*) AS views 
        FROM (SELECT story_id FROM story_counter WHERE time &gt; (UNIX_TIMESTAMP() - 86400)) sid 
        GROUP BY story_id ORDER BY COUNT(*) DESC LIMIT 5

That takes over 5,000ms, which is totally unacceptable.  It likely has something to do with indexing which I admittedly don't know a lot about.

Something else I would like to incorporate into the query is a way to filter duplicate IP/story_id pairs as well.  So if someone kept reloading the same post, they couldn't make it the ""most read story"" that way.  Though so far the ways I've made that work were super slow as well.

So long story short- I'm wondering if there's a query that could be done that would return the 5 most read stories and the read-counts from the past 24 hours ignoring duplicate story_id/IP pairs, in a fast (preferably less than 25ms) way.  Is there a way to do that?  Thanks!",2,sql,2020-10-13
j5z86m,From database perspective is there difference between Reusing vs Creating new Connections ?,"I'm wondering from the database point of view, would there be any difference if the client reuses connections or creates a new connection ? 

What I'm thinking is, in case of serverless like AWS Lambda, one function invocation goes to one isolated environment. Which means the connection pool inside could be destroyed, shared (assuming the container isn't destroyed when new requests come), or created multiple times simultaneously (in case of concurrent requests). However it is, it's safe to say we can expect new request to establish a new connection to the db. Would doing so have an adverse effect on the db ? 

I'm under the assumption that for the db, it doesn't really matter if the client creates a new connection or retrieves it from the pool.  Indeed there is a max limit of the number of connections but this applies to whichever connection regardless if it's new or reused.",10,sql,2020-10-13
j5xc0i,order purchase,"Hi, I'm beginner for SQL.

There is two questions I'm struggling.

&amp;#x200B;

1. There is products whenever order is made. how can I write how many orders are there each hour based on order time? I'm not familiar with HOUR function.
2. I want to see how much total spend who complete the 1 order out of all total spend?

I found who spend 1 order: 

SELECT requestor\_client\_id,COUNT(order\_status), SUM(total\_price) FROM vanorder

GROUP BY requestor\_client\_id

HAVING COUNT(order\_status)='1'

but not sure how....can I see all sum of these data. below chart is raw data and I'm using pgadmin.

Please help me to get this right

Thanks in advance!

&amp;#x200B;

https://preview.redd.it/uurq79hy0er51.png?width=885&amp;format=png&amp;auto=webp&amp;s=f11facf02cec98dc14bf91815c803ce60bf8f7b7",7,sql,2020-10-13
j5x45d,Anyone can help with these 2 SQL Queries ?,,2,sql,2020-10-13
j5vtkf,Not understanding why COUNT isn't aggregating properly,"I've been trying to refresh on my SQL and experimenting with the Chinook database (ERD [here](https://cdn.sqlitetutorial.net/wp-content/uploads/2015/11/sqlite-sample-database-color.jpg))

I'm trying to find the top 20 Artists by number of sales in 2010 (so just counting how many times their tracks appear on invoices, not actual money earned) my code I tried was this:

SELECT TOP 20 art.Name AS Artist, COUNT(i.InvoiceID) As Sales, COUNT(i.InvoiceID) * 100 / (Select 

Count(*) From Invoice) as Sales_Percent

FROM Artist art JOIN Album alb

ON  Art.ArtistId=Alb.ArtistId JOIN Track t

ON t.AlbumID=Alb.AlbumId JOIN InvoiceLine il

ON il.TrackId=t.TrackId JOIN Invoice i

ON i.InvoiceId=il.InvoiceId

WHERE i.InvoiceDate LIKE '%2010%'

GROUP BY art.name, i.InvoiceDate

ORDER BY Sales DESC

The problem i'm having is it isn't actually aggregating the artist sales. Here's an example of what i'm getting:

Artist        Sales      Sales_Percent

Metallica      4                 1

Metallica      4                 1

I want each artist to only be listed once in the results i.e.

Metallica      8                 2

I'm pretty stumped. I'm sure i'm missing something obvious but any help on where i'm going wrong would be greatly appreciated.",2,sql,2020-10-13
j5torp,Count empty rows,"Hi I’m trying to teach myself some SQL but I’m having trouble with counting blanks. I want to count the rows that fulfill the following criteria:

    SELECT *
    FROM Table
    WHERE Column IS NULL;

I tried to write COUNT(Column) after select but got 0, which is not correct. Hope anyone can help!",7,sql,2020-10-13
j5swlx,Select items until sum of Quantity is at least X without using a cursor,,1,sql,2020-10-13
j5ru9a,Books Request,"Hey Guys, 

I am new to r/SQL, and I am also just getting my feet wet with learning SQL. I wanted to start off with Don Jones, SQL Server Administration in a Month of Lunches.

&amp;#x200B;

Has anyone read this book, or do does anyone have any easy reads for learning the basics of SQL?",3,sql,2020-10-13
j5rr5h,3NF problem,"Before you read, i'm new to SQL in general so ELI5 pls.

Currently working on a project at uni where i need to get this table into 3nf (if possible). I have spent several hours tirelessly staring down this table and working on solutions without luck. Gambling my last sane brain cells that someone here might have a solution.

Case: The DB is for registering test data for a rowing association, the problem is that rowers are registered in different classes based on age of which there are four. Each class has a unique number of tests (one class has 10 another has 8 and so on) that the rowers need to go through each test week. Some exercises may be used by several classes. 

[ERD can be seen here](https://imgur.com/a/oqjuna0)

Please ask if something is unclear.

EDIT: The issue is that i can't seem to be able to link the exercises that each class need without getting a null value or redundant data. Reason being there is not a standardized amount of test exercises per class. I want to link the test set for each class to the results table.",4,sql,2020-10-13
j5pf4k,Recursing through a table to expand into columns,"I'm using MS SQL Server. For simplicity, I have a table with \[Ticket#\], \[PaymentAmt\], and \[Payer\]. Ticket# may, and usually does, duplicate. I am trying to write a query that will list ticket numbers once, each, with the total PaymentAmt, then list, in the same row, Payers as something like Payer1, Payer2, Payer3. I am fine cutting it at a fixed number of payer columns in the results (likely 3 or 4). To keep things fun, a single payer may occur multiple times in the same Ticket#. 

How can I get results something like this:

&amp;#x200B;

|Ticket#|PaymentAmt|Payer1|Payer2|
|:-|:-|:-|:-|
|100|$320|John Doe|Insurance ABC|

From this:

&amp;#x200B;

|Ticket#|PaymentAmt|Payer|
|:-|:-|:-|
|100|$20|John Doe|
|100|$150|Insurance ABC|
|100|$100|Insurance ABC|
|100|$50|John Doe|",16,sql,2020-10-13
j5p22q,"I'm looking to learn the DB Management side of SQL, things like creating tables, primary keys, ect. What are great resources to help learn this? I especially need a fake database so that I can follow along and practice.","/r/learnsql ~~is really really inactive, most of the questions don't have any comments, or they have mediocre comments so I hope this is okay.~~

~~As for SQL flavors I have done Postgre SQL and MySQL. But this doesn't really matter much because I don't understand or see the differences between them.~~

~~This is for school, but the school material is hot dogshit, I recently completed ""UDemy's SQL Bootcamp from Zero to Hero"" and it was a total Godsend! However it does not cover any of the things I'm looking to learn about now. If anyone has any good courses, work alongside guides, that would be great. If the resource doesn't have a fake db I can play with, it probably won't work for me as I am not good enough yet to make my own/understand what the resource is saying without a way to test it in a ""real"" environment.~~  


Edit: I will go to another community for support. Thanks.",1,sql,2020-10-13
j5nga9,Returning Modified Query Result With Limited Permissions,"Hey pals,

I'm in a bit of a pickle. I'm in a situation where due to security constraints, the only permissions I have on the database I'm working on are select, show view. SHOW GRANTS returns GRANT SELECT, SHOW VIEW ON \`confidential\\\_conf\`.\* TO 'user'@'%'.

Despite how extremely limited I am here, I am expected to make an SQL query that returns a very specific, modified version of the original tables that I am working with.

**Example:**

Using tables item &amp; order

*item*:

|item\_id|order\_id|item\_price|
|:-|:-|:-|
|101|201|$10|
|102|201|$25|
|101|202|$10|
|102|202|$25|
|103|202|$5|

*order*:

|order\_id|order\_grand\_total|
|:-|:-|
|201|$35|
|202|$40|

Desired output:

|item\_id|order\_id|item\_price|order\_grand\_total|
|:-|:-|:-|:-|
|101|201|$10||
|102|201|$25|$35|
|101|202|$10||
|102|202|$25||
|103|202|$5|$40|

**What I've done so far:**

I've been able to merge the two tables how I want fairly easily, but this is the output I get:

|item\_id|order\_id|item\_price|order\_grand\_total|
|:-|:-|:-|:-|
|101|201|$10|$35|
|102|201|$25|$35|
|101|202|$10|$40|
|102|202|$25|$40|
|103|202|$5|$40|

This is an issue because it greatly affects the totals when trying to use the resulting table for accounting purposes. I tried to fix this with the following MySQL query:

`SELECT CASE WHEN a.min_id is null then NULL`

`else b.order_grand_total END as 'order_grand_total', item_id, order_id, item_price FROM`

`(SELECT min(id) as min_id,count(1),order_grand_total FROM`

`(SELECT @s:=@s+1 as id, order_grand_total FROM order, (SELECT @s:= 0) AS s) as x`

`group by order_grand_total) AS a`

`right JOIN`

`(SELECT @s:=@s+1 as id, item.item_id, item.order_id, item.item_price, order.order_grand_total`

`FROM item, order, (SELECT @s:= 0) AS z) AS b`

`ON a.min_id =` `b.id;`

This outputs:

|item\_id|order\_id|item\_price|order\_grand\_total|
|:-|:-|:-|:-|
|101|201|$10|NULL|
|102|201|$25|NULL|
|101|202|$10|NULL|
|102|202|$25|NULL|
|103|202|$5|NULL|

I think I would be able to achieve my desired output through the use of temporary tables, but since I don't have that permission, I've been trying to find a workaround. I've been working on this for a while now and I'm stumped. Someone, please help!",3,sql,2020-10-13
j5mg7t,HELP,so I need help writing a sql statement for showing a list of product name field only of products with a categoryID of 2,0,sql,2020-10-13
j5lou7,Timestamp woes,"Lost a day's worth of data with update table trying to fix this...I was using a timestamp datatype, now I'm using the date datatype...I had trouble standardizing the times but I'm going with ISO 8601 YYYY/MM/DD. I fixed the Python Code Generating this column, but I want to know if 

&amp;#x200B;

A) I can just serialize in postgres to have the date automatically add (like a serial primary key) 

B) how can I change the incorrect dates in Postgres?! It's killing me :(

&amp;#x200B;

&amp;#x200B;

https://preview.redd.it/pbkwrf74qar51.png?width=280&amp;format=png&amp;auto=webp&amp;s=2b72af520296c45c48a2eb15245de604a0826f78",8,sql,2020-10-13
j5j0gb,I need good resources to learn subqueries in SQL?,"I am getting confused as hell in this topic. Which book is good for learning this topic.

One problem that I have found with most resources is that they don't mention the database schema while giving queries. I also read the ""understanding sql"" for subqueries. But it also makes it even more confused as it doesn't gives what database schema is it talking about.

Any good resources in your mind?",14,sql,2020-10-13
j5ir46,How do I show unique columns only in SQLite?,"I typo'd the title, so please read the following:


Example: I have a table with the columns name and price. I only want to see the names of the products the prices of which are not repeated elsewhere.

Distinct doesn't work since it shows one of the non-unique rows; I want to see none of them.",12,sql,2020-10-13
j5hupr,[Tech Support] SQL Log File created in Documents when opening PowerBI,"Hello All,

Need some help with this one. I'm trying to figure out why SQL is creating an log file in my documents when opening PowerBi. I have SQL management 2018 installed. I can't figure out why it's creating the log file. Every-time I pull data from PowerBI. The log file becomes huge.

In the log file itself, its logging into an database. It's like trace log.",7,sql,2020-10-13
j5hd2v,Premade statement inside Link %%,"Does anyone know how to put a premade statement (?) inside %%Those ones I tried and unfortunately didn't work.

SELECT GPCI FROM \`Accounts\` WHERE \`GPCI\` LIKE '%?%'

SELECT GPCI FROM \`Accounts\` WHERE \`GPCI\` LIKE '%'?'%'

statment

mysqli\_stmt\_bind\_param($stmt, ""s"", $inputGPCI);  


EDIT: I don't know why I put Link inside the title it was a mistake.",4,sql,2020-10-13
j5gmnk,Join only shows rows with data in the joined table,"Hey everyone, I have a query that joins table A to table B. Its only returning results if there is data in table B. I would like the query to return all rows even if there is no data in the joined table. My current query looks like this:

tableA.id,tableA.currentSituation,tableA.moodStart,tableA.automaticThought1,

tableB.id,tableB.allOrNothing,tableB.blamingOthers,tableB.catastrophizing,

FROM tableAJOIN tableBON tableA.id = tableB.tableAidORDER BY tableA.currentSituationDESC

&amp;#x200B;

I tried changing JOIN to LEFT JOIN but it didnt return any rows at all then.  
Any help would be greatly appreciated.",4,sql,2020-10-13
j5eei1,Noob: When you Multiple on 2 columns to get Total with Where clause returns error,"&gt;SELECT  [order_num]
      ,[order_item]
      ,[prod_id]
      ,[quantity]
      ,[item_price]
    
&gt;,[quantity]*[item_price] AS 'TotalPrice'

&gt;FROM [crashcourse].[dbo].[orderitems]

&gt;WHERE 'TotalPrice'  &gt; 100


So I receive this error:

""Conversion failed when converting the varchar value 'TotalPrice' to data type int""

If I take off the where clause my query works fines

Thank you",4,sql,2020-10-13
j5e7dn,How to interact with SQL via Terminal on Mac?,,1,sql,2020-10-13
j5e6ca,When I need to use Scope_identity()?,"Hi,
I would like to know when I need to use Scope_identity() in sql server in my query and there are some examples about it.
Thanks for reply!!!",1,sql,2020-10-13
j5cx8x,The question in a test that made me lose hope and fail. Your help and solution to this simple question would be greatly appreciates,"I probably failed a test because of this question, it was question #2 of 10 and stumped me so hard I ran out of time and did not finish the test at all. Please help me solve it.

&amp;#x200B;

This is a table calles GRADES which stores the grade of each student in a subject.

Show a query which results in the name of the student and the average for the 3 classes

BUT ONLY showing students whose average is more than 70.

Name the column for average for the 3 classes AS 'FINAL GRADE'

# You cannot use (math + hist + scien)/3  to get the average.

&amp;#x200B;

&amp;#x200B;

GRADES

|name|math|hist|scien|
|:-|:-|:-|:-|
|Matt|70|80|90|
|Scott|66|55|25|
|Ada|88|99|79|
|Mary|25|55|1|
|John|88|90|91|

&amp;#x200B;",26,sql,2020-10-13
j5b0c0,Using a column extracted from XML in WHERE,"So I assume I just can't but I thought I would confirm quickly.
In SELECT I am extracting a couple of values out of an XML object to display as a column like so:

XMLTYPE(column name holding XML).EXTRACT('//blahblah/text()').getSteingVal() colName

If I try to use colName in WHERE I get colName is an invalid identifier and I instead need to put the extract statement in WHERE also.

I'm not doing anything wrong yea, the colName is just setting the column name for the extracted values, it's not actually making an identifier I can search or sort by name?",1,sql,2020-10-13
j5ai4r,"Hey guys , can anyone help me with this puzzle please? This puzzle is You have an input string and you have to create a table (or just a result set) from it. Each character will be converted in a row with a single column. Check out sample input and expected output.",,0,sql,2020-10-13
j5aep3,The use of sql,I want to ask what is the use of sql. And when should I use it?,0,sql,2020-10-13
j5a75u,"I'm stuck, MindTap: Intro to SQL Homework","This is a Mind tap assignment for my Intro to SQL.  I am very new to this and have been struggling a bit. I am stuck on a problem as follows.  

""The  Marketing team of InstantRide wants to know that how many discounts have  been offered for each ride. You need to calculate this information for  each travel where a discount is applied and return two columns: **TRAVEL\_ID** and **DISCOUNT\_AMOUNT**. In addition, you need to return the calculation as a money value using the *ROUND* function to 2 decimals. ""

This is what I came up with. 

SELECT TRAVEL\_ID, TRAVEL\_DISCOUNT \* ROUND(TRAVEL\_PRICE,.100) AS DISCOUNT\_AMOUNT    
FROM TRAVELS  
WHERE TRAVEL\_DISCOUNT IS NOT NULL;

Table I am selecting

[https://imgur.com/gallery/FdWkBOx](https://imgur.com/gallery/FdWkBOx)

Screen shots what the answer should be.

 [https://imgur.com/gallery/zoo3WxS](https://imgur.com/gallery/zoo3WxS)

My issue is it is not rounding out to the right answer. So to my understanding is my ROUND(TRAVEL\_PRICE,.100) Is incorrect. I have tried different numbers besides .100 with no luck, what am I doing wrong?",1,sql,2020-10-13
j54ale,Item Master and BOM Join,"Hello everyone!

I have a unique Item Master in this structure:

* Item
* Type
* Attribute
* ...

And I have a simple BOM like

* Parent
* Child

Since the BOM also contains Products, that are not listed in the item master, I would like to filter the BOM extract somehow.

This approach is not working:

    SELECT DBA.IXPAR     ""Parent Item"", 
           DBA.IXCHI     ""Child Item""
    FROM   DEV.DBA, 
           DEV.IM
    WHERE  DBA.IXPAR = IM.ITEM",1,sql,2020-10-13
j50uz4,Question and confirmation on Aliases,"Am I correct and right in my understanding that, e.g. 

Prod_name  AS 'Product Name'

The column name is still Prod_Name and THIS Should and will be used in future where/group by etc clauses

The Alias 'Product Name' is merely a presentation format, the table name should be used when filter/etc going forward?",3,sql,2020-10-13
j50q55,Why is AND higher in order of evaluation than OR?,"So as per above is there any reason why AND is higher, in order of evaluation than OR?

I learnt that we should use parentheses/brackets when using both AND and OR, as AND is processed before OR",29,sql,2020-10-13
j50kbr,How do I put this as a SP?,"SOLVED


&gt;SELECT  [prod_id]
      ,[vend_id]
      ,[prod_name]
      ,[prod_price]
      ,[prod_desc]
  
&gt;FROM [crashcourse].[dbo].[products]


&gt;Where (vend_id = 1002 OR vend_id = 1003)  AND prod_price &gt;= 10;


So how would I put the above as a SP and have the option to set a pick a vendor ID? and product price?

How do i format that above too - for reddt?",0,sql,2020-10-13
j4vvoy,Need help with 'not exist',"I  need to get the result with movie title that have no registered characters in the table ""plays"". When I run the below query, I don't get anything. Do you have any idea how I can fix this?  Thank you. 

&amp;#x200B;

select m.title as title

from movies m join plays p on ([m.id](https://m.id) = p.movie\_id)

where [m.id](https://m.id) NOT IN (select [m.id](https://m.id) from plays);",6,sql,2020-10-13
j4sbw3,Do I have the right idea? What can I improve?,"So I'm sort of confused on the employee entity. 

In my case, I would have a person from a brand(apparel brand) create a user account and then proceed to create a brand and then assign employee accounts if needed. 

I'm just confused how that should be set up. 

Here's what I've got: [https://imgur.com/a/vzjxki6](https://imgur.com/a/vzjxki6)",1,sql,2020-10-13
j4qslq,I'm drawing a blank coming up with entities,"I'm doing a salary database for a contract type of business, as practice with database.

Basically, every contractor has a main company and they get sent out to a company. They work there permanently, with a permanent salary, specific to that company.

Otherwise they get sent to different locations, and each location has a different salary.

I know Employee is an entity. The ""company"" they're sent to is another Entity. Can salary be an entity? and how can i tie that with the company? because each company has a different hourly pay?

I'm drawing a blank for other entities as well. This all surrounds Salary of each individual, but salary changes depending on what location they work at, and whether or not they're permanent at that location. Also each location may give benefits like vacation pay and sick pay. Would I say ""Benefits"" as  Entity as well?",3,sql,2020-10-13
j4q429,Copying from Excel,"Hi,

I run a local football site. Each week I get an email sent to me that has 2 columns
RegNo | Goals Scored

I have a table that's laid out:

RegNo|1|2|3|etc. (each number represents a match day)

If I were to update these manually to say that RegNo 1004 scored 17 goals in matchday 1 into phpMyAdmin the generated query is 

    UPDATE `GB19` SET `1` = '17' WHERE `GB19`.`RegNo` = 1004;

I copy the list that gets sent to me into an excel sheet that generates a query to update the DB.

The query it generates is

    UPDATE `GB19` SET `1` = '17' WHERE `GB19`.`RegNo` = 1004;

For some reason when I now copy from Excel and paste to phpMyAdmin I get an error to say there are unexpected characters regardless of the fact they both look the same. This worked this time last year.

https://imgur.com/a/9Fwue0P hopefully shows this

On any given night there can be 20 odd scorers so I would rather be able to auto generate these.
    
Any help would be greatly appreciated.",1,sql,2020-10-13
j4q0i6,Need help with a query,"Hi guys, I would I go about solving the following query:

For each day of a post, find the most frequently used tag for that day (in case of ties, return them all). The result will include for each day and each tag used in that day, the number of posts.

Schema:

posts(pid, pdate, title, body, poster(uid))

tags (pid, tag)

I know how to group them, but I can figure out how to only display the biggest tag and the ones that are tied.

Any help is greatly appriciated :)",1,sql,2020-10-13
j4lcxz,Overwhelmed by volume of tables / People who's job involves SQL full time,"So to those experienced folks who have jobs and careers working in DBAs roles etc, going back to when you started and even currently.  

How do you make sense of when there is a db with lots and lots of tables, stored procedures and views. How would you make sense of it in terms of which tables connect and used where?

I am aware of the database diagram function, but for example, in Excel I can click CTRL+Find and then search ACROSS the whole workbook and multiple Sheets.

In a stored procedure or a View - which has many different SQL and commands, how would you search across them or into them to find out and unpick them?",39,sql,2020-10-13
j4a82r,Newbie development DBA resources and advice,"Hey all ! I was offered a Jr sql dev role. I was wondering what I could do to improve my skills. I am pretty good with generic crud statements and know my way around the general syntax of procs and functions. Any other things to prepare ? I have two weeks and I am trying hit the ground running if I can.

I am learning azure repos and git on the side for source control.

Any ideas would be helpful.",3,sql,2020-10-13
j46qnd,Newbie - Confused about GROUP BY query,"Hi All,

Normally if you have:

    SELECT  warehouse,  product, SUM (quantity) qty
    FROM
        inventory
    GROUP BY
        warehouse,

It will show an ascending alphabetical order of the values in **warehouse**, 

&amp;#x200B;

However.if we introduce another column in **GROUP BY**

&amp;#x200B;

    SELECT  warehouse,  product, SUM (quantity) qty
    FROM
        inventory
    GROUP BY
        warehouse,
        product;

Are the results going to be based on the ascending alphabetical order of the values in **warehouse?** is **product** taken into account? 

&amp;#x200B;

&amp;#x200B;

Is the above similar to this? Except this one is used for syntactic sugar?

    SELECT  warehouse,  product, SUM (quantity) qty
    FROM
        inventory
    GROUP BY GROUPING SETS((
        warehouse,
        product));",1,sql,2020-10-13
j46iml,Is there a way I can select everything but modify one of them?,Let's say I have a table with too many columns. I want to modify one or two of them but manually typing every single column name could be tedious.,1,sql,2020-10-13
j45kpi,Help with query,"Hello,

I am trying to write a query and I am fairly new to SQL.  I am using SQL Server Manager Studio 17

I need to know  What is the daily, weekly, monthly, quarterly profit of each store?  I have included the image of the dimensional model. 

[https://imgur.com/a/NjWxPoc](https://imgur.com/a/NjWxPoc)

If anyone can point me in the right direction I would appreciate it.",1,sql,2020-10-13
j454cn,top 3,anyone knows a funtion to get the top tree values of a table? even tho some are the same value,1,sql,2020-10-13
j43zpj,fastest sql c++ database,"I am working on a research using python, currently I need to build a concurrency control system for research purposes. The system I built with python had very poor throughput even though I am using sqlite! so I decided to try binding the system with c++ to increase performance. What do you think is the fastest reliable database for it?",1,sql,2020-10-13
j43tr5,Pulling all dates less than range,"Hello everyone! Need help figuring out a piece to the puzzle I'm working on. And by puzzle I mean I've been solving issues for the past 9 hours and now I can finally do my core job roles :) 

I'm trying to pull data from a table that has a date less than a range of dates. I have a python function with embedded SQL that will accept 2 dates and pull all data for a date in the range an all previous dates in that year. The catch is I can only have 1 record per without using a distinct clause.

For just 1 date parameter, I would do something like this:

    Select  *
    FROM    table1 A
    JOIN    table2 B ON b.time_id_record = a.time_id_record
    WHERE   table2.date &lt;= '31-JUL-20'
    WHERE   table2.year =  EXTRACT(YEAR FROM '31-JUL-20')

Which would give me something like this:

|Record 1|31-JUL-20||
|:-|:-|:-|
|Record 2 |30-JUN-20||
|Record 3 |31-MAY-20||

...

&amp;#x200B;

|Record 7|31-JAN-20||
|:-|:-|:-|


But instead of 1 date as a parameter, I need to supply a date range to this, and still pull all applicable dates less than or equal to the dates supplied (within the years). 

For example, if I had something like this (obviously this won't work for what I need it for, just using it as an example):

    Select  *
    FROM    table1 A
    JOIN    table2 B ON b.time_id_record = a.time_id_record
    WHERE   table2.date BETWEEN '31-DEC-19' AND '31-JUL-20'

My output should look like this:

&amp;#x200B;

|Record 1|31-JUL-20||
|:-|:-|:-|
|Record 2 |30-JUN-20||
|Record 3 |31-MAY-20||

...

&amp;#x200B;

|Record 7|31-JAN-20||
|:-|:-|:-|
|Record 8|31-DEC-19||
|Record 9|31-NOV-19||

...

&amp;#x200B;

|Record 19|31-JAN-19||
|:-|:-|:-|


&amp;#x200B;

I can't wrap my head around this, and maybe it's partially because I've been working for almost 10 hours as I type this and I need to take a break but any help would be appreciated!",1,sql,2020-10-13
j42y1c,Help someone help!,"So I moved a test database over to an external hard drive! Now it won't work! Fine ok it went bad! But now I can't get rid of the database on SQL! How can I drop, delete, or whatever needs to be done to just get rid of it! And That DBCC Checkdb doesn't not working so! I'm not looking to fix and get back on that database I'm trying to remove it!",1,sql,2020-10-13
j42efw,"Weird bug, cant copy paste!",,1,sql,2020-10-13
j41d6p,Is there any generous souls out there who would be willing to help me out with an assignment?,"I mainly asking for some explanation on the differences between a multi-relational query and a subquery. Or even some good resource tutorials would be helpful.

Here are my problems:

I need  two SQL statements (one multi-relation and one subquery) for each of these.

1. Find the beers (names and manufacturers) sold in either Joe’s Bar or Sue’s Bar.
2. Find the drinkers who like the beers made by Anheuser-Busch and live in &lt;cityname&gt; (address contains the word &lt;cityname&gt;
3. Find the bars that sell one or more beers that Joe’s Bar sells

&amp;#x200B;

Here are the tables

&amp;#x200B;

CREATE TABLE Sells (

bar VARCHAR(20),

beer  VARCHAR(20),

price  REAL,

PRIMARY KEY  (bar, beer)

);

&amp;#x200B;

DROP TABLE Beers;

CREATE TABLE Beers (

name    VARCHAR(20),

manf    VARCHAR(20),

PRIMARY KEY (name)

);

CREATE TABLE Bars (

name  VARCHAR(20) PRIMARY KEY,

addr  VARCHAR(200),

license INT

);

&amp;#x200B;

CREATE TABLE Drinkers (

name  VARCHAR(20) PRIMARY KEY,

addr  VARCHAR(200)

DEFAULT  '123 Sesame St.',

phone  VARCHAR(16)

);

CREATE TABLE Likes (

drinker VARCHAR(20),

beer VARCHAR(20),

PRIMARY KEY (drinker, beer)

);

&amp;#x200B;

CREATE TABLE Frequents (

drinker VARCHAR(20),

bar VARCHAR(20),

PRIMARY KEY (drinker, bar)

);

&amp;#x200B;

My current answers:

1.",1,sql,2020-10-13
j40k9h,How we implemented triggers in our open source golang SQL engine,,2,sql,2020-10-13
j401y1,You Tell'em!,,267,sql,2020-10-13
j3zf20,Interview questions for a student data retrieval job?,"I have an interview for a student job (hiring Comp Sci majors, I'm a freshman) using SQL and PANDAS to retrieve data from the enrollment database. It's a part-time job and the minimum qualifications are just ""Experience with SQL and Spreadsheets"". I have very rudimentary knowledge of SQL (I can explain joins now) and I have no idea what to expect",2,sql,2020-10-13
j3z7yv,Need Help with Exercise [postgresql],"1) The name of the agent that reviewed the most tickets on each day (take the
lowest agent_id in case of ties)


2) The name of the topic with the highest average complexity score on each day
(take the lowest topic_id in case of ties).

The tables


agent - id, name

topic - id, name

ticket - id, review_date, agent_id, topic_id, complexity_score",2,sql,2020-10-13
j3yrci,data type conversion tool?,"i do a lot of work between different database environments.  I am often left with the following decision to make.
source is ms sql: column dtype is nvarchar(500)
destination is teradata: column type is ????

in this instance i know that teradata does not accept nvarchar, but it will accept varchar, so if i create a table in teradata to receive the column from ms sql then i know i need to make it a varchar(500). 

today im pulling some data from some hadoop instance, and i am seeing things like int(1), int(10), int(11), tinytext, text...

does anyone know of a tool out there where i can select the source environment, plug in the datatype, and select the destination environment?  i mean, exactly like google translate would be super sweet.",9,sql,2020-10-13
j3yq66,In layman’s terms: What is a stored procedure/process?,Same as title,6,sql,2020-10-13
j3ygs0,SQL backup via job - size different from manual backup - should I be concerned?,"Hey all, we've got a maintenance plan going to backup a DB to a fixed drive.

Job runs fines automatically every night and the backup file size is about 3.8GB

If I manually backup the DB using SSMS via tasks - back up the file size is about 7.5GB

I've taken a look at the job script as it is in SMSS as well as the SQL Query File and they appear the same to me.  My expertise is not in SQL however so I'm unsure what's causing the size difference...is it just the DB maintenance task compresses the file or something?  I'm a bit concerned that we're not grabbing everything so any insight is greatly appreciated.

\-V

&amp;#x200B;

**Job step 1 as listed in SSMS:**

\-- Script to backup database

BACKUP DATABASE \[Navision\] TO  DISK = N'D:\\BACKUPS\\Navision Daily Backup' WITH NOFORMAT, INIT,  NAME = N'Navision-Full Database Backup', SKIP, NOREWIND, NOUNLOAD,  STATS = 10

GO

&amp;#x200B;

**SQL Query File when exported to file:**

&amp;#x200B;

USE \[msdb\]

GO

/\*\*\*\*\*\* Object:  Job \[BackUp Database - Navision Daily\]    Script Date: 10/01/2020 13:48:27 \*\*\*\*\*\*/

BEGIN TRANSACTION

DECLARE u/ReturnCode INT

SELECT u/ReturnCode = 0

/\*\*\*\*\*\* Object:  JobCategory \[Database Maintenance\]    Script Date: 10/01/2020 13:48:27 \*\*\*\*\*\*/

IF NOT EXISTS (SELECT name FROM msdb.dbo.syscategories WHERE name=N'Database Maintenance' AND category\_class=1)

BEGIN

EXEC u/ReturnCode = msdb.dbo.sp\_add\_category u/class=N'JOB', u/type=N'LOCAL', u/name=N'Database Maintenance'

IF (@@ERROR &lt;&gt; 0 OR u/ReturnCode &lt;&gt; 0) GOTO QuitWithRollback

&amp;#x200B;

END

&amp;#x200B;

DECLARE u/jobId BINARY(16)

EXEC u/ReturnCode =  msdb.dbo.sp\_add\_job u/job_name=N'BackUp Database - Navision Daily', 

		u/enabled=1, 

		u/notify_level_eventlog=0, 

		u/notify_level_email=0, 

		u/notify_level_netsend=0, 

		u/notify_level_page=0, 

		u/delete_level=0, 

		u/description=N'No description available.', 

		u/category_name=N'Database Maintenance', 

		u/owner_login_name=N'DOMAIN\\DOMAINUSER', u/job_id = u/jobId OUTPUT

IF (@@ERROR &lt;&gt; 0 OR u/ReturnCode &lt;&gt; 0) GOTO QuitWithRollback

/\*\*\*\*\*\* Object:  Step \[1\]    Script Date: 10/01/2020 13:48:27 \*\*\*\*\*\*/

EXEC u/ReturnCode = msdb.dbo.sp\_add\_jobstep u/job_id=@jobId, u/step_name=N'1', 

		u/step_id=1, 

		u/cmdexec_success_code=0, 

		u/on_success_action=1, 

		u/on_success_step_id=0, 

		u/on_fail_action=2, 

		u/on_fail_step_id=0, 

		u/retry_attempts=0, 

		u/retry_interval=0, 

		u/os_run_priority=0, u/subsystem=N'TSQL', 

		u/command=N'-- Script to backup database

BACKUP DATABASE \[Navision\] TO  DISK = N''D:\\BACKUPS\\Navision Daily Backup'' WITH NOFORMAT, INIT,  NAME = N''Navision-Full Database Backup'', SKIP, NOREWIND, NOUNLOAD,  STATS = 10

GO', 

		u/database_name=N'Navision', 

		u/flags=0

IF (@@ERROR &lt;&gt; 0 OR u/ReturnCode &lt;&gt; 0) GOTO QuitWithRollback

EXEC u/ReturnCode = msdb.dbo.sp\_update\_job u/job_id = u/jobId, u/start_step_id = 1

IF (@@ERROR &lt;&gt; 0 OR u/ReturnCode &lt;&gt; 0) GOTO QuitWithRollback

EXEC u/ReturnCode = msdb.dbo.sp\_add\_jobschedule u/job_id=@jobId, u/name=N'Daily Backup NAVISIONTEST', 

		u/enabled=1, 

		u/freq_type=4, 

		u/freq_interval=1, 

		u/freq_subday_type=1, 

		u/freq_subday_interval=0, 

		u/freq_relative_interval=0, 

		u/freq_recurrence_factor=0, 

		u/active_start_date=20131203, 

		u/active_end_date=99991231, 

		u/active_start_time=231500, 

		u/active_end_time=235959

IF (@@ERROR &lt;&gt; 0 OR u/ReturnCode &lt;&gt; 0) GOTO QuitWithRollback

EXEC u/ReturnCode = msdb.dbo.sp\_add\_jobserver u/job_id = u/jobId, u/server_name = N'(local)'

IF (@@ERROR &lt;&gt; 0 OR u/ReturnCode &lt;&gt; 0) GOTO QuitWithRollback

COMMIT TRANSACTION

GOTO EndSave

QuitWithRollback:

IF (@@TRANCOUNT &gt; 0) ROLLBACK TRANSACTION

EndSave:",2,sql,2020-10-13
j3xa8d,SQL,"Hi There, 

I have an issue upgraded from SQl 2008 to SQL 2014.  disabled the 2008 service. What is the best practice to check before uninstalling 2008 sql completely without breaking 2014 SQL.There's a bit of risk as SQL clustered. 

Thanks",2,sql,2020-10-13
j3v7e1,Closure Table,"I originally posted this in r/csharp, but thought this might be more applicable here.

I answered a question recently that got into trees with closure tables. It had been a while since I worked with trees so I spent the afternoon implementing a closure table in C#/MSSQL accompanied with tests to validate it.

You can find it [here on Github](https://github.com/WillSoss/closure-tree).

Did I forget anything or leave out a typical tree operation? If you're unfamiliar with closure tables, do you have an understanding after looking at the code? What would you change or do differently? How does this compare to using `HIERARCHYID`? 

This is just for fun and discussion, but if this code can be useful to anyone, even better.

Enjoy!",0,sql,2020-10-13
j3ub6g,Assistance with my MySQL query,"Hey,

I have a table with the following columns: location, date and quantity.

The table has data about the amount of sales (for this specific date), the store location and the date.

I am trying to extract the average quantity of every store by day.

For example: Sunday - Westfield Mall - 600.

(While there is more than **one** Sunday in the dates, so I need also to average each day.)

&amp;#x200B;

Please let me know if more information is required,

Thank you for your assistance!

Tips and ideas to solve this would be very appreciated!",2,sql,2020-10-13
j3r2qg,What would be ideal table layout for multiple types of users?,"Hey guys, 

I'm building an online commerce platform. 

I'm sorta confused on how to go about building out the database. 

I'll have a few types of users. 

Vendors: companies who sell their products

Employees: companies can create an account for staff members who will have their specific permissions

Customers: can buy products from any vendor. 

What's the best way to go about structuring the db? Currently I just have a users table that stores email/password(hashed) etc.",7,sql,2020-10-13
j3qxdv,How can I convert INSERT statements to bulk inserts,"I have a text file with a bunch of insert statements each one on a separate file. I don’t have Access to the full DB just to regular versions of this file, so I can only work with it. 

The file contains about 44.000.000 inserts and it would take days to insert (even if one single transaction and foreign key checks turned off)
so I need to do batch inserts ( multiple comma separated VALUE rows)

Is there any tool that generates bulk insert statements that lets you even specify how much inserts to bundle together.

Writing a regex seems prone to errors and already requires a parser

Hope somebody can help, thanks!",1,sql,2020-10-13
j3qv3p,What is the mongoosejs equivalent for SQL databases?,"For people who have worked on both MongoDB, MySQL/ PostgreSQL/ MariaDB. What is the mongoosejs equivalent for SQL databases?",1,sql,2020-10-13
j3pdnh,MSCA for a beginner?,"Hey guys,

I'm new to SQL Server, I recently picked it up for work purposes and I wanted to continue improving on it, but I'm unsure how. 

I learnt about the MSCA and MSCE on [MSDN](https://docs.microsoft.com/en-us/learn/certifications/browse/?products=sql-server).

It looks as though there is some structured learning pathway if I pursue an MSCA.

Is it recommended to pursue an MSCA?",5,sql,2020-10-13
j3n276,"was woking in Visula Studio Code when suddenly none of my sql codes worked , as if the syntax mysteriously changed","I used to use this to create a table, it worked fine before but now it gives me syntax error for mysql, I have no idea why it was working fine and suddenly it gives me a syntax error for mysql on visual studio code.

    CREATE TABLE student (
    student_id INT AUTO_INCREMENT ,
    name VARCHAR (20) NOT NULL ,
    major VARCHAR (20) DEFAULT 'undecided',
    PRIMARY KEY (student_id)
    );

&amp;#x200B;

&amp;#x200B;

And inserting into the table wont work anymore

&amp;#x200B;

i used to use

&amp;#x200B;

     INSERT INTO students('major','name') VALUES('geo','Dave');

but now it doesn't work

     INSERT INTO students(`major`,`name2`) VALUES('geo','mark')

but this does, but ive never used

&amp;#x200B;

    `

before

&amp;#x200B;

i always used this

&amp;#x200B;

    '

&amp;#x200B;

why did the code syntax literally change right before my eyes. i am at my wits end i want it back to how it was! pleas help",1,sql,2020-10-13
j3n18q,Need Help: Stuck on an SQL problem,"I am fairly new to SQL and have been stuck on this question for about an hour now, would anyone be able to help me out?

Table A has 10 records, table B has 100 rows. The relationship between A and B is 1:N. What are the possible outcomes when joining the tables?  Identify all possible answers.

1) 100 rows, using A INNER JOIN B

2) 10 records, using A LEFT JOIN B

3) 10 records, using A RIGHT JOIN B

4) 10 records, using A FULL OUTER JOIN B

5) 100 records, using A FULL OUTER JOIN B

6) Minimal number of output rows is 10

7) Maximal number of output rows is 1000

So far I have come to the conclusion that either 1,2,5,7 are possible and maybe 7. Any help is appreciated, thank you in advance!",3,sql,2020-10-13
j3m9wh,"Access SQL - Keep Getting the ""Enter Parameter Value"" Box","Trying to run this:

SELECT CUSTOMER\_NAME, SUM(AMOUNT) AS BALANCES

FROM CUSTOMER,SALES

WHERE CUSTOMER\_NO=CUSTOMER\_NUMBER

GROUP BY CUSTOMER\_NAME

ORDER BY BALANCES DESC;

&amp;#x200B;

Every time I attempt to run it Access asks me to enter a value for BALANCES.  According to tutorials I see all over the internet, it should know this information because of the link between SELECT and ORDER BY.  What am I doing wrong?  Thanks!",0,sql,2020-10-13
j3m2ov,Trying to join data from 3 tables in SQLITE.,"I have a table Hospitals. a table Patients, and a table Patients\_hospitals.    I need to list the patients that each hospital have.     Each patient have a patient\_id and each hospital have a hospital\_id.   They are related through the patients\_hospital table which have both hospital\_id and patient\_id.     Im trying to use inner Join but no luck so far.

For example

https://preview.redd.it/l15ljukk9lq51.png?width=528&amp;format=png&amp;auto=webp&amp;s=c3ee39e4e54204338c7480cb1ad4638138c147c5

Im trying a few variations of the following command but no luck yet.

`SELECT` [`patients.name`](https://patients.name)`,` [`patients.email`](https://patients.email)`, patients.patient_id`

`FROM patients`

`INNER JOIN patients_hospitals ON  patients_hospitals.patient_id = patients_hospitals.hospital_id`

`INNER JOIN hospitals ON hospitals.hospital_id = patients_hospitals.hospital_id`",9,sql,2020-10-13
j3lpmb,Why is my inserted data not showing up once I view the table?,"Doing a HW assignment and the query runs fine with no error reported, but once I ""SELECT * FROM student;"" to view the entered data, I see nothing new.

I'm entering:
INSERT INTO student (ID, Name_First, Name_Last, Gender, Birth_Dt, Major, Advisor_ID, Address_ID);

But instead of the title of the columns I'm entering real info. I've also tried:

INSERT INTO student (ID, Name_First, Name_Last, Gender, Birth_Dt, Major, Advisor_ID, Address_ID)
values (123, 'John', 'Doe', 'Male', '10/01/1999', 'Computer Science', 1234, 1234); 

Please help me. I don't know if it's actually working or not.",3,sql,2020-10-13
j3kz2m,Trying to build a project,Hello everybody I’m trying to come up with beginner SQL/python project ideas that would take 1/2 months to finish. Any recommendations?,11,sql,2020-10-13
j3k1jo,[MySQL] A seemingly simple problem using group_concat,"I could not get SQLFiddle to work.

    CREATE TABLE `family` (
        `id` int(11) auto_increment,
        `last_name` varchar(255),
         PRIMARY KEY (`id`)
    );

    INSERT INTO family (last_name) values ('flintstone'), ('rubble');

    CREATE TABLE `member` (
        `family` int(11),
        `first_name` varchar(255)
    );

    INSERT INTO member (family, first_name) values (1, 'fred'), (1, 'wilma'), (2, 'barney'), (2, 'betty');


So:

    mysql&gt; select * from family;
    +----+------------+
    | id | last_name  |
    +----+------------+
    |  1 | flintstone |
    |  2 | rubble     |
    +----+------------+

    mysql&gt; select * from member;
    +--------+------------+
    | family | first_name |
    +--------+------------+
    |      1 | fred       |
    |      1 | wilma      |
    |      2 | barney     |
    |      2 | betty      |
    +--------+------------+

The following query works fine.

    select id,
        last_name,
        group_concat(first_name separator ', ') as names
    from family left join member on id = family
    group by id;

    +----+------------+---------------+
    | id | last_name  | names         |
    +----+------------+---------------+
    |  1 | flintstone | fred, wilma   |
    |  2 | rubble     | barney, betty |
    +----+------------+---------------+

This query:

    select id,
        last_name,
        group_concat(first_name separator ', ') as names
    from family left join member on id = family
    where first_name = 'fred'
    group by id;

Produces this:

    +----+------------+-------+
    | id | last_name  | names |
    +----+------------+-------+
    |  1 | flintstone | fred  |
    +----+------------+-------+

... and I want this instead ...

    +----+------------+---------------+
    | id | last_name  | names         |
    +----+------------+---------------+
    |  1 | flintstone | fred, wilma   |
    +----+------------+---------------+

I understand why I'm getting what I'm getting. It's bold to state in a forum full of presumed experts that I know how JOIN works but I think I do here, so I know why I'm getting what I'm getting. But what I am getting is not what I want.

Any ideas, short of something insane, as to how to get this to do what I want?

As of now I'm doing a query that returns a list of IDs of families that match (the IDs of all of the rows that will contain a person named 'fred'), and then passing that into another query via the where clause (""WHERE id IN (that set of IDs)""). This will work in my practical case, since performance isn't much of an issue, and my data set is small, but it feels massively wrong.

Thank you.",2,sql,2020-10-13
j3hlic,Outputting a Substring between two characters,"I've seen this done with SQL Server but I'm using Presto SQL here. I have a column titled 'website' with URLs listed, but also identifier information included that I want to remove. Here's an example:

\[tech website\]([https://www.cnet.com](https://www.cnet.com))

\[social media website\]([https://www.facebook.com](https://www.facebook.com))

The descriptive string didn't use to be present in the table so I could easily just use SUBSTR to remove the parenthesis around the URL.

To make matters worse, the descriptive text is updated and changed frequently, so I'd rather avoid using any hardcoded character lengths to define where the URL is in the string.

I tried using the following, but returned zero results, so I assume my SQL is wrong:

SELECT 

SUBSTR(website,STRPOS('(',website)+1,STRPOS(')',website)-STRPOS('(',website)-1) AS websites

FROM internet\_resource",1,sql,2020-10-13
j3f7if,Just had my first Hackerrank interview,"and completely fluffed it. I probably should have spent some more time getting acquainted with it, but definitely down to me I failed it. 

I still can't seem to get my head around the problem, was wondering if you guys could lead this horse to water, please. 

The question was to find out how much revenue (price x quantity) the products made, bearing in mind the prices change (data on that held in pricing table). Affected date shows when the price changed. 

I made a quick db fiddle here - https://dbfiddle.uk/?rdbms=sqlserver_2019&amp;fiddle=0fc740c93cc2df5b1e7e7d13ca6261b0
with as far as I've gotten, if you showed me how to correctly answer the question I'd be grateful. Every time I try to join to get the price I end up duplicating my productIDs. 
No window functions allowed
Thanks guys",1,sql,2020-10-13
j3et3d,Are the following two codes virtually the same?,"There was a task that required me to set a variable as today's date and to create a trigger. I believe I got the results it asked for but the ""right"" solution was very different. **I am wondering if the following two codes produce the same end result.** If not, what makes them drastically different? Thank you so much. I am using mysql.

&amp;#x200B;

**My code:**

Set \[@\]s\_var\_today = SYSDATE()

DELIMITER $$

CREATE TRIGGER hire\_date\_trigger

BEFORE INSERT ON employees

FOR EACH ROW

BEGIN

    IF NEW.hire\_date &gt; sysdate() THEN 

SET NEW.hire\_date = date\_format(sysdate(), '%Y-%m-%d');

    END IF;

END $$

DELIMITER ;

&amp;#x200B;

**Solution code:**

DELIMITER $$

CREATE TRIGGER trig\_hire\_date

BEFORE INSERT ON employees

FOR EACH ROW

BEGIN

DECLARE today date;

SELECT date\_format(sysdate(), '%Y-%m-%d') INTO today;

    IF NEW.hire\_date &gt; today THEN
    
    	SET NEW.hire\_date = today;
    
    END IF;

END $$

DELIMITER ;

&amp;#x200B;

Again, thank you so much. FYI I used the brackets before the @ sign otherwise it was tagging a user.",1,sql,2020-10-13
j3cmvr,How to insert value which contains ',"Hello so I can't insert the value 

'Car's' 

How do I included values to insert which have an apostrophe?

Thank you",15,sql,2020-10-13
j3cbco,MySql Pedigree Statements,"Hi I am a sql/mysql beginner and assembling an animal pedigree database. columns include animal's name,  sire name, dam name, then various other columns related to color,dob, primary key, other physical characteristics, but the core is animal, sire, dam. What would be the best query to return a 5 gen pedigree, ie animal - parents, gparents, ggparents, gggparents. Sorry I know this is very simple. I am just starting.",1,sql,2020-10-13
j3cbca,SQL Vs. NoSQL Vs. NewSQL: The Key Differentiating Factors,,0,sql,2020-10-13
j39y5g,"Help with External hard drive, database! MS SQL 2017 with Seagate 2TB external hard drive","Hello,

So I've setup SQL on my surface pro 2 which as limited amount of room on it! But I have an Seagate external hard drive that has 2TB, which 1 TB is taken up with personal BS. So may issues is I've is actually two! So when I plug in my external drive the stupid power saving mode wishing to only send it power when needed and not all the time, so it keeps connecting and disconnecting. But here's the funny things SQL reads that it's there and say ok can some what connect can't load but can read tables.so if I turn off power saving mode it stops disconnecting but SQL can't even find it! Also if I try deleting it, or modifying the database it comes back with error 823, do a DBCC CHECKDB! Which haha I can't even run because it can't find it! Am I setting up and moving the database wrong, are my setup wrong, or everything is wrong! And I'm getting very upset here! How hard is it to create a database and have it on an external drive! Or is this something that can't be!",5,sql,2020-10-13
j395q8,Question about many to many relationships,"We have a business case where we have payments that can cover multiple invoices and invoices that can be covered by multiple payments.  My thought process to solve this is to create an intermediate table to track the relationships.  Payments and invoices would have one to many relationships with this table.

I can’t get the business to enforce one payment per invoice.  Is this the right way to handle this situation?",21,sql,2020-10-13
j38pa7,Why in the world is this not working?,"This is a very basic SQL query, but for some reason it isn't pulling the correct info. Am I doing something wrong?

The statement is: Select all info from MZIDB, where the key term is 'NIPT' and the revenue in 000s is greater than 147699 and the revenue in 000s does not contain 'Not included'. Order the revenue in 000s by ascending values.

Here is my script:



select * from MZIDB

where key_term = 'NIPT'

AND revenue_in_000s &gt; '147699'

AND revenue_in_000s != 'Not included' 

order by revenue_in_000s ASC



All the entries it pulls are correct, except for the revenue_in_000s, which for some reason is including values less than 147699....WHY?!",1,sql,2020-10-13
j38bqr,Stored procedure question,"Hi, I posted the other day about importing results of one query from one server into a table on a different server. The advice given were great but not something I can accomplish with the resources I currently have which brings me to this post.

Would a stored procedure also accomplish this? If so, how would I be able to write that? I'm sorry if I'm coming off dense, this is such a specific instance that even Googling didn't help.

Thanks in advance!",2,sql,2020-10-13
j35d2w,Help needed! Episode of care from sequence of dates when certain criteria met,"Hello!

I am trying to create an 'episode of care' from a sequence of dates, when certain criteria are met. So far, my attempts return partially correct data and I am at a loss. I have posted the code on [https://dbfiddle.uk/?rdbms=sqlserver_2019&amp;fiddle=36b7b25a8b74754f30cb2164830d6721](https://dbfiddle.uk/?rdbms=sqlserver_2019&amp;fiddle=36b7b25a8b74754f30cb2164830d6721) in hope I can ask for your advice on how to proceed.

**Input:**

ID--------  EventDate   -------- EventName

1 -------- 2020-01-07   --------  Intake

1 -------- 2020-01-10   --------  1st appt

1 -------- 2020-02-15   --------  1st Tx

1 -------- 2020-02-20   --------  Follow Up

1 -------- 2020-03-01   --------  Follow Up

1 -------- 2020-03-15   --------  Intake

1 -------- 2020-03-20   --------  1st appt

1 -------- 2020-04-01   --------  1st Tx

1 -------- 2020-04-10   --------  Follow Up

1 -------- 2020-04-15   --------  Follow Up

1 -------- 2020-05-01   --------  Follow Up

2 -------- 2020-01-09   --------  Intake

3 -------- 2020-01-19   --------  1st appt

3 -------- 2020-02-15   --------  Follow Up

4 -------- 2020-03-14   --------  Follow Up

4 -------- 2020-05-14   --------  Follow Up

**Desired output**

ID---EpisodeStartDate---EpisodeEndDate---EventDate-----EventName-----EpisodeNum-----Group

1 ---   2020-01-07   ---  2020-03-01  ---2020-01-10----1st appt -----     1    -----New

1 ---   2020-01-07   ---  2020-03-01  ---2020-02-15----1st Tx   -----     1    -----New

1 ---   2020-01-07   ---  2020-03-01  ---2020-02-20----Follow Up ----     1    -----New

1 ---   2020-01-07   ---  2020-03-01  ---2020-03-01----Follow Up ----     1    -----New

1 ---   2020-03-15   ---  2020-05-01  ---2020-03-20----1st appt  ----     2    -----New

1 ---   2020-03-15   ---  2020-05-01  ---2020-04-01----1st Tx    ----     2    -----New

1 ---   2020-03-15   ---  2020-05-01  ---2020-04-10----Follow Up ----     2    -----New

1 ---   2020-03-15   ---  2020-05-01  ---2020-04-15----Follow Up ----     2    -----New

2 ---   2020-01-09   ---  2020-01-09  ---2020-04-15----Follow Up ----     1    -----New

3 ---   2020-01-19   ---  2020-02-15  ---2020-01-19----1st appt  ----     1    -----Returning

3 ---   2020-01-19   ---  2020-02-15  ---2020-01-19----Follow Up ----     1    -----Returning

4 ---   2020-03-14   ---  2020-05-14  ---2020-03-14----Follow Up ----     1    -----Returning

4 ---   2020-03-14   ---  2020-05-14  ---2020-05-14----Follow Up ----     1    -----Returning

**Rules**

Intake begins new episode for any new cases

In case someone has more than one intake, the end of previous episode is the last visit (non-Intake) for that episode before new episode date (e.g. ID 1 with two intakes, their first episode ends on 2020-03-01)

There are returning cases (those that have no intake but have been seen in the period)

Many thanks in advance!

Edit 1: I am using Microsoft SQL Server 2017 and up. Sorry I applied incorrect tag/flair.

Edit 2: corrected minor errors.",5,sql,2020-10-13
j35amz,Super basic question about SQL column naming. help!,"Hi there, I'm doing an assignment for my SQL Server class and have come across this issue a couple times and I am banging my head against the wall trying to solve it.

This part is about foreign keys, and I'm trying to add a foreign key to another table, but when I insert the correct values and press execute, I get an error that says ""Invalid column name"".

I'll post some code below
----
Creating tables:

    CREATE TABLE TPatients
    (
    intPatientID			INTEGER				NOT NULL
	,CONSTRAINT TPatients_PK PRIMARY KEY ( intPatientID )
    )

    CREATE TABLE TAppointments
    (
	 intAppointmentID		INTEGER			NOT NULL
	,intPatientID			INTEGER			NOT NULL  -- &lt;-foreign key I need in this table for pairing a particular patient to the appointment id.
	,CONSTRAINT TAppointments_PK PRIMARY KEY ( intAppointmentID )
    )
----
Altering tables to include foreign keys:

    ALTER TABLE TAppointments ADD CONSTRAINT TAppointments_TPatients_FK 
      FOREIGN KEY (intPatientID) REFERENCES TPatients (intPatientID)
----
Inserting relevant values:

    INSERT INTO TPatients (intPatientID)
    VALUES				 (1)

    INSERT INTO TAppointments (intAppointmentID, intPatientID)
    VALUES				 (1, 1)


This seems like it would work, right? It gives me an error stating, ""Invalid column name 'intPatientID'.""

How do I fix this?",9,sql,2020-10-13
j32g3r,Help with creating a new DataBase in SSMS,"Hi All! I've been given an opportunity at my current job to join their Tech team and they are willing to train me in most concepts of SQL. HOWEVER, they have requested I show I have at least some understanding of SQL, and have requested I create a new Database with certain features.

I've been around SSMS before but never had to create my own database. I installed SSMS 18 on my computer, and it opened. I attempted to use my computer name for the database engine, failed- then I tried someone's trick of just a '.' and it failed. Everything I'm reading online says that during the installation I should have an option to put in a database and make the SA account but it just has 2 progress bars and then says its installed. 

I'm likely doing something wrong, but any direction is much appreciated.",1,sql,2020-10-13
j30iai,Are implicit joins ever useful in real database scenarios?,"I was checking out LeetCode Database problems ... I picked one at random and noticed that the best solution used a Cartesian Product. And, probably because of the small record size, it was infact, faster than the one using Join.

Are there/ can there be cases in real database scenarios where Cartesian Product might be a better approach than Join?

I've read at a couple places that while one can use it, Cartesian Product is ""an abuse"" of SQL. What are your thoughts on this?",4,sql,2020-10-13
j2ym7n,Pretty junior to SQL. Need a bit of help,"I have a table A that has 2 columns:

\-user

\-boughtItem

I want to output results where it will show in descending order users with the most amount of bought items and another column showing in descending order the top 5 bought items of that user (joined together as a string with commas)

I was only able to come up with something like:

SELECT user, count(boughtItems) as numberOfBoughtItems, array\_join(array\_agg(DISTINCT boughtItems), ',') FROM table A GROUP BY user ORDER BY count(boughtItem) DESC;

The problem is that the last column concatenates all bought items of that user, but in no particular frequency order. I would also like to limit it to 5. Can anyone help me out? This is for Presto.",11,sql,2020-10-13
j2x1lw,Azure Analysis Services: How to add Role Members to Models?,,1,sql,2020-10-13
j2vfpp,What is the best and simplest way to add our database to Azure DevOps version control and use script changes from DEV to QA to PROD?,"First of all, I'm fairly new to this. I was tasked with taking on a devops role along with my software dev position so I've been learning as I go so apologies in advance if for any errors in my post.

When I started at the company I currently work for I was tasked with setting up a proper development environment for our team. Previously they used SourceGear Vault Pro and worked directly on production. There was no dev or qa environments or separate branches. The single branch they used also contained ALL of the company projects, including DLLs/binaries/images/etc. 

I set us up on Azure DevOps, created different repositories for each project. Created a master branch and a development branch. Set up a development, qa, and production environment. Code is checked into the dev branch, it is then built and deployed to the dev environment. Every week, the dev branch is merged into the master branch. Then the master branch is built for QA and for Prod. The QA build is deployed to the QA environment where it is tested. If approved, the Prod build then gets deployed to the production environment. 

This all works flawlessly but the issue is that I havent set up a similar process for our database. We already have a DEV, QA, and PROD database. 

What's missing is the process of scripting changes to the database. Currently, developers make changes to the DEV database then once their pull request is approved and merged they must remember to make the same change to the QA database. Once their changes pass QA they must then again remember to make the same change to PROD.

This is cumbersome because sometimes they forget to make these changes and not only that but we'd like to be able to do a code review on the database changes that are being made. 

**====== The actual questions =======**

What is the best way to set up database version control? We have multiple repositories and they all depend on the same database. Should I create a new Azure DevOps repository for the schema and the database scripts? 

I've seen a few different plugins that seem to help with this process such as Redgate's SQL Source Control. Is this absolutely necessary or is there a better free alternative? 

I understand how versioning the database tables, columns, etc works but what is the process for versioning data? There many be certain values that are used to display menus, for example. Its not data generated by our clients but values used by us to control the application.",4,sql,2020-10-13
j2vfmz,MS SQL 2016 - Conditional Aggregated Rows,"Hi everyone!

I'm hope the title isn't too misleading -

Simply put, I have a poorly setup table with no PKs- What I want to do it to be able to pick conditionally what String I want and return 1 row for each value.

For example, if a Value has String3, then return String3, or else, String2, or finally, String1 and the retuned results would be 1 for 1. Any help would be greatly appreciated.

Desired Output would be. 

\*\*edited to not look like key:value pairs

| Column1 | Column2 |

| Value1    |     String2  |

| Value2    |     String3  |

| Value3     |     String1  |

&amp;#x200B;

&amp;#x200B;

| Column1 | Column2 |

| value1      |  String1   |

| value1      |  String2   |

| value2      |  String1   |

| value2      |  String2   |

| value2      |  String3   |

| value3      |    String1  |

| value3      |      Null      |",1,sql,2020-10-13
j2u3tm,Looking for a fast-track class in SQL for a heavy ETL user,"Hello Community!

I am a heavy duty ETL user, experienced in alteryx, redpoint, pentaho, and some basic knowledge of cloveretl. I have a basic knowledge of SQL and MySQL. 

I am looking to prep for MS SQL certifications. I need an affordable set of SQL classes that are direct and get past the basics like fields types and file types. I have tries a few different udemy, linked in, and youtube courses, but they were a little underwhelming. 

Can anyone suggest a resource that offers SQL classes that are worth the time? For example, has anyone done the coursera SQL classes ?

Thanks!",8,sql,2020-10-13
j2sxz2,PLEASE HELP ME FIGURE THIS OUT ITS KILLING ME (Details in the comments),,0,sql,2020-10-13
j2saq7,Best interactive courses to learn basic SQL?,"Looking to change industries career wise and pick up some basic SQL skills. Never tried coding.
 

Any recommendations for an interactive site or course (free or paid) that allows one to type or complete assessments as opposed to simply watching videos? I find myself best learning algorithms through repetition and actually attempting to “code” on a computer.
 

Also, are courses that offer completion certificates useful? Does it even matter to prospective employers or on a resume?",36,sql,2020-10-13
j2rv7t,Query too complex?,"Hey guys!

I recently needed to dig through some tsql queries in order to adapt them to a new feature. During this I found this (monster?) of a query. It took me a quite a while to understand what is happening there (I  am not that experienced with tsql) and now I find myself wondering if this is the norm. 

The Query: 

    SELECT DISTINCT 
    Kunden.kundeid
    ,Isnull(Kunden.NAME, '') + ' ' + Isnull(Kunden.vorname, '') + ' - ' + dbo.scalarfico_formatdate(Isnull(Kunden.geboren, ''), n 'dd.mm.yy') AS kname
    ,Kunden.geboren
    ,CASE WHEN @FallNrFremdAnz = 0
    THEN ''
    ELSE max(Aufenthalte.fallnrfremd)
    END AS fallnrfremd
    
    FROM Kundenstatus
    INNER JOIN Kunden
    INNER JOIN Aufenthalte ON Kunden.kundeid = Aufenthalte.kundeid ON Kundenstatus.kundestatusid = Aufenthalte.kundestatusid 
    INNER JOIN Organisationsstruktur ON Kunden.kundeid = Organisationsstruktur.kundeid 
    
    WHERE (Aufenthalte.kundestatusid = @KundeStatusID)
    AND (Aufenthalte.datumvon &lt;= @DokuProtdat)
    AND (
    Aufenthalte.datumbis &gt;= @DokuProtdat
    OR Aufenthalte.datumbis IS NULL
    )
    AND (Kundenstatus.segment = @DokuSegmentID)
    AND (@DokuSelTraeger = 0)
    AND (@DokuSelPool = 1)
    AND (@KundeStatusID &lt;&gt; 0)
    AND (Organisationsstruktur.parentid = @PoolID)
    AND (
    Organisationsstruktur.datumbis &gt;= @DokuProtdat
    OR Organisationsstruktur.datumbis IS NULL
    )
    AND (Organisationsstruktur.aktiv = 1)
    AND (Aufenthalte.aktiv = 1)
    AND (Organisationsstruktur.datumvon &lt;= @DokuProtdat)
    AND (Aufenthalte.einrichtungid = @EinrichtungID)
    AND (@DokuKundeGroupID &lt;&gt; 4)
    OR (Aufenthalte.kundestatusid = @KundeStatusID)
    AND (Aufenthalte.datumvon &lt;= @DokuProtdat)
    AND (
    Aufenthalte.datumbis &gt;= @DokuProtdat
    OR Aufenthalte.datumbis IS NULL
    )
    AND (Kundenstatus.segment = @DokuSegmentID)
    AND (@DokuSelTraeger = 1)
    AND (@DokuSelPool = 0)
    AND (@KundeStatusID &lt;&gt; 0)
    AND (
    Organisationsstruktur.datumbis &gt;= @DokuProtdat
    OR Organisationsstruktur.datumbis IS NULL
    )
    AND (Organisationsstruktur.aktiv = 1)
    AND (Aufenthalte.aktiv = 1)
    AND (Organisationsstruktur.datumvon &lt;= @DokuProtdat)
    AND (Aufenthalte.einrichtungid = @EinrichtungID)
    AND (@DokuKundeGroupID &lt;&gt; 4)
    AND (Aufenthalte.traegerid = @TraegerID)
    OR (Aufenthalte.datumvon &lt;= @DokuProtdat)
    AND (
    Aufenthalte.datumbis &gt;= @DokuProtdat
    OR Aufenthalte.datumbis IS NULL
    )
    AND (Kundenstatus.segment = @DokuSegmentID)
    AND (@DokuSelTraeger = 0)
    AND (@DokuSelPool = 1)
    AND (@KundeStatusID = 0)
    AND (Organisationsstruktur.parentid = @PoolID)
    AND (
    Organisationsstruktur.datumbis &gt;= @DokuProtdat
    OR Organisationsstruktur.datumbis IS NULL
    )
    AND (Organisationsstruktur.aktiv = 1)
    AND (Aufenthalte.aktiv = 1)
    AND (Organisationsstruktur.datumvon &lt;= @DokuProtdat)
    AND (Aufenthalte.einrichtungid = @EinrichtungID)
    AND (@DokuKundeGroupID &lt;&gt; 2)
    AND (Kundenstatus.kundegroupid = @DokuKundeGroupID)
    OR (Aufenthalte.datumvon &lt;= @DokuProtdat)
    AND (
    Aufenthalte.datumbis &gt;= @DokuProtdat
    OR Aufenthalte.datumbis IS NULL
    )
    AND (Kundenstatus.segment = @DokuSegmentID)
    AND (@DokuSelTraeger = 1)
    AND (@DokuSelPool = 0)
    AND (@KundeStatusID = 0)
    AND (
    Organisationsstruktur.datumbis &gt;= @DokuProtdat
    OR Organisationsstruktur.datumbis IS NULL
    )
    AND (Organisationsstruktur.aktiv = 1)
    AND (Aufenthalte.aktiv = 1)
    AND (Organisationsstruktur.datumvon &lt;= @DokuProtdat)
    AND (Aufenthalte.einrichtungid = @EinrichtungID)
    AND (@DokuKundeGroupID &lt;&gt; 2)
    AND (Aufenthalte.traegerid = @TraegerID)
    AND (Kundenstatus.kundegroupid = @DokuKundeGroupID)
    OR (Aufenthalte.datumvon &lt;= @DokuProtdat)
    AND (
    Aufenthalte.datumbis &gt;= @DokuProtdat
    OR Aufenthalte.datumbis IS NULL
    )
    AND (Kundenstatus.segment = @DokuSegmentID)
    AND (@DokuSelTraeger = 0)
    AND (@DokuSelPool = 0)
    AND (@KundeStatusID = 0)
    AND (
    Organisationsstruktur.datumbis &gt;= @DokuProtdat
    OR Organisationsstruktur.datumbis IS NULL
    )
    AND (Organisationsstruktur.aktiv = 1)
    AND (Aufenthalte.aktiv = 1)
    AND (Organisationsstruktur.datumvon &lt;= @DokuProtdat)
    AND (Aufenthalte.einrichtungid = @EinrichtungID)
    AND (@DokuKundeGroupID &lt;&gt; 2)
    AND (Kundenstatus.kundegroupid = @DokuKundeGroupID)
    OR (Aufenthalte.kundestatusid = @KundeStatusID)
    AND (Aufenthalte.datumvon &lt;= @DokuProtdat)
    AND (
    Aufenthalte.datumbis &gt;= @DokuProtdat
    OR Aufenthalte.datumbis IS NULL
    )
    AND (Kundenstatus.segment = @DokuSegmentID)
    AND (@DokuSelTraeger = 0)
    AND (@DokuSelPool = 0)
    AND (@KundeStatusID &lt;&gt; 0)
    AND (
    Organisationsstruktur.datumbis &gt;= @DokuProtdat
    OR Organisationsstruktur.datumbis IS NULL
    )
    AND (Organisationsstruktur.aktiv = 1)
    AND (Aufenthalte.aktiv = 1)
    AND (Organisationsstruktur.datumvon &lt;= @DokuProtdat)
    AND (Aufenthalte.einrichtungid = @EinrichtungID)
    AND (@DokuKundeGroupID &lt;&gt; 4)
    OR (Aufenthalte.datumvon &lt;= @DokuProtdat)
    AND (
    Aufenthalte.datumbis &gt;= @DokuProtdat
    OR Aufenthalte.datumbis IS NULL
    )
    AND (Kundenstatus.segment = @DokuSegmentID)
    AND (@DokuSelTraeger = 0)
    AND (@DokuSelPool = 1)
    AND (@KundeStatusID = 0)
    AND (Organisationsstruktur.parentid = @PoolID)
    AND (Organisationsstruktur.aktiv = 1)
    AND (Aufenthalte.aktiv = 1)
    AND (Organisationsstruktur.datumvon &lt;= @DokuProtdat)
    AND (Aufenthalte.einrichtungid = @EinrichtungID)
    AND (@DokuKundeGroupID = 2)
    AND (Kundenstatus.kundegroupid = @DokuKundeGroupID)
    OR (Aufenthalte.datumvon &lt;= @DokuProtdat)
    AND (
    Aufenthalte.datumbis &gt;= @DokuProtdat
    OR Aufenthalte.datumbis IS NULL
    )
    AND (Kundenstatus.segment = @DokuSegmentID)
    AND (@DokuSelTraeger = 1)
    AND (@DokuSelPool = 0)
    AND (@KundeStatusID = 0)
    AND (Organisationsstruktur.aktiv = 1)
    AND (Aufenthalte.aktiv = 1)
    AND (Organisationsstruktur.datumvon &lt;= @DokuProtdat)
    AND (Aufenthalte.einrichtungid = @EinrichtungID)
    AND (@DokuKundeGroupID = 2)
    AND (Aufenthalte.traegerid = @TraegerID)
    AND (Kundenstatus.kundegroupid = @DokuKundeGroupID)
    OR (Aufenthalte.datumvon &lt;= @DokuProtdat)
    AND (
    Aufenthalte.datumbis &gt;= @DokuProtdat
    OR Aufenthalte.datumbis IS NULL
    )
    AND (Kundenstatus.segment = @DokuSegmentID)
    AND (@DokuSelTraeger = 0)
    AND (@DokuSelPool = 0)
    AND (@KundeStatusID = 0)
    AND (Organisationsstruktur.aktiv = 1)
    AND (Aufenthalte.aktiv = 1)
    AND (Organisationsstruktur.datumvon &lt;= @DokuProtdat)
    AND (Aufenthalte.einrichtungid = @EinrichtungID)
    AND (@DokuKundeGroupID = 2)
    AND (Kundenstatus.kundegroupid = @DokuKundeGroupID)
    OR (Aufenthalte.datumvon &lt;= @DokuProtdat)
    AND (
    Aufenthalte.datumbis &gt;= @DokuProtdat
    OR Aufenthalte.datumbis IS NULL
    )
    AND (Kundenstatus.segment = @DokuSegmentID)
    AND (Organisationsstruktur.aktiv = 1)
    AND (Aufenthalte.aktiv = 1)
    AND (Organisationsstruktur.datumvon &lt;= @DokuProtdat)
    AND (Aufenthalte.einrichtungid = @EinrichtungID)
    AND (@DokuKundeGroupID = 4)
    AND (Aufenthalte.traegerid = @TraegerID)
    
    GROUP BY 
    Kunden.kundeid
    ,Kunden.geboren
    ,isnull(Kunden.NAME, '') + ' ' + isnull(Kunden.vorname, '') + ' - ' 
    + dbo.scalarfico_formatdate(isnull(Kunden.geboren, ''), n 'dd.mm.yy')",5,sql,2020-10-13
j2r43p,"Accidentally signed up for MySQL course but use SSMS at work, still useful or try to get refund?","Basically, I really only write SQL queries for purposes of report building/analysis. So, I don't really have the kind of access where I'm altering or building databases or anything like that. Just wondering if there's enough value there in terms of skill development that even though it's MySQL, it will help some.",4,sql,2020-10-13
j2nu6s,SQL to Excel on shared network folder,"I am attempting to automate some reports from my SQL server to an excel sheet for users to independently copy and use on their own machines via a shared network drive. I understand that it is possible to pull data from a SQL server into an Excel sheet by connecting to your server and running the desired query to select the data fields you are interested in. However, I am concerned that the other users do not have access to this server and thus will be unable to use the Excel document as it will be empty as they have no access to the data source. Is there any way to allow users to simply use an Excel doc with an active SQL server connection without access to the server themselves. Additionally, I do not want multiple people refreshing the data constantly which is why they are not given access to the SQL server. I will be updating the table every morning by either manually refreshing the data or using SSIS and a SQL agent to schedule this job. Nonetheless, any help for this matter is greatly appreciated.",5,sql,2020-10-13
j2m37n,Importing CSV dataset to SQL on Mac,"I’m having an issue importing a csv dataset to sql on my mac. I tried INSERT BULK but it gives me a syntax error. The file url is correct and there are no permission issues. Can anyone help? Also side note, the date format on the data is DDMMYYYY, can i change the dateformat once imported?",15,sql,2020-10-13
j2lqco,How To get an average of last 4 dates instead of total average,"I have a dataset that brings weekly sales + End of the month.  They want to see the average of the last 4 week and count EOM as a week.  
So I have two options.  
I can either create a subquery bringing only the last 4 weeks worth of data and join.
Second, I can create 4 lag (sales) and average those and avoid joins
What would be more efficient? This is a transactional database just FYI",2,sql,2020-10-13
j2kmsf,No data after Select From,"If I do

SELECT \*field name\* FROM \*table name\*

and the query runs but there is no data, does that mean this field is emtpy? I use rapid sql, because my workplace uses that...",1,sql,2020-10-13
j2j7gf,I need help finding intersections with 2 tables.,"Hi all,

One table, called ""View"" looks this way:

Headers: Name, ID, Height, Number

Row1: John, 6600, 180, 200

Row2: Michael, 7711, 170, 11

&amp;#x200B;

&amp;#x200B;

The other table, called ""Live\_data"" looks this way:

Headers: Name, ID, Weight, Number

Row1: John, 6600, 82, 200

Row2: Carolyn, 7711, 56, 11

I would like to create a select query which outputs the following:

Headers: Name, ID, Weight, Height, Number

Row1: John, 660, 82, 180, 200

&amp;#x200B;

I want the intersections of both tables, but combine their headers while doing so..",2,sql,2020-10-13
j2j5hw,"Q - Getting the highest, second highest and third highest columns in set"," Hi All,

I have 49 columns and I need to find out the **column** **name** with the highest value, second highest value, and third highest all on that row

So I know I can use the GREATEST() function with a CASE STATEMENT to get the greatest column name (EG: CASE WHEN GREATEST(col1, col2....) = col1 then 'Col1' etc etc etc END AS Greatest\_Col), but how to do this with the second highest and third highest column, without having to make a giant CASE STATEMENT.

Any thoughts guys?

All info. welcome, Thanks guys",3,sql,2020-10-13
j2g35j,One to many Relations,I'm just learning about SQL and relations tables in school and I was wondering if One to many relations have any disadvantages?,8,sql,2020-10-13
j2cvr6,Migration to SSIS,"We are currently using python to push data to Azure SQL at fixed time intervals. Since this process of using python is not standardized as in, we use the same code but modify a few parameters to create another bot which was very inefficient and time consuming. Due to this my team is planning to move to SSIS. Is this the right option or is there any advanced tools? Also, can someone give advantages on using SSIS?",3,sql,2020-10-13
j2c1c5,Learning SQL for fun. Anyone care to give me some keys?,I am learning this to get a head up at work. It’s proving to be a little difficult and I could really use a hand. Anyone wanna give me a hand?,23,sql,2020-10-13
j2b3p4,[PostgreSQL] View Not Aggregating Actuals Values,"I created a view that essentially merges actuals and forecast data--however, I'm seeing that my ""actuals"" data are not being aggregated and are instead showing up as two different rows. I think the experience_type' is getting in the way of this but ultimately I'd like the actuals for each month and experience type to be aggregated. I've added the column 'am.experience_type' to better express the issue but when I remove it, it still shows two rows of actuals data

Any suggestions on how to fix this? Code of the view below as well as a screenshot of the export of the data table:
https://i.stack.imgur.com/Ieh84.png

    create or replace view actuals_final as
    select
            coalesce (am.brand, af.brand) as brand,
            coalesce (am.type, af.type) as type,
            coalesce (am.month, af.date) as month,
            am.experience_type,
            af.corp_revenue_fpa,
            coalesce (am.team_share, af.team2_revenue) as team_revenue,
            coalesce (am.gross_revenuea, af.gross_revenuef) as gross_revenue,
            af.device_sales,
            coalesce (am.users_shown, af.total_users) as users,
            coalesce (am.total_installs, af.total_application_install) as total_application_installs,
            coalesce (am.ecpi, round(SUM(af.gross_revenue) / SUM(nullif(af.total_application_install,0)),2)) as gross_revenue_installs_cpi,
            coalesce (am.rpu, round(SUM(af.gross_revenue) / sum (nullif (af.total_users,0)),2)) as gross_revenue_user_rpu,
            coalesce (am.ipu, round(SUM(af.total_application_install) / sum (nullif (af.total_users ,0)),2)) as installs_per_user
    from actuals_monthly am
    full outer join app_forecast af
    on am.brand = af.brand and am.month = af.date and am.type = af.type
    group by coalesce(am.brand,af.brand), coalesce (am.type, af.type), am.experience_type,
            coalesce (am.month, af.date),af.device_sales, af.device_penetration,
            af.corp_revenue_fpa, coalesce (am.team_share, af.team2_revenue), coalesce (am.gross_revenuea, af.gross_revenuef), coalesce (am.users_shown, af.total_users),am.ecpi
            ,coalesce (am.total_installs, af.total_application_install),af.device_sales, af.device_penetration, am.rpu, af.installs_per_user, am.ipu, af.device_sales
    ORDER BY brand, month, type",2,sql,2020-10-13
j2b2he,Can you please help me get set up to learn SQL? The last two tutorials put me on a track where I had to download something and that something couldn't get downloaded.,"i) I tried going down this route: [https://www.edx.org/course/querying-data-with-transact-sql-2](https://www.edx.org/course/querying-data-with-transact-sql-2)

But to follow along, I had to get an Azure subscription to download the database. I followed the tutorial for that- but the tutorial is a few years old and Microsoft must have updated their website so this instruction: ""6. In the Select Source list, select Sample (AdventureWorksLT)"" didn't work because there was no Select Source list. So, I couldn't access the database of the lesson.

(BTW, I had to sign up for Twitter to chat up their help service and they were like \~we don't even know what that tutorial is lol\~.)

ii) I'm like whatever, I'll just take it easy and casually watch Socratica videos to at least review a cursory understanding of it. So the first instruction is to connect server to DBMS. Whatever that means. They say to just type, CREATE DATABASE, laughingly like it's so simple. But I have no idea where I'm supposed to type ""CREATE DATABASE."" In command prompt? In python interpreter? [https://youtu.be/OfM5lC-7R4Y?list=PLi01XoE8jYojRqM4qGBF1U90Ee1Ecb5tt&amp;t=84](https://youtu.be/OfM5lC-7R4Y?list=PLi01XoE8jYojRqM4qGBF1U90Ee1Ecb5tt&amp;t=84)

Or am I supposed to download some SQL thing? Ok, so, now I'm haphazardly downloading MySQL from Oracle, giving them way too much info and another CC. And then they're like:

""The following requirements have failing requirements"" blah blah, saying that MySQL server cannot be downloaded until Microsoft Visual C++ is.

And I'm just too far down this rabbit hole to start messing with downloading something like Visual C++

I get the basics of SQL from codecademy. I want to understand it on a deeper level but I'm running into these roadblocks. I want to experiment with it, not just kinda get it.

BTW, I'm coming from Python. I have Sublime set up.",4,sql,2020-10-13
j27stj,"34 seconds to COUNT() all 43,583,682 rows is normal ? (MySQL 8.0)","Hey,

I have 12 tables in 1 database/schema, that contain a total of 43,583,682 rows.

Is it normal for my database to take 34 seconds to count them ? I use the command :

`SELECT`

`(SELECT COUNT(id) FROM usersDB.\`0to50m\`) as count1,\`

`(SELECT COUNT(id) FROM usersDB.\`100to150m\`) as count2,\`

`(SELECT COUNT(id) FROM usersDB.\`150to200m\`) as count3,\`

`(SELECT COUNT(id) FROM usersDB.\`200to250m\`) as count4,\`

`(SELECT COUNT(id) FROM usersDB.\`250to300m\`) as count5,\`

`(SELECT COUNT(id) FROM usersDB.\`300to350m\`) as count6,\`

`(SELECT COUNT(id) FROM usersDB.\`350to400m\`) as count7,\`

`(SELECT COUNT(id) FROM usersDB.\`400to450m\`) as count8,\`

`(SELECT COUNT(id) FROM usersDB.\`450to500m\`) as count9,\`

`(SELECT COUNT(id) FROM usersDB.\`500to550m\`) as count10,\`

`(SELECT COUNT(id) FROM usersDB.\`50to100m\`) as count11,\`

`(SELECT COUNT(id) FROM usersDB.\`550to600m\`) as count12,\`

`(SELECT SUM(count1 + count2 + count3 + count4 + count5 + count6 + count7 + count8 + count9 + count10 + count11 + count12)) as total;`

([https://i.imgur.com/TrfsrkR.png](https://i.imgur.com/TrfsrkR.png))

id is a column containing a primary key, so it's unique.

My server has  4 vCPUs, 15 GB of memory. The disk throughput is :  [https://i.imgur.com/EPubUz9.png](https://i.imgur.com/EPubUz9.png)

I know there are a lot of rows but 34 seconds seems pretty long, but again I just got started with sql and I don't know much about it yet

Also in case you wonder why I don't keep everything in one table, it's because I heard I needed to have enough memory to store any table in it. As I plan to lower my memory from 15Gb to something Less, I wanted to make sure the tables wouldn't be too big as they'll store 50m rows each.",13,sql,2020-10-13
j26spa,Trying to get Quartiles using PERCENTAIL_CONT but I am getting duplicate rows,"I am trying to use PERCENTILE\_CONT as a way to get quartilesFor extra context you can check this I posted a few days ago on r/tableau : [https://www.reddit.com/r/tableau/comments/iyz6it/measuring\_consistency\_and\_how\_to\_create\_the/](https://www.reddit.com/r/tableau/comments/iyz6it/measuring_consistency_and_how_to_create_the/)

My current table looks like this:

|week|person\_id|total\_answers|reason|reason\_vol|reason\_dist|
|:-|:-|:-|:-|:-|:-|
|1|12345|50|a1|5|0.133|
|1|12345|50|b1|10|0.204|
|1|5678|30|a1|10|0.3|

I am interested in getting the quartiles of `reason_dist` partitioned by `week` and `reason`

For example:

`Week` 1`reason` a1: 30%,20.44%,11.47%,20.43%,13.56%,15.95%,13.68%,17.22%,15.41%,11.13%,16.60%,15.99%,10.33%,11.53%, 8.81%,9.03%,6.6%,4.85%Each percentage being the individual `reason_dist` of each of the participants for `reason` a1 in `week` 1So for this specific set Q1 would be 10.53% and Q3: 16.45%

The query I am trying is:

    SELECT  week, 
            reason, 
            PERCENTILE_CONT(0.25) WITHIN GROUP (ORDER BY reason_dist) 
             OVER (PARTITION BY reason, week ) AS ""Q1"",
            PERCENTILE_CONT(0.75) WITHIN GROUP (ORDER BY Reason_Distribution) 
             OVER (PARTITION BY reason, week) AS ""Q3""
            
    FROM #Table
    GROUP BY week, reason, reason_dist

Ideally, this is what I would like to get:

|week|reason|Q1|Q3|
|:-|:-|:-|:-|
|1|a1|0.1053|0.1645|
|1|b1|xxx|xxx|

etc...

BUT what I am getting is:

&amp;#x200B;

|week|reason|Q1|Q3|
|:-|:-|:-|:-|
|1|a1|0.1053|0.1645|
|1|a1|0.1053|0.1645|
|1|a1|0.1053|0.1645|
|1|b1|xxx|xxx|
|1|b1|xxx|xxx|

etc...

I am really just experimenting... any other ideas as to how to get the quartiles are very helpful.Thanks",1,sql,2020-10-13
j266jh,SQL Mock Interview Platforms,Hello! I am interested in BIE and Business/Data Analyst roles and currently I am practicing on Leetcode and Hackerrank. Now I am looking for a platform that will allow me to test these skills in an interview setting. I was wondering if any one is aware of such online platforms? Could you please share the links here. Thank you.,1,sql,2020-10-13
j25hx5,Building a Project Portfolio,"Hello! Currently going through a job search and it seems like I'll have more success if I have an actual portfolio to back up my skillset. 

Background: I currently work in digital advertising sales, selling to B2B advertisers in financial services. A few months ago I completed a course in Data Analytics which refreshed my excel skills (I have a degree in finance, so I'm already advanced in excel), taught me PostgreSQL (multi-table querying/merging; I ranked pretty highly in my course but still a lot to learn), and got me through a beginner understanding of Tableau.

As my job search continues to drag on, I want to a) keep my skills fresh b) improve upon them and c) make myself a more marketable job prospect. I have already begun learning Python to add to my skill stack.

It seems like the best route for this would be to work on projects on my own which I can then showcase to potential employers when the opportunity arises but I'm not sure where to start:

1) while I learned how to query, much of the ""back-end"" was handled by my course; we worked through their sample dataset on pgAdmin. How can I work with a database on my own?

2) I'm working towards a data / business analytics role in financial services (though I'm also open to marketing-related roles) so ideally, I'd like to practice with financial data; what are the best resources for these datasets? I know I can go to EDGAR but (back to my first question) where could I query that data using SQL instead of exporting to Excel?",1,sql,2020-10-13
j23cze,Can't establish connection to SQLServer with Google Apps Script via JDBC,"I'm a newbie with Database
I'm trying to establish the connection to my computer's local SQLServer using the following command: var conn = Jdbc.getConnection('jdbc:sqlserver://;databaseName=','','');
However, I get the following error: Unexpected error while getting the method or property getConnection on object Jdbc
Can anybody please help me? Thanks",2,sql,2020-10-13
j234xb,How to use subquery result as column names for another SELECT query?,"Greetings everyone.

*Disclaimer: I am using PostgreSQL and pgAdmin.*

I query columns table from 'information\_schema' and exclude the last column as I do not need it.Here's the code:

    WITH rev_columns AS (SELECT column_name FROM information_schema.columns
    WHERE table_name='sales' AND column_name&lt;&gt;'dealership_id')

How can I use this output in another SELECT query?When I put it the way described below it produces the following error:  `ERROR: column ""rev_columns"" does not exist`

    SELECT rev_columns FROM sales

How can I fix it?

Thanks in advance.",1,sql,2020-10-13
j22fja,Can u give me some advices ?," Hello, this is the first version of the database that I make for a browser turn based game. If you can tell me some mistakes I made in writing it. Everything will go through the Entity Framework Core. And the tables with the composite keys are for the collection so that I have quick access to the data. I'm not sure if it's written correctly so I accept all criticism and opinions. Thanks ! Specifically if you have any idea about the game's Battle Log  and team table .What a battle log should keep. For a team table, a team can have one leader, and one player can have one team. But a team can have many players!  

[https://1drv.ms/u/s!AooTsicUGRjashjmd22aebQhkNt4?e=kfBrVa](https://1drv.ms/u/s!AooTsicUGRjashjmd22aebQhkNt4?e=kfBrVa)",11,sql,2020-10-13
j1y5oh,I built a data dictionary and collaboration tool. Curious if anyone is interested in giving it a try,"At my old job, it seemed like every few weeks I’d have a new ML project with a new dataset and business need. The hardest part of my job was understanding the data not completing the project. I created a tool to solve this and I’m hoping to find beta users to give it a spin! If anyone is interested in trying it please let me know!",19,sql,2020-10-13
j1y2lp,Finding all possible combinations of one column?,"I have one table called ""Ingredients"" with a column ""Name"", it has 100 names of dish ingredients. I need to find all possible combinations of those ingredient names. Display those combinations in two columns ""IngredientA"" and ""IngredientB"". 

I tried making two aliases for the ""Name"" column. However, I don't know how to cross join those two aliases or if that's even possible?

This is what I have currently:

SELECT Name AS IngredientA, Name AS IngredientB

FROM Ingredients",8,sql,2020-10-13
j1x08r,Distributing deposits among debts systematically. (Help with seemingly impossible business logic),"#Previous Problem

Recently I made a post here asking for help with implementing some confusing business logic: [Distributing deposits among debts systematically. (Help with implementing confusing business logic)](https://www.reddit.com/r/SQL/comments/it61tv/distributing_deposits_among_debts_systematically/g5evrhr/)

I've since added another dimension to this business logic, and I've once again been struggling a lot to even begin to understand how to solve this.

I won't explain the first edition of the problem again, because it is already explained in the link above. However the elegant solution given to me by /u/ichp was to ""stack"" the debts and deposits, and compare the overlap to determine how much of each deposit is contributed to each debt.

Given the following tables:

###Debt table
| DebtID | DebtAmount |
| -----: | ---------: |
|      1 |        120 |
|      2 |         70 |

### Deposit table
| DepositID | DepositAmount |
| --------: | ------------: |
|         1 |           100 |
|         2 |            50 |

They can be compared like this to produce the desired result: https://i.imgur.com/R9p19Mz.jpg

I achieved this using the following SQL:

    SELECT *,
    MAX(
        MIN(DepositAmountEnd, DebtAmountEnd) - MAX(DepositAmountEnd - DepositAmount, DebtAmountEnd - DebtAmount), 0
    ) AS DepositContribution
    FROM (
        SELECT *,
        SUM(DebtAmount) OVER (PARTITION BY DepositID ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) AS DebtAmountEnd,
        SUM(DepositAmount) OVER (PARTITION BY DebtID ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) AS DepositAmountEnd
        FROM (
            SELECT * FROM Debt JOIN Deposit
        )
    );

#Making things more complicated

I was chuffed to get this aspect of the business logic working! Unfortunately, there was more to it which I left out for the sake of simplicity, thinking that it wouldn't be so hard for me to figure out once someone helped me with the groundwork.

In the actual application I am working on, each contribution is limited to a given fraction of the `DepositAmount`. The Debts and Deposits are JOINed, as with the SQL above, and a `PortionLimit` is added from elsewhere:

###vDebtDeposit
| DebtID | DebtAmount | DepositID | DepositAmount | PortionLimit |
| -----: | ---------: | --------: | ------------: | -----------: |
|      1 |        120 |         1 |           100 |          0.5 |
|      2 |         70 |         1 |           100 |          0.3 |
|      1 |        120 |         2 |            50 |          0.0 |
|      2 |         70 |         2 |            50 |          1.0 |

Each unique relationship between a Debt and a Deposit has an individual `PortionLimit` that describes the maximum portion of `DepositAmount` that may be used (`DepositAmount * PortionLimit`) for that contribution.

According to this table, the Deposits are now distributed to the Debts like this: https://imgur.com/a/V3HmnNd

1. Debt:1 gets at most 50% of Deposit:1, 50 is contributed to Debt:1.
2. Debt:1 gets at most 30% of Deposit:2, 30 is contributed to Debt:1.
3. Debt:2 gets at most 0% of Deposit:1, 0 is contributed to Debt:2.
4. Debt:2 gets at most 100% of Deposit:2. However, Debt:2 is satisfied with 40. So only 40 is taken from Deposit:2 and contributed to Debt:2.

As you can see, this is somewhat more complex than my previous problem. My best attempt at trying to implement this was to do the same as in the previous SQL, except to SUM `DepositAmount * PortionLimit` instead of `DebtAmount` if it were less than `DebtAmount`. Like so:

###Implementation attempt
    SELECT *,
    CAST(
        ROUND(
            MAX(
                MIN(DepositAmountEnd, DebtAmountEnd) - MAX(DepositAmountEnd - DepositAmount, DebtAmountEnd - DebtAmount), 0
            )
        ) AS INT
    ) AS DepositContribution
    FROM (
        SELECT *,
        SUM(
            MIN(
                CAST(
                    ROUND(DepositAmount * PortionLimit) AS INT
                ),
                DebtAmount
            )
        ) OVER (PARTITION BY DepositID ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) AS DebtAmountEnd,
        SUM(DepositAmount) OVER (PARTITION BY DebtID ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) AS DepositAmountEnd
        FROM vDebtDeposit
    );

I was naive enough to think I had solved the problem when I was writing this. Unfortunately, I realised this query fails to fulfil the requirements because it still does not allow Debts to use Deposits where they don't ""overlap"":

###Result
| DebtID | DebtAmount | DepositID | DepositAmount | PortionLimit | DebtAmountEnd | DepositAmountEnd | DepositContribution |
| -----: | ---------: | --------: | ------------: | -----------: | ------------: | ---------------: | ------------------: |
|      1 |        120 |         1 |           100 |          0.5 |            50 |            100.0 |                  50 |
|      2 |         70 |         1 |           100 |          0.3 |            80 |            100.0 |                  70 |
|      1 |        120 |         2 |            50 |          0.0 |             0 |            150.0 |                   0 |
|      2 |         70 |         2 |            50 |          1.0 |            50 |            150.0 |                   0 |

It's definitely erroneous for other reasons as well, but that's the reason that caught me.

#I am once again asking for your SQL(ite) support
I think there's a lesson from the previous solution that was given to me which I haven't managed to learn, and I'm still trying to solve this problem with my same old patterns of thinking. So I'm once again asking for some fresh eyes to parse my explaination of this problem and point me in the right direction :)

Thanks so much for any help!

Edit: Titles",14,sql,2020-10-13
j1uz8m,update codebase add(@new_code) where @condition,"I am not really sure where to post this. However, realising you're probably *""query geeks""*, I figured this might be interesting, even though technically it doesn't have (much) to do with SQL :)

[https://www.youtube.com/watch?v=3B-4g-aAncY](https://www.youtube.com/watch?v=3B-4g-aAncY)

Basically, what I am doing, is that I am treating my codebase, as a semantically understood structure - Allowing me to dynamically patch my codebase as a whole, passing in conditions, allowing me to update **parts** of my codebase - Due to that my code can read and understand its own structure, lending itself to automatic updates of my codebase as a whole.

Effectively resulting in code that is similar in functionality to the header of the OP ...",1,sql,2020-10-13
j1uc52,"Having a hard time figuring out the OVER( PARTITION BY.. ) clause. Could someone help me out? I watched some videos but could not understand the gist/use case for it.(Fairly new to T - SQL, sorry if this is a stupid question)",Title,2,sql,2020-10-13
j1sej2,Most efficient way to structure similar valued table,"I'm trying to look up an element and see all other elements that relate to it and I'm curious what might be the best way to represent this. Each related element also has related elements and they're all part of the same group.

So for example:

People: Anna, Bob, Carl, Dave, Ed, Frank  


|People|Relationships|
|:-|:-|
|Anna|Bob, Ed|
|Bob|Carl, Dave, Frank|
|Carl|Anna, Bob, Ed|
|Dave|Ed|
|Ed|Carl, Frank|
|Frank|Anna, Bob|

I've seen people store multiple items in a cell with the goal of parsing it out before, but this doesn't seem the best way to handle the problem. 

&amp;#x200B;

Another option is to have a row for each relationship like this:

|People|Relationships|
|:-|:-|
|Anna|Bob|
|Anna| Ed|
|Bob|Carl|
|Bob|Dave|
|Bob|Frank|

&amp;#x200B;

This seems more SQLesque, but I would be storing an unnecessary amount of extra data in the People column. Person&gt;Bob is repeated 3.

&amp;#x200B;

Are there any ways of doing this that I'm missing?",3,sql,2020-10-13
j1rksm,"Why am I getting the error ""near ""WHERE"": syntax error"" for the following lines of code?","`SELECT name`

`FROM products;`

`WHERE price&lt;65000;`

lol nvm i put a semi colon after the FROM statement when there should be only one after the query at the end, thanks anyway",19,sql,2020-10-13
j1qiwk,[PostgreSQL] ERROR: Column must appear in the GROUP BY clause or be used in an aggregate function?,"Hi there -- trying to create a view but keep getting an error to group the ""am.brand"" column but not sure how exactly to troubleshoot through this. Any help would be appreciated!

    create or replace view actuals_final as
    select
    		coalesce (am.brand, af.brand) as brand,
    		coalesce (am.type, af.type) as type,
    		coalesce (am.month, af.date) as month,
    		af.co_revenue_fpa,
    		coalesce (am.co_share, af.co_revenue) as tmus_revenue,
    		coalesce (am.revenue_cms, af.gross_revenue) as gross_revenue,
    		af.device_sales, af.device_penetration,
    		coalesce (am.appselector_shown, af.total_users) as users,
    		coalesce (am.total_installs, af.total_application_install) as total_application_installs,
    		coalesce (am.ecpi, SUM(af.gross_revenue) / SUM(af.total_application_install)) as gross_revenue_installs_cpi,
    		coalesce (am.rpu, round(SUM(af.gross_revenue) / sum (nullif (af.total_application_install,0)),2)) as gross_revenue_user_rpu
    from actuals_monthly am
    full outer join actuals_forecast af 
    on am.brand = af.brand and am.month = af.date and am.type = af.type
    ORDER BY brand, month",2,sql,2020-10-13
j1ppjf,Triple nest query,"Hey group, I'm looking for help with a homework question that I haven't been able to wrap my head around. I have a relation ""SOLDVIA"" that contains data about sales transactions conducted by a business. The columns are ""ProductID"", transaction ID ""TID"", and ""NoOfItems"". I need to create a query to display the product ID of the product that has been sold the most (highest quantity). My prof gave a hint that we'll need to use a triple nested query, but I'm having a hard time visualizing what I should do. Here is what I have so far:

`select productid`

`from soldvia`

`group by productid`

`having max(noofitems) in(`

    select max(noofitems)

`from soldvia`

`where (`

    	select sum(noofitems) 
    
    	from soldvia

`group by productid));`

And a snippet of the table:

&amp;#x200B;

https://preview.redd.it/pia265qxpzp51.png?width=205&amp;format=png&amp;auto=webp&amp;s=e58ab1a099615b701b0f1c5218f456dee6d4e1c6

I think the issue is in the second select statement (at least one of the issues anyway). I'm not looking for a solution, just a hint or nudge for what I'm doing wrong.

Edit: Sorry, I tried to format the code but I can't seem to get it look right.",3,sql,2020-10-13
j1pkcc,Code Golf now supports SQLite,,4,sql,2020-10-13
j1ncy2,is power BI capable of ETL for self service?,"over the next couple months, we're getting ready to implement power BI service in a few departments of extremely heavy excel users. The vast majority of these analysts do not use SQL, but are very good with excel and vba. The goal is to get them to pull in all data they need from our enterprise warehouse and have them perform all the transformations without the need for anyone to build any custom tables for them to connect too. The group of analysts are all willing to learn DAX and M. Is the goal I have listed above reachable? Will power query or dataflows be able to handle all this ETL?",0,sql,2020-10-13
j1mexp,How to choose a table based on a paramaterized value?,"My code takes in a parameter ${ID}$ (string) and based on what ID evaluates to I want to chose a different table to use. Guess I cant use a case inside a FROM statement. Some example code looks like:

select *

from ${ID}$_charges.transaction_charge

where execution_date = '2011-03-22'

So if ID is 'N' then I want to use the transaction_charge table so the statement resolves to N_charges.transaction_charge

However if ID is 'B' or 'P' then I want to use a different table called conformity_charge and the statement would evaluate to B_charges.conformity_charge or P_charges.conformity_charge

How can I write this statement?",2,sql,2020-10-13
j1m8qz,Can you put multiple items into a single record and column?,"So I want to create a custom CMS which has pages that link to eachother.

In the pages table each page record has id, title, text, creationDate, updateDate, and **a parents column, where each page can have multiple parents**, which is my main question.

If you would like to know, it would be for this website to learn and reference Australian Curriculum mathematics.

# Thanks for any help!

## Edit: So is the status quo to just encode and decode the IDs into a string of text before and after sending it to the database?

#### For example:

|id|title|parents|
|:-|:-|:-|
|0|Dogs|root|
|1|Cats|root|
|2|Kittens|1|
|3|Food|2;3|

### An example array of \[2, 3\] just has a separator?",5,sql,2020-10-13
j1l09l,Joining Data,"I'm working with an e-commerce company that has a 3rd party fulfill some of their orders. They have an orders table for their internal system and then they have an invoice table they get back from the 3rd party company that fulfills some of their orders.

On the order table every item ordered gets its own line, but on the invoice table they have a quantity field and sometimes items are broken up into two invoices. 

For example I could have 3 items on the same order, the table looks like this:

https://preview.redd.it/u7zlmiq5eyp51.png?width=350&amp;format=png&amp;auto=webp&amp;s=15cfbfd0eb0d317575521137bce018fb2b9bd657

But on the invoice I only have two rows in the table:

https://preview.redd.it/a42nkaabeyp51.png?width=335&amp;format=png&amp;auto=webp&amp;s=25ce50115fe0f2379f30fb4c5827d0013f1a2cca

How do I join those two table together to look like this:

https://preview.redd.it/00umc9oieyp51.png?width=260&amp;format=png&amp;auto=webp&amp;s=54d79ed0e6f8d1f35c329e3433a1d0551a38a953

I hope this makes sense, let me know if you have any questions.",1,sql,2020-10-13
j1jvyf,Help with a somewhat simple query,"So I need to get a report for my boss and he needs total sales per client  and he wants it grouped by year. I'm using MySql by the way. I think the sub select is the way to go but I'm not sure how to use it correctly.

SELECT

Client,

sum(NonTaxableSalesAmt) Total

FROM ##ChiefTempTable

(SELECT DatePart(year, InvoiceDate) DateYear From ##ChiefTempTable)

group by Client

Order by Client

&amp;#x200B;

 

Actually a friend was able to help me out....

Select

Client

,sum(NonTaxableSalesAmt) Total

,year(invoicedate) as Year

FROM ##ChiefTempTable

group by Client, year(invoicedate)

Order by Client, Year Asc",5,sql,2020-10-13
j1ioeo,Analyst Tools for Querying Redshift,I've been using SQL Server Management Studio to query from a SQL server but we're shifting things over to Redshift. Are there any tools similar to SSMS that anyone can recommend for use with Redshift? I'm currently trying DBeaver for my queries but I'm not the biggest fan.,2,sql,2020-10-13
j1hsej,Uncovering MySQL's Gotchas,We've been doing a deep dive on MySQL to make our open-source DB compatible with it. Checkout what we've found [https://www.dolthub.com/blog/2020-09-28-mysql-gotchas/](https://www.dolthub.com/blog/2020-09-28-mysql-gotchas/),1,sql,2020-10-13
j1hk60,Best resources for starting database SQL?,"Hey guys, I'm a senior level MIS major, and I'm getting ready to start Database management which includes learning SQL for said management.  


I was curious if any of you guys would be willing to share your wisdom/links to good places to start reading/practicing. Currently my semesters are slammed due to COVID cutting our class time in half effectively, so I'd like to get a headstart.  


I appreciate it!",24,sql,2020-10-13
j1hdk5,confused about google login in,"confused about google auth

So i’m trying to build a twitter like application where u can login with a Google Account (hopefully facebook too) and once u do, it can let u tweet under your name and shows tweets of people u followed. i can do this with my own login system, where the database checks the username and password, and sends the appropriate data. how do i do this with Google? i’m looking into it and i’m very confused. i got it to just login but i don’t know how to connect to SQL. thank u for any responses !!",0,sql,2020-10-13
j1ex4f,Can someone help out with this ? Thanks :) Dm me,,0,sql,2020-10-13
j1d3a6,Case when?,"Hi, hoping for a little help. 

I have a column named VENUENAME it either contains 'school:example school' or just 'school'

Where the column includes school: I want to remove the school: to leave just the school name

Where the column is just school I want to return blanks.  

Is there a way of doing this without deleting the term school elsewhere in the string. For example

School: Devin primary school becomes Devin primary school 
And
Any column that only contains the word School is blanked 

Hope that makes sense,  grateful for any help",1,sql,2020-10-13
j1bxg8,Can’t install MySQL because you of this and can’t install this thing also!! Pls help !!,,0,sql,2020-10-13
j1b1yc,How to review PHP Login Form For SQL Injection - Secure Coding," In this video, we reviewed a login form written in PHP and vulnerable to SQL Injection. We compared different versions of the code and built a SQL Injection payload for each case 

video is [here](https://www.youtube.com/watch?v=3y5TYAvmSKI)",1,sql,2020-10-13
j1ax2f,CTE vs FROM Subquery,"Hey guys

&amp;#x200B;

I'm somewhat familiar with CTE's and using subqueries in FROM clause (aside from WHERE clause, JOIN etc.). However, I'm in need of deeper explanation on differences between CTE and FROM subqueries, when should one be used and when another, how do they differ performance-wise. Is data table size one of factors determining whether it's better to use CTE or subquery?

&amp;#x200B;

Thanks in advance to anyone who provides me this information.

&amp;#x200B;

Regards.",5,sql,2020-10-13
j1a62y,Super Stressed Out,"Hi, after 2 weeks of trying to get SSMS all up and running with SQL Express due to 32 bit/64 bit compatibility, I finally managed to import data to my own database last night and even code results which made me very happy as i am teaching myself to do it all. This morning however i went to log in and continue practicing the coding and recieved the following:

*A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified) (.Net SqlClient Data Provider)*

*Error Number: -1*

*Severity: 20*

*State: 0*

*Program Location:*

   *at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, DbConnectionPool pool, String accessToken, Boolean applyTransientFaultHandling, SqlAuthenticationProviderManager sqlAuthProviderManager)*

   *at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)*

   *at System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup, DbConnectionOptions userOptions)*

   *at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource\`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal&amp; connection)*

   *at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource\`1 retry, DbConnectionOptions userOptions)*

   *at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource\`1 retry, DbConnectionOptions userOptions)*

   *at System.Data.SqlClient.SqlConnection.TryOpenInner(TaskCompletionSource\`1 retry)*

   *at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource\`1 retry)*

   *at* [*System.Data.SqlClient.SqlConnection.Open*](https://System.Data.SqlClient.SqlConnection.Open)*()*

   *at Microsoft.SqlServer.Management.SqlStudio.Explorer.ObjectExplorerService.ValidateConnection(UIConnectionInfo ci, IServerType server)*

   *at Microsoft.SqlServer.Management.UI.ConnectionDlg.Connector.ConnectionThreadUser()*

Does anyone know how to get back connected? I have checked the TCP/IP and its enabled for remote access which was one check i found online. Ill be honest the above is all nonesense to me...

Thanks Lee",2,sql,2020-10-13
j199y1,Trying to edit a system-generated SQL query to query records older than 20 working days; application only lets me edit the where clause though. Can this be done?,"Trying to query number of working days between x date and today, but can only edit WHERE clause in the application I’m using. Is this possible?

The application I manage at work converts searches done via the UI to SQL statements. Only the WHERE clause is available to me to edit, if I want to create something fancier than you can’t search for manually (i.e. I can’t affect the SELECT statement or add any bespoke functions prior to the WHERE clause).  

So my starting point is in effect this:

Select * from my_table

where (CAST( FLOOR( CAST(my_table.Datecolumn AS FLOAT ) ) AS DATETIME) BETWEEN dateadd(day,datediff(day,0,getdate())-20,0) AND GETDATE())

Is it possible to specify 20 working days rather than calendar days by only editing the where clause? As I say I can’t add or change any additional functions in the select statement. 

I’m guessing not but here’s hoping. 

Hope that makes sense, thanks in advance.",1,sql,2020-10-13
j182fk,"Different data types for a given entity stored in rows with identifiers, how can I return them as separate columns?","So I have a table that looks like this:

Name | DataID | DataValue  
Steve | 1 | 123  
Steve | 2 | ABC   
John | 1 | 321  
John | 2 | CBA  

I need a query to return the various data types as columns

Name | Num | Code  
Steve | 123 | ABC  
John | 321 | CBA 

So essentially I now have 

Select Name, DataValue as Num   
From [Table name]  
Where DataID = 1  

How can I add the other Data IDs as subsequent columns? Previously I dumped the whole dataset to excel and used lookups and index/match, but now I need to do it in sql. Is that possible?",2,sql,2020-10-13
j152dc,3 columns 2 names,"i have 3 columns i have to extract 

album name

aritist name

track name

the issue is that both columns for artist and track are both named name and idk what to do ive been stuck on it for hours. album and track can be connected using album id and album and artist name can be connected using artist id. any help please.",1,sql,2020-10-13
j131fg,User-Defined Functions in a Store Procedure,Does anyone know a good link that goes in-depth on using a User-defined function in a store procedure?,1,sql,2020-10-13
j12zlc,FREE SQL Course on Udemy with Real-World Exercises,"Fellow SQL-ites,

Here's a complete course on the fundamentals of SQL, that I'm offering for free on Udemy through the end of September:

https://www.udemy.com/course/sql-basics-crash-course-with-sql-server/?couponCode=LEARN-SQL-FOR-FREE

As a self-taught SQL programmer, I’ve learned the hard way that all the books, videos, and articles in the world won’t help without LOTS of structured practice, i.e. coding exercises. So I've included nearly 100 coding exercises in the course, covering every fundamental aspect of SQL programming.

And I walk through every subject in bite-sized videos ( averaging less than 10 minutes in length). Every concept is built up step by step, with no hand-waving at intermediate topics.

I hope you enjoy...and of course, reviews/feedback are greatly appreciated:)",92,sql,2020-10-13
j12aau,How to find % of a total then subtract that out of the original total,"Hello! I'm taking a SQL Course and the question is asking me to

Total up a column and then find a % of that total, this % makes a new column

Take that % and subtract it from the original total, this result makes a new column

I cannot find reference on how to do this anywhere in my readings/videos. When I google ""How to find percentage of a total in SQL"" I find answers on how to calculate the ratio or percentage to something but I'm not comparing anything but rather need the percentage of a total so that i can take that result, add it to a new column, then subtract that result from the original total and then take that result and add it to a new column.

\-there is a defined % amount to taken from the total

Example: We need to know how much money we owe Tom and Ted. We have total up sales to $1,000,000.00. We owe Tom 75% of that total. The remainder goes to Ted.

We are using Microsoft SQL Server Management Studio 18

Thank you for any help and let me know if i need to clarify.

&amp;#x200B;

Found the answer i needed, thanks",0,sql,2020-10-13
j11ixp,Should I use a foreign key?,"Im new to sql and im working on a project. So I'm building a google classroom kind of website, where the teacher can assign students assignments, and the students can send responses to the teacher of each assignment. I have an assignment table, which contains a unique idea, title, and description. The thing is, each student will have a response for each assignment. I was thinking in my PHP, I could code something that would create a new table for each assignment called ""Responses\[THE UNIQUE ID\]"". But from what I've learned on the internet, foreign keys are the best way to link tables. Woudlnt this be clunky? I feel like I'm missing something super obvious. Also I want to create different ""classes"" where each class will have a bunch of assignments. Should I use a foreign key here too? Like each assignment will also have a class\_id foreign key. But again this seems clunky. I think coming from an object oriented programming background is messing up my thinking. Thank you for any responses I'm really stuck here",1,sql,2020-10-13
j0zkaz,"Help Please, I've been struggling with SQL"," **Question 1** . There are two ways to execute an insert statement in MySQL.

1. Specify specific columns in your insert statement.
2. Give a value, even if it is \_\_\_\_\_\_, for all columns.

Group of answer choices:

A) NULL

B) null

C) Null

D) No answer text provided. 

&amp;#x200B;

 **Question 2** .   You should put quotes around numeric values in MySQL. 

A) True

B) False

&amp;#x200B;

 **Question 3** .   The \_\_\_\_\_ function returns the current data any time not the server in MySQL. 

FILL IN THE BLANK

&amp;#x200B;

 **Question 4** .  When joining tables, an \_\_\_\_\_\_\_\_\_ join does not require that data be in both tables. 

FILL IN THE BLANK

&amp;#x200B;

 **Question 5** .  In MySQL, using equal, less than, greater than, not equal to, between, and other statements are examples of using \_\_\_\_\_\_\_\_\_\_\_\_\_. 

FILL IN THE BLANK

&amp;#x200B;

 **Question 6** .  If I wanted to know all records in a table where the last name of an employee started with ""A"", I might use a \_\_\_\_\_\_\_\_ condition. 

FILL IN THE BLANK

&amp;#x200B;

 **Question 7 .**  The default order of the ""order by"" logic is \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_. 

FILL IN THE BLANK

&amp;#x200B;

 **Question 8 .**  If a table already contains the data I need, but I need to update it (such as a change of address), the best way to do this would be to delete the row and insert a new row. 

A) True

B) False

&amp;#x200B;

 **Question 9 .**  You always have a way of retrieving data once you delete it in MySQL. 

A) True

B) fALSE

&amp;#x200B;

 **Question 10 .**  If I want to combine two strings to make a single string in MySQL, I will employ the \_\_\_\_\_\_\_\_ function.

FILL IN THE BLANK",0,sql,2020-10-13
j0xvds,Version Control for a table of Articles,"Hi guys.

I'm dealing with table `Articles` with columns:

    ID integer,
    Title text,
    Content text,
    ...

I have to introduce basic version control. That means allowing viewing of old versions, restoring old versions as current, and only allowing one 'current' version at a time. That's it for now. The database structure to support this could be as simple as adding three columns: `Version`, `Original_Article_ID`, and `Current`. `Version` tracks changes, `Original_Article_ID` tracks the ID of the first article in the version history, and `Current` (a boolean) indicates whether a given article row is the published version or not. Everytime there's a new version change, it creates a new database row and if it's published `Change` is set to true and all other rows with that `Original_Article_ID` have Change set to false.

I'm wondering if this is a stable way to do it and if there are any ideas on more elegant approaches. It seems simpler than creating an `Archived_Article`' table and moving old version to it. Thanks in advance for responses...",1,sql,2020-10-13
j0x7b5,70-761 Which has the best practice test?,"Hi everyone, I'm going through CBTNuggets and grinding through 70-761 material, as well as the Itz Gans book. However, which practice test is the MOST similar to the test? Is it the MeasureUP test? Also I've heard about ""test dumps"" are there any accurate ones too? A lot of people says it's cheating, however, I'm going to go through these dumps for more practice, not just memorizing the answers. Are there any out there?",1,sql,2020-10-13
j0w6ey,External hard drive,"Hello,

So I have MS SQL 2017 on my computer and Visual Studio 2019 on my laptop/tablet, Microsoft surface 2. Sadly I don't have that much run on that system but it's the one I have at this time! I have a external hard drive that's 5T and I used already 2T of my own personal music, images, and documents. Is there a way to keep MS SQL on my computer but just have all the databases, tables, and logs on my external hard drive? So go all I've seen are people talking about just make the tables and databases on my local drive and then just make a back up and move the back up to the external hard drive! But I don't have room to make the tables to make a backup or have the log space!",1,sql,2020-10-13
j0vmkk,Are 1 column tables OK? Confusion about schema for basic thesaurus database.,"**TL;DR** is a schema where ""words,"" ""parts of speech,"" ""definitions"" all one column tables and ""syn_map"" is a table with a primary key of (synonym_word, part_of_speech, definition, primary_word) OK? Should I get rid of the 1 word tables? And if I shouldn't should I give the one column tables surrogate keys?

Hi, so I'm new to SQL and am creating a database that represents a thesaurus. The thesaurus I'm using will have synonyms for every different definition a word has, and I would like to store which definition a synonym is for. My initial plan was to do something like this:

My initial plan was to have a table for words, a table for parts of speech, a table for definitions which have a foreign key for the word and the part of speech the definition is for, and then finally a table where the primary key is a word and a definition that maps such associations. 

In practice I realized this would not work because definitions are not unique, so the meaning table will run in to problems. I tried to fix this by making the primary key to the definitions table (definition, word), but this as it happens is also not unique -- with relative frequency, the same word for different parts of speech will have the same definition. I don't want to cut this information out. So, that's the situation I'm in now where I'm not sure of how to proceed. The way I see it, there are a ways to do it:

words table
PoS table
meanings table storing only meanings and nothing else
syn_map table: PK is (synonym (a word), primary word, PoS, meaning)

So this would work, but it seems sort of off to me. I would have 3 tables with one column, and then one table mapping them with 4 primary keys. Is this peculiarity OK given the circumstances? In particular, I am wondering if it might be better to remove some or all of the one column tables and instead just have one table: thesaurus which would store (synonym, primary word, PoS, meaning) not as foreign keys. This is more efficient it would seem but seems less conceptually sound to me. And finally, I was wondering whether you guys think I ought to use surrogate keys for these one column tables (if I should use them at all). I was initially thinking I should since otherwise tables like word and definition whose entries can be quite long could use a lot of memory. On the other hand, using surrogate keys means I'll have to use a lot of joins and make lots of indexes, which would not be necessary otherwise.

So, what do you guys think?",1,sql,2020-10-13
j0vipu,Automatic import results of SQL query to a table,"Hi!

I have a query to pull from one database (A) which I use to import into a table in another database (B) where they are both on different servers. My question is how do I automate this process? Essentially, each time I would do this, A's results will overwrite (not append) what's already in B. 

I'm not familiar with database architecture, my function was primarily writing queries for reports and even then I was pretty much self-taught so any advice/solutions is appreciated!",1,sql,2020-10-13
j0t55v,Can I apply to Data Analyst Internships with my Resume?,"I plan on developing my skills in SQL but they are super basic as of right now. 

I would hope going to a Top 5 Public University would help me but I'm not sure lol. 

Thank you!

https://preview.redd.it/uzl081pkmpp51.png?width=705&amp;format=png&amp;auto=webp&amp;s=be027d25f30dee7d605d65bdedcf4da57e285a88",8,sql,2020-10-13
j0s0e2,Ideas for a database based project,"I want to make a project using primarily databases and SQL, mainly to fluff my resume but also because I'm really interested in it and would very much like some ideas. I'm thinking about a hotel bookings management system but I feel like it's kinda boring? I'd much prefer something with more interesting data or something but at the moment I can't think of anything. Could anyone give me some inspiration please? I know how to use MySQL, MariaDB and postgreSQL but wouldn't mind learning another DBMS.",26,sql,2020-10-13
j0q9ng,[Academic] Open Source Development Survey (Software Developers using GitHub),,9,sql,2020-10-13
j0q42p,Would like some Direction with relevant SQL knowledge,"Hi guys,

I'm working as a digital analyst most of my work revolves around using various google products. Recently i picked up on SQL for big query and tried looking into advanced topics such as dynamic sql, CTE's etc. (I just saw the previous employees code read documentation made changes/created different queries).

My work is going to be related to visualization so right now my work flow is usually querying in SQL and then connecting it to data studio. There are a lot of things in SQL i don't have a full understanding of such as optimizing queries, dynamic SQL, data structures etc and would like to know more about it. If you have any topics that you think would be useful to me or Book recommendations ( i learn best this way as opposed to continued practice). I'd be grateful for any direction.",5,sql,2020-10-13
j0kq00,CodeAcademy For SQL Projects?,"I'm a senior in university and wanted to know if the projects that CodeAcademy offers on its SQL course are worth it? 

&amp;#x200B;

If not, are there any courses that DO give decent projects to put on a resume?

&amp;#x200B;

Thank you!",12,sql,2020-10-13
j0jh8u,SQLite vs MySQL Compatibility?,"Hello All,

Can anyone offer insight regarding the differences in syntax between SQLite and MySQL?

I learned/ am pretty comfortable with SQLite, but just took an assessment for a job where the  variant was MySQL via Coderbyte. A lot of basic queries that I know should have worked (think SUM, COUNT, etc.) were not yielding results. JOIN, CASE, and GROUP BY also failed. 

The settings also did not allow edits or updates to the table information, despite that being a portion of the task at hand. Not sure if that is the fault of MySQL, but I'm still a bit put out by it.

Is there a syntax compatibility issue that I'm not aware of? If so, it would mean a lot - if nothing else just for my peace of mind/self esteem.",1,sql,2020-10-13
j0b69p,Junior data analyst (upcoming interview),"Hey guys, 

There is an opening where I work for Junior data analyst and they are looking for someone who has “strong” SQL writing abilities. How is strong defined for a junior position and do you have any tips for someone who just recently started with SQL? I have some experience with python so grasping SQL is not too hard (did a bit of SQL back in high school), however I have troubles figuring out when to use what, more precisely CTE, case statements etc.

Could you please shed some light on this for me? Do you think I’d stand a chance and are window functions mandatory and on what level for a junior position? Just additional information, we’re talking about company that knows what they are doing so it’s not like their junior is actually a mid/ senior level. 

Last thing, any good places where I can actually learn enough to pass the interview? I have no troubles understanding things so I’d fit pretty well into the role and I’d develop as I work.

Thanks in advance for anything, seriously 🙏

EDIT: I checked the post further and I see I made a mistake. They need good SQL rather a strong one, my apologies!",48,sql,2020-10-13
j04dkn,Generate a list of days in a year from input dates,"Hello everyone,

I have made a code that can return a table containing all days in the year for a given input date.

\&gt; For instance, if I input GETDATE() it will return all days of 2020

I'd like to scale up this code so that it can return all days in the years for many input dates.

\&gt; For instance, if I input 2020/02/01 and 2016/12/01 it will return all days from 2020 and 2016.

I've been working on this problem for a while but cannot manage to solve it. Can you guys help me please ?

Here is the current code I managed to produce :

    DECLARE @StartDate AS DATE
    SET @StartDate = GETDATE()
    
    ;WITH DateCalc AS
    (
    SELECT 
    	CAST(CAST(YEAR(@StartDate) AS VARCHAR)+'-01-01' AS DATE) AS StartDate
    UNION ALL
    SELECT 
    	DATEADD(day,1,StartDate) AS StartDate
    FROM DateCalc
    WHERE StartDate &lt; CAST(CAST(YEAR(@StartDate) AS VARCHAR)+'-12-31' AS DATE)
    )
    
    SELECT * FROM DateCalc
    OPTION (MAXRECURSION 1000)",12,sql,2020-10-13
izxzdi,Help with a kinda complex query,"So I'll just start off by saying I'm pretty much a beginner SQL querying, and my knowledge basically stops at aggregates and GROUP BY.  At this point, I'm stumped and don't know what to do next.

**Short Version**

1) I want to know if it's even possible to pull this off with SQL.  Take a look at [this](https://imgur.com/a/4eHo3de) (this is part of the result of [this query](https://imgur.com/a/t58ykL8) where subset_max_v2 and subset_min_v2 are [views that look like this](https://imgur.com/a/U72uCfS)).  I want the largest distance_difference value for each possible elev_difference value for each street_name. So in that example result, I'd get the highlighted rows (2 rows for Dow Avenue because there's two values in the elev_difference column (23 and 25)). 

2) Second requirement, is it possible to keep ALL of the columns in the result?  In particular, I want to be able to keep node_1 and node_2 in the final result.  I'm fairly confident an aggregate is going to be needed, but how can everything be grouped while maintaining unique values like the node_1 and node_2 columns?

If you want to know the **Long Version**, I can certainly post more details like the original source table that the views are from but I think I've already gotten through the worst of it and I don't know if there's a way to simplify the work I've done already.",8,sql,2020-10-13
izsytd,Question about a complex query,"Hi all,

I am working on a table with customers and their orders. I have created a query to whittle the information down to the following columns: yearmonth (yyyymm), customerID, and productname. Productname can be ""A"" or ""B"". Some customers order only A, but others order A and then B (in *two separate rows*), but always in the same yearmonth. I need to figure out how to create a table which shows for every yearmonth, how many customers bought only A and how many bought A and B. If you call my query that I have already made ""X"", what can I do to write a query that looks like this below?

    select yearmonth, count(number of A only), count(number of A then B)
    from ""X"" as X
    group by yearmonth
    order by yearmonth;

I would appreciate any advice with this",1,sql,2020-10-13
izoxdp,Can someone help me on this homework?,"&amp;#x200B;

https://preview.redd.it/tbw5sjaj6cp51.png?width=567&amp;format=png&amp;auto=webp&amp;s=d568676e3d9fa580cc67b4f3c60cdfe3f4d1591b

Description: Earlier in the course, we reviewed the Sakila database schema that comes with MySQL. In this assignment, you will code additional SQL programs using this database and submit a script of your SQL code. You are not designing this database; instead, you are merely using the design (via an EER) to code SQL programs. Instructions: 

1. Launch MySQL Workbench and review the Sakila database. 2. Familiarize yourself with the following enhanced ERD diagram (EER) for the Sakila database. An EER enhances an ERD by including elements that allow for aggregating, generalizing, and specializing. An identifying relationship, shown by a solid line between tables, is one where the child table cannot be uniquely identified without its parent. An example is an associative (bridge) entity (e.g., film\_actor) created to resolve a many-to-many relationship. Here, the primary key is usually a composite key made up of the primary keys from the two original tables. A nonidentifying relationship is one where the child table can be identified without its parent.

 3. Use the diagram to create several SQL programs to view and extract the data. Note: You do not need to submit your answers to the questions, just the SQL code.

 a. Tell MySQL Workbench which schema to use with the USE command.

 b. Create a SQL program to get an aggregate count of the number of films in the database. How many films are in the database?

 c. Create a SQL program to determine the count of films that include actor Nick Wahlberg. What is the count? 

d. Write another program that lists the films that have a PG rating. 

e. Create a SQL program to extract the total amount of revenue received (payment amount) per store manager (staff). Sort by store manager id. Which store manager had the highest total revenue? 

f. Write a SQL program to display the average revenue grouped by store. Format the results to two decimal places and sort by the results by average revenue in descending order. Which store had the highest average revenue? 

g. Create a SQL program to extract and group the total count of films by rating. Sort the results in descending order by film count. After running the program, which rating had the highest film count? 

h. Modify the SQL program above to not only display the count of all films grouped by rating, but also use a subquery (inner query) to calculate the total count for all films. What are the counts? 

i. Create a program that selects all films whose title begins with “a” and has a fourth letter “d”. Which films did it select?

 j. Create a program that uses a regular expression with the \[\] symbols to display all film titles having a k or q in them. What are the names of these films? 

k. Write a query to show overdue film rentals. Search for films with a return date that is NULL and where the rental date is farther in the past than the rental duration specified in the film table. If so, the film is overdue, and the query should produce the name of the overdue film rental, along with the customer name, phone number, and how many days the rental is overdue. Use CONCAT to concatenate the last and first names of the customer, the CURRENT\_DATE() function to determine the current date, ISNULL to find the movies where the rental return date is null, DATEDIFF and INTERVAL to calculate the days overdue, ORDER BY to sort the results by title. Limit the results to five rows. What are these five films?

 l. Create a SQL program that uses the GROUP BY with ROLLUP to show customers who paid an aggregated amount more than $200. (Use the amount field from the payment table and the HAVING clause.) Who are these customers? What is the rollup amount?

 m. Create a SQL program that uses PARTITION to show film rental payment amounts partitioned over customer. For each film rental, include customer\_id, payment amount, and payment date. What is the Total Payment Amount, showing as the partitioned column? 

4. Click the Save icon in the toolbar to name and save your SQL to a script file named SakilaScript",0,sql,2020-10-13
izotgt,Finding all names that consist of three or more words?,"So I'm a total newbie trying to solve this exercise where I have to find all dish names that consist of three or more words (for example ""croutons with cheese"" or ""steak on the grill""). 
BUT the catch is that I cannot select names that contain double or triple spaces. I also cannot select names that have spaces before and/or after them (i.e. ""   soup"" or ""  cheese "").

This is what I currently have (selecting column ""Name"" from the table ""Dishes""): 

SELECT Name
FROM Dishes
WHERE Name LIKE '% % %'

All help is appreciated! :D",1,sql,2020-10-13
iznpdg,Problem Installing: The chosen installation directory exists and is non-empty.," I finally got IT's permission to install PostgreSQL on my work laptop, and I keep getting this error when I try to go next from the Installation Directory page: The chosen installation directory exists and is non-empty. Please choose a different directory. Any ideas on how to fix this?",1,sql,2020-10-13
izmxqy,what does exploring the database exactly mean?,"I was given this question on an online interview and I wasn't really sure what's that supposed mean besides collecting some info about and within the DB.

does anyone have a clearer view about this?",0,sql,2020-10-13
izkd0f,How do I include a completely made up column that always lists the same value?,"I am using a query to retrieve a set of values which I am then copying and pasting onto a spreadsheet. My team does this particular task a lot. The query results have the same columns as the spreadsheet and they are aligned the same way, with one exception. The spreadsheet has one column in the middle, which we always need to fill in with the same value. I cannot retrieve this value from SQL because it is in none of our SQL tables. This means that I would need to copy and paste query results into the spreadsheet, then move the second half of the results and type this value in the resulting empty cell. If I could manage to include a totally made up column with this constant value in my SQL query results, my team would be able to just copy and paste query results without needing to add this constant value manually going forward. It doesn't sound like we're avoiding much work, but since we do this task a lot, it would have a noticeable different for us. Also, it would be a nice learning experience for me if someone shows me how to do this. 

Due to bureaucracy relating to permissions in my company, I'd rather not make changes to the spreadsheet to have the constant value cell at the end of the sheet and I'd rather not make changes to our SQL tables (we only have read-only permission). Anyone know how I could do this through the read-only environment SQL query?",0,sql,2020-10-13
izk4fy,Next Steps,"Hi everyone, I apologize if this is the wrong place to post this. I recently finished taking the zero to hero SQL course on Udemy which I found very informative and I highly recommend if you are trying to get into SQL. Can anyone recommend some good next step sources for continued education/practice?",10,sql,2020-10-13
izjze9,Storing/saving your statements for future use and reference?,"Hey all! I'm curious if anybody has any best practices for storing some of the SQL statements you make. I have some that I may need to reference in the future when working on other queries, to see how I came up with a particular join or used a CTE a certain way.

I've been pasting my statements into OneNote because the search functionality in OneNote is amazing, but the formatting of the pages really sucks when I paste the code, and I'm just not sure if there's a better way.

I started looking around Github for my own personal use, but wasn't sure if that would end up being overkill.

I don't love the idea of creating a separate SQL file and saving the files to my PC, but I'm open to thoughts on this as well.

Anyway, if this has already been discussed to death, let me know. I didn't dig too deeply into this sub, so I may have missed something.

Thanks everybody!!!",30,sql,2020-10-13
izjme6,Assistance with query,"Hello, everyone.  


I am here seeking assistance with a query which shall be used for a PHP dashboard.  


I currently have the following table in MySQL: 

https://preview.redd.it/4fy3bclnqap51.png?width=590&amp;format=png&amp;auto=webp&amp;s=51e1b36162b032ec18a316a76e3690ad2c8fb873

Here is a sample of the data within the table:

https://preview.redd.it/z9xxnp8zqap51.png?width=593&amp;format=png&amp;auto=webp&amp;s=d318ebaec945dc777f7416055da7f8973506b3d5

However, it will contain different hostnames:

https://preview.redd.it/suzp7wr2rap51.png?width=634&amp;format=png&amp;auto=webp&amp;s=b30e4317fef64a1dfcd9549a6aa3dc5c16f3fceb

I have been assigned a task which requires different 'sections', hence I am looking for a query which is able to identify which 'packagename' is unique for a given 'hostname', essentially, meaning that the given host has a package which no other host does.  
There is a 'general' section which is generated by using:  
`SELECT * FROM tablename GROUP BY packagename ORDER BY ID ASC`  
However, when I select for a certain host, using:  
`SELECT * FROM tablename WHERE hostname = '$hostname' GROUP BY packagename;`  
It returns EVERYTHING for that given host (understandable, given the query above).  


I am trying to get a section which is selecting unique 'packagename' per selected 'hostname'.  


Any/all help will be greatly appreciated, I just had a huge lunch and my brain isn't working at all.  


Many thanks!",2,sql,2020-10-13
izer25,Where can I host my Relational DB online for free?,"Is there a cloud/online service where I can host my database? 

I'm learning how to create an RDBMS online so that I can upload some personal data and connect the DB to Power BI to make dashboards (entirely for learning).

I'm familiar with using MySQL and Microsoft SQL Server as an end user, so it would be preferable to use those.

I've looked into AWS but setting up a database on RDS looks very challenging. My background is not very technical.

I've also looked into Digital Ocean as I heard they would allow me to do this for free but I can't find it. I see that their cheapest VM (called a ""droplet"") where I can install Ubuntu (and then later install MySQL) is $5/month.

Where would you recommend?

Thank you!",0,sql,2020-10-13
izcvma,Capture All letters before number OR first 4 Char?,"Trying to find best way to do this. Need to:
1) Capture all letters before number
2) If 3 or less letters available prior to number, capture first 4 characters

Input 

LBART03A
LBART03B
LBART03C
UPF3VA
PG5FD
HAT07001
SUP1205A
SUPR803A

Desired output:
LBART
LBART
LBART
UPF3
PG5F
HAT0
SUP1
SUPR",4,sql,2020-10-13
izcn2z,Can anyone help me with creating a table that has multiple foreign keys?,"So I've created multiple tables, but when I try to create a table that reference two other tables it doesn't work. I have created a table named ""computer"" that has a column in it called ""serial_number"" and another table called ""worker"" with a column in it called ""employee_id."" Now I am trying to create a third table called ""computer_worker"" that needs to reference both of those tables. The code I am using is 


""CREATE TABLE computer_worker (
   
 employee_id VARCHAR2(100) NOT NULL,
    
serial_number VARCHAR2(100) NOT NULL,
    
hours_worked NUMBER (5,1) NOT NULL,
   
 PRIMARY KEY (employee_id, serial_number)
  
  FOREIGN KEY (employee_id, serial_number) 
   
 REFERENCES worker, computer (employee_id, serial_number)

)

;""


but I keep coming up with this error: 

""Error report -
ORA-00907: missing right parenthesis
00907. 00000 -  ""missing right parenthesis""
*Cause:    
*Action:""


And I can't figure out why. If anyone could help that would be amazing!!",1,sql,2020-10-13
izb222,SQL engine similar to PostgreSQL and PgAdmin?," So I just bought an SQL course on Udemy that wants me to download PostgreSQL and PgAdmin. On my personal computer this is fine, but I also want to on my work laptop; and I can't because I need admin permission which I do not have. Are there other similar similar software and/or websites that do something similar to PostgreSQL and PgAdmin that I could try to get on my work laptop? I've downloaded Python before and didn't have any problems so it sucks that I can't get these 2 to work.",1,sql,2020-10-13
iz991w,stored procedure,"soo i got a database where theres a idclient, a id product and a id for the purchase 1(each one is a table with values), so what i got to do is enter a parameter (id product) and display the id of the clients, the complete name and how much did they spend due to the product they bought.

anyone has any ideas??",4,sql,2020-10-13
iz814i,[PostgreSQL] Difference with csv files,"Hi, I'm a newbie with PostgreSQL and SQL overall. I would like to know where is all the SQL data stored on my PC. In case it matters, I use ArchLinux. For example, when I use `csv` files, I know all the data is stored in that file, then I can run, for example:  
    $ mv filename.csv filename.txt   

and then send that txt file to a colleague. In the case of SQL (and POstgreSQL), where is all the data stored? Is there a specific file that has all the data that I add to my database? How can I find that file on my PC?",2,sql,2020-10-13
iz791i,Is it okay to repeat column names and row level functions in group by?,"Here is my example:

	select substring(name, 0, 2) [Initial letter], sum(population) [Population] from state
	group by substring(name, 0, 2);

As you can see, I had to repeat **substring(name, 0, 2)**, since I couldn't use the alias in the group by. Is this okay? Is there a good alternative to avoid repetition or the repetition is there purposefully to help us avoid mistakes?

If it's possible to remove this repetition, would you suggest avoiding it?

Thanks in advance.",1,sql,2020-10-13
iz72pd,how to get the AVG() of a result set?,"Hey I'm kinda new to SQL and I have this problem, here is my code:

mysql&gt; select count(msg\_id),

\-&gt; date(msg\_date) as day

\-&gt; from messages

\-&gt; group by day;

&amp;#x200B;

and I'm getting this result:

| count(msg\_id) | day              |

|         20812       | 2020-02-01 |

|         20064       | 2020-02-02 |

|         22355       | 2020-02-03 |

|         24183       | 2020-02-04 |

|         26949       | 2020-02-05 |

|         18273       | 2020-02-06 |

|         18207       | 2020-02-07 |

|         16389       | 2020-02-08 |

|         18728       | 2020-02-09 |

|         16343       | 2020-02-10 |

|         17890       | 2020-02-11 |

|         20994       | 2020-02-12 |

|         19779       | 2020-02-13 |

|         17086       | 2020-02-14 |

|         21496       | 2020-02-15 |

|         20392       | 2020-02-16 |

|         19199       | 2020-02-17 |

|         20201       | 2020-02-18 |

|         21902       | 2020-02-19 |

|         13878       | 2020-02-20 |

|         17772       | 2020-02-21 |

|         18472       | 2020-02-22 |

|         19726       | 2020-02-23 |

|         10679       | 2020-02-24 |

 does anyone know how can I get the average of the count(msg\_id) column?",6,sql,2020-10-13
iz6mza,Pivot table or grouping; trying to figure out how to format the data the way I need,"Howdy,

I consider myself 'average' when it comes to writing queries, but this one has me a bit stumped. I don't think my brain is wired correctly to be able to properly visualize what I need to do. I have this feeling I am just about to get it but it's just out of reach.

Here's the situation, I have a query that joins two tables and uses the XML PATH clause to concat times (these are actually 'Shift times' for a scheduling application) for display in an [ASP.NET](https://ASP.NET) page. That works fine. But what I want is instead of the following...

[https://i.imgur.com/rqUCAcX.png](https://i.imgur.com/rqUCAcX.png)

Have it more like the following... (grouped on the 'Area')

[https://i.imgur.com/TfzGL69.png](https://i.imgur.com/TfzGL69.png)

&amp;#x200B;

To me, this says 'Use a pivot table Luke' but I have actually never used that function before and I have been struggling to get it to work properly.

The query I am working with is the following

    SELECT DISTINCT  ShiftStartTimes, ShiftStartDay, templateKey, Area, LineOfBusiness, TimeZone, Notes, Region, CASE WHEN ShiftStartDay = 'Sunday' THEN '0' WHEN ShiftStartDay = 'Monday' THEN '1' WHEN ShiftStartDay = 'Tuesday' THEN '2' WHEN ShiftStartDay = 'Wednesday' THEN '3' WHEN ShiftStartDay = 'Thursday' THEN '4' WHEN
    ShiftStartDay = 'Friday' THEN '5' WHEN ShiftStartDay = 'Saturday' THEN '6' ELSE NULL END AS DayIndex
    FROM            dbo.Shifts AS s1 INNER JOIN
    dbo.ShiftTemplate t1 ON s1.TemplateKey = t1.ID
    CROSS APPLY
    (
    SELECT
    stuff((SELECT ','+ CAST(s2.ShiftStartTime AS varchar(10)) + ' - ' + CAST(DATEADD(hh, s2.ShiftLength, s2.ShiftStartTime) AS varchar(10)) AS ShiftStartTimes
    FROM dbo.Shifts s2
    WHERE s1.ShiftStartDay = s2.ShiftStartDay AND s1.TemplateKey = s2.TemplateKey
    ORDER BY ShiftStartDay, ShiftStartTime
    FOR XML PATH(''), TYPE).value('.', 'varchar(max)'), 1,1,'')) D (ShiftStartTimes)

&amp;#x200B;

As I said, this is probably something really easy and my addled and sleep deprived brain just isn't making the connection",5,sql,2020-10-13
iz3oai,"sqlite-utils: command-line utility for creating, querying, and exporting data from SQLite databases",,1,sql,2020-10-13
iz1n34,Need help setting up database with slowly changing dimensions,"Firstly I need to say that I'm a complete beginner with databases. I've played about with microsoft access in the past but no-one seems to use that anymore.

My company has asked me to set up a database for storing data on commercial partners. Apparently I am the most qualified to look into this, despite having no clue where to start.

Since I need to store historic records, I am looking at slowly changing dimensions (maybe type 6). More fundamentally, I don't know what software I should be using and there seem to be endless options for this. Searching for how to implement type 6 SCD returns lots of software specific info and sql , but I can't find a simple 'beginner's guide to storing data with slowly changing dimensions'. I don't even know if I should be using sql, SSMS, MySql etcetc.., or could be using r (with which I'm more familiar).

For example, one part of my data are currently in four excel spreadsheets, each with the same columns ; cust\_id, valid\_from, valid\_to, contact, data\_source 

...and each spreadsheet contains records from a particular datasource. The different spreadsheets overlap in time, so in order to merge them I need to match the customer ids, check which valid\_from date comes latest, and reset the valid\_to date in the historic records.

If anyone can point me in the right direction I would be very grateful.",3,sql,2020-10-13
iz1d76,"Enforcing ""completeness"" [neutral]","I'm trying to work through a normalization problem, and I'm hoping a more knowledgeable redditor might be able to help.

Let us imagine that my database contains data on some widgets. These widgets can only have one color. It would not be too outlandish for me to have a table sort of like this:

    create table widget (widget_id, name, . . ., color **not null**)

What is it I am doing by saying that color must not be null? I must be indicating that for the purposes of *whatever this database is for*, a widget must have a color. Widgets always have colors!



But what if I have a similar need for an attribute of a widget that is NOT one-to-one? Let's say ""production region,"" for example. A widget might be produced in many different regions, so to represent that fact I could set up a standard 3-table structure, with the widget table as above, a region table with all of the possible regions, and a widget_region table that maps widgets to regions. 

But what if region is just as necessary an attribute to define a widget as its color? What is the best way for me to enforce something analogous to a ""not null"" constraint, so that a widget MUST have its regions defined.  




I can of course think of a few answers, all of which are unsatisfying. 

One answer would be that my applications should determine for themselves the ""usefulness"" of my data, and if they need a widget's region for whatever they are doing, they will simply not make use of widgets whose regions are undefined, and perhaps send me an alert. This is unsatisfying because it makes a distinction between attributes that are single and attributes that are multiple and enforces their requiredness in different ways. I could have the application also enforce/alert about the color to replace the not-null constraint--but then what are not-null constraints even for/that seems pretty lame.

Foreign keys? No, those go the other direction: the usual many-to-many setup requires that widget_id have an fk back to the widgets table and region back to the region table. It makes no sense to define the region of a widget before the defining the widget.

Thinking along those lines, then, perhaps I could add some complexity to my table structures: add a region_group_id column to the widget table, and a region_group table with a pk region_group_id, and then map region groups to regions in a region_definition table, where region_group_id is mapped to region from the region table we defined before . . . and now we're back at the original problem, because I'd need to enforce the rule that region_group_ids be present in the region_definition table!

How about I make the regions an array column in the widget table? LOL--kill me now.  




I sense there is an easy answer right outside of my reach. Any help would be greatly appreciated. Obviously this is not about widgets, and it's not necessarily even about enforcing ""completeness"" in a scenario analogous to the one I've described, but it's about how to balance database normalization and business rule application in general--where does the database's role end and the application's start?

Edit: I suppose what I'm dealing with is a cyclical dependency--can't have widget regions without a widget, can't have a widget without a widget region. Putting this into place on the database is another matter, but I guess the concept is not necessarily unacceptable as I concluded in option 2 above.",1,sql,2020-10-13
iz0jzp,HELP with complex select queries.,"hello friends I'm a CS major, taking database.

super new to SQL but I got used to it rather fast this past week, but one of the things I just can't wrap my head around, are the query examples where you must solve it by SELECTING from two tables.

any guide/youtube tutorial, or anything really that can explain this in detail? the select statement itself seems to be rather diverse and widely used, so I don't know what to search for exactly.

my prof is so bad, all of us gave up on him, and the examples that are solved there's no guide or indication as to how they got to the answer.

help please, any good guide for complex queries that need more than one table to be solved?",2,sql,2020-10-13
iz06nd,Best index processes for large SQL tables,"Hi,

I have a request where I have a table where I will be doing the following inserts

1. Initial Insert. This could be a couple of 100 million records. This will happen once
2. Monthly inserts. This will be anything from a few 100 thousand records to maybe 10 million max.

The table structure itself is 12 columns. The user has the option to add columns to import extra data if they want. 

This is an example of the table structure without any user fields

|A|B|C|D|E|F|G|H|I|J|K|L|
|:-|:-|:-|:-|:-|:-|:-|:-|:-|:-|:-|:-|
|||||||||||||

We currently have a nonclustered index on column A(int) &amp; B(DateTime).

When inserting the data we disable the index and when the insert is complete we rebuild the index.

We read from the table in in different batches of column A. 

e.g.

SELECT A,B,C,D,E,F,G,H,I,J,K,L from TABLE where A =  1 and B = '2012-01-01 00:00:00.00'

or 

SELECT A,B,C,D,E,F,G,H,I,J,K,L from TABLE where A =  1 and B IN('2012-01-01 00:00:00.00','2012-02-01 00:00:00.000')

So for maybe 400 different values for column A we would do 400 selects from the table. with the additional filter on the datetime column B. for 91 million records this takes about 2.5 hours. 

The user adding extra columns such as M&amp;N does not seem to have any knock on performance hits. The selects would then become 

SELECT A,B,C,D,E,F,G,H,I,J,K,L,M,N from TABLE where A =  1 and B = '2012-01-01 00:00:00.00'

or 

SELECT A,B,C,D,E,F,G,H,I,J,K,L,M,N from TABLE where A =  1 and B IN('2012-01-01 00:00:00.00','2012-02-01 00:00:00.000')

The performance is a problem and I am thinking that I have approached this all wrong. 

* Should I be disabling the index for inserts? 
* Should I only rebuild if fragmentation is greater than 30% and reorganise if it is 10-30%?
* Should the index be on all columns?

I hope that is clear and concise and forgive me if it is not

Any questions then please let me know and I will try my best to explain it clearer. 

I appreciate anyone who reads this and has any input.

Thanks",1,sql,2020-10-13
iz063r,Can't figure out what's wrong,"Hey everybody, I've been at it for hours on end but I can't figure out what's wrong with this MySQL query syntax:

`SELECT item_id, order_id, sku, qty_ordered, qty_refunded, base_price_incl_tax,`   
`base_discount_amount, base_amount_refunded`  
`INTO #TempItem`  
`FROM sales_order_item;`  
`SELECT entity_id, base_grand_total, total_refunded, created_at, updated_at`  
`INTO #TempOrder`  
`FROM sales_order_grid;`  
`INSERT INTO #Result (item_id, order_id, sku, qty_ordered, qty_refunded,`   
`item_price_incl_tax, item_discount_amount,`  
`item_amount_refunded, order_grand_total, order_total_refunded,`   
`order_created_at, order_updated_at)`  
`SELECT i.item_id, i.order_id, i.sku, i.qty_ordered, i.qty_refunded,`   
`i.base_price_incl_tax, i.base_discount_amount,`  
`i.base_amount_refunded, o.base_grand_total, o.total_refunded, o.created_at,`   
`o.updated_at`  
`FROM #TempItem i`  
`INNER JOIN #TempOrder o on o.entity_id = #TempItem.order_id;`  
`INSERT INTO OPENROWSET ('Microsoft.Jet.OLEDB.4.0','Excel`   
`8.0;Database=c:\Test.xls;','SELECT * FROM #Result')`

VSCode is telling me there's something wrong with my syntax, but I've tried a few different things and just really can't seem to figure it out. It tells me the error is near the first line. Please help!!!",1,sql,2020-10-13
iyxez5,Can someone please help me understand the EXISTS operator?,"Hi all, I'm learning some Postgres Operators and become kinda stuck on EXISTS. I have searched many tutorial on this operator but they all just say the same definition then showed an example code which does not really help me on understand the operator details. Would appreciate any help and clarification from you guys!

[https://www.postgresqltutorial.com/postgresql-exists/](https://www.postgresqltutorial.com/postgresql-exists/)

1. EXISTS Clause syntax:  

* [SELECT](http://search.oracle.com/search/search?group=MySQL&amp;q=SELECT)  col1, col2, col3…..  
[FROM](http://search.oracle.com/search/search?group=MySQL&amp;q=FROM)  table1  
[WHERE](http://search.oracle.com/search/search?group=MySQL&amp;q=WHERE) [EXISTS](http://search.oracle.com/search/search?group=MySQL&amp;q=EXISTS)( [SELECT](http://search.oracle.com/search/search?group=MySQL&amp;q=SELECT) 1  
 [FROM](http://search.oracle.com/search/search?group=MySQL&amp;q=FROM)  
     table2  
 [WHERE](http://search.oracle.com/search/search?group=MySQL&amp;q=WHERE) col2 = table\_name1.col1); 
* So EXISTS is used with a subquery, and to my knowledge, Postgres will execute the subquery first, then retrieve the result of the subquery, and then finally execute the outer query. But what the subquery ""[SELECT](http://search.oracle.com/search/search?group=MySQL&amp;q=SELECT) 1 [FROM](http://search.oracle.com/search/search?group=MySQL&amp;q=FROM) table\_name2 [WHERE](http://search.oracle.com/search/search?group=MySQL&amp;q=WHERE) col1 = table\_name1.col1"" do is it will return number 1 as result, which means EXISTS will return boolean TRUE. And then? I got stuck with my understanding here.
* Is WHERE EXISTS together is an operator, or just EXISTS. If the latter then the code will be ""SELECT col FROM tabl WHERE TRUE/FALSE; "" which is also confusing...",1,sql,2020-10-13
iyx03e,Unable to read a text attachment exported from SQL sent to my phone,"Title, it returns as an enormous wall of gibberish characters that means absolutely nothing and I cant seem to find anyone with similar issues. This is only happening recently and used to work just fine, and when the text attachments are read from my email via pc they also work just fine. It probably is also not just my phone, as it has the same problem with several other phone brands/mobile carriers. Any insight would be greatly appreciated, thanks.",1,sql,2020-10-13
iywxdt,PostgreSQL 13 Released!,,77,sql,2020-10-13
iy3veo,"Can anyone help me figure out why the text is so small in SQL Oracle Database? Whenever I open it the text of the UI is normal size, then almost immediately it shrinks to a smaller size. I've posted a picture of MS Word behind it to show the size difference.",,1,sql,2020-10-13
iylnvs,How to get the most recent date from a table?,"So I am currently trying to get the most recent row based on a date value.

However the most recent date being pulled is wrong.

As an example I run:
Select Max(SampleTime) From Table

But the time I get is: “9/9/2019 12:00:00 PM”
When the most recent value has the date:
“2/7/2020 12:00:00 PM”

Why is it not getting the correct time value and what should I do to get the correct latest time?",15,sql,2020-10-13
iyl0wc,I need some help with deciding what to purchase for SQL Server," I have a server with 2 processors, 8 cores per processor. This will host a SQL Server 2019 Standard and is not public facing, but the web services and web site are public facing that connect to the SQL Server. My company has 2 of us that will access the server. What is the cheapest route to license this with the least number of cores possible? Is it possible to have the CAL based licensing when SQL Server is used in this manner and if so how many cores can it access?",4,sql,2020-10-13
iyji0o,What tutorial should i do next ?,"hello ,

i just found lately a job that require knowledge  in SQL and  for entry level job as technicien , 

i found this tuto [https://www.sqlcourse.com/](https://www.sqlcourse.com/)and fellow up  by this  [https://www.sqlcourse2.com/](https://www.sqlcourse2.com/) which i still not finish currently in   (6 order by  chapter)   

so my question is  : is this enough to get the basic of  sql and put it in my resume ,  if not can you suggest a good tutorial or a book to get only the basic  just for passing the interview and later i still can learn more in the job if i get hired.

thanks in advance , 

and sorry if there is some grammatical error English is not my first language",6,sql,2020-10-13
iyhhnb,"For those who actually started as a beginner, where do you recommend I start?","I know there's the side bar as well as other subreddits, but I want to hear answers from people who didn't start in a classroom and who legitimately started with 0 knowledge. It's overwhelming the amount of places I could possibly start and want first hand reviews/recommendations. I prefer video explanations compared to just text. So far I've looked at Coursera, w3, edX, codeacademy, Microsoft, Udemy, and udacity. w3 is mainly text so I don't think I want to go with that.

I would prefer to have some sort of certificate once I have completed and passed everything too.",21,sql,2020-10-13
iyft4q,How is the SELECT statement implemented in SQL?,"And in terms of big O notation, what is it's time complexity? And what is the most efficient way that we know of so far for implementing it?",14,sql,2020-10-13
iyfoem,Find first and last entry grouped by column,"II have a sqlite table which looks like the following:

|id|device\_id|timestamp|data|
|:-|:-|:-|:-|
|1|1|1|a|
|2|1|2|b|
|3|1|3|c|
|4|2|3|d|
|5|2|4|d|
|6|3|5|e|
|7|4|6|f|
|8|1|6|g|
|9|2|6|h|
|10|3|7|j|
|11|2|9|m|
|12|1|9|n|

and I want to get the following result:

for each device\_id I would like to have the first and the last data entry regarding the timestamp:

&amp;#x200B;

|device\_id|timestamp\_first|data\_first|timestamp\_last|data\_last|
|:-|:-|:-|:-|:-|
|1|1|a|9|n|
|2|3|d|9|m|
|3|5|e|7|j|
|4|6|f|6|f|

&amp;#x200B;

Could someone please help me to get this done and find a query which does exactly this?",4,sql,2020-10-13
iycjag,Challenge: What is the average amount of days between purchases over all clients?,"So I found this challenge somewhere in this link

[https://www.reddit.com/r/SQL/comments/7owhqw/advanced\_sql/](https://www.reddit.com/r/SQL/comments/7owhqw/advanced_sql/)

And I decided to try and find a solution to the question in the title of this post with this csv file:

[http://www.filedropper.com/redditchallengeaverage](http://www.filedropper.com/redditchallengeaverage)

I was wondering if the queries I wrote have given me the correct answer.

I first created the following view in order to get the the names and dates of when clients made purchases at the shop WITH (after the UNION ALL) the average distance (in days) between days of purchases for each customer (field1 = Customer Name, field2 = Order Date)

    CREATE VIEW Reddit_Challenge_Average_VIEW AS
     
    SELECT Reddit_Challenge_Average.field1, Reddit_Challenge_Average.field2
    FROM Reddit_Challenge_Average
    
    UNION ALL
    
    SELECT Reddit_Challenge_Average.field1, round(stdev(julianday(Reddit_Challenge_Average.field2)),0)
    FROM Reddit_Challenge_Average
    GROUP by Reddit_Challenge_Average.field1

Then, I wrote this query:

    SELECT *
    FROM Reddit_Challenge_Average_VIEW
    UNION ALL
    SELECT 'Correct Result?', avg(Reddit_Challenge_Average_VIEW.field2)
    FROM Reddit_Challenge_Average_VIEW
    WHERE Reddit_Challenge_Average_VIEW.field2 NOT like ""%-%""

This query gives me the contents of the view I created with (after UNION ALL) the result for the average distance (in days) between purchases globally (so not by client).

I add &lt;&lt; NOT like ""%-%"" &gt;&gt; in order to calculate the average without taking into account the dates in YYYY-MM-DD format. I calculate the average of all average distances in days here.

This seems correct to me, but I have some doubts.

Would anybody know how to solve the question? Apart from doing all this, I can't think of any other way of doing it.",6,sql,2020-10-13
iyc60w,How do I update a table when a condition is true?,"`BEGIN;`

`SET @A = (SELECT available_tickets FROM trip WHERE trip_id = ?);`

`CASE`

`WHEN @A &gt;= ? THEN UPDATE trip SET available_tickets = available_tickets - ? WHERE trip_id = ?;`

`ELSE 'Not enought tickets!'`

`END`

`COMMIT;`

This is the SQL I got so far. But it doesn't work. I guess the case statement is not meant to be used in that way. What I want to do is remove ? amount of tickets when there is enough enough tickets left. How can I do that? Because is is obviously the wrong but it's the closest I got so far \^\^'

&amp;#x200B;

Here's the same thing with if else

&amp;#x200B;

https://preview.redd.it/nj4cu6sji2p51.png?width=821&amp;format=png&amp;auto=webp&amp;s=21a50486fb0bece4c1f962da89e4f8a97c6e9152",6,sql,2020-10-13
iy8qwa,"Coming from MS SQL to mySQL, mySQL version of table function (return a table) ?","To make it simple, I am coming from MS SQL and now using mySQL (v5.7, which seems to eliminate JSON functions who would have probably help) at work. I will probably have a bunch of complex query to write and there are so stuff that were so much easier in MSSQL (as far as I can see). 

As an example, in MSSQL, I would be using a JOIN on an function that would return a table. 

Rephrased : Basically, I have a string on every row of my table that I need to manipulate.
In MSSQL, I would use a function to return the result as a TABLE and simply JOIN on it. 
Right now, I am simply trying to split a string and have it joined to multiple tables. 

Example of first table : 
[id, string]
[1,'a,b,c]
[2,'x,y,z']
    ...

MSSQL Exemple :

    SELECT *
    FROM inventory inv
    INNER JOIN dbo.FT_GetList(inv.id, inv.string) li ON li.id = inv.id
    INNER JOIN tableXYZ ...

As far as I can see in mySQL, I kinda have to work with loops and temp table to end up doing the same thing. Anyone got any pointers for me ?

EDIT : Can't be done that way. In general there is no equivalent of a table returned from a function which would then be joined in a query (some goes for cross apply I guess).",11,sql,2020-10-13
iy40h4,Joining two non-adjacent tables,"Update\*\* - I managed to get it working. I found a table with vendors and added that to the join, so it would start comparing with vendors IDs as well and therefore, preventing the result from repeating every item for each order.

Below is the code for the working query

    SELECT		tblInvoices.fldInvNo,
    		tblInvoiceDetail.fldItemDesc,
    		tblInvoiceDetail.fldNotes,
    		tblVendors.fldName,
    		tblOrders.fldOrderNo
    
    FROM		tblInvoices
    
    INNER JOIN	tblInvoiceDetail on tblInvoices.fldInvID = tblInvoiceDetail.fldInvID
    INNER JOIN	tblVendors on tblInvoiceDetail.fldVendorID = tblVendors.fldVendorID
    INNER JOIN	tblOrders on tblOrders.fldInvID = tblInvoices.fldInvID and tblOrders.fldVendorID = tblVendors.fldVendorID
    
    where tblInvoices.fldInvID = '00-999-142244'
    
    order by fldItemDesc

Hi guys, I've been trying to join two 'non-adjacent' columns, but I'm getting unexpected results.

The query is for a report and I must bring on screen the fields:

fldOrderNo -&gt; order number

fldCompletedBy -&gt; who worked on the order

fldItemDesc -&gt; a description of the item on the invoice detail

fldNotes -&gt; any special notes added to the item

&amp;#x200B;

This is the schema

[schema](https://preview.redd.it/mzajr8oqwto51.png?width=968&amp;format=png&amp;auto=webp&amp;s=bd9b58c328e79aee5cb286438ada752b8dd7e1b0)

So I've been trying to get the results I want by joining tblOrders on tlbInvoiceDetail based on the ID of the invoice (fldInvID)

I tried joining the tables directly:

`FROM tblOrders INNER JOIN tblInvoiceDetail ON tblOrders.fldInvID = tblInvoiceDetail.fldInvID`

I also tried involving the invoices table, but no dice.

    FROM tblOrders 
    INNER JOIN invoices ON tblOrders.fldInvID = invoices.fldInvID
    INNER JOIN tblInvoiceDetail ON tblInvoiceDetail.fldInvID = invoices.fldInvID

What I seem to be getting is EVERY invoice detail item description by EACH order I have for a given invoice.

Here's a screenshot of the result:

&amp;#x200B;

[result](https://preview.redd.it/ddy0zmp3yto51.png?width=814&amp;format=png&amp;auto=webp&amp;s=74160d688911824dfa119418969d25e2661bf98f)

&amp;#x200B;

And finally, this is the query that I came up initially.

    SELECT		
    			tblOrders.fldOrderNo, 
    			tblInvoiceDetail.fldItemDesc,
    			tblInvoiceDetail.fldNotes
    
    FROM		tblOrders
    INNER JOIN	tblInvoiceDetail ON tblOrders.fldInvID = tblInvoiceDetail.fldInvID

&amp;#x200B;

Any help would be great. I can't see what I'm missing here",2,sql,2020-10-13
iy08lm,Help SQL EXISTS," As a part of my homework at school this is a question:

The given SQL creates an Album and Song tables and inserts some albums and songs. Each song is associated with an album.

The first SELECT statement selects all albums. The second SELECT statement selects only album IDs that have at least three songs. Ex: Album 1 has three songs, and album 4 has four songs.

Create a third query that combines the two existing queries. Add a WHERE clause to the outer SELECT statement that uses the EXISTS operator to select an album when the subquery selects a row. The subquery should only select a row when the album being examined in the outer query has at least three songs.

Run your solution and verify the result table shows just the albums Saturday Night Fever and 21.

&amp;#x200B;

Here is the code provided following my subquery. For some reason it shows the same as the second SELECT statement:

CREATE TABLE Album (

  ID INT,

  Title VARCHAR(60),

  ReleaseYear INT,

  PRIMARY KEY (ID)

);

&amp;#x200B;

CREATE TABLE Song (

  ID INT,

  Title VARCHAR(60),

  Artist VARCHAR(60),

  AlbumID INT,

  PRIMARY KEY (ID),

  FOREIGN KEY (AlbumID) REFERENCES Album(ID)

);

&amp;#x200B;

&amp;#x200B;

INSERT INTO Album VALUES

  (1, 'Saturday Night Fever', 1977),

  (2, 'Born in the U.S.A.', 1984),

  (3, 'Supernatural', 1999),

  (4, '21', 2011);

&amp;#x200B;

INSERT INTO Song VALUES

  (100, 'Stayin\\' Alive', 'Bee Gees', 1),

  (101, 'More Than a Woman', 'Bee Gees', 1),

  (102, 'If I Can\\'t Have You', 'Yvonne Elliman', 1),

  (200, 'Dancing in the Dark', 'Bruce Springsteen', 2),

  (201, 'Glory Days', 'Bruce Springsteen', 2),

  (300, 'Smooth', 'Santana', 3),

  (400, 'Rolling in the Deep', 'Adele', 4),

  (401, 'Someone Like You', 'Adele', 4),

  (402, 'Set Fire to the Rain', 'Adele', 4),

  (403, 'Rumor Has It', 'Adele', 4);

&amp;#x200B;

&amp;#x200B;

SELECT \*

FROM Album;

&amp;#x200B;

SELECT AlbumID, COUNT(\*)

FROM Song

GROUP BY AlbumID

HAVING COUNT(\*) &gt;= 3;

&amp;#x200B;

\-- Write your SELECT statement here:

SELECT \*

FROM Album A

WHERE EXISTS

(SELECT AlbumID

FROM Song

GROUP BY AlbumID

HAVING COUNT(AlbumID) &gt;= 3);",2,sql,2020-10-13
ixx2rj,Where can I find sample SQL datasets for practice?,"I am trying to follow the book 'Data Analysis Using SQL and Excel' by Gordon S. Linoff, and I don't seem to find the datasets that he has used inside his book. Can someone please let me know if there's any place where I can find them? Or some sample datasets that I can use to follow the book? Much appreciated.",6,sql,2020-10-13
ixwn79,Question about union and join,"Hi guys, i have to join 3 table together to make only one with specific column. Id like to know how is it possible to join theses table together. I have a column for the 3 table named new_case, there is 2 numeric and the other is caracther.
Looks like i cant join them 

Also im using SQl on Sas

Thanks for helping",2,sql,2020-10-13
ixtnaq,Compare dates for a compliance issue,"Hello internet! I have a compliance report that uses case to compare actual finished dates to target dates. The database tracks hours but for the compliance my boss just wants to see if we meet the days.

For example if the target is 9/30/2020 12:00:00 and we finished 9/30/2020 01:00:00 he doesn't want to see it. Only if we missed the dates. Is there a way I can write this out with a case statement?",1,sql,2020-10-13
ixtjyj,Need to create a SQL query with a dynamic number of params in the WHERE clause. How?,"I'm using MS SQL Server and Entity Framework (although I'm just using EF to run a raw SQL query, so no DBSet stuff or anything like that).

Basically I need to create a SQL query that will select a row based on a user's ""employeeId"" and ""companyId""

If it were for one user, it'd just be as simple as:

    SELECT *
    FROM MyTable
    WHERE 
        employeeId = @employeeIdParam AND
        companyId = @companyIdParam
    

Problem is, I need to do it for many users at a time, and I definitely don't want to put the SQL query in some kind of loop. What's the proper way to do a SQL query like this where I have a couple parameters and it needs to happen for a dynamic number of times?

I found something online about passing the params in like a comma-separated list, but that seems kinda hacky.",2,sql,2020-10-13
ixtjkd,The best tools/framework for SQL unit testing?!?!?,"Mention others in comments.

[View Poll](https://www.reddit.com/poll/ixtjkd)",2,sql,2020-10-13
ixsnzh,Are SQL Certs Worth It?,"Hello I graduated college in 2018 with a Management Information Systems Degree and I was wondering if getting a SQL certification would help me start my career working with databases. I didn't really know what I wanted to do after college so I dabbled in sales for a year but learned it wasn't for me and I just quit my job last week. SQL was the only programming language that actually clicked for me in college and I've been taking a couple of courses on Udemy over the past month for MySQL, Postgres, Oracle and I want to pursue it as a career. So my question is would getting a SQL certification for either Oracle or SQL server would be beneficial for helping me to get noticed by employers? I know it wouldn't replace job experience but I just don't have any work experience with SQL. I'm 24 and I just feel so behind right now any help would be appreciated.",2,sql,2020-10-13
ixsjm7,"[MSSQL] Audit Checks, Count comparison.","Hi 
Thinking about best approach, basically need to compare counts of all tables pre vs post migration. Both stored in different environments. 
Current solution is simply run query, paste results to excel, use vlookups etc.
I was thinking about generating insert statements and inserting them to temp tables and comparing.
Is there a better solution?
Any tools that can be used to automate this process?",1,sql,2020-10-13
ixrxgn,Next Steps (Novice),"So I'm almost finished with my course in SQL on Udemy using MySQL. I was wondering if I posted a list of topics covered if anyone would be able to point me in the right direction of where to continue from this point, so I can keep studying after the course is finished?

Topics:

[https://imgur.com/a/bz6yYHJ](https://imgur.com/a/bz6yYHJ)

Course: 

[https://www.udemy.com/course/sql-mysql-for-data-analytics-and-business-intelligence/](https://www.udemy.com/course/sql-mysql-for-data-analytics-and-business-intelligence/)",2,sql,2020-10-13
ixra5t,"For those wanting to practice SQL on LeetCode but don’t have a LC subscription, I created a Python program that re-creates all the problems in db-fiddle.com","I’m not sure how many people in this sub use Python, but I wanted to share this program because it allowed me to practice all 125 LeetCode (LC) database/SQL problems in an efficient way.

**Background- the two problem I wanted to solve**:

1. Majority of SQL problems on LC are locked
2. Even with access to the problem, creating the query can be challenging without being able to test and output the intermediate queries that make up the final solution.

My initial solution was manually copying and pasting the tables from LC to db-fiddle.com, but then I thought, there must be a better way- that is how this program was conceived.

&amp;#x200B;

**What this Python program does:**

Using the web automation package Selenium, it opens the LC problem selected by the user, parses the table data, and creates the table schema in db-fiddle so that you can test your queries. Additionally, it saves all the db-fiddles you've been working on in case you want to continue working on them in future sessions.

&amp;#x200B;

**Sample outputs (for question #1369):**

problem statement tab: [https://leetcode.jp/problemdetail.php?id=1369](https://leetcode.jp/problemdetail.php?id=1369)

db-fiddle tab: [https://www.db-fiddle.com/f/oMDnFch8BXL45r3dUVF17V/0](https://www.db-fiddle.com/f/oMDnFch8BXL45r3dUVF17V/0)

solutions tab: [https://github.com/kamyu104/LeetCode-Solutions/blob/master/MySQL/get-the-second-most-recent-activity.sql](https://github.com/kamyu104/LeetCode-Solutions/blob/master/MySQL/get-the-second-most-recent-activity.sql)

&amp;#x200B;

**Demo and GitHub link**:

https://i.redd.it/emouoh2waqo51.gif

Check it out on GitHub: [https://github.com/jjjchens235/leetcode-sql-unlocked](https://github.com/jjjchens235/leetcode-sql-unlocked)",120,sql,2020-10-13
ixqzi7,Declaring and setting variables in stored procedures question,"Hi, my work often uses stored procedures ie 

(ignore the spaces between the @ signs, reddit html keeps converting it to /u/)

declare @ thisyear char(4)  
declare @ variable datetime  
declare @ othervariable char(5)

set @ thisyear = 2020   
set @ variable = '2020/08/07'   
set @ variable = '07/09'

select   
@ thisyear,   
something,   
something2  
from table  
where stuff = stuff 

ect ect 

The problem is when I'm testing code block by block it's such a pain to have to scroll up all the way to include these statements and then hit execute. Is there any way to save these somewhere so that I don't have to re run all the declare statements every time? it would save a lot of time especially when editing other peoples code. What i've been doing is just hard coding the variables values then putting them back to SP variables when I've finished. I use microsoft sql server 18.6 and I don't think I can use a different version.",1,sql,2020-10-13
ixp6gk,Is this the best way to filter my groups,"Can't help thinking there might be a better way to do this.

I'm trying to find groups that have 2 or more rows with certain values.
For example, which groups have 'a' and 'c'.
'val's and number of 'val's will be dynamic.


    WITH cte AS (
        SELECT 'g1' [grp], 'a' [val]
        UNION SELECT 'g1', 'b'
        UNION SELECT 'g2', 'a'
        UNION SELECT 'g2', 'b'
        UNION SELECT 'g2', 'c'
        UNION SELECT 'g3', 'a'
        UNION SELECT 'g3', 'c'
        UNION SELECT 'g3', 'd'
    )
    SELECT c.grp
    FROM cte c
    WHERE c.val IN ('a','c')
    GROUP BY c.grp
    HAVING COUNT(1) = 2 -- matches length of 'val' list",2,sql,2020-10-13
ixoqmi,Learn SQL in 7 Minutes,,0,sql,2020-10-13
ixoq6q,etl transformation processes,"hi,
so i have a python app that scrapes a few websites and the data is inserted into a sql server database. right now i am using a staging table that holds the data that is inserted from the script and a final target table which the processed data is loaded into and i build my views/reports off said table. i have a stored proc that does alot of the transformations (removing extra strings, transforming the data types,etc) and i am using a temp table in the stored proc to ""cook"" the data and once its done it is inserted into the final table where it is used. i am not sure if this is the right/best way to go about it. is it plenty fast and latency issues are not a problem but i would still like some clarification.",8,sql,2020-10-13
ixo6k5,How to filter out the following results,"Here is my query and results:

select policy\_number, cover\_no, cover\_face\_amount, \* from i\_cover

where cover\_no in (4610,4611)

&amp;#x200B;

[Results](https://preview.redd.it/oblim29vipo51.jpg?width=209&amp;format=pjpg&amp;auto=webp&amp;s=a6db1e3608fa15e3d387ca0529c3133f33c09b07)

How can change the query where it only shows policy numbers that have both cover numbers (1036773 and 1036945), and not include policies that only have cover 4610?",3,sql,2020-10-13
ixn8yq,Courses to learn SQL,What courses would you recommend for an SQL beginner to take?,7,sql,2020-10-13
ixmid6,Orchestration / Automation tool,what is the tool you are using for triggering etl jobs/loads from multiple sources.,6,sql,2020-10-13
ixlqah,[MSSQL] Cannot Drop the Clustered Index 'Index' Because It Is Being Used For Automatic Cleanup of Aged Data,,4,sql,2020-10-13
ixitnd,Count sum of stocks for end of month by the max dates of storages in sql,"Hello, guys 
Could you please help me. I have a table of stocks. It contains city id, storage id, sku id, period and count. My task is to get the count for each month. But the problem is one sku may be contained in multiple storages. For example in one city one sku, had stocks on 11.02.2020 in storage 1, then on 15.03.2020 in storage 2. And on the 31 of March it had on storage 3. The 1st storage had 3 stocks, the 2nd had 4, the 3rd had 1. Overall the stock is equal to 8. I can send then image if it is not clear. Thank you a lot",5,sql,2020-10-13
ixdqcg,Performance of Self Join vs First_Value() Last_Value vs 2x Cross Apply MIN() MAX(),"Saw a question on this subreddit regarding the first and last value of a 'set' of data.

Decided it would make a good optimization video:

3 Queries to answer the same question and how they perform on 250k rows.

&amp;#x200B;

[https://youtu.be/GPDOxmN3nzc](https://youtu.be/GPDOxmN3nzc)

  
 \---- Table of Contents ---- (also in vid description)

[00:00](https://www.youtube.com/watch?v=GPDOxmN3nzc&amp;t=0s) Intro 

[00:26](https://www.youtube.com/watch?v=GPDOxmN3nzc&amp;t=26s) Title 

[00:33](https://www.youtube.com/watch?v=GPDOxmN3nzc&amp;t=33s) About the DataSet 

[01:36](https://www.youtube.com/watch?v=GPDOxmN3nzc&amp;t=96s) Building the DataSet (Random Data Generation)

[03:27](https://www.youtube.com/watch?v=GPDOxmN3nzc&amp;t=207s) Self Join Performance (Parallelism) 

[04:36](https://www.youtube.com/watch?v=GPDOxmN3nzc&amp;t=276s) FIRST\_VALUE LAST\_VALUE Performance (Parallelism) 

[05:54](https://www.youtube.com/watch?v=GPDOxmN3nzc&amp;t=354s) CROSS APPLY / MIN() MAX() Performance 

[07:30](https://www.youtube.com/watch?v=GPDOxmN3nzc&amp;t=450s) Closing 

[07:55](https://www.youtube.com/watch?v=GPDOxmN3nzc&amp;t=475s) Outro",31,sql,2020-10-13
ixd0lw,"Duplicate records but just swapping out a key field, easiest way?","Hi all!

Is there a straightforward way to copy a bunch of records in a table but on just one of the columns I’m looking to swap the one value for another. 

So for instance I have a table with the following columns: Age, Sex, City, Zip. I would like to copy all Age, City and Zip records but switch the Sex records from Male to Female. 

This isn’t really what I’m after but should demonstrate the idea. 

I am also iterating through a bunch of tables that all have different columns but they all have the Sex column which is what I’m trying to use this logic for. 

Thanks for any help in advance!",1,sql,2020-10-13
ix9v6l,Trying to calculate a weighted average in SQL,"Hello,

I have a query written, but in order to get the result I want to need to calculate a weighted average by date and payment type for offer and sales.

I pasted my code below, but I'm hoping this is somewhat simple: The next step has been to go into Excel and create a weighted average by sales, so if 50 of sales are an offer of 2 and 50% are an offer of 4 then the weighted average of offers is 3.  There are 6 options for offer, that was just trying to be somewhat simplistic.

&amp;#x200B;

I would be very grateful if anyone could explain to me how to do that, ideally in one table!

&amp;#x200B;

&amp;#x200B;

&amp;#x200B;

select

c.Order\_DT AS Order\_Date

,a.Category

,c.PAYMENT\_METHOD\_CODE as Payment\_Method

,(case when c.Payment\_Method\_Code in ('PC') then 'Card' else 'Other' end) as Payment\_Type

,Offer

,sum(case when c.PAYMENT\_QTY &gt;= 2 then c.EXT\_PRICE\_AMT else 0 end) as Sales

from 

   CATEGORY\_REF a

   INNER JOIN ITEM\_REF b ON (b.CATEGORY\_ID=a.CATEGORY\_ID)

   INNER JOIN ORDER\_AGGREGATION c ON (c.ITEM=b.ITEM)

   INNER JOIN Calendar\_DAY\_REF d ON (c.ORDER\_DT\_KEY =d.DATE\_KEY)

where 

and c.ORDER\_DT\_KEY &gt;= 20190101

group by 1,2,3,4,5

order by 1,2,3,4,5",2,sql,2020-10-13
ix5mh1,Return a count for each variable AND null,"I am using Oracle SQL Developer to write this query. I need my query to count specific instances of the possible entries for a field AND to count all null entries for that field and then total them. I can write the query to count the specific entries OR the null entries but not both in the same query.

It currently returns the total count for 0, 1, and AC and the total of those. I need it to also return the count for null and include it in the total.

 SELECT  
  (SELECT ABBREVIATION FROM SCHOOLS WHERE SCHOOLID=SCHOOL\_NUMBER),  
  R\_PROOF\_OF\_RESIDENCY,  
  COUNT(1)  
FROM STUDENTS  
JOIN U\_STUDENTSUSERFIELDS  
  ON DCID = STUDENTSDCID  
WHERE  
  R\_PROOF\_OF\_RESIDENCY NOT IN ('C', 'H', '2')  
  AND ENROLL\_STATUS = 0  
/\*AND SCHOOLID = DECODE(\~(curSchoolID),0,SCHOOLID,\~(curSchoolID))\*/  
GROUP BY  
  ROLLUP(  
    SCHOOLID,  
    R\_PROOF\_OF\_RESIDENCY)  
ORDER BY  
  SCHOOLID,  
  R\_PROOF\_OF\_RESIDENCY",1,sql,2020-10-13
ix35au,Query aggregating at two different levels,"Ok, so I have a table which includes the columns: project, fee_type, AR, balance. The fee type can either be fees or costs, so each project has a record for fees and a record for costs. I want a query which returns sum of AR, sum of AR where fee type is fees, and balance, but only for those projects where the sum of balance is greater than 0 or less than 0. But the sum of balance would include costs and fees. What would be the best way to accomplish this?",1,sql,2020-10-13
ix1lj1,Help with SQL Question, Single SQL statement that returns every Wednesday this year as a row set without using any storage?,0,sql,2020-10-13
ix1hus,SQL Aggregating with Case logic,"Hello All,

&amp;#x200B;

I have a query that outputs about 650K rows that I need to bring down to 100K or less. I'm aggregating some values to reduce my total row count, but I need to classify things according to criteria and so I'm using case logic, however, every item in my case logic has to be called out in the group by section. Is there a way to reduce the row count while still classifying my transactions? I have my case logic below. as you can see I need to group by the ""IS\_VA"" column, channel, online, reg\_no, and Vendor\_no. however, this (along with a few other group-by's) is expanding my query significantly.

,CASE

		WHEN prgSale.is\_va=1 THEN 'Video Agent'

		WHEN prgSale.channel='o' THEN 'Outside Sales'

		WHEN prgSale.channel='i' THEN 'Inside Sales'

		WHEN refSku.online='o' AND (saleSummary.reg\_no &gt;=40 OR refSku.vendor\_no != 101481) THEN 'Online'

		ELSE 'Retail'

	END AS \[Sales Channel\]",9,sql,2020-10-13
iwzzqw,Simple Anomaly Detection Using Plain SQL,,79,sql,2020-10-13
iwxzs4,"Oracle SQL loop issue, encountered ""end-of-file""","Need to change data in an existing table based on data from a temp table.

I have uploaded a list of ARINVT.ID numbers into a temp table in INPUT\_FILE\_REC.CUSER40

I want to go through this list and for each ARINVT.ID listed, set ARINVT.NUSER5 to null.

I am getting the ""command not properly ended"" error and ""encountered end of file"" error.

I swear I had a similar loop working in the past...

     BEGIN 
        FOR V IN (SELECT to_number(cuser40) arinvt_id FROM input_file_rec)
        LOOP
            UPDATE arinvt
                SET nuser5 = null
                WHERE ID = v.arinvt_id;
            END LOOP;
     END; 

I am getting the following errors:

&gt; \[Code: 6550, SQL State: 65000\]  ORA-06550: line 6, column 30: PLS-00103: Encountered the symbol ""end-of-file"" when expecting one of the following:     ;   \[Script position: 161 - 163\]    Text \[Code: 900, SQL State: 42000\]  ORA-00900: invalid SQL statement   \[Script position: 167 - 170\]    \[Code: 900, SQL State: 42000\]  ORA-00900: invalid SQL statement   \[Script position: 178 - 182\]   

&amp;#x200B;

Screenshots of the code, table, and errors are here:

[https://community.spiceworks.com/topic/2288972-oracle-sql-loop-issue](https://community.spiceworks.com/topic/2288972-oracle-sql-loop-issue)",6,sql,2020-10-13
iwxl67,What is a sure shot way of checking if the sqlite3 binary i've placed on my Android phone is working or not?,"EDIT - SOLUTION FOUND, kinda. I realised that the problem in my case is that I'm not able to ""write"" the SQLite3 binary into /system/xbin. I am facing some kind of write restriction in that location, will have to figure it out somehow. 


---

I have downloaded the sqlite3 binary from here: [https://www.dropbox.com/s/3b87cnh15o1g1vb/sqlite3?dl=0](https://www.dropbox.com/s/3b87cnh15o1g1vb/sqlite3?dl=0) &amp; placed it in my rooted Android phone's `/system/xbin` directory &amp; given it the permissions 755.

Now i'm trying to run the command `sqlite3 /data/data/com.whatsapp/databases/msgstore.db 'SELECT * FROM chat';` but it is giving me no output at all. I tried running the command using Termux as well as Tasker but there's absolutely no output. Tried other 'UPDATE' commands as well but the db file seems to remain untouched. Is there any other SQL command i can use to test which is SURE to give some output? I get the feeling that the sqlite3 binary is not doing anything. I even tried using multiple variants from here ([https://github.com/tech128/sqlite3](https://github.com/tech128/sqlite3)) but none seem to be working.",1,sql,2020-10-13
iwuyjf,"MS SQL 2017, how to calculate different combinations that can add up!","So here the root of my question. Let's say I have Tim, he comes out of a store and spent 217.46$ in food and products and I wish to know which items he bought. So ground rules all items in the store have a unique price and once bought can't be reused. Also you don't know how many items customers bought but you know there total they spent! Is there a way to go through all the combinations that add up to the total and find which values the person bought? 

Or am I barking up the wrong tree!",0,sql,2020-10-13
iwp02d,MariaDB SQL doesn't update,"Hello guys, I am struggling with a problem I cannot seem to fix.

I am open to any suggestions.

I am using an old software that connects and uses an sql server. The software is closed book so I cannot see any logging info or modify anything on it. So modifying the queries or anything similar is impossible. The only thing I can do is to fix the issue by manipulating SQL server.

This software creates a library based on the files located on the HDDs. So, I scan the files using the software and while it scans it updates the sql server with the entries.

The software successfully connects to server. It creates its own tables with the first run. Then with the first scan it creates the necessary entities in the sql server. 

HOWEVER, when the scan is finished, the numbers don't match. So some entries didn't find their way into the server. If there are 40000 entries in the software, there are for example 34343 entries in the database.

If I restart the software, It sees those 34343 entries but the remaining ones are lost. After that re-scanning doesn't add any entries to the server. From my limited knowledge I think somehow, the database is locked. When I create a new database and point the software to that, it starts the process all over again.

&amp;#x200B;

Some more details:

Q: This was not the case before so what changed?

1: SQL Server got updated while the software version remained the same.

2: The number of files grew day by day so there are more entries to scan.

Platform: MariaDB10

Type: InnoDB

Machine: Synology DS718+ with 16 gigs of RAM

Config:

`[mysqld]`

`key_buffer_size = 512M`

`innodb_buffer_pool_size = 512M`

`innodb_log_file_size = 64M`

`innodb_io_capacity = 1000`

`innodb_io_capacity_max = 8000`

`query_cache_type = 1`

`query_cache_size = 10M`

`query_cache_limit = 256K`

`table_open_cache = 12`

&amp;#x200B;

I have just started reading the SQL docs and trying to tinker with it and horribly failing it.

Any constructive advice is welcome.",3,sql,2020-10-13
iwdeqw,SQL - Learn SQL with Socratica Tutorial for Beginners,,68,sql,2020-10-13
iwbu2h,How does the following nested SQL query work? And is there an alternative way to do it other using nesting?,"It is the 7th question from here https://sqlzoo.net/wiki/SELECT_within_SELECT_Tutorial?answer=1

""Find the largest country (by area) in each continent, show the continent, the name and the area:""

     SELECT continent, name, area 
      FROM world AS x
       WHERE area &gt;= ALL
         (SELECT area FROM world AS y
            WHERE y.continent=x.continent
              and area &gt; 0 )",1,sql,2020-10-13
iwb2vw,[MS SQL]Can I simplify calculations in a single statement?,"    select t.a, t.b, t.c
       (t.a/t.b) as nRate 
       (t.a/t.b) * t.c as nValue 
    from test t 

I've simplified the query I'm working on to JUST the point I'm trying to figure out, is there a way that in-line I can re-use the value of nRate, without retyping (t.a/t.b) ? 

In my actual query the initial calculation is longer and more complicated than a/b, but it's reused about 6 times in the rest of the query, and is re-calculated for every row in the result set.",2,sql,2020-10-13
iw8u1f,SQLite problemn converting to YYYY-MM-DD,"Hey everyone.

I have the csv dataset ""Sample Superstore"", and normally I can convert dates to YYYY-MM-DD correctly, but there is a little problem.

This is the following query:

    SELECT Sample_Superstore.OrderDate, substr(OrderDate,7,4) || ""/"" || substr(OrderDate,4,2) || ""/"" || substr(OrderDate,0,3) AS ""DATE YYYY-MM-DD""
    FROM Sample_Superstore

As you will see, for dates such as ""10/11/2016"", it becomes ""2016/11/10"".

However, for other dates, such as ""11/8/2017"", I get ""017/8/11"".

I get the impression that this is because of a few zeros missing, meaning ""11/8/2017"" would be convertible if it was ""11/08/2017"".

How can one solve this issue? I haven't found any answers yet.",3,sql,2020-10-13
iw85ug,Desktop Cpu for small office sql needs,"Hi,

I have a client who is an accountant.

Right now he uses a few years old i5-2500/8GB/500GB SSD windows 7 pro x64 computer as his accounting software sql server.

It is a small office with 8 workstation.

2 years ago his SQL version was upgraded from express to full version, Since his db filesize started to get around the 10GB limitation as I recall.

His server works great, But it's an old system which I feel i can trust less and less as time passes by, And software support companies now requiring windows 10 for continuation of support.

I consider upgrading his server to another desktop cpu/software (windows 10 pro x64) based ""server"".

The reason I wanted it to be workstation based os and not server is to cut costs of the Server OS and costs of all the needed software (Eset Internet Security/Easeus todo backup/UPS software and such), And the server doesn't work that intensly (There's another sql based software that is barely used and a shared documents folder).

I'm considering 2 upgrade options at the moment :

1. Amd Ryzen 5 2600/B450M motherboard/32gb/1x500gb evo 970 nvme (os drive)/1X1tb 860 evo ssd (data drive)/1x4tb enterprise (Nightly backup drive)
2. Intel i5 9400/H470M Motherboard/32gb/1x500gb evo 970 nvme (os drive)/1X1tb evo 970 nvme (data drive)/1x4tb enterprise (Nightly backup drive)

I would appreciate your advice what would work best for my client's needs/costs.

Thank you",9,sql,2020-10-13
iw3oj3,database design for simulation project,"Hey all,

So I have a simulation-oriented project where I need to warehouse a lot of data for future processing. This isn’t the problem, but it’s kind of analogous to this: a horse race with an arbitrary number of horses, where position on the track is recorded at various points in time across many such races (the points in time aren’t fixed, and can vary b/t races). 

Most of the volume of data here comes from that state data (which for my problem is ~1GB per run), but I’d also like to store some race-specific parameter data, endurance measure of horse **i**, say. 

Background: I’m familiar with basic querying and such, up to joins and subqueries, but haven’t thought a whole lot about DB design. Here’s what I came up with: 

a (parent) params table with an identifying **sim_id** and columns with important parameters. A child simdata table with **sim_id** linking back to parent and a field for time at observation and position of a single horse. This means a single sim_id reference might contain tens of thousands of records in the simdata table — 1 for each horse per observation. Is there a better way to organize this? It has to be flexible with regards to # horses and # observations per horse and ideally “interesting parameters” that I might want to monitor later.",1,sql,2020-10-13
iw15zw,Insert to merge conversion,Hi I would like to ask is there any tip or trick for convert X number of simple inserts into merges statements? I have a lot of those firsts and I dont want to do this manually.,2,sql,2020-10-13
ivzys8,"Learning SQL, Primary/Foreign Keys, and Database Normal Forms","I have my own amazon aws free tier database that I want to build a moderately complex set of tables on using primary keys and foreign keys with normal forms and dummy data, then learn sql by querying this database.

What resources will help me accomplish all of this? Assume that I am a beginner.",2,sql,2020-10-13
ivz3w1,Extract text based on position of code in another field,"I have a field that can contact 1,2 or 3 email aliases. There is another field that has a code that matches the role for each alias. For example the role field could contain (Fin;Eng;hr) which means finance, engineering and Hr and the aliases would look like (alias1, alias1,aliases). Each alias's corresponding role is in the same order as the alias. The order of role can change e.g. another row could have them in the order Eng,hr,Fin). My query needs to pull all records with an engineer and pull the right alias from the alias field. I could use a Case statement with all possible combinations to pull the right alias but there could be more than 10 roles. 

Any better ideas for solving this?",3,sql,2020-10-13
ivyu45,What is the difference between these operators?," &lt;&gt; is Not equal to 

!= is also Not equal to?",1,sql,2020-10-13
ivyf17,How does this sql query work?,"I am trying to solve this question on sqlzoo (13th Q on here https://sqlzoo.net/wiki/SELECT_names?answer=1) ""Find the capital and the name where the capital includes the name of the country.""

The solution they give is;

     SELECT capital, name FROM world
     WHERE capital LIKE concat('%', name, '%')

Why can't the WHERE clause just be `capital LIKE %name%`? Why is concat needed here?",38,sql,2020-10-13
ivuzr9,Calculating moving median in postgres,"Hi there :)

I have started my own blog and this is my first post: [https://patternmatchers.wordpress.com/2020/09/12/calculating-moving-median-in-postgres/](https://patternmatchers.wordpress.com/2020/09/12/calculating-moving-median-in-postgres/)

I hope you'll enjoy it.

Any suggestions are welcome!",16,sql,2020-10-13
ivuyu9,SQL without admin rights,"Hello,
Basically I would like to start learning and using SQL at work, mostly to discover it and avoid long process with excel.
I dont know really know where and how to start but I guess I should start installing one of the solutions (postgresql good for beginners?) and get started. 

But how to install a program without admin rights?

Or  should i try to use the cloud to query my files? (We have azure, but i have never used it).

Any advice?

Thanks",4,sql,2020-10-13
ivus0o,Introduction to full-text operators and basic search -Definitive Guide,,19,sql,2020-10-13
ivqnsb,removing duplicates before loading,"Hi All,

I have a scenario where I need to check for duplicates on product\_id and if there are duplicates, then they need to be loaded into a dupe\_error table and the unique records should be loaded into the target table. I know that I can find duplicates using:

select prod\_id, count(\*) from prod\_table group by prod\_id having count(\*) &gt; 1.

But this will just tell me which are the duplicates. There are other columns too in the source product table along with prod\_id like prod\_name, category etc which need to be retained. Plus it can happen that the target may already have duplicate since we receive incremental data. How can I handle this scenario.

to summarize:

1. Need to capture duplicates in a error table before loading.
2. Load only unique records.
3. Target may already have the product\_id which is received from source.

Any help appreciated. Database is teradata.",3,sql,2020-10-13
ivoeh1,How to speed up a basic operation ?,"I am try to do some basic counting on a 1 million row database, but mysql take about 2 mins to do so.

    SELECT count(*) FROM mydata

All columns are in text type.

How should I speed up the process ?",1,sql,2020-10-13
ivnnui,CASE statement: “Inconsistent datatypes: expected DATE got CHAR”.,"I have written an CASE statement (as a apart of a longer query) that looks for invoices in a table, if it finds an invoice, it returns the last invoice date, otherwise a string ""No Invoices"".

I understand that data types should be consistent, this is why I have converted the date to string, but this way the date can't be sorted in Excel as, even though the format of the date is correct in Excel, but it is exported as a string, not as a date (which renders the whole column useless). I could use NULLs instead, but I would really like to keep the string 'No invoices'.

How can I make this work and keep the date in the correct date format without having to convert it to a string? Is it even possible to have within a single column some values as strings and others as dates?

Thank you.

    case when exists
    (select * from AP_INVOICES_ALL i where i.VENDOR_SITE_ID = s.VENDOR_SITE_ID)
    then (select to_char(max(i.INVOICE_DATE)) from AP_INVOICES_ALL i where i.VENDOR_SITE_ID=s.VENDOR_SITE_ID)
    else 'No invoices'
    end as ""AP Last Invoice Date""",1,sql,2020-10-13
ivnajx,SQLite extension functions for Mac,"Hey everyone.

I thought I would share this extension for anyone who wants to load ths extension into SQLite on Mac. I had a hard time finding it.

[http://www.filedropper.com/extension-functions](http://www.filedropper.com/extension-functions)

It's a .dylib file.

If you are using DB Browser for SQLite, go to ""Tools"", ""Load Extension"", and search for this file after downloading it.",4,sql,2020-10-13
ivn383,What do Natural Join and Inner Join mean in the context of SQL?,"From what I gather, there are three types of inner joins, namely theta join, equijoin, natural join. Natural join is the subset of Equijoin which is the subset of Theta join. And we have keywords JOIN and INNER JOIN and NATURAL JOIN in SQL. How do they work and how are they different from each other?

In the following schema,

Student(id, name)

Majorin(student_id, dept_name)

    SELECT *  
    FROM Student, Majorin
    WHERE Student.id = Majorin.Student_id

What kind of join does this produce? Does it produce Natural Join?",0,sql,2020-10-13
ivmhi2,How to learn SQL in a way that makes sense?,"Hello all - I recently obtained a new job where I'm required to have some working knowledge of SQL. I know extremely basic statements, but I have little to no experience working with SQL. 

I'll be working on MSSQL using SSMS. I'll occasionally do some work on Maria DB using MySQL. 

Any recommendations on how to learn SQL quickly and efficiently? I'm in no way attempting to be an expert overnight, but I do want to feel more confident in navigating SQL.

In short, I'm terrified I'm not gonna get it and they're gonna regret hiring me. I want to learn and understand it. I just enrolled in a udemy sql boot camp course, Coding with Max (Learn Sql in an afternoon), and I'm going thru the W3 Schools tutorial. If you have any tips or suggestions on how to make this more understandable, I'd greatly appreciate it.",25,sql,2020-10-13
iviw4g,A kid needs help,,0,sql,2020-10-13
iveo5l,I want opinions on our needs on shopping data is a good use case for NoSQL,"Basically I am trying to decide on if our data is a good use case to store in a nosql DB . Currently our data is stored in MS SQL  , where we get a row per session.

&amp;#x200B;

In our data, we have sessions, users (IE customers) and flights. 

&amp;#x200B;

Our data is currently stored by session. So each new session gets a new row. Each user might have multiple sessions on the same flight, or the same sesssion could also have the same user with multiple flights, or the same session can have multiple users. 

&amp;#x200B;

The reason we started to think of using a could noSQL DB is to be able to get an aggregated look of the data in easier ways. IE the data is currently stored by session, but what if we want stats by user, or by flight, etc. The thought was a NoSQL DB makes it easier to query shopping data on different levels, be it on the user, session or flight level

&amp;#x200B;

The more I read about it, the more I think we should stick with SQL but just wanted opinions",11,sql,2020-10-13
ive1vh,Oracle SQL filtering rows where two columns are null issue,"I am trying to use the below line to omit rows where both columns are null

&amp;#x200B;

and (o2.order\_id is not null and ce.event\_id is not null)

&amp;#x200B;

What is happening is if only one of the two is null its omitting the row. I want to only omit when both are null

Edit: to add maybe anything helpful both the ce and o2 tables are outer joined. I only want to omit if BOTH those respective columns are null. If order is null but event isn't I want to keep that row.",4,sql,2020-10-13
ivdzyg,Oracle/SQL Developer SELECT clauses MUST equal GROUP BY clauses?,"EDIT: SOLVED

Solution - turns out I can add an aggregated column to my SELECT clause that doesn't also exist in my GROUP BY.

What I CANNOT do, for whatever reason, is name the SUM() column to a different name.

So this does work:

    SELECT col1, col2, col3, SUM(col4)

This does not work:

    SELECT col1, col2, col3, SUM(col4) as col4.name

End Edit.

I'm pulling DB2 database data with an SQL query through an R server. The query is relatively straightforward:

    SELECT col1, col2, col3
    FROM data.source
    WHERE col2 IN ('var1','var2')
    AND col3 &gt; '2020-09-01'
    GROUP BY col1, col2, col3
    HAVING COUNT(*) &gt; 1

This query works perfectly fine. However, what I truly need is to add a SUM() to the SELECT clause, but when I attempt to do so, it errors out. Here is the same code, except with the SUM() and now it fails:

    SELECT col1, col2, col3, SUM(col4)
    FROM data.source
    WHERE col2 IN ('var1','var2')
    AND col3 &gt; '2020-09-01'
    GROUP BY col1, col2, col3
    HAVING COUNT(*) &gt; 1

I found a thread that mentioned Oracle/DB2 doesn't support this added SELECT clause functionality if it doesn't match with GROUP BY.

Is this statement true?

If so, is there a work-around to provide me the SUM() column I need?",2,sql,2020-10-13
ivbvk2,Interview help regarding mid senior Analyst position,"Hello, I have an interview coming up and the job role is specific to audience segmentation. Is there any case study to help me prepare for interview. I would appreciate your help. Thanks",7,sql,2020-10-13
iv5p0e,Need some explanation on comma separated joins,"Need of some help joining more than 2 tables by comma separated joins.

For example,

If i write

Select \* from

TABLE1 AS A,

TABLE2 AS B,

TABLE3 AS C

WHERE

&lt;insert conditions here&gt;  


In this case is there a certain sequence i need to follow in where conditions ?

I tried googling but didn't find anything helpful.

Thanks !",1,sql,2020-10-13
iv5bpx,Is Postgre SQL good for beginners?,"I'm in the Market Research industry and I would really like to learn SQL. I have plans on going towards Data Science and Analytics in the future and I feel that learning SQL will really be beneficial for me. 

Is Postgre SQL good for beginners? Or should I pick another one?

&amp;#x200B;

BTW, the device that I'll be using for this is running on macOS.

&amp;#x200B;

Thanks and I will really appreciate anyone's insight or opinion on this",9,sql,2020-10-13
iv4lrd,Rest API into SSIS,"Hi, I have a web API that is using REST. I’ve never set up an API before to go into SSMS. What would the best way to approach this, I only know the SQL language not C# or Python.",6,sql,2020-10-13
iv4l76,Is there a tool to see a Diagram for the relationships (JOINs) of a view (or Query)?,"So I know that there is some ER Diagrams apps that shows the relationship between tables, ie showing Primary and Foreign key. I'm currently using DBeaver for that and it is quite a nice tool.

But coming from MS Access, one of the (allegedly few) advantages was that from the UI I could see what JOINed what and from where. There is something similar in that regard?

My focur right now is PostgreSQL.",6,sql,2020-10-13
iv3pyi,Why should I keep this pivot?,"I have four tables, Items, ItemContainers, and Images and Imageables.

Both Items and containers can own many images.

&amp;#x200B;

* Items - Has its own images, if not defaults to its container.
* ItemContainers - Has its own images.
* Images
* Imagables - which have a morph type of either of the two (items, itemcontainers).

Querying for item images goes first by the item, then by the container.

I am thinking of just getting rid of the pivot table, and having ""images"" which contain a ""imageable\_id"" and ""imageable\_type"" which would map in the item or itemcontainer table and reduce a pivot join.

Is this a good idea for speed? Images are pretty vital for the item.",1,sql,2020-10-13
iv3fv8,What is the fastest way to import json line (.jl) file to mysql ?,"The build in import wizard did not support .jl file and it is very slow. It take me serveral minutes for 200 lines of csv file. 

&amp;#x200B;

Is there any good alternative ?",21,sql,2020-10-13
iv168w,I am trying to pull records that are non English and parsing them in python.,"I am using sequel pro and it’s giving the records just fine. But when I use the same query in the script to parse and insert it in some other db it doesn’t work. 

Googled a lot! Tried Utf -8 and tried 2-3 encoding regex!
Can someone help? Task is due in 6 hours!",2,sql,2020-10-13
iv12qt,"Is there a succinct single-word name for ""non-unique"" indexes?","I know ""non-unique"" isn't a big deal, but wondering if there's anything more succinct that might just be a single word?  Maybe something that specifies more what ""it ***is***"" (rather than ""isn't"").

I'd also rather not just use the word ""index"" alone, as it's not specific enough.  After a word that is very obviously excluding unique indexes.",2,sql,2020-10-13
iuxsul,Learning SQL in Access,"At my job, I look at a lot of databases in Access. I'm not a programmer, I'm an editor, but I work with programmers, and I'd like to learn more about Access and how to to do some of the more simple queries myself. Where is a good place to start to learn some of the basics of SQL in Access? I'd be willing to take an online course if there's a good one that's recommended.",26,sql,2020-10-13
iutibm,define the relationships," 

A young soccer league wants to organize the games in its divisions. The league has several divisions organized based on age (e.g. U14), players sex (e.g. boys, girls) and rank (e.g. 1, 2). For a division we will keep a unique contact email and phone for the teams to report results.

The league has many clubs. For a club we will keep the name (e.g. Patriots), a contact email and phone. A club has many teams, and a team belongs to a single club. Teams are organized based on players birth year (e.g. 2007) and players sex (e.g. boys, girls) and they have a unique name within the club (e.g. BLUE). Each season (e.g. FALL 2020 or SPRING 2019), a team plays in a given division, that may change based on the results obtained. The league wants to keep the history of the divisions' membership over time.",1,sql,2020-10-13
iut5ae,How to get the output of a query all in 1 row (Long List Report) using STRING_AGG in MS SQL?," I have tried using for xml path and stuff, the solution works great. Here is the code:

select sc.CustomerID, pp.FirstName,pp.LastName,

stuff((select ', ', rtrim (cast(ProductID as char))

from Sales.SalesOrderDetail sd

join Sales.SalesOrderHeader sh

on sd.SalesOrderID=sh.SalesOrderID

where sh.CustomerID = sc.CustomerID

order by sd.ProductID

for xml path('')), 1,2,'' ) as Product

FROM Sales.Customer sc

join Person.Person pp

on pp.BusinessEntityID =sc.PersonID

order by sc.CustomerID;

Output is:

CustomerID ----FirstName ----LastName----Product

11003-------------Christy ---------Zhu--------------712,773,783,870,871,873,923,934,957

How to get the same result using STRING\_AGG in MS SQL function without using for xml and stuff functions?",3,sql,2020-10-13
iuryzs,3-way many-to-many-to-many join with relationship specific data,"I'm not sure if I'm even using remotely correct terminology, but I'll do my best to explain my situation clearly. Thanks in advance for taking a look!

This is in PostgreSQL. I'm reasonably familiar with it, but I don't have a formal education in databases and this is a level of complexity I've not encountered.

The basic setup would be a database that contains tables `organism`, `biome`, and `strategy`. Each organism can employ multiple (survival) strategies, and strategies may or may not be unique to organisms. Organisms can exist in multiple biomes, and biomes may support multiple organisms. Biomes can support a subset of strategies, and strategies have additional sub-strategies based on the biome they're in.

This isn't too bad, I can just set up junction tables between each of the three main ones, but here's the part I'm not sure how to structure: the effectiveness of a strategy in a biome is variable based on the organism that's employing it. Would modeling this data require a three-way junction table holding that information in addition to the others? Is that safe?

I feel like there must be a better way, some pattern to build off of or something, but I've found nothing in my attempts to Google it up. Perhaps I'm just missing the standard terms for this kind of situation? Or maybe the way I'm thinking about it is just completely backward..

Any advice is much appreciated. If there's any additional information you need or if I should reframe the question, I'm happy to do so. Thanks again!",4,sql,2020-10-13
iuoynv,SqL Issue,"SQL issue, so the SQL server crashed Monday Morning. and has lost all users from it.
According to the DB developers the SQL DB’s has been running in Demo mode for last 6 months.
So when the DB fell over all information has been lost.
 
The Customer has Veeam backups. I have ran the backup from Sunday and tried reconnecting to the DB we are able to connect to the DB but the information is still missing is this something you have come across before?",2,sql,2020-10-13
iunql4,Can you set up log shipping between 2 SQL AAG clusters?,"I'm currently working on deploying a DR environment for a customer who wants to avoid paying for Enterprise licenses but wants to get around the 2 replica limit. We have 2 SQL standard servers right now in an AAG cluster, so aside from doing some kind of VM level replication, is log shipping to another AAG an option?",2,sql,2020-10-13
iunjpq,How long does it take to create a good query?,"I'm not sure if this question makes much sense, but currently I am doing an internship at a big company. One of my tasks is to help the finance people by creating sql queries.

And sometimes creating the query and making sure that everything works takes me quite a long time (10hours this week). I work with a huge amount of data and lots of columns but I feel like that I am too slow. Is that normal as a beginner? Or do I need to practice more? What are some tips to become faster at designing the queries?

I apologize for my english. I am not a naitive speaker.",4,sql,2020-10-13
iumw0q,What SQL server to best import excel data,"Hi brand new to the sub.

I've spent basically all of quarantine learning SQL. I went from dataquest to datacamp to coursera to freecodecamp doing all the free classes I could. I think I've gotten pretty good at ""thinking in SQL* and writing fairly complex queries. 

I use excel a lot for work, but I think I could do a lot of my work faster and more efficiently using SQL

Any recommendations for best server to communicate with SQL and how to go about it? I would be working with small files like definitely &lt;100000 rows.

I downloaded mysql but I'm having a hell of a time importing my files into it and I think it may be overkill for what I need it for currently 

I'm really brand new to effectively USING this tool..so any advice helps",2,sql,2020-10-13
iumnrq,Query the result set of a subquery?,"I have a query which should return a list of items by an assigned date value and the report is supposed to contain the item with the oldest date.

I am using a subquery to find the item with the oldest assigned date using MIN(date\_value).

For some items however I am getting multiple results back because they have the same assigned date value. What I want to do for this scenario is to then look at the date the item record was created and then only return the record with the oldest created date.

How do I run this second Created Date query on the result set of the first MIN(date\_value) subquery?

Thanks",6,sql,2020-10-13
iultse,Good repeatable way to add percentage of populated columns to a query of all tables/columns in a database?,"Apologies if my title is not clear. I also apologies for the odd formatting. Essentially, I am trying to create a query that does the following:

1. Lists all tables and columns in a database (this is the easy part, and I am currently accomplishing this by the following:

&amp;#x200B;

SELECT TABLE\_NAME, COLUMN\_NAME FROM INFORMATION\_SCHEMA.COLUMNS

&amp;#x200B;

2.  Add a column that includes, for each row, the percentage of rows for which the column ispopulated. So if the \[FOOD\] table has 35 rows, and the \[IS\_FRUIT\] column is populated for 13 of them, I'd want a column indicating .371/37.1% for that column. I know how to do this as well on a percolumn basis on a query of a table, but what I don't know how to do is to A): do it on all columnsand B): combine it with the results from the query in step 1.

Any advice would be appreciated. I am happy to clarify if needed as well, just let me know.",21,sql,2020-10-13
iulae9,Fact-Check: MongoDB can handle hundreds of simultaneous requests better than relational databases?,"A colleague of mine collects data from simulations using MongoDB. 

I'm personally not a huge fan of it despite having good experiences with other NoSQL-Databases. But I'm curious to learn more about it so I asked him about his motivation.

He stated in case of hundreds or thousands of simultaneous requests (inserts mostly, but also some select-statements) any relational database would break down or couldn't save/queue the bombardment any more.

I'm neither have a profound knowledge in the usage of SQL-databases under heavy duty, nor did I ever save tons of data of simulations in my databases, but I doubt they couldn't handle it. Also, as said I haven't worked with MongoDB so far, so I wouldn't be too eager to use it, but maybe I'm wrong.

I tried to do some basic research but I'm not really seeing the big issue. Can someone give me an unbiased opinion on this question?",4,sql,2020-10-13
iukjn2,Is transitive dependancy needed to be removed?,"in 3NF, transitive dependancy needs to be removed but it's been bugging me whether it is actually necessary to be done if the data is sensitive. please refer to the example below.

this was an example table that saved every transaction in a restaurant. here is one of the transaction table.

|Food|Amount|Price|Total Price|
|:-|:-|:-|:-|
|Chicken Salad|3|$4.99|$14.97|
|Sandwich|2|$2.10|$4.20|

&amp;#x200B;

if i remove transitive dependancy the following table would turn into

&amp;#x200B;

|Food|Amount|Total Price|
|:-|:-|:-|
|Chicken Salad|3|$14.97|
|Sandwich|2|$4.20|

&amp;#x200B;

|Food|Price|
|:-|:-|
|Chicken Salad|$4.99|
|Sandwich|$2.10|

&amp;#x200B;

but if the food prices would be changed then would previous transaction prices would be lost and if the total price is calculated based on the food table, then previous transactions cost and total prices would automatically be changed as well which is not what we want since data is lost.

how would i solve this problem without the lost of data on previous transactions on 3NF when doing transitive dependancy?",6,sql,2020-10-13
iugauz,Uploading/importing data into data containing foreign characters,"Okay I’ve tried everything. My data contains thai characters but for some reason Toad Oracle is unable to read the characters. It will only work if I import the table using the tool but it will take 21-24 hours. I tried using ALTER TABLE and make sure the csv file is in UTF-8, it didn’t work. I even tried using VBA delimiter generator for the file before uploading it on database using ALTER TABLE, still doesn’t work. :( Am I missing something ?",2,sql,2020-10-13
iueyfn,Copy database wizard - error database does not exists,"Hi,

I am using Copy database wizard for creating SQL Agent Job, where I copy database on same instance with new name. On my localhost (develop) it works, on our server does not. The problem is, the last step of package failed. In log i found error: InnerException--&gt;Database 'xxx' does not exist. Make sure that the name is entered correctly. 

So it looks Agent cannot create new .mdf and .ldf file, but when I use job for creating new database it works. I also give permission for folder (MSSQL$nameofinstance, i tried NT Service\\MSSQL$nameofinstance too), and files which i copy but nothing helps. 

I really tried to google it, but it looks like nobody ever have same problem. I know, I can do it by backup and then restore job, but I would like to find solution for this challange. Thank you for your answers.",1,sql,2020-10-13
iues49,Filtering in the ON clause.,"One thing I have been struggling with is seeing people filtering in the `ON` clause instead of `WHERE`. 

1. Can someone please give me an example of doing this in the `ON`?

2. Why would someone do it in the `ON` rather than `WHERE`?  

3. Is filter with `ON` common?",1,sql,2020-10-13
iucl15,[SQLite] sqlite3_prepare_v2 causes Segmentation fault (core dumped),"Hello,

I have a C program that is similar to the code given.

    #include &lt;stdio.h&gt;
    #include &lt;sqlite3.h&gt;
    
    int main( int argc, char *argv[] ) {
        sqlite3 *db;
        const char statement[64] = ""INSERT INTO element VALUES (?1, ?2, ?3);"";
        sqlite3_stmt **handle;
        const char **tail;
        int rc;
    
        ...
    
        rc = sqlite3_open(argv[1], &amp;db);
    
        printf(""This will print if previous code does not cause a segmentation fault.\n"");
    
        rc = sqlite3_prepare_v2(db, statement, -1, handle, tail);
    
        printf(""This will print if sqlite3_prepare_v2 does not cause a segmentation fault.\n"");
    
        ...
    }

Whenever I compile and then run the program, I receive the following.

    This will print if previous code does not cause a segmentation fault.
    Segmentation fault (core dumped)

I have tried and cannot for the life of me figure out why sqlite3\_prepare\_v2 causes a segmentation fault here. This puzzle appears to me even more complex given that a second C program similar to the code given does not cause a segmentation fault.

    #include &lt;sqlite3.h&gt;
    
    int main( int argc, char *argv[] ) {
        sqlite3 *db;
        const char statement[256] = ""WITH element1(hot, dry) AS (SELECT hot, dry FROM element WHERE name=?1), element2(hot, dry) AS (SELECT hot, dry FROM element WHERE name=?2) SELECT e.hot, e.dry, l.hot, l.dry FROM element1 e, element2 l;"";
        sqlite3_stmt **handle;
        const char **tail;
        int rc;
        
        rc = sqlite3_open(argv[1], &amp;db);
        rc = sqlite3_prepare_v2(db, statement, -1, handle, tail);
    
        ...
    }

I am compiling with gcc and the version of the C standard that I am compiling with is C99. I'm also able to provide more details about this issue if you think it is necessary for resolving it.

If anyone could help me learn what the conditions are for sqlite3\_prepare\_v2 to cause a segmentation fault, I'd greatly appreciate it. Thank you in advance.",1,sql,2020-10-13
iuarp9,What are some sources except sqlbolt.com to learn sql?,"My sqlbolt tuts are finished but there are lots of topics uncovered in that website. What are some other websites? (It is not in sqlzoo, and I didn't like w3schools).

I will like sth that is similar to sqlbolt. Or a book.",2,sql,2020-10-13
iua093,Need suggestions on a good (and free) software that can connect PostgreSQL and excel,"https://www.devart.com/odbc/postgresql/

Something like the above but free - does anyone know of any suggestions? 

I need one because everytime I try to connect to the PostgresSQL database in excel through the data tab, I get the following error:

Details: ""Microsoft SQL: A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: TCP Provider, error: 0 - An existing connection was forcibly closed by the remote host.)""

Alternatively if you know a solution to the above, that would also work. Thanks in advance!",2,sql,2020-10-13
iu8fwk,Best ways to learn SQL?,Hi! I work with a lot of data for work and feel there might be efficiencies if I learn SQL. Does anyone have any recommendations on how to learn SQL? Curious what worked for you to pick up SQL! Thank you!,39,sql,2020-10-13
iu687m,Top 10 Products With Weekly Revenue (Problem),"I wrote a query that is \*roughly\* outlined below. Basically the query spits out the revenue for the top selling product for a date range grouped into weeks. I would be using this query across a bunch of different categories that pull data from different websites and have cross referenced product IDs so I just blahblahblah through the joins for this example

I made this in an attempt to make a table that shows the top 10 performing products and their revenue for a date range hoping that if a product takes a dive over a date range that I would be able to see it easier. That's about where my skill ended... here are my problems.

1. I don't know if this is the best way to write this query, basically I wanted to write 1 big query that shows all 10 in a table, but I don't know how to do that. As-is it runs the query very quickly so I don't know if performance is an issue but if there's a better way to get the result I want then I'm all ears.
2. I don't know how to show the productID associated with the sales, so as it is now I get a single column of data from whatever row I select out of the column (shown in row 1 selected). I'd like to get 10 columns with associated IDs. Would I be writing this into a temporary table? HELP!

\*\*\*

DECLARE startdate enddate productcategory etc.

SELECT totalrevenue FROM table

JOIN abunchofotherstuff

WHERE productID = (SELECT productID FROM (SELECT ROW\_NUMBER() OVER(ORDER BY totalrevenue DESC) as 'RowNum'

JOIN someotherthings

WHERE RowNum IN (1)) T

GROUP BY DATEPART(WEEK, orderdate)

\*\*\*\*",1,sql,2020-10-13
iu3li3,What is the order of execution?,"I am confused how SQL is evaluated from left to right. Like the following statement, why shouldn’t the first line of the statement evaluated first then left join following then the last join ? 

select t1.* from t1


left join t2 on t1.fk = t2.pk


join t3 on t2.fk = t3.pk",0,sql,2020-10-13
iu38zw,SQL database hosting service,Is there any SQL hosting service provider? Just like Mlab for MongoDB? I need a free cloud hosting service to showcase my project.,2,sql,2020-10-13
iu1pe3,How to get the difference between two row that are the earliest and latest ?,"I have a table like these :

&amp;#x200B;

|Name |Score|Date|
|:-|:-|:-|
|A|10|1-SEP-2020|
|A|11|2-SEP-2020|
|A|13|3-SEP-2020|
|A|15|4-SEP-2020|
|B|102|11-SEP-2020|
|B|100|10-SEP-2020|

Output: 

|Name|Difference|
|:-|:-|
|A|4|
|B|2|

I want to get the difference of score between the latest and earliest row groupby their Name.",3,sql,2020-10-13
iu0xvw,Licensing SQL servers,"Hello all,

I apologize if this is the wrong sub for this but I am a bit confused as to how SQL is licensed.

I am building a new SQL server for clients and they have purchased the licensing through VLSC and just waiting on the order. 

Does it matter what product key is used if they have licensing for it? I have the option to download SQL 2019 from the VLSC download section but the ISO already has a product key in it. 

During the install, do I have to specify a certain product key for the client? Or does it not matter as long as they have purchased a license for it?",3,sql,2020-10-13
iu0rbn,How to test for MYSQL Database vulnerabilities in search fields - bWAPP," In this video walkthrough, we demonstrated how to conduct security testing for SQL Databases deployed to operate search fields. Specifically, we tested MySQL instance deployed on bWAPP for demonstration purposes. 

Video is [here](https://www.youtube.com/watch?v=X831LEEPJcY)",1,sql,2020-10-13
iu029i,Help Understanding Log File Growth,"Hey guys,

MS SQL 13.0.5337 (SQL 2016 SP2)

&amp;#x200B;

I am running into a problem where a database in FULL recovery mode is getting Log files that seem too large.

The database has about 30GB of data, and I am running an archive and delete process, after which about 10GB of data is archived and removed.  However the Log file has reached over 400GB in size.  

I've been doing some testing, and I do a full backup and then a transaction log backup before I begin testing.  I am having trouble tracking down when the log file just starts increasing in size.  

I have failed trying to Google Log File growth.  I just keep getting articles about how I should set up backups and other maintenance of the log file.  I'm just not sure how 10GB of data can translate into a 400GB transaction log.

\--

My archive and delete process is an application that is supposed to loop through all of a customer's tables in a database, find old data, insert it into an Archive database, and Delete it from the current database.

Because they have a lot of tables, I use C# to craft the queries.  There is not a defined query for each table.

The queries insert the identities of records below a date threshold into a temp table, and then using a while loop in C#, run the DELETE OUTPUT INTO the archive table for records that exist in the temp table, limiting it to 50,000 records at a time.

Each Loop begins and ends a transaction with the SqlCommand object",1,sql,2020-10-13
itxyop,Pairing Interview With SQL?,"Hi,

I have an interview later this afternoon in a format I've never done before. 

&amp;#x200B;

&gt;In this session, you'll work with an engineer on using data to improve the product. The objective will be to model some data and create a visual given a couple input data points. The interviewer will provide you with a base query to work off of that has some mistakes/poor assumptions, and your task will be to ameliorate the situation.

&amp;#x200B;

Anyone have any experience doing something like this, either as the interviewee or interviewer?",21,sql,2020-10-13
itxwis,Describing SQL on a resume?,"I'm applying to entry level analyst roles and decided to do a project with SQL and Power BI. I collected the data, created the database with MySQL and normalized it (to the best of my understanding at this point) then connected it to Power BI for a simple dashboard.

How do I go about effectively describing the SQL aspect of the project? I believe I did some decent beginner queries with views and subqueries but don't think I should list out all the details.

Thank you.",10,sql,2020-10-13
itx9ik,Expand and calculate two columns in two tables with no common field?,"So in one table, I have two columns: names and factors. In a second table, I have two columns: date and amount. I want to combine the two tables so that every name has multiple entries for each date, and each row has the factor multiplied by the amount (essentially allocating out amounts for each date by factor).

So for example, if I have 


John|0.2 

Bob|0.8 


in my first table and 

01JAN2020|500 

02JAN2020|200


in my second table, I want to combine them into the following table:


John|01JAN2020|100

John|02JAN2020|40

Bob|01JAN2020|400

Bob|02JAN2020|160",2,sql,2020-10-13
itx5sz,Where do I begin?,"Hello,

I’m looking through analytical jobs, and SQL is a requirement for nearly all of them. I want to learn SQL. Where did you begin, and do you have any advice? 

Thank you for your time.",1,sql,2020-10-13
itwmhy,Unable to create a new connection in Oracle SQL Developer,"Hi everyone, 

I'm unable to create a new database connection because the window that allows me to log in won't popup. I've tried using the green plus sign and re-downloading oracle multiple but nothing works. 

The windows for the ""Oracle NoSQL Connections"" and ""Database Schema Service Connection"" appear however, the ""Oracle Connections"" login window doesn't. 

I'm using a Mac and have JDK 8 downloaded. Any help would be appreciated.",2,sql,2020-10-13
itvo04,Schedule queries with changing dates?,"I'm new to SQL, using SQL Studio as my platform. 

I have several queries I run every few months with a date parameter BETWEEN 01-Aug-20 AND 30-AUG-20.

Is there an easy way to automatically schedule this every month with moving parameters? 
e.g next month on 1-Oct-20 I want the report to run automatically with 01-Sep-20 TO 30-Sep-20 and save this down in my directory automatically.",1,sql,2020-10-13
itt51w,"NOT NULL, DEFAULT,DROP, UNIQUE, CHECK, foreign key, primary key,SQL WHERE Clause LIKE Clause, SQL AND and OR operator,AND operator, AND Arithmetic Logical Operations in SQL. WHERE can I learn these topics?"," I am reading integrity constraints like NOT NULL, DEFAULT,DROP, UNIQUE, CHECK, foreign key, primary key etc+

SQL WHERE Clause LIKE Clause, SQL AND and OR operator,, AND operator, AND Arithmetic Logical Operations in SQL....But not finding good sources to learn this, So, I can't grasp this, I was learning from [sqlbolt.com](https://sqlbolt.com/) but they don't have tutorials related to this. HELP Me.",1,sql,2020-10-13
itruvp,[Oracle] How to use a result of SELECT as an argument for SELECT in another query,"Specifically, I'm trying to do this

I have Table X and Table Y, Table X contains column names for Table Y

This is what I have - result of query 1 from table X:

    COLUMN_NAME
    ----
    a
    b
    c

Now I want to **SELECT a, b, c FROM Y**

but instead of writing SELECT a, b, c, I want to use Result 1 above (because in this example, it's a b c, but in the actual case I have like 100 rows - after using WHERE etc)

I tried to do it as a subquery but I might be too rusty on it... I can't get it to work

My stupid code that doesn't work:

    SELECT (SELECT column_name
    FROM all_tab_cols
    WHERE owner = 'OPERA'
    AND column_name NOT LIKE 'UDF%'
    AND table_name = 'RESERVATION_NAME'
    ORDER BY column_name)
    FROM reservation_name

all_tab_cols is Table X and reservation_name is Table Y...",1,sql,2020-10-13
itpsm0,Question about best way to store data,"Hello all,

I am new to SQL and am using mySQL to create a database of match numbers and players that appear in that match. The problem is the number of players that appear in a match can vary, from 1-9. I will be querying for the player and then wanting to get the match numbers they appear in. What is the best method of storing this data? Should I store it so that the values of the table are playerID and then one match they appear in and then enter this into the dataset multiple times? Or would it be best to store the matchID and then all of the players in that match, leaving NULL if there are less than 9? Any help would be greatly appreciated!",2,sql,2020-10-13
itmdtq,Key Differences Between NoSQL &amp; SQL : MySQL &amp; MongoDB,,21,sql,2020-10-13
itkorj,Atler MySQL,I’m trying to a foreign key to my table. Can I do that with alter?,1,sql,2020-10-13
ithsre,Need help with INSERT INTO error,"I've been banging my head against the wall trying to figure out the problem with the mySQL syntax I have. I'm getting the error:

**{""message"":""You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '?, ?, ?,?,?,?,(SELECT account\_id FROM accounts WHERE account\_name = ?),?,?,?,UUI' at line 1""}**

Here's the code on the backend I have set up:

    const Customer = function(customer) {
        this.customer_id = customer.customer_id;
        this.contact_title = customer.contact_title;
        this.contact_first = customer.contact_first;
        this.contact_last = customer.contact_last;
        this.referral_source = customer.referral_source;
        this.initial_contact_date = customer.initial_contact_date;
        this.job_title = customer.job_title;
        this.account = customer.account;
        this.phone = customer.phone;
        this.email = customer.email;
        this.comments = customer.comments;
        this.created_by = customer.created_by;
        this.status = customer.status;
    }
    Customer.create = (newCustomer, result) =&gt; {
        console.log(newCustomer);
        const sql = 'INSERT INTO customers VALUES(UUID_TO_BIN(?, 1),?,?,?,?,?,?,(SELECT account_id FROM accounts WHERE account_name = ?),?,?,?,UUID_TO_BIN(?, 1),?);';
        db.query(sql, newCustomer, (err, res) =&gt; {
            if (err) {
                result(err, null);
                return;
            }
            result(null, {
                id: res.insertId,
                ...newCustomer
            });
        });
    };

I can't for the life of me figure out where the error is, as it works on the workbench. Any help would be *much* appreciated, thanks!",3,sql,2020-10-13
itg2z8,"[PostgreSQL] Given a set of values S for a variable VAR, from which I can obtain other values for other variables (P, V, O) via parsing each item in S, create an overlap matrix on counting unique U's under each of P, V, O.","Client has a set of ad campaigns, for each of which we will create a overlap matrix indicating how many unique users were hit under a certain base group (Audience or Tactic), and also from which Partner (P) and through which Vendor (V) the ad was served (user was hit).

We have access to the *campaignID* and *partnerID* variables, as well as a third variable *placementID.* For all of the *ID* variables, we have the corresponding *Names* in their own tables on which we can join (or later just substitute in Python). **The** ***placement*** **variable contains values, each of which are effectively strings of P, V, O, and other stuff joined by '\_'.** This is the only way we can obtain info on V and O. There are slight discrepancies between the P found as *partnerName* and the P found in *placementID --* there's mostly a one-to-one correspondence, but we have instances of, say, ""Company 1"" and ""Company One"" under *placementID*, but simply no such bullshit under *partnerName*, hence the preference for it to lessen our post-processing load.

*placementName* would look like ""Partner\_Vendor\_randomCrap1\_randomCrapN\_Audience\_Tactic"".

We have two scripts already in house for making an overlap matrix: 

1) an R script that takes a dataframe where each column could correspond to a single thing (O - Audience or Tactic) and it's either True or False for whether the ad was delivered under that criterion, and the final column is the number of unique users U that fall under that. It goes through all rows (all combinations of having been targeted) and produces an overlap matrix.

2) a SQL script that supposedly already makes an overlap matrix, but doesn't really because it doesn't say that there's a 100% overlap between a pair of the same input value. Script at bottom of post.

The DBA for our PostgreSQL instance has a set of rules we must follow, one of which forbids using ""DISTINCT"" anywhere, so I cannot have a *COUNT(DISTINCT userID)* to make things easier for us.

Given all of this, how may we effectively pull data, which has *partnerName*, *placementName,* and *U*, and be able to parse *placementName* into columns of V and O while preserving U so that things can be re-aggregated?

Ex: Pull (*partnerName*, *placementName, UU*) as ('Company1', 'Company1\_Vendor1\_Crap1\_CrapN\_Audience\_Tactic', 12345) then break it into (*partner*, *vendor, audience* or tactic*, 12345*).

The matrix resulting from this query will be loaded into pandas/Python where the parsing and reaggregating will occur.

We/I really appreciate your help.

Thank you.

&amp;#x200B;

    WITH subquery AS (
        SELECT
            a.userID, b.partnerName, c.placementName
        FROM impression_table a
        LEFT JOIN match_table_partner b
            ON a.partnerID = b.partnerID
        LEFT JOIN match_table_placement c
            ON a.placementID = c.placementID
        WHERE a.campaignID = '123456789'
        AND other_conditions
        GROUP BY 1,2,3
    )
    
    SELECT
        t1.partnerName AS partner1,
        t1.placementName AS placement1,
        t2.partnerName AS partner2,
        t2.placementName AS placement2,
        COUNT(*) AS unique_users
    FROM subquery AS t1
    CROSS JOIN subquery AS t2
    WHERE t1.userID = t2.userID
    GROUP BY 1,2,3,4;",1,sql,2020-10-13
itctxa,Question about SQL etc.,"I work in a corporate job and am going to be moving into a data analytics position. The people I spoke to were talking about SQL and SQL Server.

I don't really know what any of that is about or why SQL would be used.

Can anyone give some examples and point me in the direction of some resources?",1,sql,2020-10-13
itc4av,Relational algebra help,,1,sql,2020-10-13
itc2re,What is the difference between : From tablename as T vs From tablename T ??,"&amp;#x200B;

[https://stackoverflow.com/questions/2111384/sql-join-selecting-the-last-records-in-a-one-to-many-relationship](https://stackoverflow.com/questions/2111384/sql-join-selecting-the-last-records-in-a-one-to-many-relationship)

Hi all , I am sql newbie. I am trying to understand the comment of above link comment by  [Adriaan Stander](https://stackoverflow.com/users/144424/adriaan-stander) :

    SELECT  c.*, p.* FROM    customer c ............

I want to ask is there any difference between the following ?

1. `SELECT  c.*, p.* FROM    customer c`

2. `SELECT  c.*, p.* FROM    customer  as c`

Also, is it kind of ""renaming"" ?",1,sql,2020-10-13
itbx48,Combine two different queries to get a sum?," 

I'm trying to ultimately get a sum of the two ""Total"" columns. The issue is that this eventual sum is made up of two different tables. Basically it's tbl1-col1 + tabl2-col1.

I'm attempting a UNION ALL, but the issue is that for me to pull the right data from both queries to be accurate in their Total cols, I need to select different parameters for both queries.

Obviously I'm working with different datatypes and header titles, so UNION isn't going to work the way I want it to.

    SELECT 
    	RECEIVABLE_LINE.AMOUNT AS 'Total',
    	RECEIVABLE_LINE.INVOICE_ID, 
    	RECEIVABLE_LINE.LINE_NO,  
    	RECEIVABLE_LINE.GL_ACCOUNT_ID, 
    	RECEIVABLE.INVOICE_DATE, 
    	RECEIVABLE.TYPE
    
    FROM RECEIVABLE_LINE INNER JOIN RECEIVABLE ON RECEIVABLE_LINE.[INVOICE_ID] = RECEIVABLE.[INVOICE_ID]
    WHERE RECEIVABLE_LINE.GL_ACCOUNT_ID LIKE '4%'
    AND RECEIVABLE.INVOICE_DATE &gt;= DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0)
    AND RECEIVABLE.INVOICE_DATE &lt; DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE())+1, 0)
    
    -----------------------------------------------------------------------------------
    
    SELECT 
    	SUM(SHIPPER_LINE.USER_SHIPPED_QTY*CUST_ORDER_LINE.UNIT_PRICE) AS 'Total',
    	SHIPPER_LINE.USER_SHIPPED_QTY,
    	CUST_ORDER_LINE.UNIT_PRICE,
    	SHIPPER.INVOICED_DATE,
    	SHIPPER.SHIPPED_DATE
    	
    FROM SHIPPER_LINE INNER JOIN SHIPPER ON SHIPPER_LINE.PACKLIST_ID = SHIPPER.PACKLIST_ID
    LEFT JOIN CUST_ORDER_LINE ON SHIPPER_LINE.CUST_ORDER_LINE_NO = CUST_ORDER_LINE.LINE_NO AND SHIPPER_LINE.CUST_ORDER_ID = CUST_ORDER_LINE.CUST_ORDER_ID
    WHERE SHIPPER.INVOICED_DATE Is Null
    GROUP BY SHIPPER_LINE.USER_SHIPPED_QTY, CUST_ORDER_LINE.UNIT_PRICE, SHIPPER.INVOICED_DATE, SHIPPER.SHIPPED_DATE
    ORDER BY SHIPPER.INVOICED_DATE

What are my options at this point?",1,sql,2020-10-13
it9x0p,Looking for resources for SQL Query whiteboarding/interview,"Hello and happy Tuesday!

I have an interview tomorrow for a job that requires intermediate-to-advanced MS SQL white-boarding, and while I am mostly confident in my skills, I really suck at white-boarding.  From my understanding, the interview will focus heavily on queries, stored procedure creation/usage and query performance optimization.

My last interview where I had to whiteboard, I completely locked up, didn't even know how to explain my thought process.  I suffer from ADHD as well as anxiety, and would love to just watch a video or read an article on how to approach white-boarding sessions so I have something structured I can lean on when explaining how to produce a query.  I have done some googling and checked out youtube, but haven't found anything that really felt substantial.

Can anyone point me to any resources on how I should go about structuring my thought process for my upcoming interview?",1,sql,2020-10-13
it8xr2,[MS SQL] Yesterday I could not spell DBA...,"...today I'm still not one.  I am nonetheless, responsible for half a dozen SQL Server 2016 Enterprise servers.

I've been in IT for a few decades, and for most of the last decade as a Windows (and later VMware) Engineer, been doing minor SQL break/fix because I worked nights and real DBAs taught me what I needed to know to avoid waking them up.

Now I find myself working for a cash-strapped new group where the environment we maintain was set up by a different group that is now legally prohibited from touching anything, and I am (somehow) the SQL expert.  Mostly because I didn't run fast enough at the right time.

That's the good news.  The bad news is the group that set everything up mostly did it wrong/badly, and then didn't pass on most of the passwords.  I broke into all 6 SQL servers (with approval from management) by changing the password on a domain service account that we used for an application on one server, using it to give myself SQL admin, and then discovering the account used for backups also had SQL admin (we didn't have that password either, but we do now that I changed it), and using that to break into the others.

One pair of the servers is set up as a Microsoft cluster, the rest are standalone (it looks like one pair might have been intended for asynchronous replication, but that was never actually done).

We were promised a test environment which was never delivered, so everything is being done in production.

I ended up in charge of SQL because after I was brought in, it was mentioned that SQL was filling up the log drive on one server (and I correctly diagnosed that as ""SQL backups not running"" and was eventually able to break into the server and fix it (the jobs had been set up under the ID of someone who was no longer in AD)).

So now my (immediate) problems, which are elementary for an actual DBA, but difficult for me:

1. Patching.  I know that SQL patching is not as simple as just ""run patch, done"" like OS patching, and I've looked at some resources on how to go about it, but I don't know enough to know which resources are solid.  I know that Microsoft is usually good for a ""basic"" process, but their processes often leave out important steps in real world environments.  One of my early tasks is that I have two servers that need to be on the same patch level, one of which is running SQL Server 2016 Enterprise CU11, and the other of which is running CU7.  Can I just install CU11 and security patches to bring them to the same level, or do I need to install the intervening cumulative updates?

2. SQL Downgrade.  I need to downgrade 2 servers from Enterprise to Standard.  I understand this will involve uninstalling and reinstalling SQL.  The servers are backed up regularly (our backups actually work, yay!), and are virtual, so I can snapshot them before I take the plunge.  I don't have to do both at once, and I have one that isn't actually in use that I can start with.  I've got a couple (what I think are) good guides on how to do that.  I'm mostly looking for gotchas like certificate issues, but if someone can point me at the best guide for SQL downgrade from Enterprise to Standard, that would be useful.

On the bright side, everything else is so broken that I'm not under extreme time pressure and I have a little time to plan - but if there's a knowledgeable person or two willing to point me in the right direction, I'd appreciate it.",35,sql,2020-10-13
it819g,[postgresql] select latest date earlier than an array of dates,"I have a bunch of data with rows with somewhat randomized dates. For this example, let's suppose my data is as follows:

`my_table`: 

ID | Color | Date
---|---|----
001 | red       | 2020-01-13
001 | green   | 2020-01-02
001 | blue     | 2020-02-27
001 | white   | 2020-02-16
001 | black   | 2020-03-02
001 | orange | 2020-03-10
002 | blue    | 2020-01-30
002 | black  | 2020-01-10
002 | purple | 2020-01-14
002 | pink   | 2020-02-13
002 | green | 2020-03-24
002 | white  | 2020-03-23


What I'd like is something like the following:

    
    SELECT
      A.*,
      B.*,
      C.*
    FROM (
      (SELECT DISTINCT ON (ID) *
      WHERE Date &lt; '2020-02-01'
      ORDER BY Date DESC) A,

      (SELECT DISTINCT ON (ID) *
      WHERE Date &lt; '2020-03-01'
      ORDER BY Date DESC) B,

      (SELECT DISTINCT ON (ID) *
      WHERE Date &lt; '2020-04-01'
      ORDER BY Date DESC) C
    )

This should return the latest row for each ID prior to the specified date, *for each date*. In the above example, the result set should be:

ID | Color | Date
---|---|----
001 | red       | 2020-01-13
002 | blue    | 2020-01-30
001 | blue     | 2020-02-27
002 | pink   | 2020-02-13
001 | orange | 2020-03-10
002 | green | 2020-03-24

The above example is tractable because I only have 3 dates, but for my project I have something like 300 dates. I'd like to pass an array of dates and, for each distinct ID, select the most recent row prior to each date. Is this possible to do without doing 300 separate queries?",2,sql,2020-10-13
it6kwd,Our POS Systems uses SQL Server 2005. Concerns?,"We own a retail store and our POS-system\`s  database runs on an SQL Server 2005.  
All hardware runs Windows 7 because the software used for our customer sales (cashier POS + database) requires Windows 7 since newer Windows is not supported by Microsoft. Now that Microsoft is not even supporting Windows 7 it brings me to these concerns.

Aside from security issues, the supplier of this sales system (register/sales client software, database-sostware) have many times had  trouble with support when we need it.  
We have often lost sales due to various problems (item counts, other software implementations etc..).

I don\`t want to name the supplier, (I\`ll pm the name if you want to know) but what I can say about the supplier is:

* No implementation of mobile devices (so that we can look up items and prices as we walk around the store. It says on their website that they have just made an iPad app, but when I reach out the salesperson he told me he did not know any about that. Maybe its not finished yet?
* It is very hard to understand the GUI and to get sales reports. (maybe its just us, but all co-workers agree).
* 6-7 mouse-clicks on the GUI to add a discount on a sales item. Should really be just a few I.M.O.
* Navigating the GUI in general is unintuitive (our opinion at least). 
* This is a rather small supplier located in Scandinavia, so none of the big guys.
* We can\`t upgrade any of our computers to Windows 10 because none of the software from our supplier can run on it.

Is this normal or should we expect more from our supplier? I guess what I am asking is.. are businesses still running SQL Server 2005 and is it normal to have problems upgrading and re-implementation software code-bases?  


I don\`t have the qualification to say whether this is a normal thing or if we should look for a different supplier. Maybe any SQL masters here have any advice?",17,sql,2020-10-13
it61tv,Distributing deposits among debts systematically. (Help with implementing confusing business logic),"## Explaination

Bear with me here as I try to explain this. 

The problem I'm trying to solve can be thought of as distributing money to a hierarchy of debts that are ordered by priority. JOINing a Deposit table to a Debt table, I want to determine how much of each Deposit is contributed to each Debt, while maintaining a ""conservation of currency"".

Hopefully a step by step example will clear things up a bit:

### ""Business Logic""

[* supplementary table illustration *](https://i.imgur.com/jYDdi8l.png)

Say the first Debt (Debt:1) in the Debt table is $100, and the second Debt (Debt:2) is $50. The first Deposit (Deposit:1) in the Deposit table is $120, and Deposit:2 is $70.

Firstly, Deposit:1 is contributed to the Debt on the first row, Debt:1. So Deposit:1 is subtracted from Debt:1, $100 - $120. Debt:1 is now $0, and Deposit:1 has a remainder of $20. For this row, $100 was contributed from Deposit:1 to Debt:1.

Deposit:2 is $70, but Debt:1 is already at $0. $0 - $100, so nothing from Deposit:2 is contributed to Debt:1. For this row, $0 was contributed from Deposit:2 to Debt:1.

The $20 leftover in Deposit:1 then reduces Debt:2 to $30, $50 - $20. leaving Deposit:1 at $0. For this row, $20 was contributed from Deposit:1 to Debt:2.

Lastly, Deposit:2 is used to reduce Debt:2 to $0. $30 - $70. leaving $40 leftover in Deposit:2. For this row, $30 was contributed from Deposit:2 to Debt:2.

Hopefully, after that attempt of mine at business logic you're not as confused as I have been.

## View

Here's the view on which I've been struggling to create a query with the desired behaviour:

    CREATE TABLE ""Debt"" (
        ""DebtID""	INTEGER NOT NULL UNIQUE,
        ""DebtAmount""	INTEGER NOT NULL,
        PRIMARY KEY(""DebtID"" AUTOINCREMENT)
    );

    CREATE TABLE ""Deposit"" (
        ""DepositID""	INTEGER NOT NULL UNIQUE,
        ""DepositAmount""	INTEGER NOT NULL,
        PRIMARY KEY(""DepositID"" AUTOINCREMENT)
    );

    INSERT INTO ""Debt"" VALUES 
        (1, 100),
        (2, 200);

    INSERT INTO ""Deposit"" VALUES 
        (1, 75),
        (2, 120);

    CREATE VIEW DebtDeposit AS
    SELECT DebtID, DepositID, DebtAmount, DepositAmount FROM Debt JOIN Deposit;

I'm not sure if this is anywhere near the best way to do this, but my aim has been to create a query that will produce an output that looks like [this](https://i.imgur.com/rJx7Vx0.png).

Using the same logic from above you can see that:

 1. On the first row, a $75 deposit is contributed to a $100 debt, leaving $25 remaining in the debt and $0 in the deposit.
 2. Second row, $120 from the second deposit is used to reduce the rest of the first debt from $25 to $0, leaving $95 remaining in the second deposit.
 3. Third row, there is $0 remaining in the first deposit to use on the second debt of $200, so the second debt remains at $200.
 4. Last row, the debt of $200 is reduced by the second deposit which still has $95 left over. So the second debt is reduced to $105, leaving $0 in the second deposit.

From this you are supposed to be able to determine the amount contributed for each row by comparing the DebtAmountRemaining to it's previous value. But that's not very trivial to deduce from this output. Leading me to begin to suspect that I'm headed down completely the wrong path.

## Call for help

I've diagnosed myself with a severe case of tunnel-vision and I'm really hoping to get some fresh eyes and wiser minds to give me advice on this problem. I'm suspicious that there is a dead-simple way to do this with SQL (I'm using SQLite specifically) that I have become blind to.

The really mind-bending thing about this problem is that the two columns DebtAmountRemaining and DepositAmountRemaining are dependent on each other, it's not a simple matter of a `SUM(...) OVER (...)` query as far as I'm aware. I've attempted a recursive query using `WITH RECURSIVE`, where the rows of DebtAmountRemaining and DepositAmountRemaining would be generated iteratively, with no coherent results either.

I've been trying to get this working for a personal project of mine for a couple of weeks now, and I'm reaching my wit's end with it. So if anyone could give me some pointers, tips, new perspectives, or even a solution to this I would be very grateful!

Hopefully once I get a better grasp on this problem, I can rephrase the title so that others who are pursuing a similar task can find answers as well :)",7,sql,2020-10-13
it2n83,What’s the best practice for modelling multiple user types in SQL?,"So I’m creating a Postgres database, the app will have two main types of users, a customer and a vendor/service provider. Should I model this as having one main user table with all the same info for both user types and then have a role column in there as well. Then I’d have two other tables one for the customer and the other for vendor and both have the user id as the foreign key. So three tables, one Main user one with information that is included for customers and vendors as well as their role. Then two OTHER tables that are related to the user table via a user id foreign key with info SPECIFIC to the user type. Is there a better way of doing this or is this efficient?

The only thing I don’t like about this is if for some reason I need to join the corresponding customer or vendors table from a query on users I can’t so In a case where I don’t know the role of a user I’d have to first get the users role and then query their corresponding table. But in a bunch of cases for my app I should know the role as there will be role specific screens that only a customer or vendor can access. But not all screens are like that

EDIT:
I am considering either having a column in users called user_type_id and a table called user types which has Id and type which would be either customer or vendor. 
OR
I came across Postgres inheritance so the two tables customer and vendor are both users so they inherit users tables while keeping their own stuff",12,sql,2020-10-13
it1ql5,SQL Careers,"Hey Everyone,

I'm trying to figure out the next step in my career. I'm currently a GIS analyst for a consulting firm making 60k and after 10 years, I think I've reached around the top of where that specific job description can take me. I've used SQL and Python on a daily basis for the last five years and have management experience for the last year. I had hoped to stay with my current company, but when I was promoted to management, the pay didn't increase with the responsibilities. I'm looking for jobs I should be looking up and applying for with a SQL and Python background. From research, I think BI is a big one, but just looking for ideas. The job doesn't have to be GIS related, and I think my SQL and Python skills are probably more valuable than my GIS skills, so I'm ok leaving it. 

Thanks in advance for all the help.",2,sql,2020-10-13
isxk6z,Datacamp Learning Path,"Hi - I recently started to take a couple of SQL classes in Datacamp.  I have used MSSQL, DB2, and postgreSQL through my career but mostly from an application support/implementation engineer point of view, simple queries, some joins and subqueries, inserts, etc.  A fair bit of admin work also doing data migrations, backup/restores, SQLagent jobs in MSSQL.

But that is it, I am not familiar with stored procedures aside from specific instructions on how to run, scripting, etc.

I am curious what other folks think or what their experience has been with datacamp as far as a learning path.  My goal in the end would be visual presentation, specifically gaining experience with Tableau.

I feel like I should gain a better understanding of SQL. 

I completed the Introduction to SQL and Joining Data in SQL classes.  Should I continue the SQL Fundamental skills track?  Jump into the Data Analyst with SQL Server Career Track?  Or go right for Tableau or Python?

Look forward to hearing some others' opinions and thanks in advance.",14,sql,2020-10-13
isuq12,How to deal with foreign id that could point to multiple different tables?,"I'm using [TypeORM](https://typeorm.io/#/) with `sqlite`.

I'm creating a tool that stores all sorts of Media files such as Videos and Images and lets the user enter some custom info.

I've simplified this example to 2 file type- and 1 custom info tables:

* Asset - custom user info
* Image - info about a image
* Video - info about a video

There are many things to consider but my main challenges are as follows.

* Question 1) How do I define the relationship between Asset-Image and Asset-Video etc.?
   * According to [this Stack Overflow discussion](https://dba.stackexchange.com/questions/140518/best-way-to-store-a-value-which-could-be-multiple-types/140522#140522) I shouldn't create a generic *item* column on the Asset entity, because it could be linked to several different kinds of items which is bad practice. It mentions to use views to combine the different tables but I'm not sure how to write that in my TypeORM entity definitions without creating said *item* column.
   * My current solution would be to have an `itemTypeId` on the Asset to determine if it's linked to either an Image or a Video entity 📷 (see attached image)
   * The disadvantage of this approach is that I in my TypeORM entity definitions can't define any relationships because `itemTypeId` is just a number and it doesn't know which other table to look for the `itemId` in before a row - with both id fields filled - is created.
* Question 2) How do I create a table/view to show all Assets (Images, Videos etc.) in one table?
   * Manually I'd probably create an **AllAssets** view by manually UNION'ing all item types:

&amp;#8203;

    CREATE VIEW AllAssets AS
    SELECT a.id, a.itemTypeId, a.name, a.description, i.filePath, Null
    FROM Asset AS a
    INNER JOIN Image as i
    ON a.itemId = i.id
    UNION
    SELECT a.id, a.itemTypeId, a.name, a.description, i.filePath, i.frames
    FROM Asset AS a
    INNER JOIN Video as i
    ON a.itemId = i.id

* But it seems to me like there should be a ""procedural"" way to automatically check which table to look for the `itemId` in...

Any tips or enlightenment would be greatly appreciated &lt;3",2,sql,2020-10-13
isu2jl,Get 1st day of the month to yesterday?,"BETWEEN DATEADD(month, DATEDIFF(month, 0, GETDATE()), 0) AND dateadd(day,-1, cast(getdate() as date))

&amp;#x200B;

Any help?",1,sql,2020-10-13
istubx,How to make my queries more effiencient: CTEs vs join only.,"Hi! So I'm trying to make my queries as efficient as possible. When should I use a CTE vs putting all the code in a left join?
I'm working on making a few of my queries more efficient since I'm more knowledgeable than before and I noticed sometimes I can switch not make a CTE and do a left join only or I can be lazy and paste my CTEs and also do a left join.

Does it matter which method I use?",15,sql,2020-10-13
istlm4,Question,"I have been trying to get this query correct, but i just cant get it. 

I have multiple columns, but the three of interest are user_id, date, and model. Model has a few different values, a, b, and c. I need to get all user_id that only have one occurrence of b in the model column throughout the entire history, and this one occurrence should be the user with the latest date. Basically model b should mean the user left, however there are occurrences where they have left and came back so b is not the last model submitted even though it exists in the history.",9,sql,2020-10-13
isthvm,Why can't I use %type when creating a view?,"My question:

Can I use an anchored data type when I create a view?  Do I need to use a DECLARE statement?

&amp;#x200B;

My situation:

I have DDL statement that creates a table called CPP. At this point columns like rfu1, rfu2, mean\_rfu, charge\_ph7\_4 have a data type that's been declared.

I have some code that is used to insert new data into that table. For the insertion, I read a CSV document into a view and then select data from that view and insert it into the table.  Is there a way to not re-declare the data types in the view and just use table.column%type?

&amp;#x200B;

In my code below, when I replace

    rfu1 NUMBER (6, 2),

with

    rfu1 cpp.rfu1%type,

I get an error:

    Error report -
    ORA-00911: invalid character
    00911. 00000 -  ""invalid character""
    *Cause:    The identifier name started with an ASCII character other than a
               letter or a number. After the first character of the identifier
               name, ASCII characters are allowed including ""$"", ""#"" and ""_"".
               Identifiers enclosed in double quotation marks may contain any
               character other than a double quotation. Alternate quotation
               marks (q'#...#') cannot use spaces, tabs, or carriage returns as
               delimiters. For all other contexts, consult the SQL Language
               Reference Manual.
    *Action:   Check the Oracle identifier naming convention. If you are
               attempting to provide a password in the IDENTIFIED BY clause of
               a CREATE USER or ALTER USER statement, then it is recommended to
               always enclose the password in double quotation marks because
               characters other than the double quotation are then allowed.

My current code:

Step 1: Create view from external table

    CREATE OR REPLACE VIEW insert_p_cpp AS 
    SELECT * FROM EXTERNAL ((
        pk_cpp VARCHAR2 (50),
        rfu1 NUMBER (6, 2),
        rfu2 NUMBER (6, 2),
        mean_rfu NUMBER (6, 2),
        charge_ph7_4 NUMBER (2),
        hydropathy NUMBER (3, 1))
        
        TYPE ORACLE_LOADER
        DEFAULT DIRECTORY cpp_data 
        ACCESS PARAMETERS (
            RECORDS DELIMITED BY NEWLINE
            SKIP 1
            BADFILE cpp_data:'badflie_view_before_insert_cpp_.bad'
            FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '""'
            MISSING FIELD VALUES ARE NULL 
            ) 
        LOCATION ('cpp.CSV')
        REJECT LIMIT UNLIMITED) ext
        WHERE NOT EXISTS (
            SELECT * FROM cpp c
            WHERE c.pk_cpp = pk_cpp );

Step 2:  Insert into a table from that view.

&amp;#x200B;

    CREATE OR REPLACE PROCEDURE insert_into_p_cpp AS
        records_in_source NUMBER;
        record_in_err_table NUMBER;
        records_in_target_before NUMBER;
        records_in_target_after NUMBER;
    BEGIN
        
        DELETE FROM ERR$_CPP;
        SELECT COUNT(*) INTO records_in_source FROM insert_p_cpp;
        SELECT COUNT (*) INTO records_in_target_before FROM cpp;
        
        INSERT INTO cpp 
            (
            pk_cpp,
            rfu1,
            rfu2,
            mean_rfu,
            charge_ph7_4,
            hydropathy) 
        SELECT 
            pk_cpp,
            rfu1,
            rfu2,
            mean_rfu,
            charge_ph7_4,
            hydropathy
        FROM insert_p_cpp
        LOG ERRORS REJECT LIMIT UNLIMITED;
        
        COMMIT;
        SELECT COUNT (*) INTO records_in_target_after FROM cpp;
        SELECT COUNT (*) INTO record_in_err_table FROM ERR$_CPP;
        DBMS_OUTPUT.put_line('Results for inserting into cpp');
        DBMS_OUTPUT.put_line('Records in source file: ' || (records_in_source));
        DBMS_OUTPUT.put_line('Records updated: ' || (records_in_target_after - records_in_target_before));
        DBMS_OUTPUT.put_line('Records rejected: ' || (record_in_err_table));
    END insert_into_p_cpp;
    /",1,sql,2020-10-13
issagy,Question,Hello! So I have to create this query where I have two tables. One is about the employees in a company and the other about the company projects. There are some employees that don't have a project assigned. My question is: Is there a way to extract only the employees that are working on projects?,3,sql,2020-10-13
ispjz3,Question: Joining two data sets with date conditions,"Hi everyone,

I'm pretty new with SQL, and I'm struggling to figure out a seemingly simple task. 

&amp;#x200B;

Here's the situation:

	• I'm working with two data sets

		○ Data Set A, which is the most accurate but only refreshes every quarter

		○ Data Set B, which has all the date, including the most recent data, but is overall less accurate

	• My goal is to combine both data sets where I would have Data Set A for all data up to the most recent quarter and Data Set B for anything after (i.e., all recent data not captured in Data Set A)

&amp;#x200B;

For example:

	• Data Set A captures anything from Q1 2020 (January to March)

	• Let's say we are April 15th

	• Data Set B captures anything from Q1 2020 to the most current date, April 15th 

	• My goal is to use Data Set A for all data from January to March 2020 (Q1) and then Data Set B for all data from April 1 to 15

&amp;#x200B;

Any thoughts or advice on how to do this? Potentially a join function along with a date one? 

Any help would be much appreciated.

&amp;#x200B;

Thanks in advance for the help.",1,sql,2020-10-13
isogi0,How to pull back all hours from two different tables,"Hi Guys

&amp;#x200B;

So I have two tables that are grouped by a date and an hour column (so date row could be 14/09/2020 and hour could be 17:00)

I'm trying to join the two tables together and sum a few of their columns, but in my query I only care about date, not hour so I'm only grouping by date.

Now table B has a row for 14/09/2020 at 08:00 however table A (which is the base table in the query) doesn't have that hour (it does have rows for that day however).

So when I join table B onto table A I lose that 08:00 row and all the data with it.

I tried creating a CTE that returned every hour in the day and joined on that, but table B still has to join onto table A for the date so I still lose that 08:00 row.

Is there a way to keep every hour in the day when I join the tables together?

This is a simplistic example of the query I have currently (I removed the aggregation to see which rows are missing):

\*Edit\* I did try using a FULL JOIN too but that didn't help.

    WITH times AS
    (
    SELECT x::time
    FROM   generate_series(timestamp '2000-01-01 00:00'
                         , timestamp '2000-01-01 23:59'
                         , interval  '1 HOUR') t(x)
    )
    
    
    SELECT times.x, *
    FROM times t
    LEFT JOIN tableA a ON a.hour_of_day::TIME = times.x
    LEFT JOIN tableB l ON a.date = b.date AND times.x = b.hour_of_day::TIME AND b.user = a.user
    
    WHERE a.date = '2020-09-14'
    AND a.user = 5

Any help would be greatly appreciated.

&amp;#x200B;

Cheers",19,sql,2020-10-13
isn8td,Joining to a first/next date only,"I am working with a situation where two separate systems do not have a good/true key between them. There is a referral system and a customer procedure system (medical). They share a CustomerID, but I am trying to, as best as possible, tie a customer referral to a procedure. If all I have to join between tables is a CustomerID and a RefDate and ProcDate, how do I go about joining a referral to ONLY the next procedure for that CustomerID?",1,sql,2020-10-13
ismn54,Need help with using DBeaver PostgreSQL,"For some reason (using the latest version of 7.2.0 DBeaver) I can't for the life of me find the option to create a new table/view. I've googled around and found guides but wherever the guide shows right clicking giving you the ""create new table"" option, I don't have it on my end.

New to all of this stuff so getting stuck on such a basic/simple first step is beyond frustrating. Someone help please!",5,sql,2020-10-13
ismjvn,Career progression: Where can I go from here?,"I have been working at my current company for about a year and a half now out of college (MIS degree) as a software implementation and support specialist. Essentially I do a lot of data conversions from one software to our software in Postgres and complete tasks via a ticketing system to support our customers if there are DB related issues. Based off of this,  I know how to manipulate data and have intermediate querying skills. Where in the world do I go from here?

I am interested in BA roles because of my education in MIS, but also really enjoy the process of data conversions and retrieving data for reports and such. I have never really had a solid background in programming because I focused most of my studies into business. 

Has anyone else really been in this scenario and have some insight into the direction that you went?",4,sql,2020-10-13
ism3s3,[MS SQL] Counting different values in the same column,"Problem:
Hello, I'm trying to help someone at work automate a process that they've been doing manually for years and that currently takes a while. A generalized example is that there are Sites, and each site has People, and those people have a FavoriteCandy that can be either M&amp;Ms, Reese's, Snickers, Jellybeans, Gummy Bears, or Twizzlers. The report they need only really counts Reese's, and everything else is grouped as Other. These are then grouped by Site.

The problem I'm having is that since the candy is all in the same column, I can't figure out how to count only Reese's without removing everything else in my WHERE clause.  I need to join several tables to get the correct info since it's a transaction database and everything is very normalized.

So the output I need is 3 columns:
Site, Count(Reese's), Count(Not Reese's)

Here's what I currently have:

    SELECT r.Site, COUNT(c.FavCandy = 1) AS 'Reese's', COUNT(c.FavCandy != 1) AS 'Other' 
    FROM ROSTER AS r JOIN PEOPLE AS p on r.RosterID= p.RosterID
    	 JOIN INFO AS i on p.PersonID = i.PersonID
    	 JOIN CANDY AS c on i.InfoID = c.InfoID
    WHERE p.IsActive = 1 AND LikesCandy = 1 AND RefusesCandy = 0
    GROUP BY r.Site
    ORDER BY r.Site

COUNT won't give me only certain values from FavCandy. I'm probably missing something simple, but I've been banging my head against this for a while now and this is the closest I've come.",1,sql,2020-10-13
isly16,Joining a meta-table,"I have 2 tables:

customer:

|id|first\_name|last\_name|
|:-|:-|:-|
|1|Peter|Smith|
|2|Mary|Jones|

customer\_meta

|customer\_id|meta\_key|meta\_value|
|:-|:-|:-|
|1|phone\_number|123456|
|1|email|[peter@smith.com](mailto:peter@smith.com)|
|2|phone\_number|234567|
|2|email|[mary@jones.com](mailto:mary@jones.com)|

&amp;#x200B;

Now I want to select this by customer id and get a single row as a result with the meta keys as new column names:

&amp;#x200B;

|customer\_id|first\_name|last\_name|phone\_number|email|
|:-|:-|:-|:-|:-|
|1|Peter|Smith|123456|[peter@smith.com](mailto:peter@smith.com)|

&amp;#x200B;

Is there any easy way to do this? Preferably in a way where I don't know the values of the meta keys  (eg possible variable number of columns in the result)",1,sql,2020-10-13
isjjr1,What is the advantage of query in SQL over excel?,SQL,0,sql,2020-10-13
isex5v,Help - How to calculate 7 day average with dates instead of rows?,"Hi everyone, I have the below script for calculating the 7 day average new cases using partition and 7 preceding rows. Is there any way to do this by using **dates** instead? For example, on 2020-01-26, the average is calculated as 0.8 instead of 0.57 if the 7 preceding dates were included in the data. I know it's not a material difference but am just wondering if there is a more accurate way?

Edit: added updated screenshot with updated code 

    select country, date, 
    	d_confirmed,
    	avg(d_confirmed) over(partition by country ORDER BY date rows 6 preceding) As ""7_day_avg""
    from coronavirusdata_country_combined
    where (country = 'Canada' or country = 'Australia')
    order by country, date

https://preview.redd.it/mozswnidv1n51.png?width=857&amp;format=png&amp;auto=webp&amp;s=c7b0f6405f06719103022d03875c32e6c97a0b83

https://preview.redd.it/t8idadwzr3n51.png?width=1022&amp;format=png&amp;auto=webp&amp;s=144e6fc10748431e17ae97f34a261c5eb32038c6

&amp;#x200B;",1,sql,2020-10-13
isdhyd,Do you know how to create features in machine learning?,,1,sql,2020-10-13
iscnf0,Best Free SQL Tool,"Hello! I’m currently studying SQL in my class and I would love to practice the statements, and etc. on actual databases as I am going through the book and lessons. Are there any free SQL (DBMS? right word?) tools? It can be either for macOS/PC. I’m looking for a tool that is easy to navigate and would be great for beginners.",28,sql,2020-10-13
isb907,Which environment to download for using sql?,"Till now, I am writing SQL queries in sqlbolt.com. Now, I want a compiler. Which one is the good enough compiler? Also, the setup process be as easy as possible. 
My teacher uses sth called MariaDB but he is in Linux and I am on Windows.",1,sql,2020-10-13
is9ia7,[MS Access] LEFT JOIN Syntax error HELP,"    SELECT * FROM
    (
    SELECT Tabla1.Country, Tabla1.DATEF AS Dates, Sum(Tabla1.MaxImp) AS Impressions, Sum(Tabla1.SumCk) AS Clicks
    FROM (
    SELECT TopCountries.Country, TopCountries.DATEF, TopCountries.QueryF, Max(TopCountries.Impressions) AS MaxImp, Sum(TopCountries.[Url Clicks]) AS SumCk 
    FROM TopCountries GROUP BY TopCountries.Country, TopCountries.DateF, TopCountries.QueryF
    )  AS Tabla1 GROUP BY Tabla1.TopCountries.Country, Tabla1.TopCountries.DATEF
    )
    LEFT JOIN
    (
    SELECT Tabla2.Country, Tabla2.DATEF AS Dates, Sum(Tabla2.MaxImp) AS Impressions, Sum(Tabla2.SumCk) AS Clicks
    FROM (
    SELECT TopCountries.Country, TopCountries.DATEF, TopCountries.QueryF, Max(TopCountries.Impressions) AS MaxImp, Sum(TopCountries.[Url Clicks]) AS SumCk 
    FROM TopCountries WHERE TopCountries.QueryF LIKE '*open*' GROUP BY TopCountries.Country, TopCountries.DateF, TopCountries.QueryF
    )  AS Tabla2 GROUP BY Tabla2.TopCountries.Country, Tabla2.TopCountries.DATEF
    )
    ON Tabla1.Country = Tabla2.Country AND Tabla1.DATEF = Tabla2.DATEF;

I'm trying to attach these two queries horizontally, but for the life of me, I'm stuck with a syntax error.

Please Help.",2,sql,2020-10-13
is8n9z,I’m in over my head in my SQL class. I have sql server management studio and all that but I have no clue what to do here. Can someone at least point me in the right direction or dumb this down for me? Idk how to design a database diagram in the first question,,4,sql,2020-10-13
is6jom,"normalize first, or create tables first?","I'm learning R and SQL through [Dataquest.io](https://Dataquest.io) and I'm working on a ""guided project"" converting a big baseball dataset from [retrosheet.org](https://retrosheet.org) into an SQL database. 

The instructions for the project are recommending importing all the raw data into tables, then making modifications (adding keys, etc) by using the DBI &amp; RSQLite packages for R to execute changes.

The more Stackoverflows I read about this topic though, the more the conventional wisdom seems to be that it would be easier to modify the data with R / tidyverse and *then* put it into the database. I would much rather be writing one ""mutate"" then 20 lines of SELECT and INSERT and etc, too. 

Since I'm preparing this project as a potential portfolio item for job searching, I'm wondering if the professionals out there think it makes more sense to showcase that I can work with SQL commands even if it's not ultra-convenient, or if should move the data into a more flexible format and do the same work there since that's the more efficient route. Which would be more relevant to employers?

I'd potentially be interested in junior database management positions as well as junior data analyst positions, so I definitely want to demonstrate range. I like writing queries, I'm just not sure if it makes sense here!",4,sql,2020-10-13
is2m12,Help w/ Hackerrank Question Query (MS SQL Server),"Not sure what I'm doing wrong. It's pretty trivial.  


Weather Observation Station 14:  
 Query the greatest value of the *Northern Latitudes* (*LAT\_N*) from STATION that is less than 137.2345.  Truncate your answer to 4 decimal places.  


My query (MS SQL SERVER):  
`SELECT ROUND(MAX(LAT_N), 4, 1) FROM STATION WHERE LAT_N &lt; 137.2345;`  


Output (stdout):  
 **137.01930000**   


I think they are expecting:  
137.0193  


What's the most optimal way to solve this?",2,sql,2020-10-13
is2clw,[MariaDB] Problems logging in to phpMyAdmin,"Hi, I've just installed MariaDB and phpMyAdmin on a headless Raspberry Pi. I'm in a ssh session on my LAN and accessed the phpMyAdmin login. I tried to log in with root and the password I set when setting up phpMyAdmin, but get the error 

    mysqli_real_connect(): (HY000/1698): Access denied for user 'root'@'localhost'

I googled around and found https://devanswers.co/phpmyadmin-access-denied-for-user-root-localhost

I decided to go for the creating a new super user as instructed here

https://devanswers.co/phpmyadmin-access-denied-for-user-root-localhost/#method-1-create-a-new-superuser-for-phpmyadmin

but get another error 

    CREATE USER 'super'@'localhost' IDENTIFIED WITH mysql_native_password BY '***********';

    ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'BY '***********'' at line 1

What am I doing wrong? 

Thanks.",1,sql,2020-10-13
is1jh9,Has OVERWRITE saved me from accidentally duplicating data on my INSERT?,"There's no flair for Hive so I've put discussion.

------

I set up a pipeline to insert data daily. The query is a simple grouped count:


    CREATE TABLE IF NOT EXISTS schema1.import_table AS
    SELECT
        p.yyyy_mm_dd,
        m.feature,
        p.xml_id,
        count(distinct(p.persona_id)) as persona_count
    FROM
        schema.table1 p
    INNER JOIN
        schema.table2 m
        ON m.metric = p.metric
        AND m.backapp = p.backapp
    WHERE
        yyyy_mm_dd &gt;= ""${hivevar:yesterday}""
    GROUP BY
        1,2,3;

    INSERT OVERWRITE TABLE schema1.final_table
    PARTITION (yyyy_mm_dd)
    SELECT
        xml_id,
        feature,
        persona_count,
        yyyy_mm_dd
    FROM
        schema1.import_table;
    DROP TABLE IF EXISTS schema1.import_table


I deployed this to run starting on `2019-01-01`, three weeks ago. So a job was scheduled every day from `2019-01-01` up until present day, and then continue to run once per day once caught up. In each scheduled job, `${hivevar:yesterday}` is passed a date to use i.e. on the job scheduled for `2019-01-01`, the script is passed the date string to use in place of `${hivevar:yesterday}`.

I noticed an error in my query, in that I did `&gt;=` instead of `=`. This means I've been getting counts for every day since the scheduled job date, instead of just the scheduled jobs date.

So when the first job ran on `2019-01-01`, it would have actually inserted for every day up until present day. Whereas my intention was to inserts one days data at a time. Then on `2019-01-02`, it would have dropped every day in the target table except for `2019-01-01` and then inserted the data, due to the `OVERWRITE` on the insert clause, is this correct?

All in all, has the `OVERWRITE` saved me from duplicating data despite my error of using `&gt;=` instead of `=`? Is the biggest issue here that I would have wasted a lot of resources for the earlier scheduled jobs, as I would have been dropping and inserting the same data *every day*? I assume now that the job has caught up and `&gt;=${hivevar:yesterday}` would now be `&gt;=2020-09-12` so we don't count for as many dates, using less resources so it's not so much a problem.",20,sql,2020-10-13
is0xs5,Query is returning no value. I am trying to solve the below-given questions but the query is not returning any value.,"1. Find all the actors that made more movies with Yash Chopra than any other director.

Ans 1) SELECT [p1.name](https://p1.name), COUNT(DISTINCT m.MID) count\_ FROM Movie m JOIN M\_Cast mc ON m.MID = mc.MID JOIN M\_Director md ON m.MID = md.MID JOIN person p1 ON [mc.PID](https://mc.PID) = [p1.PID](https://p1.PID) JOIN person p2 ON [md.PID](https://md.PID) = [p2.PID](https://p2.PID) WHERE [p2.name](https://p2.name) = 'YASH CHOPRA' GROUP BY [p1.name](https://p1.name)) AS YC

JOIN

SELECT [p1.name](https://p1.name), COUNT(DISTINCT m.MID) count\_ FROM Movie m JOIN M\_Cast mc ON m.MID = mc.MID JOIN M\_Director md ON m.MID = md.MID JOIN person p1 ON [mc.PID](https://mc.PID) = [p1.PID](https://p1.PID) JOIN person p2 ON [md.PID](https://md.PID) = [p2.PID](https://p2.PID) WHERE [p2.name](https://p2.name) &lt;&gt; 'YASH CHOPRA' GROUP BY [p1.name](https://p1.name) AS NOT\_YC ON [YC.name](https://YC.name) = NOT\_YC.name WHERE YC.count\_ &gt; NOT\_YC.count\_;

2) The  Shahrukh number of an actor is the length of the shortest path between  the actor and Shahrukh Khan in the ""co-acting"" graph. That is, Shahrukh  Khan has Shahrukh number 0; all actors who acted in the same film as  Shahrukh have Shahrukh number 1; all actors who acted in the same film  as some actor with Shahrukh number 1 have Shahrukh number 2, etc. Return  all actors whose Shahrukh number is 2.

Ans 2) SELECT DISTINCT TRIM(name) Name FROM Person p INNER JOIN M\_Cast c on [p.PID](https://p.PID) = TRIM([c.PID](https://c.PID)) INNER JOIN Movie m ON m.MID = c.MID AND TRIM([p.Name](https://p.Name))!='Shah Rukh Khan'  and\\

m.title in (SELECT DISTINCT title FROM Person p3 INNER JOIN M\_Cast c3 on [p3.PID](https://p3.PID) = TRIM([c3.PID](https://c3.PID)) AND TRIM([p3.Name](https://p3.Name)) = [p3.Name](https://p3.Name) \\

INNER JOIN Movie m3 ON m3.MID = c3.MID AND [p3.Name](https://p3.Name) IN (SELECT DISTINCT Name FROM Person p2 INNER JOIN M\_Cast c2 ON [p2.PID](https://p2.PID) = TRIM([c2.PID](https://c2.PID)) \\

INNER JOIN Movie m2 ON m2.MID = c2.MID AND TRIM([p2.Name](https://p2.Name))!='Shah Rukh Khan' AND m2.title IN \\(SELECT DISTINCT title FROM Person p3 INNER JOIN M\_Cast c3 ON [p3.PID](https://p3.PID) = TRIM([c3.PID](https://c3.PID)) AND TRIM([p3.Name](https://p3.Name)) = 'Shah Rukh Khan'  INNER JOIN Movie m3 ON m3.MID = c3.MID))) ORDER BY Name

The db schema is given below:

https://preview.redd.it/5aknaj4uvxm51.jpg?width=1280&amp;format=pjpg&amp;auto=webp&amp;s=6e9e4e6ee394f6972992163a00e95b3fe562d747",0,sql,2020-10-13
irwwse,How do I extract email addresses from a large SQL file?,"Hello, I hope someone can help me here.

I have a SQL file that is over 4GB big. What would be the easiest way to extract all email addresses? Like for example a program going through all the text and picking out the addresses.

Anyone have an idea?",3,sql,2020-10-13
irth91,[MS SQL] Find current and Max Values for consecutive Series,"I'm having several difficulties in extracting from a table on SQL Server 2012, the maximum number of consecutive values (number 1) and the current series.

LABEL VALUE
A 0
A 1
B 1
A 1
A 1
B 1
B 0
C 1


RESULT      
LABEL CURRENT MAX
A 3 3
B 1 2
C 1 1",2,sql,2020-10-13
irrisy,Weakness of Relational data model!(Confused),"**The second weakness, and the more relevant aspect of this article, is the fact that a single relationship may only contain two tables, the primary key (main) table and the foreign key (referencing) table. Within the Music Collection database, both the ALBUM table and the MOVIE table need to reference the ARTIST table. Due to this limitation, two separate relationships need to be defined; one that includes the ALBUM table reference to the ARTIST table and one that has the MOVIE table referencing the ARTIST table.**

Source-:[https://raima.com/network-model-vs-relational-model/](https://raima.com/network-model-vs-relational-model/)

What does that wants to say?",1,sql,2020-10-13
irrg9h,How would one go about uploading information into a database safely?,"I don't know how to word the question but feel free to ask me follow up questions but assume that you are assigned a drop from [oneroster 1.1](https://www.imsglobal.org/oneroster-v11-final-csv-tables) Long story short, it's a bunch of csv files that give info about students and classes along with their related schools. One should be able to tell everything they need to know about a student from oneroster if configured correctly.

Assume that you get the csv files as specified in that link in a zip file and assume that the system dropping this zip is configured correctly and doing so every night. If someone were to ask you to get those files and upload them to an sql server, how would one go about doing this and how can you ensure that there is nothing wrong with the files? 

I was trying to think, how would you go about making sure that you don't get an empty drop? How do you guard against making sure that there isn't some sort of data flaw like if it didn't complete correctly, or the data is damaged in some way. (Not sure how to word this)",1,sql,2020-10-13
irrdfb,Where to learn problem solving?,"I just finished all of the easy problems on Hacker Rank, and the medium problems have me completely stumped. I don't even know how I would approach the problems. Is there any site that can help me think more like a SQL developer?",6,sql,2020-10-13
irqlup,How to get order details using a join,"I have a main table that is our pipeline snapshot, which is taken daily. For each customer I want to get their most recent order for two different products. I can get the date using MAX() but how can I get other details from the order and not throw off my query? 

Something like this:

Select pipeline.*,
MAX(Product1.shipdate) as P1Date,
MAX(Product2.shipdate) as P2Date
From pipeline
Left join product1 on pipeline.customerid = product1.customerid
And product1.shipdate&lt;pipeline.snapshotdate
Left join product2 on pipeline.customerid = product2.customerid
And product2.shipdate&lt;pipeline.snapshotdate

The issue again is I want to get more details from product1 and product2. I can so far get the date of the most recent product order (using max) but can’t figure out how to get more without messing up the join.",0,sql,2020-10-13
irm4rg,Interview questions/ projects for juniors,"Hey  :)

I would like to know what senior professionals look for when recruiting juniors. 

Projects? exercises? Could you suggest interesting projects that you have seen , that you believe could really make a difference?


 thanks :)",2,sql,2020-10-13
irlxky,[postgresql] select row with the minimum value from tuple,"Suppose we have a table like the following:



ID| value| val1 | val2 | val3
---|---|----|----|----
0001 | 1.4| 1| 3| 2
0001 | 3.6 | 4| 4| 1
0001 | 9.1 | 1| 3| 1
0001 | 1.5 | 1| 2| 1
0001 | 2.4 | 2| 2| 1
0001 | 2.0 | 6| 5| 4
0002 | 0.6 | 2| 1| 6
...

I want to select out the row with the minimum in order of left to right of (val1, val2, val3). So for example, for ID `0001` we'd be selecting out row 4.

I know one way to do this is to add a `ROW_NUMBER()` from a `PARTITION BY (val1,val2,val3) ORDER BY (val1, val2, val3)` in a subquery, and then select out where the row number is 1, but this is a huge table and this seems pretty inefficient. Is there a faster way?

**Edit**: /u/truilus has the best answer, which is to use `DISTINCT ON`, something I didn't know about:

    SELECT DISTINCT ON (ID) *
    FROM
      the_table
    ORDER BY ID,
      val1,
      val2,
      val3;",13,sql,2020-10-13
irf9hk,Combine multiple lines into one with multiple columns,"I have a table I generate like the first table below, but I need to convert this and have each Vendor's data on one line. My setup will never have more than 2 count rows in the first table, and as a result, never more than 2 columns in the second table. 

What I have:

| VendorID | VendorName    | Program   | Product_Count |
|--------|---------|-----------|---------------|
| A      | VendorA | Program_1 | 123           |
| A      | VendorA | Program_2 | 234           |
| B      | VendorB | Program_2 | 147           |
| C      | VendorC | Program_2 | 258           |
| C      | VendorC | Program_1 | 369           |


What I need: 

| VendorID | VendorName    | Program_1_Count | Program_2_Count |
|--------|---------|-----------------|-----------------|
| A      | VendorA | 123             | 234             |
| B      | VendorB |                 | 147             |
| C      | VendorC | 369             | 258             |

I've tried using PIVOT, but am not having any success (I've never used PIVOT before so I'm probably doing something wrong):

    select VendorID, 'Program_1', 'Program_2' 
    from (
        select VendorID, VendorName, Program, Product_Count 
            from vendor_product_count) as SourceTable 
    PIVOT (Product_Count for 
        Program IN ('Program_1', 'Program_2') ) as PivotTable

I keep getting an error indicating incorrect syntax near PIVOT, but I'm not seeing what is incorrect about the syntax. Any help is appreciated.",1,sql,2020-10-13
irbau3,Beginner question- SqlZoo answer explanation (SELECT within SELECT),"Hi all, as the problem indicates I need help with understanding an answer from SQLZoo. My friend and I have been going through sqlzoo to learn sql, and gain a new skill. I’ve found the site to be very helpful in putting concepts into practice but it’s getting to the point where I need further explanation so I thought I would come to reddit community (: 

Please see the below requirements-

Problem
7. Largest in each continent (SELECT within SELECT)

Find the largest country (by area) in each continent, show the continent, the name and the area:

Table: See link [here](https://sqlzoo.net/wiki/SELECT_within_SELECT_Tutorial)

Answer:
SELECT continent, name, area FROM world x
  WHERE area &gt;= ALL
    (SELECT area FROM world y
        WHERE y.continent=x.continent)
          

Specific question 
1. Confirm or correct my understanding: the ALL function at the end of line 2 basically says select the area that is at the top of the following list (since all indicates a list is about to come)

2. in the WHERE clause in the 2nd select, can you explain this in as much detail as possible? I’m confused as to why it’s right  to choose continent in this clause? Having trouble wrapping my brain around this and how it relates to main question of selecting the largest area in each continent",3,sql,2020-10-13
irb3hk,Before I make a total butt of myself,"I inherited some SQL code that doesn't make sense to me. The code continuously tries to do

select 
(x/y) as z
from mydata
group by ID

 without actually including an aggregate function. There are other places where

select 
sum(x/y) as z
from mydata
group by ID

 Is used and I'm unsure about those. There are also several places where GROUP BY is used without an aggregate function when ORDER BY is more appropriate. I get a warning in the log and I've verified that the row counts are wrong. I'm new to SQL and I'll be presenting the issues with code and it seems so basic that I didn't want to make a total fool of myself if I'm wrong. Thanks. :) 


This is SQL in SAS if that helps. I couldn't find the right flair.",13,sql,2020-10-13
ir72wj,Beginner Postgres with Large Number of Foreign Keys,"I currently am planning my database for my project. This is one of my first SQL projects so I'm still learning best practices, optimizations, etc. I have two tables, classes and schedules. Schedules has seven foreign keys, each referencing a class' id. I want to be able to get the class' name to eventually expose via an API. I've seen posts using JOINs to combine multiple tables but I was wondering whether that would be a bad idea due to performance. Is there a better way to do this?",1,sql,2020-10-13
ir65nz,Any website you can pay someone to help with a SQL exercise? I need help on an assignment.,"Pretty much title. Need help on an assignment and I would like someone to help me and explain it. It is basically just writing queries to pull information from a database. 

The most complex it gets is sub-queries and Joins. 


Thanks.",18,sql,2020-10-13
ir2dfh,[Dolt] How we implemented column defaults in our open source SQL database,,2,sql,2020-10-13
ir06jl,Is there some sort of extension that lets your computer trigger a sound effect when your SQL query runs successfully?,"I have so much stuff open on my computer each day during work. It would be nice to have an audible notification when my query runs successfully. That way, I can shift gears back to whatever data I was querying before getting sidetracked. Would be greatly appreciated if anyone knew and could point me towards the right direction!",10,sql,2020-10-13
iqzgb3,What's a solid SQL certification to have nowadays ?,"Hi everyone,

I'm loving SQL and I'd like to get a good certification on Querying with T-SQL. I have thought of getting the database developpement certification (below) especially since it encompasses the Querying Data with TSQL exam.

However, Microsoft is moving away from the MCSA certifications and I did not find any Azure certification looking as interesting. I'm really into bulding queries to solve complex problems.

Do you know if there are good certifications nowadays in this matter ? or is everything going through Azure.

Thank you !

https://preview.redd.it/9s29hov43lm51.png?width=1205&amp;format=png&amp;auto=webp&amp;s=8b63bcb6d5428f1e4e4fb4b1886dd060db005054",26,sql,2020-10-13
iqyjzl,Help Creating Database,"Hey guys,

Boss sent me to brainstorm how to create a SQL  database to look for what we are trying to do.

Basically, we want to create a data structure similar to the following to allow for finding emails for a school based on studentID number:

  
1) have a table with old transactions and school provided data that relates studentID number to email

  
2) feed new data in as it becomes available.

  
3) feed in a CSV file with student ID numbers for a particular school that will then spit out a CSV with emails that are NOW related to the school based on student id number matches in the past

  
for example: ID#1234567 could have purchased 10 years ago while in school A using [parent1@email.com](mailto:parent1@email.com) and then again 9 years ago in school B using [parent2@email.com](mailto:parent2@email.com)  
this year, we get a school C where student 1234567 attends, and we feed in the new\_schools.CSV and we get these 2 emails spit back out to use for this student

&amp;#x200B;

Any idea on how to get started?

&amp;#x200B;

Any tips greatly appreciated",1,sql,2020-10-13
iqwd5e,[SQLSERVER HELP] How to combine two rows with exact same data aside from one column.,"I want to combine two rows that have the exact same data aside from one column. I want the output to show

N ¦ ORIG-VALUES ¦ CONCAT-VALUES1 ¦ CONCAT-VALUES2

1 A. AB. BA

  


Currently shows

N ¦ VALUE

1 A

1 B

  


Apologies for the terrible mobile formatting",1,sql,2020-10-13
iqujyr,Looking for problems/resources that can help deepen my understanding of SQL concepts,"I know the basics of SQL like select, from, where, having, update, insert, delete, group by, count, average, sum. I also have some experience with joins between two tables.

But I want to really understand it, and reach a point where I can understand joins between multiple tables on different conditions. To visualize it in my mind, and also be able to execute complex select statements. 

I figured solving problems would be the best way to do it. Like, ""here are these tables, i want this specific data out of it"". 

Is this a good way to do it? And if yes, I am looking for resources for that.

Thanks",2,sql,2020-10-13
iqroym,"I enjoy SQL and Python most, what should I do to get a job?","Howdy,

I recently learned some sql and enjoyed combining that with flask.  The front end design was done for us, but I enjoy the dev aspect getting it to work together.  How can i take these enjoyable parts and get a job?  I can set up a flask server, but if I have to design the layout and look and feel of a site I give up as I get bogged down on trying to make it look nice.  I've been tinkering with code since I was 8 and now I'm a miserable math teacher (computer science from time to time as well) who wants to code for a living.  Not looking for an 80 hour work week or 6 figure pay check.  Just trying to break in and get to code for a living. 

I have young kids and a wife, but we get health from her and I don't need to make a ton to keep our lives the way it is, and I can go 6 months without any income if needed.  

Thanks ya'll.

\-J",58,sql,2020-10-13
iqqruq,[MySQL] Writing data vs calculating in views,"This is more of a high level theoretical question although it's probably a really basic concept. I'm mostly a hobby project guys that's done some consulting / project management type work through my business, so learning as I go and apologize for any incorrect wording or vocabulary.

To make the question more clear, I'll use an example of storing data for a golf round. The raw dataset is a running score:


Field| Data
---|---
Hole 1| -1
Hole 2| -3
Hole 4| -3
Hole 5| 0

From this, knowing the par for each hole, I will be calculating for each hole total number of strokes, designation (birdie, par, triple bogey, etc.). It seems as though when new data is input into the database, I should run those calculations once and write the resulting data to it's own table. This seems more efficient than dynamically calculating the data any time it's retrieved. The data is very unlikely to change, although it's possible there are errors in the data that have to be corrected. Are my assumptions correct?

Second example, but same question. Raw data has a date and timestamp and two player IDs. Another table has a schedule with dates and times and player IDs. A simple match will be made between the two and each game will be assigned a scheduled match ID if there's a positive match or left null if no positive match found in the schedule. Again, it seems like this scheduled matchID should just be written to the underlying data if a match is found rather than doing a lookup dynamically anytime the data is retrieved.

If more information is needed, let me know, but broadly I'm having a hard time understanding when it's proper to insert the data vs calculating the data within a view.",1,sql,2020-10-13
iqpinm,A brief intro to SQL and SQL syntax - Part I,,3,sql,2020-10-13
iqnflz,how to import dump file using a docker container of MySQL 8.0,MySQL,1,sql,2020-10-13
iqmthh,PIVOT on MS SQL,"Hello community,

i got following case:

|classification|filename|price|tax|
|:-|:-|:-|:-|
|1|abcd\_01.01.2020\_abcd|5|1|
|2|abcd\_01.01.2020\_abcd|10|2|
|3|abcd\_01.01.2020\_abcd|15|3|
|1|abcd\_01.04.2020\_abcd|20|4|
|2|abcd\_01.04.2020\_abcd|25|5|
|3|abcd\_01.04.2020\_abcd|30|6|
|...|...|...|...|
|1|abcd\_01.01.2021\_abcd|50|10|
|2|abcd\_01.01.2021\_abcd|55|11|
|3|abcd\_01.01.2021\_abcd|60|12|
|...|...|...|...|

into:

||2020 \[year\]|||2021 \[year\]||
|:-|:-|:-|:-|:-|:-|
|Metric|1 \[quarter\]|4 \[quarter\]|...|1 \[quarter\]|...|
|price|5|20|...|50|...|
|tax|1|4|...|10|...|

with a filter on classification = ""1""

is that possible?

For now I got following code:

    WITH Unpvt AS
        SELECT *
        FROM TABLE1
        CROSS APPLY (VALUES
            ('price', price)
            ('tax', tax)
            ) AS ca(Metric, Value)
            )
    ,Pvt AS (
        SELECT Metric
        , Value
        , DATEPART (MONTH, CAST(SUBSTRING(filename,6,15) AS date)) AS Q
        FROM Unpvt)
        SELECT Metric, [1], [4], [7], [10]
        FROM Pvt
        PIVOT (
        AVG (Value)
        for Q in ([1], [4], [7], [10])
        ) p

result:

|Metric|1|4|7|10|
|:-|:-|:-|:-|:-|
|price|AVG (all prices)|AVG (all prices)|...|...|
|tax|AVG (all tax)|AVG (all tax)|...|...|

Where/How I can complete my SQL-Code?

 I would be grateful for help. :)",2,sql,2020-10-13
iqmpeo,Select without From?,So I read that to check for the health of db we can use 'SELECT 1'. How does this query work? Which table is it querying to? How does it help to make sure db is alive or not?,14,sql,2020-10-13
iqkau3,Dateformats - when to use CAST or CONVERT in SSMS?,"I am fairly new to SQL, but every time I have a date that needs to be formatted, I end up googling and finding my answer there, but often find different ways to convert a date. 

But I'd like to know if there is a rule of thumb to when we should use CAST and when we should use CONVERT instead? 

The data I use depending on which table I use, sometimes has dates as strings, int, varchar. 

Also, if there are any tips on common ways to approach converting messy data types to dates and using them in queries, let me know.",1,sql,2020-10-13
iqk5vs,Need advice on learning SQL Enterprise for a job I'm applying for,"I work in IT help desk setting. I have a bit of programming background, but have an opportunity to learn alongside one of our Database Administrator guys who uses OpenText for all the documents in our organization. 

I need to get up to speed on SQL Enterprise to better understand how our systems work. 

Any suggestions? What I see online is mostly basic queries that I'm already familiar with. I want something that goes from beginners to intermediate/advanced.",4,sql,2020-10-13
iqita0,Recommended approach to handle a Sequence Number with a prefix,"Trying to figure out best way to approach this scenario.

Customer wants to create new SKU numbers, their SKU Numbers are prefixed with a Storage Location code which are 6 or 7 digits, and then it is extended to a maximum 14 digits with the ending 7-8 digits being non-specific.

I need to create a unique SKU that is the chosen Storage Location + a generated integer value, and then compare that full 14 digit number against a exclusion list of legacy numbers; if it happens to already exist, then discard it and increment it until an available unique 14 digit value is found.

Really just looking for suggestions on ways to tackle this, I haven't worked with sequences in SQL much until now.",3,sql,2020-10-13
iqc7ke,A new way of tokenization of Chinese or How to make Chinese full-text search,,2,sql,2020-10-13
iqaklg,Minor Linux Academy experience - Where should I go from here to get an entry level SQL job?,"Looks like the new MCSE: Data Management and Analytics Path.  What do you think?[https://build5nines.com/goodbye-mcse-mcsd-mcsa-certifications-retiring/](https://build5nines.com/goodbye-mcse-mcsd-mcsa-certifications-retiring/)

What is required to be hired for a DBA job? I did the SQL Deep Dive course on Linux Academy but where should I go from here? I know everyone always says ""don't waste your time on certs"".  But I probably need certs since I don't have any education or experience on the topic.  What should I do?",1,sql,2020-10-13
iq6rur,Can't filter column results,"[https://imgur.com/a/UzEsd5r](https://imgur.com/a/UzEsd5r)

What am I doing wrong? :(

I just wanna hide the negative results and the 0 since I only wanna see what's the real available items are there.

    select
        articulo.id,
        articulo.name as NAME,
        articulo.partnumber as PARTNUMBER,
        articulo.upc as GTIN,
        articulo.images,
        articulo.preciocosto * (1 - iva.tarifa) as COST,
        articulo.Detalle,
        articulo.Garantia,
        am.name as MARCA,
        articulo.Wattage,
        articulo.Peso,
        articulo.Alto,
        articulo.Ancho,
        articulo.Largo,
        articulo.videourl,
        IFNULL(stock.Fisico, 0) as Fisico,
    	IFNULL(reserva.Pendiente, 0) as Reservado,
    	IFNULL(ventas.Bajas, 0) as Bajas,
    	(IFNULL(stock.Fisico, 0) - IFNULL(reserva.Pendiente, 0)) as Disponible
        from api_articulo articulo
    inner join api_marca am on (articulo.marca_id = am.id)
    inner join api_iva iva on (articulo.iva_id = iva.id)
    LEFT JOIN (
            select
    		movimiento.articulo_id,
    		SUM(cantidad) as Fisico
    		from Stock_stockmovimiento movimiento
    		-- where
    		-- Date(fecha) &lt;= p_date
    		GROUP BY
    		movimiento.articulo_id
    	) stock on articulo.id = stock.articulo_id
    	left join (
    		SELECT
    		pendiente.articulo_id,
    		SUM(pendiente.cantidad) AS Pendiente
    		FROM Stock_stockreserva pendiente
    		WHERE
    		-- Date(pendiente.fechaRegistrado) &gt;= p_date AND
    		pendiente.reservaCancelada = 0 AND
    		pendiente.venta_id IS NULL AND
    		pendiente.movimiento_id IS NULL
    		GROUP by
    		pendiente.articulo_id
    	) reserva on articulo.id = reserva.articulo_id
    	left join (
    		SELECT
    		movimiento.articulo_id,
    		SUM(-1 * movimiento.cantidad) as Bajas
    		from Stock_stockmovimiento movimiento
    		where
    		-- Date(fecha) = p_date and
    		movimiento.tipo = 'S'
    		and movimiento.venta_id is not null
    		GROUP BY
    		movimiento.articulo_id
    	) ventas on articulo.id = ventas.articulo_id
    WHERE 
    	stock.articulo_id IS NOT NULL AND 
    	ventas.articulo_id IS NOT NULL AND
    	stock.articulo_id IS NOT NULL;

Any ideas? Thanks!",2,sql,2020-10-13
iq4fxd,A deep dive on Change Data Capture with Flink SQL during Flink Forward,,2,sql,2020-10-13
iq48vz,[MS SQL] Reducing Log file size when database is in an availability group?,"Hey All

Sysadmin here, not a database admin (my company has been trying to hire one for awhile)

Some of our logfiles are getting a bit out of control, and I'd like a way to truncate them down and reduce the filesize, but I'm unsure how to do this.

I understand that if this wasnt in an AG, I could potentially change log type to simple, shrink, and then change it back, but I dont believe I can do this in an AG.

Any advice?

Thanks!",3,sql,2020-10-13
iq47mu,[MYSQL] Question regarding set COUNT conditions,"Suppose I have a data set available of travelers. It contains the ID of each traveler (tr\_id), as well as the ID of each flight (fl\_ID), from which city (fl\_from) and to which city (fl\_to) together with the date (fl\_date).

The question is the maximum amount of countries each traveler has visited without returning to country 'a'.

Suppose a passenger travels a-&gt;e-&gt;b-&gt;d-&gt;a-&gt;f-&gt;a , then the answer should be 3.

I've already ordered by tr\_id and fl\_date so that I have a clear view of all the countries that each traveler has visited. I'm now stuck with determining the max amount of countries visited by each traveler. Any suggestions on how to proceed?",1,sql,2020-10-13
iq3zvm,"MySQL Tutorial Series for Beginners, Learn To Retrieve Data and Basics of MySQL, Master Data Sorting and Calculation, How to Work With Subqueries and Joins, Learn to Analyze Data With MySQL Functions and Master MySQL Operators (Logical, Set, &amp; Arithmetic)",,14,sql,2020-10-13
iq3fjm,"What would you consider beginner, intermediate, and advanced SQL skills?","I'm inquiring  about querying in particular, but open to all thoughts.

I would consider beginner to be: GROUP BY, JOINS (inner, left, etc.), aggregations.

I'm not sure what would be considered intermediate to advanced so I am curious on your thoughts.

Thanks!",79,sql,2020-10-13
iq2kno,(Help request) Sql query to remove zero sum,"Ok I have a query that pulls back a slew of data. Upon researching a few results I notice that a member has a sum of zero for a certain date, rate amount and provider. I don't need these and was wondering how to remove the lines that equal zero?

New to reddit and not sure if this is the right group.

Per request

Here you go is some dummy data

ID.      Payee.     Rate.    Activity
123.   Abc.        .12.        06/01/20
123.  Abc.        -.12.        06/01/20
123.  Abc.          .12.       06/01/20
123.   Abc.        .12.        07/01/20
123.  Abc.        -.12.        07/01/20

Ok what should return is 06/01 for . 12 and nothing for 07/01",4,sql,2020-10-13
iq1w7i,Whats the easiest way to group by date in sql?,"I have a mysql table with date in this format ""2016_06-03"" in a column called request_date. I am trying to find some ratios between two tables and I want to group them by month, by day and by year(Three different queries). Whats the best way to do that?

Here is my query

    select 
    Round(
    ifnull(
    (Select COUNT(*) from (Select Distinct requester_id,accepter_id from request_accepted) as A)
    /
    (Select COUNT(*) from (Select Distinct sender_id,send_to_id from friend_request) as B),0),2)
    as accept_rate",7,sql,2020-10-13
iq0mo6,"[MS SQL] Get counts from 2, not directly related, different tables in a single query","Hi, I feel like I’m missing something extremely obvious here :(

I want both the amount of clicks and impressions per creative

I have two tables, one for tracking impressions and one for tracking clicks.

Click-Tracking-Table `CreativeLinkTracking`:

| TS (datetime2)                         | CreativeId (int) | Url (nvarchar)                |
|-----------------------------|------------|---------------------|
| 2020-09-09 13:19:11.6082611 | 1          | https://example.org |

Impression-Tracking-Table `CreativeImpressionTracking`:

| TS (datetime2)                         | CreativeId (int) |
|-----------------------------|------------|
| 2020-09-09 13:19:42.6082611 | 1          |

For the sake of a simple example, lets also say I have a table `Creatives` with just Ids:

|Id (int)|
|-----|
|1|
|3|

Now my first naive idea was this:

    SELECT c.Id,
           COUNT(tClick.TS) AS Clicks,
           COUNT(tImp.TS)   AS Impressions
    FROM Creative c
             LEFT OUTER JOIN CreativeLinkTracking tClick
                             ON c.Id = tClick.CreativeId
             LEFT OUTER JOIN CreativeImpressionTracking tImp 
                             ON c.Id = tImp.CreativeId
    GROUP BY c.Id

But as soon as both tables have multiple entries, this goes (obviously, I realized afterwards) horribly wrong.

So I’m wondering, is there a way to get both values in a single query?",5,sql,2020-10-13
ipz0k0,Deploying c# winforms app that uses localdb,"I made the localdb in visual studio and it set it up using integrated windows authentication.

I assume this means that only my development machine can run the app and actually log into the localdb mdf file.

How do I make it so that the app can log into the localdb mdf file that will be deployed with it in its installation directory on a different windows machine?

Wouldn't it be unable to since it was created using my developer machines windows credentials?",2,sql,2020-10-13
ipu1rm,PopSQL run button doesn't run anything,I have been learning MySQL for the past couple of hours and I tried to run what I had in my PopSQL editor but the run button does not do anything which is very confusing to me. I am a complete newbie so I am sorry if this is a stupid question but thank you all for helping,14,sql,2020-10-13
ipt5uz,[Presto/Hive] - Searching Array for a Matching String on Join,"**I have two tables that I'd like to join**

**dog\_owners:**

|row\_num|dog\_owners|
|:-|:-|
|1|Jane|
|2|Susie|
|3|Adam|
|4|Michael|
|5|Ruthie|

**walker\_activity:**

|row\_num|walk\_location|dog\_name|dog\_walker\_names|
|:-|:-|:-|:-|
|1|trail|dug|\[Sarah, Sam\]|
|2|campus|lenny|\[Sarah, Sam, Susie\]|
|3|park\_1|toast|\[John, Chloe, Ruthie\]|
|4|park\_2|waffles|\[Ruthie\]|
|5|mountain|junior|\[Brett, Adam, Matt\]|
|6|street|spot|\[Brett, Matt\]|

**Desired Output:**

|row\_num|walk\_location|dog\_name|dog\_walker\_names|
|:-|:-|:-|:-|
|1|campus|lenny|\[Sarah, Sam, Susie\]|
|2|park\_1|toast|\[John, Chloe, Ruthie\]|
|3|park\_2|waffles|\[Ruthie\]|
|4|mountain|junior|\[Brett, Adam, Matt\]|

&amp;#x200B;

    WITH dog_owners AS (
    SELECT
        (dog_owner_name) AS dog_owners
        --this is one per column
    FROM
        dog_owners_master
    ),
    dog_walk_activity AS (
    SELECT
        walk_location,
        dog_name,
        array_agg(dog_walker_names) AS dog_walker
            --dog walker names is an array
    FROM
    walker_activity
    )
    SELECT
        walk_location,
        dog_name,
        dog_walker,
    FROM 
    dog_walk_activity a
    
    INNER JOIN dog_owners b
    ON a.dog_walker = b.dog_owners
    --Error received '=' cannot be applied to array(varchar),varchar

**Questions:**

* How can I get only the records from the dog\_walk\_activity where the dog\_walker was also the owner, while not flattening the array in the final table?
* Is it possible to search an array for a string, within a join, and join records for only those where the string is contained? I would if so, please help?
* If it's not possible to do this, then what would be the right steps for me to approach this?

**Other Misc:**

Just FYI this isn't homework, it's something I'm doing for work. In case you are wondering why I'm using CTEs, I also have other CTEs, but this is the part I'm struggling with and need help with. I'm open to other suggestions",4,sql,2020-10-13
ipmzxr,Query optimisation: INSERT if it doesn't exist/RETURN if it does,"This query will insert a new IP if there isn't one and return it's ID. And if there already is the same value it only returns the ID.

I'm a newb with SQL and am curious if this could be further optimized?

        WITH v AS (
           SELECT '1.1.1.110'::inet AS ip
        ), i AS (
            INSERT INTO globals.ips (ip)
            SELECT * FROM v
            WHERE NOT EXISTS (
                SELECT i.global_ip_id
                FROM globals.ips AS i
                WHERE i.ip = v.ip
            )
            RETURNING global_ip_id
        )
        SELECT global_ip_id FROM i
        UNION ALL
        SELECT global_ip_id FROM globals.ips g
        LEFT JOIN v ON g.ip = v.ip
        WHERE g.ip = v.ip
        LIMIT 1;

I am running PostgreSQL 12.",4,sql,2020-10-13
iplj7c,Query using a Microsoft Spark ODBC Connection,"My SQL experience is almost completely Microsoft SQL Server, so I am a bit lost here.

We have a vendor's application that we can run queries against but I need to use a Microsoft Spark ODBC Driver.  This driver is installed, and I have all the attributes required to create the connection (host, port, database, username, password, and a .pem certificate).

is it possible to:

* Directly run a query files in something like VSCode, like I can with SQL Server.
* Connect to the database from python

I was able to setup a ""User DSN"" in the ""ODBC Data Source Administrator"".  I could get this to work for R, but I haven't been able to get it to work for python, or find a way to directly query from VSCode.",1,sql,2020-10-13
ipkgye,Report results of bulk regexp replace?,"SQL noob here. Sorry if stoopid.

If I'm doing something like

    update Table 
    set Field = REGEXP_REPLACE( Field , 'foo' , 'bar' )
    where Field like '%yada%' and post_status = 'publish'

is there a way to 'report' the before &amp; after of each changed record (as the result of the query) so I can audit what happened?

Thanks!",1,sql,2020-10-13
ipjiy2,Understanding big queries,"Hello guys,

I'm new to SQL and I want to expend my knowledge on it.

I have same bug queries that I struggle to understand in my job at the moment.

Can you give me some advices as a beginner ?
How to understand more / software to read a big queries ?

Thanks",2,sql,2020-10-13
ipgpbg,SQL Server 2019 Diagnostic Queries Part 10,"Here is my latest video. In this video, we  cover two queries. These include Query 25 – Fixed Drives, and Query 26, which is Volume Info. 

&amp;#x200B;

This series of videos is going through the complete set of my SQL Server 2019 Diagnostic Information Queries. These queries are available for free at [glennsqlperformance.com/resources](https://glennsqlperformance.com/resources). 

&amp;#x200B;

Please keep in mind that I have other sets of SQL Server diagnostic queries for other versions of SQL Server, Azure SQL Database, and SQL Managed Instance. The queries you see demonstrated in this video are very similar or identical to the queries for older versions and the same concepts apply.",6,sql,2020-10-13
ipdn80,Can anyone please help me translate my SQL query to relational algebra?,,0,sql,2020-10-13
ipc9gu,Can't figure out what I'm supposed to do here (110% sql-noob),"Okay hello everyone, so I have this assignment where there's this table called ""book""

    book
    
    id |           title            | predecessor_id
    ----+----------------------------+----------------
      1 | The Fellowship of the Ring |
      2 | The Two Towers             |              1
      3 | The Return of the King     |              2

And I'm supposed to retrieve the titles of the books and their predecessors, with only books that have a predecessor included, and on top of that the rows need to be sorted in an ascending order by the book id. So the result should look like this:

             title          |     predecessor_title
    ------------------------+----------------------------
     The Two Towers         | The Fellowship of the Ring
     The Return of the King | The Two Towers
    

And this is what I came up with to try to make that happen:

    
    SELECT title, predecessor_id AS predecessor_title
    FROM book 
    WHERE id = predecessor_id 
    ORDER BY id

However....I don't really know what I should be doing here exactly and...when I typed that into sqlite it doesn't print out anything if I include the lines after ""FROM book""....I think that the first 2 lines are correct but the rest I reallyyy don't know about at all. I was thinking I need to find a way to change the numbers 1 and 2 to titles in ""predecessor\_id"" then like maybe do some id = id stuff but yeah I don't really know how I'm supposed to achieve this so now I'm just kind of stuck. Help please?",1,sql,2020-10-13
ip8ax4,SQL for Beginners in a Nutshell,,239,sql,2020-10-13
ip7jkj,Updating with CASE vs. iterating through multiple UPDATE statements,"I have a python code that's set up to push updates to our SQL database. Basically, I use the UID field to create a list of UPDATE statements like this:

    UPDATE schema.table SET name = 'Some new            
    name value' WHERE UID in (6434454, 56433454)

I noticed I could also use a CASE statement so that instead of iterating through a list, I could do them all at once:

    
    UPDATE schema.table
    SET name = (CASE UID
              WHEN IN (5534532, 5456434) THEN         
                   'NEWNAME1'
              WHEN IN (8764557, 7644535) THEN         
                   'NEWNAME2' ELSE name
              END) WHERE UID IN (5534532, 5456434, 8764557, 7644535)

I've tried using the case statement in a few ways, but i haven't figured out a way that's faster than iterating. I'm not great with temporary tables yet, but could I create a temporary table so I'm not having to index the entire table in my class statement?",3,sql,2020-10-13
ip51pn,"This is probably the wrong place, but why is all of the text always ""highlighted"" in Visual Studio Code? It only goes away when I actually do highlight something in the text, if that makes sense.",,10,sql,2020-10-13
ip34qb,Finished one course and currently I'm a bit lost what are my next steps?,"As I'm very noobie in SQL and I want to write complex queries.

I finished this course [https://codewithmosh.com/courses/enrolled/525068](https://codewithmosh.com/courses/enrolled/525068) and it was good but not so solid and I need more exercises and more deep study in SQL.

So what recommends can you give me or maybe courses I can add to go deeper in SQL? As going to Kaggle for me is too early I think? 

My end goal to write complex queries, understand others queries and correct them. And in 1 or 2 years go for Oracle Certified Professional (OCP). So is it possible to get Oracle Certified Professional or even Oracle Certified Master? 

And what can you recommend me?",3,sql,2020-10-13
ip12cy,Looking for feedback on SQL portfolio idea,"Hi everyone! I feel like I am in over my head with creating a SQL portfolio and I wanted to get feedback or advice on going about it. 

Background: I am looking to change careers from accounting to a role that is more technical that requires SQL skills like business analyst or even data analyst. In the past couple months, I completed a course in Udemy for basic knowledge and further practiced with another resource that taught me advanced SQL concepts like window functions and recursive CTEs.

Because I do not have work experience with SQL, I am thinking of creating a portfolio to grab the attention of employers and get interviews. But I'm feeling anxious and stressed because I feel a bit lost at trying to do this so any feedback is much appreciated. What I plan to do is:

* 1) So I'm from Chicago and I was able to obtain a real dataset of Chicago's city employees, job info, and salaries. The dataset is one CSV file so I plan to normalize the data and create tables. Also, I plan to create a schema diagram too. I never done this before so I hope to figure this out but is this too advanced for me to do?
* 2) Next step is to run some queries to answer some questions from an accounting/budget mindset, like ""what's the average salary in the xxx department"" or ""who are the top earners in the city"".
* 3) Then, I plan to use Tableau to visually show the analysis.
* 4) Last step is to upload the normalized dataset, queries, graphs/charts to Github? 

What do you guys think?",3,sql,2020-10-13
ip0jj5,How Do I Get A List Without The Aggregated Function?,"I'm running the following query, which works fine:

    SELECT ID, COUNT(*)
    FROM TABLE
    GROUP BY ID
    HAVING COUNT(*) &gt; 1

That works, but then I want to select from another table where I'm matching up the ID's contained in the SELECT to the contents of that table.  So:

    SELECT *
    FROM OTHERTABLE
    WHERE ID IN
    (
      SELECT ID, COUNT(*)
      FROM TABLE
      GROUP BY ID
      HAVING COUNT(*) &gt; 1
    )

This doesn't work, because there are two columns and SQL Server doesn't know which one to use.

I've solved this problem so far by selecting into a tmp table, then just the ID into a second tmp table, and then my final select.

But that seems stupid and inelegant and leaves temp tables lying around.  Is there a way to do this without all the mishegas?",4,sql,2020-10-13
iozfyk,Select query to print out one cell of data,"Hi there,

I'm new to SQL. I would like to know how to retrieve the info where \[target\]--just a single value of the latest version--is and print it out. Here's my current attempt to select query:

    ...
    $user_name = 'test';
    $sql = ""SELECT version, MAX(date) FROM scores WHERE user_name=$user_name"";
    
    if ($result = $conn-&gt;query($sql)) {
        // I'm not sure how to print out [target] yet.
    }

&amp;#x200B;

Table name: scores

|date|user\_name|user\_id|version|score|
|:-|:-|:-|:-|:-|
|\[latest\]|test|test|\[target\]||
|...|...|...|...||",1,sql,2020-10-13
iozchz,[SqlDBM] Why can't I use head_of_the_party as a foreign key pointing to member_id?,,3,sql,2020-10-13
ioywt5,How to gain experience in SQL for jobs?,"Hello all, 

I am currently learning more and more SQL everyday and I feel as if I have a good grasp of the language  but I know that I will always be learning from it. I’m currently also doing Microsoft DA-100 Power Bi course as well and I will be taking the exam the in coming weeks. I have Bachelors in Psychology and even though it was heavy on statistics in college, I need to be able to get my foot in the door for a future position as a Data Analyst. Any advice on how to gain experience and standout on my resume?",21,sql,2020-10-13
iowyje,Just over 24 hours left to take DataCamp's SQL courses--no credit card required!,[https://www.datacamp.com/freeweek](https://www.datacamp.com/freeweek)/,6,sql,2020-10-13
iotxb1,How can I start a SQL side hustle?,"Do you have a side hustle that uses SQL in some capacity? If so what do you do?

At my previous job as a business systems analyst, I found myself using SQL a lot and loving it. The work mostly involved creating views to support reporting or web pages, transforming legacy client data for import into my company's  database product, and occasionally writing/altering triggers and procedures. Since I left that role 6 months ago, I have not had any opportunity to use my SQL skills, and it's bumming me out. I don't want to leave my current full time position, so I'm curious if anyone has ideas for a SQL-related side hustle for someone with intermediate-level SQL skills.",21,sql,2020-10-13
ios2i9,An overview of Flink's Table API &amp; SQL for unified stream and batch processing,,1,sql,2020-10-13
ioqceq,"Trying to help a friend query a table (pretty straight forward), but she is getting errors that I was not anticipating","The query is pretty straight forward: 

    SELECT * FROM (table) 
    WHERE 00Na000000BHFSKEA5 LIKE ""%hotmail.com"" 
    OR 00Na000000BHFSKEA5 LIKE ""%gmail.com""

But she is getting this error: 

    FAILED  [SELECT - 0 rows, 0.294 secs]  [Code: 4145, SQL State: S1000]  An expression of non-boolean type specified in a context where a condition is expected, near ‘Na000000BHFSKEA5’.


Is this because of the column name?",1,sql,2020-10-13
ioki15,I can’t use SSIS or Informática to datastage my data and now I have 15 CTEs. HELP!,"The company I work for only gives access to create tables in our prod environment to IT DBAs.  This is due to bank regulations and try to keep data “flowing” without getting out of compliance.  It is fucking weird and annoying.  So, takes me to my problem.  I have 3 types of loans that reside in 3 different tables and all those have different business rules, etc.  in the end I combine all the data, but in order to do that in one query.  I have to create a shitton of CTEs with business rules and bullshit I need.  What else can I do?",1,sql,2020-10-13
iogtjj,Looking for MySQL course that would benefit me,"Hi all, I’ve done pretty basic intro stuff for MySQL and just completed a very basic project of my own using PopSQL and random data I created on Excel. My work offers tuition assistance of around $7500 a year and is partnered with a lot of online universities it seems. Wondering if I could take advantage of that as I’m looking into getting into data analysis of financial analysis and have a finance background not a data one unfortunately. Also a quick Q where would I store project data from a SQL project to be able to show it? I’ve looked over some of the past posts to get an idea but was wondering if anyone had any ideas curated for my current scenario, thanks!",3,sql,2020-10-13
iofo18,SQL Query In Excel - User Enters Info and Gets Output?,"I'm using SSMS and Excel 2016.  Basically I'm trying to see how I can have a query run that will take whatever the user enters into a cell and return it from the query where if they enter 1, 2, 3 etc. it will put that into the WHERE IN statement of the query.  I imagine this will use VBA somehow or the other so I can always post this elsewhere if I'm on the wrong track just let me know.

In any case, is there a good way to do this?  For the sake of ease we can say they will enter an ID and it will return name and hire date.  So ID is unique.  Putting in 1 into the cell and refreshing or clicking a button attached to the query will return the name and hire date associated with ID 1.  If they enter 1 in cell A2, then 2 in cell B2, 3 in cell C2, so on and refresh or click the button it will return the corresponding info for all three IDs.

Having trouble with getting this to work.  Thanks for the help.",4,sql,2020-10-13
iofcxj,How to Create Query to Find Top 5 Counties by Population in Each State,"My table Counties has State\_name,county\_name and pop2010.

What I have right now is:

    select 
      state_name, county_name, pop2010
    from counties_query
    order by 
      state_name, pop2010 desc

I want the states in alphabetical order and then ONLY the top 5 counties in each state by population.  

&amp;#x200B;

&amp;#x200B;

https://preview.redd.it/h0bbdo82csl51.jpg?width=586&amp;format=pjpg&amp;auto=webp&amp;s=e262576e8ee9993ddfb7e5318ecde84e2535caca",1,sql,2020-10-13
iof9zb,How to Create Top Five Counties for Each State,"My table Counties has each county in each state with their population in 2010.

The columns are state\_name,county\_name,pop2010.

I want sort the states in alphabetical order, largest to smallest county in each state only showing the top 5.  This is what I have so far, but I want to limit them to the top 5 in each state. 

    select 
      state_name, county_name, pop2010
    from counties_query
    order by 
      state_name, pop2010 desc

&amp;#x200B;

https://preview.redd.it/b9k05rs5bsl51.jpg?width=586&amp;format=pjpg&amp;auto=webp&amp;s=2a2415365cc557d5727b64a310b55d8f9e89c657",1,sql,2020-10-13
iocbio,How to learn SQL from Excel? [Filter &amp; Columns],,1,sql,2020-10-13
ioc94x,SQL cheatsheet?,What is the most recommended cheatsheet for SQL? Would be better if it's compact but covers all the major aspects of SQL query operations in the PostgreSQL/MS SQL Server system.,3,sql,2020-10-13
iob9e7,Pivot - SQL,"My question/problem decribes the table below

&amp;#x200B;

|filename|price|tax|
|:-|:-|:-|
|abcd\_01.07.2020\_abcd|5|1|
|abcd\_01.10.2020\_abcd|10|2|

into:

&amp;#x200B;

||7 *(month from filename)*|10 *(month from filename)*|
|:-|:-|:-|
|price|5|10|
|tax|1|2|

&amp;#x200B;

Is this possible?",8,sql,2020-10-13
io6qd2,Looking for tutorials that teach how to Normalize an ER diagram.,"Hello, I'm in uni and doing a introductory database course. We've been given projects for which I've made an ER Diagram. Now I need to normalize it before table creation. But all the tutorials I've looked up online show how to normalize from tables. Not ER diagram. Can anyone help me out?",15,sql,2020-10-13
io3np1,What is the 1 best book or video to learn SQL basics?,"I want to learn the basics of SQL. Our teacher is currently teaching us various queries. But, I find it hard to grasp everything in class.

Are there any books, videos to learn SQL for beginners?

I am also doing a project in python(web dev), so I understand that databases are important concepts to grasp as  they are used time and again everywhere.

He is using MariaDB, what should I be using?",1,sql,2020-10-13
io3fu5,Arizona is the largest state?,"I'm reading Practical SQL [No Starch Press] and not sure how to solve this 1). problem: http://dl.booktolearn.com/ebooks2/computer/databases/9781593278274_Practical_SQL_A_Beginners_Guide_to_Storytelling_with_Data_4971.pdf PAGE 381

It wants me to get area of each state so I did this:

select statefp10,
	sum(ST_Area(geom)) as area
from us_counties_2010_shp
group by statefp10
order by area desc;

But what I got are numbers I cannot understand... Like 02 being 313.99_ and that's Arizona, the largest?! Not sure what's going on here.

EDIT: Ok, it was all correct. I made a quick search on Google to find Fips and turns out 02 is Alaska, not Arizona. Everything correct, sorry. Also forgot to cast to geography to get accurate results.",1,sql,2020-10-13
io3593,Read and write to database with VS/Sql,"I'm very new to SQL, and I'm trying to start working with a small company of highly qualified programmers.

They need someone to help with basic things, like app dev and websites and base level on other projects.

The advice I was given is to start off with reading and writing to a database in SQL through Visual Studio.

I have no idea where to start with this and haven't been able to find any tutorials on this.

If someone could give me the basics on how to move forward with this (without all of the abbreviations and advanced terminology) or link a YouTube tutorial of some sort, I would appreciate it so much.

Hope I've included enough information.

EDIT: Also as in which type of project to select in VS",2,sql,2020-10-13
inyjym,NEED HELP WITH INNER JOIN NOT RETURNING RESULTS,"Hey guys, I could really use some help finding out what I'm doing wrong here.  When I run my current query I don't get any results. I do not want to move on to the specific parts of the problem that require certain things if I cannot get it to return a list of all possible store names. Any assistance would be great. Here's the problem:

**The quality assurance department is issuing a recall for all helmets shipped to stores during the first five days of February 2014 due to a safety issue.  They are already handling the notification of individual consumers where records are available. The sales department needs your help to follow up with stores that received the recalled helmets.  Produce a listing of stores that received helmets shipped during the recall period. Your result should have two columns:**

* **StoreName**
* **TerritoryName**

**Sort the list in alphabetical order, first by territory name and then by store name. Each store should only appear once in the list, regardless of the number of shipments they received.**

Here's what I currently have that returns no results:

SELECT DISTINCT s.Name, st.Name  
FROM Sales.Store s   
INNER JOIN Sales.SalesPerson sp   
ON s.BusinessEntityID = sp.BusinessEntityID  
INNER JOIN Sales.SalesTerritory st   
ON sp.TerritoryID = st.TerritoryID  
INNER JOIN Sales.SalesOrderHeader soh   
ON sp.TerritoryID = soh.TerritoryID  
INNER JOIN Sales.SalesOrderDetail sod   
ON soh.SalesOrderID = sod.SalesOrderID  
INNER JOIN Production.Product p   
ON sod.ProductID = p.ProductID

Lastly, here is a picture of the schema of the tables:

https://preview.redd.it/teqoq0i4sml51.jpg?width=3572&amp;format=pjpg&amp;auto=webp&amp;s=156aa7975c6f4a0019b0bfc586b0052940d3bfb6

Any help you guys could give me, regarding either just this INNER JOIN section, or the whole problem would be greatly appreciated. Thank you so much!",2,sql,2020-10-13
inufa5,[PostgreSQL] alternative to large IN clause?,"I have a large list (~300,000) of `IDs` and a particular unique `Time_X` for each of those `ID`s that I need to select out data from a database.

I'm not sure the best way to go about this. I currently have it implemented as follows:

    SELECT
       column1,
       column2,
       ...
    FROM
       large_table
    WHERE
       (ID, Time_X) IN (
          ('A2933F91HF3','2015-02-13'),
          ('B34UP134133','2017-08-11'),
          ....
          ('AF38FF83FJ3','2012-01-15')
        );

This is a huge query, and I assume it's pretty non-optimal. I don't have any CREATE TABLE permissions in the DB, so I can't put my tuples into a table first and the left-join. What's the best way to accomplish this?",2,sql,2020-10-13
inq2o9,Cell content used in where clause of a Stored Procedure - is it even possible?,"Hello Redditors!

&amp;#x200B;

I need some help with creating a procedure that will load conditions from table written as nvarchar(max) and add them as syntax to where clause. 

I'm building a reporting template that will differ with content regarding of the score obtained. I have 2 tables: Table 1 with content, content style and formula basing on which this content to be displayed and Table 2 with person-score data.  Problem here I can't overcome is: can I cast nvarchar(max) to sql syntax I would add to where clause ? I have come up with an idea to create parameters standing for each scoring data column and 'manually create logical clause SUBSTRING In the final table there will be 20 scoring parameters that may be used in the formula so I'm trying to figure out some easier way. I'm assuming that Formula content will be logically correct content that may be added to where 

&amp;#x200B;

Table 1

|Content|Formula|Font\_Family|Font\_Size|
|:-|:-|:-|:-|
|Good Boy!|score &gt; 10 and gender = 'male'|Arial|11|
|You can do it better!|score&lt;= 10|Comic Sans MS|10|
|Good Girl!|score &gt; 10 and gender = 'female'|Arial|11|

Table 2

&amp;#x200B;

|Person\_id|Gender|Score|
|:-|:-|:-|
|1|female|11|
|2|female|6|
|3|male|2|",2,sql,2020-10-13
inpa4v,SQL Optimization Videos - Blatant Self Promotion,"I did things yesterday. Sometimes Reddit likes it when I do things.

Playlist: [https://www.youtube.com/playlist?list=PLPI9hmrj2Vd\_FYZb3K-clTb6Dh-Tr\_zPg](https://www.youtube.com/playlist?list=PLPI9hmrj2Vd_FYZb3K-clTb6Dh-Tr_zPg)

000 Intro - [https://youtu.be/7CRVR6p5UFs](https://youtu.be/7CRVR6p5UFs) \- What I will be focusing on in this series (Code / Physical / Model optimization).

001 Covering Indexes - [https://youtu.be/iuJj\_Vj9avY](https://youtu.be/iuJj_Vj9avY) \- Gotta love how bad AdventureWorks is. I picked a view, used stats io, blindly wrote covering indexes.  Pretty good vid, has some shortcuts I've developed over the years.

&amp;#x200B;

002 Clustered Index - [https://youtu.be/SwtlCVyxqHk](https://youtu.be/SwtlCVyxqHk) \- Killing scans in stats io by changing the clustered index. Also a layman's explanation of how a clustered index is stored on the file... and some ranting. But hey, scans removed.

003 Alternatives To: Recursive CTEs - [https://youtu.be/lHsdUKvMU4U](https://youtu.be/lHsdUKvMU4U) \- What this series will probably morph into. Alternatives To... because that is what optimization is all about. Which syntax works better in the current context. Has a weak version of my ""1 relationship table to rule them all"" structure, and surprisingly... watching an INNER JOIN at 40k logical reads get pushed down to \~80 logical reads.. by switching it to a LEFT.

If you have any 'Alternatives To' ideas or w/e, hit me up and I'll turn it into a video. Not like I'm going to the movies any time soon...

but the Mario 64/Sunshine/Galaxy remaster comes out this month!

""Nintendo, give me free stuff!"" - Rick Sanchez",42,sql,2020-10-13
inomfm,What separates someone who just knows SQL from someone who is good with SQL?,What are abilities or goals to strive for to reach a higher level of understanding/usefulness?,1,sql,2020-10-13
inmsut,Where is 'host' and my 'username' mentioned in MySQL server?,"Basically the title. I'm trying to connect an SQL table to python through mysql.connector, and for that I found out I have to enter host, db, username and password. I know my database name and password but I'm unable to find my username and 'host'. What are they and where are they mentioned?",1,sql,2020-10-13
inksxx,SQL Careers?,"Just wondering if it is possible to make a career out of SQL, and if so where would be a good place to start and what type of jobs would it lead to?",8,sql,2020-10-13
inidvx,Are there any terminal SQL clients?,"EDIT: should have phrased this as ""SQL terminal IDEs"" instead - I see I've caused some confusion with this - I am well aware of tools like \`psql\` and use them quite often.

Noticed that I don't really use that many features of the IDEs I usually switch b/wn (DBeaver &amp; DataGrip), so was wondering if I could save myself some RAM &amp; CPU usage by opting for a terminal-based SQL client instead of such Java resource hogs.

&amp;#x200B;

My OS of choice is Ubuntu - does anybody know of a good SQL client that can run in the terminal? The primary tasks I do are just fetching data from the DB and updating info or deleting entries, so nothing more than composing queries and running them.",0,sql,2020-10-13
inhkh8,SQL for C++,"Hello , 

I am currently taking a course in DBMS and our instructor said he will be teaching us in SQL. But my colleagues said that we shouldn't be taking this course since we took programming in C++ and not JAVA. Just for contest our class is kinda mixed since half the students took programming in Java and the other half took it in C++. **So I have a question, are they correct ? since we can still tell the university to cancel the course for us.**",1,sql,2020-10-13
infptn,Sql: Trying to count the totals of one columns from other column. ( Hard to put into words),"I have a table called WirelessAppData and I am trying to find work out the add up the amount of traffic being used sent and received for the data in the app_type column. I have added the things I have tried.

I really would like to return a table from highest to lowest

    app_type          Bytes_recieved  Bytes_sent
    ------------------------------------------------
    software updates  10098120398214  09832140914
    email              89032409       9874398


    select app_type as ['App Type'], 
    COUNT (*) AS ['Top App type'] 
    from dbo.WirelessAppData
    group by app_type order by ['Top App type'] desc;

    Uncategorized App Type  143305
    Tunnel                           123024
    Media                             85947
    Facebook                        66698
    Search Engine                 62031 
    Social Networking            50168
    Internet Utilities              48973
    Instant Messaging           40977
    File Sharing                    19595
    Games                           13432
    Internal                         12700
    Business                        9333
    iTunes                           9298
    Microsoft                       8995
    Webmail                        4644
    Software Updates          3301

    select app_type, bytes_received,bytes_sent 
    from WirelessAppData where app_type = 'Software Updates' 
    order by bytes_received Desc;

    Software Updates    465108871   551
    Software Updates    460464329   930",1,sql,2020-10-13
incm5l,SQL for Marketers?,"I'm starting a new entry level role at a startup within marketing and growth. My manager mentioned that they might have some 'analysis' type projects for me that will involve the use of SQL. 

I have a little bit of experience using SQL as I had taken a Nanodegree on Udacity about two years ago. However, it's been some time and I'm dusting off the cobwebs to refamiliarize myself with the language.

For my marketers out there, how advanced with SQL do I need to go? Are there any musts that I look into before starting my new job?",17,sql,2020-10-13
in94bv,Group By Count from Multiple Tables with conditions,"Hi all,

I posted a SQL question on StackOverflow but no one answers my question. So I am wondering is there anyone here can help with my SQL question?

[MySQL-Question](https://stackoverflow.com/questions/63758497/group-by-count-from-multiple-tables-with-conditions)",1,sql,2020-10-13
in7zjb,"For data mining purposes, do I need to learn SQL if I am really good at MS Access and Excel?","I would like to start my own data analytics business and was wondering if I really need to learn SQL. In my long career, I have managed just fine working with Access and Excel (and occasionally Minitab). I worked with tables with hundreds of thousands of records (if not millions), and have created extensive queries and reports in Access, and macros and long formulas in Excel. Most of what I read about SQL vs Access talks about network efficiencies and stability and multi-user environments, etc., but I don't care about that. I would be the only one working on the data, and it will all sit on my laptop. The only thing that worries me is if a client has a massive database that Access cannot handle, although I read a way around it would be to link multiple Access databases.

Am I missing something? Shouldn't I be able to dissect any Big Data with only Excel and MS Access?Any input would be appreciated.",0,sql,2020-10-13
in7mr8,Which is better for data analysis sql/r/excel?,"So i know that posting here probably its obvious what you guys think but nvm.. I started learning programming(python) for like 1/2 weeks and with data camp have free course for 5 days i decide To do some of them.. I did 2 about python and now thinking what to do next.. Can someone explain me what's the difference between the 3 of them? What's the strengths and weaknesses of each one and why should i choose sql compared to R and excel.. 


Ps:sorry for my shitty English...",2,sql,2020-10-13
in6stx,Seeking Advice For a Relatively New SQL User Creating His First Database,"Hi,

I am building a data base to log all my extended family's weird old recipes and go to ones with the goal of attaching a Python-Django gui to the front of it to make it searchable and actually useful to people looking to query it. I've been working with SQL for a few years at work, spend most of my days writing reports and stored procedures. Have a couple basic MSFT certs on the subject so not a total novice but have never built a database from scratch. Curious what pitfalls and seemingly obvious mistakes to avoid. I am definitely not the first person to want to build a recipe database but was curious what sort of normalization I should pursue. Ingredients table, measurements table, recipe steps table. My initial build found myself normalizing myself to death and wound up with more tables than probably neccessary making inserting data a bit tricky. Any thoughts, advice, etc. would be greatly appreciated!",2,sql,2020-10-13
in4wtc,"Eliminating SQL dialects differences, by ""transpiling"" from graph object, to specific SQL dialect","Howdy guys and gals, I am trying to create a library that allows me to declare a generic SQL invocation, towards any database, with the intentions of solving the _""80% problem""_.

The idea is to have a graph object, that _""transpiles""_ into whatever specific dialect the user later wants to execute it towards, completely eliminating vendor specific implementation details (sigh! Yes I know it's _""impossible""_, however, I am aiming to solve _only_ the 80% problem)

Anyways, I've got joins, group by, aggregate columns (kind of), and most other parts out of the bat of my head - But I'd like to have some input in regards to whatever features you're using, on a daily basis, which you simply _have_ to have in such a thing, in order to make it useful ...

Read the ghist [here](https://github.com/polterguy/magic.data.common)

Notice, nothing is released quite yet - Looking for community feedback before I close up the features ... :)",1,sql,2020-10-13
imyr6p,Hardware for Basics?,"I'm a complete newb with SQL, just getting ready to start a training course on the basics of SQL. The course syllabus that I'm going by says that a PC is required. Being a casual Macbook user, I don't have a PC, and may need to buy one, probably on the used market. What level of hardware will I need to get the job done? What specs will be fine? Is there any specific hardware that I will benefit from having?

Thanks for the input- I have no experience with SQL.",3,sql,2020-10-13
imsayi,Can someone help me set up a workflow?,"I'm a noob and learning SQL. I want to be able to set up a workflow that allows me to use mysql workbench (unless you have an alternative) and python using visual studio code.

I want to be able to access my views and tables in a local mysql instance from python to use pandas to play around with it.

My biggest hurdles right now is knowing what vs code extensions I should get and how to connect python to mysql to get the table data into pandas as a dataframe.

Also, I may need an eli5 on how mysql instances and connections work. What is root and local host and all that stuff and how would I connect to AWS or Azure RDS in the future? Again I started SQL about a week ago and am having trouble finding understandable explanations.",1,sql,2020-10-13
imq2ol,Responsibilities in data analyst role,"I've been working as a data analyst for 3 years. It was my first job out of college so I have nothing really to compare it to.

I find that I have a ton of down time. I have routine weekly and monthly reports that I've built and generate, but they remain the same and I've automated them.

Is it expected of me that I am pulling new ideas out of my hat? In my review my boss says I'm doing fine and continue to grow, but then I get like a 3.9/5 score for a bs merit increase with basically zero feedback. I've learned nearly nothing from my boss. 

I have an interview with a much larger tech company next week, that hopefully has better processes in place and can give me more responsibilities. I've gotten through one phone interview and a sql assessment with them so far and I'm really hoping I can land this. I feel unappreciated in my current job.",36,sql,2020-10-13
immzus,"When you join on a key, does that narrow the results?","When you join on 1 key, I know it brings the tables together. My question is, as you join on more more keys (fields) does this narrow the results?

When I join on 1 key vs 3 I see my results get smaller. This is normal correct? Can anyone explain to me  whats happening as you join on the keys? Its merging the data together correct?

I put a oracle flair but im sure it applies to all databases.",1,sql,2020-10-13
iml28g,How do querying in large scale database actually works?,"There are billions of video in YouTube.

Whenever we access a video page, the YouTube server have to look up for exactly one record from a table holding billions of records, which seems to be a lot of comparison work to be done.

How do the YouTube's server finish the comparison work in less than one second, and response with information of the video.",2,sql,2020-10-13
imks60,Should a users table be in a different database than website content database?,"I have a website created with PHP and that website has DB that allows you to add or delete comments. I want to create user login now, do I create a new SQL DB for user login? If not how can i just add user login info into the current website DB?",1,sql,2020-10-13
imj7y0,I probably do this at least once per day.,"&amp;#x200B;

https://preview.redd.it/twsvu32dr5l51.png?width=414&amp;format=png&amp;auto=webp&amp;s=1f58a25f8dd3f79d6d18e2b63ff52156c3f54f27

[View Poll](https://www.reddit.com/poll/imj7y0)",2,sql,2020-10-13
imj7dp,Recommendations for a 3rd party replication tool,"The need: A replication tool to replicate SaaS data from our private databases to client sites in a real-time/near real time fashion. Our app data is stored in SQL Server, client data sites could be SQL Server, postgres, MySQL, etc, On-Prem or Cloud. Whether or not the replication tool we use is in the cloud or on prem, it's not as important as cost. We're looking for something that's not a ton of $$$.

I've tried AWS Database Migration Service, and it is working, ableit pretty slow. And I've seen CDATA Sync, and it could potentially work, but we want something that's fast to set up, and doesn't require a ton of tweaking and maintenance for each client that chooses to host their own copy of the data.",2,sql,2020-10-13
imiqs8,Anyone done an SQL hacker rank challenge as part of the interview proess?,"Just got sent a request to do an SQL challenge on Hacker Rank as part of the interview process as a senior BI Analyst. 

Has anyone here done these before? Any advice on prepping for them? It's been a hot minute since I did anything complex SQL (really only been pulling fields to create reports recently). 

Thanks!",32,sql,2020-10-13
imgdnf,Count if multiple cases,"I am fairly new to sql and I can’t get this to work. 
Basically I am trying to see how many cases in the new status have had more than one case. 


I have two tables, client and case. I have client.clientid; case.caseid; case.status. 

I am trying for a query to show me the case.caseid where a client.clientid has more than one case.caseid and has case.status = new. 

Thanks",1,sql,2020-10-13
img20i,Why doesnt this left join work? What mistake am I making?,"Customers Who Never Order

Solution
Suppose that a website contains two tables, the Customers table and the Orders table. Write a SQL query to find all customers who never order anything.

Table: Customers.

+----+-------+
| Id | Name  |
+----+-------+

| 1  | Joe   |

| 2  | Henry |

| 3  | Sam   |

| 4  | Max   |
+----+-------+
Table: Orders.

+----+------------+
| Id | CustomerId |
+----+------------+

| 1  | 3          |

| 2  | 1          |
+----+------------+
Using the above tables as example, return the following:

+-----------+
| Customers |
+-----------+

| Henry     |

| Max       |
+-----------+


#Solution using subquery works

Select Name from Customers where Id NOT IN(Select CustomerId from Orders)

#Solution using left join doesnt work

Select  c.Name as Customer from Customers c Left Join Orders o ON c.Id=o.CustomerId AND o.CustomerId is null",3,sql,2020-10-13
imfvvd,Why cant I just use N-1 directly in this function?,"Trying to get Nth highest salary.

This doesnt work. I get an error in Mysql at N-1.

CREATE FUNCTION getNthHighestSalary(N INT) RETURNS INT
BEGIN
  RETURN (
      # Write your MySQL query statement below.
      
      Select distinct salary from Employee order by salary desc limit 1 offset N-1
      
  );
END

I have to declare a variable to do this.


CREATE FUNCTION getNthHighestSalary(N INT) RETURNS INT
BEGIN

Declare M INT;
Set M=N-1;
  RETURN (
      # Write your MySQL query statement below.
      
      Select distinct salary as getNthHighestSalary from Employee order by salary desc limit 1 offset M
      
  );
END
Why is that?",3,sql,2020-10-13
imfapu,New open-source tool for Postgres query and schema architecture analysis. (SeeQR),"Fellow SQL-ites! The team of engineers at [SeeQR](http://thesee/) (seeker) has been working on a tool that will hopefully help make some lives around here easier. Today, we are excited to be launching the beta of our application and we would love for you to try it out and provide feedback. 

[MEDIUM ARTICLE: DESIGN THE OPTIMAL SCHEMA FOR YOUR SQL DATABASE](https://medium.com/@theseeqr/design-the-optimal-schema-for-your-sql-database-4ba15413a606)

SeeQR is a open source tool for evaluating the performance of queries against different schema setups at various scales in a Postgres environment to allow developers and DBAs to make more informed decisions on their database architecture.

SeeQR works as a standalone application that allows you to either import your existing database or drop in a schema and populate your tables with records. Our build-in record generator allows users to create realistic data from nearly 200 data formats (and growing).

Once the data is created or imported, queries can then be run against these different schemas or scales to test their efficiency for different tasks. The statistics are then collected for comparison. Users can compare different queries within a schema or similar queries on different schemas/scales.

Intended use cases:

* Determining most efficient schema architecture at different scales.
* Exploring the efficiency trade-offs in normalization vs denormalization of your database.
* Evaluating the efficiency of schema designs for your queries that need to be most performant.
* You just want to make a ton of fake data.

To try it out, visit [theSeeQR.io](http://theseeqr.io/) or [GitHub](https://github.com/oslabs-beta/SeeQR) for the application and documentation. If you like it, feel free to give us a GitHub star and some feedback. 

Please note that it is still in beta and is still quite buggy but be we would love your feedback to help inform future progress.  \*Note: in its current format, it does require a local instance of Docker.\*

Thanks!  
Team SeeQR

https://preview.redd.it/gfa5mnshw2l51.png?width=559&amp;format=png&amp;auto=webp&amp;s=78ab24efdb58c7c904ffcabee1f6372cad76c78e",8,sql,2020-10-13
imdnff,Query to optimise a manufacturing schedule,"Basically the title, but has anyone built a query that basically takes various inputs, say a production schedule, raw ingredients, labour, etc and cross joins that against the days/times the manufacturing site is open and outputs an optimised schedule

Or has anyone come across a blog post or any resource that discusses such a topic?

Was asked could I tackle a similar problem and said yes, I'll try... so just wondering if anyone has tackled the problem

All info. welcome - thanks all",0,sql,2020-10-13
imd8qf,SQL Practice,"Hi guys, I am a beginner in SQL and currently I have a few tables here and would like to practice my SQL queries. Any platform I can utilize for practice?",2,sql,2020-10-13
imbzer,Copy table data to another table with same columns + 1 custom column,"ok, I have Table1 with 11 columns (currently using SQLite).

I create Table1\_Copy with same 11 columns + 1 XYZ column which has  INTEGER DEFAULT 0.

when I use ""Insert Into \[Table1\_Copy\] select \* from \[Table1\]  I get ""table has 12 columns but 11 values were supplied (12th value should be set to 0 by default). How can i fix this?=",2,sql,2020-10-13
im9fl0,Complex SQL Statement Visualization,"One of my project involves understanding at complex sql statements. I can understand things better if they are visual. I am looking for a tool that can help visualize sql statements. For e.g:- https://www.fmsinc.com/free/NewTips/SQL/sqlTIP14.asp

However the above only works for sql server. Any tools out there that can do the same with other databases and sql statements?",2,sql,2020-10-13
im70ma,New to SQL,"Hello friends,

I need some help devising a DB, and have no idea where to start. Would anyone be interested in helping me?",0,sql,2020-10-13
im6uob,Is this good normalization?,"Hi everyone, I started learning SQL about a week ago. I jumped right into learning queries by reading *Learning SQL* by O'Reilly and to be frank it just doesn't click with the examples used in the book. So now I backtracked and want to be able to create my own table structure to play with as I go along and I thought what better than something we are all familiar with, social media. So below I used excel to create a basic table structure that would manage data for a simple social media site that allows one to login, post, comment, reply to comments, and know birthdays. Barring the lack of security with the password there, is this a good process for creating and outlining table structures? Also, are there better ways to do the structure in the image? What sources are there that can teach me to better understand and create efficient structures? Lastly, what are the names of people with roles that just create data structures? Frankly seems more interesting than just analyzing data and joining tables!

https://preview.redd.it/i6fnnc33b1l51.png?width=1714&amp;format=png&amp;auto=webp&amp;s=9cd0bbb06db68e741633876bbfb32a7196e3e513",20,sql,2020-10-13
im1gh9,[Oracle] Help with filtering two values in the same column consecutively.,"I'm not sure how to word this question, so I'll just provide an example of what I'm trying to do, this is for data in a medical field (CPT codes), if that helps anyone understand a bit more what I'm going for:

&amp;nbsp;

I have a client that needs accounts that have CPT 12345 (not the real one, obviously) on their account, *as well as*, say, CPTs 90000 through 90010.

So a single account number that has multiple CPTs, one of which has to be 12345, and *at least one more* that is any value between 90000 and 90010.

&amp;nbsp;

The issue is that the join item for these tables is unique to a number of things on the patient's account, called an ""encounter ID"". Their account# isn't granular enough to join on, as they can have multiple line items on their account, so the encounter ID is used to get down to that level of detail. And I'm sitting here wracking my brain trying to figure out how to get SQL to do this for me. If I write a subquery I *have* to include all the CPTs in that subquery, or the encounter ID won't pull in for the join and I get zero results. But if I just include all the CPTs in the subquery, it pulls EVERYTHING that has those CPTs, including cases where the CPTs don't coincide with each other on the same account.

&amp;nbsp;

**Would creating two subqueries work? Example:**

    WITH CPTQ1 AS(
    SELECT DISTINCT
        ACCT_NBR, CPT, ENCTR_ID

    FROM [table]

    WHERE CPT = 12345
    )

    CPTQ2 AS(
    SELECT DISTINCT
        ACCT_NBR, CPT, ENCNTR_ID

    FROM [table]

    WHERE CPT IN (90000, 90001, ... , 90010)
    )

    SELECT DISTINCT
        CPTQ1.ACCT_NBR
        , CPTQ1.CPT
        , CPTQ2.CPT
        [other stuff]

    FROM CPTQ1

    INNER JOIN CPTQ2
        ON CPTQ1.ACCT_NBR = CPTQ2.ACCT_NBR

    [other joins, the WHERE statement, etc.]

&amp;nbsp;

The idea being inner-joining on the ACCOUNT number (the less-granular identifier) would pull in all account numbers that have both requirements met, and would list the CPTs on that account on separate columns, the first column always being 12345, the second being in the 90000-90010 range. Will that work?

My knowledge of SQL is admittedly limited, and I've never stretched my brain this far with it, so I might be understanding the mechanics of how joins work incorrectly. If there's a simpler way to do this, please elaborate. I tend to over complicate things, but I'm not even sure my fix above will work.

I could probably just pull all cases of these CPTs showing up and then do some Excel magic (which I'm much better at) to find the accounts that have both requirements, but I'd like to expand my knowledge of SQL and start solving problems there instead of the much-longer route of pulling extra data, then cutting it out by doing manual work in Excel.

Thanks for any and all help. And if you need further clarification or if my post is formatted poorly or whatever, just let me know and I'll attempt to clarify/fix whatever it is. :)",7,sql,2020-10-13
ilywyu,Sequel Viewpoint Explorer,"I've been working at a company for 3 years that uses Sequel ViewPoint Explorer. Whenever I look for jobs online for like Data Engineer or Process engineer jobs they will sometimes ask for experience with SQL (BigQuery and MySQL). Is there a difference between all of these? I don't want to apply for a job and claim I have SQL experience but Sequel ViewPoint being a totally different thing. I know it's a least a little different because I don't ""hard core"" at all. It's mostly find a table from AS400 and I'm able to use a viewbuilder to drag and drop columns.",7,sql,2020-10-13
iluig4,[PostgreSQL] WHERE clause with item-specific list?,"Suppose I have a list of colors that I want to apply to select individuals:

* Peter - red
* Nathan - blue
* Simon - green

and suppose I have a database `ShirtDB` consisting of `Name`, `Color`, and `Text`, which might look like this:



Name | Color | Text
---|----|----
Nathan | red | ""hey there!""
Nathan | green | ""haha""
Nathan | blue | ""nopers""
Nathan | black | ""can't see me""
Simon | white | ""blinding!""

Is there any way to do something like:

    SELECT
      Text
    FROM
      ShirtDB
    WHERE
       Name IN ('Peter','Nathan','Simon')
       AND
       MATCHUP is ('red','blue','green')

I don't have the ability to create tables, so I can't create a table and do a join--do I have any recourse here?

**Edit**: I meant to say that `MATCHUP` isn't a keyword but I was hoping for something like that. I figured out how to do it using a direct list of values:

    SELECT
      Text
    FROM
      ShirtDB A
    INNER JOIN
       VALUES (('Peter','red'),('Nathan','blue'),('Simon','green')) AS B(Name,Color)
    ON
      A.Name = B.Name
      AND A.Color = B.Color;

**Edit 2**: /u/truilus gave a better solution:

    SELECT
      Text
    FROM
      ShirtDB A
    WHERE (Name,Color)
      IN (
        ('Peter','red'),
        ('Nathan','blue'),
        ('Simon','green')
      );",1,sql,2020-10-13
ils60c,Using union works but OR doesnt work?,"Table: Friendship

+---------------+---------+
| Column Name   | Type    |
+---------------+---------+

| user1_id      | int     |

| user2_id      | int     |
+---------------+---------+

(user1_id, user2_id) is the primary key for this table.
Each row of this table indicates that there is a friendship relation between user1_id and user2_id.
 

Table: Likes

+-------------+---------+
| Column Name | Type    |
+-------------+---------+
| user_id     | int     |

| page_id     | int     |
+-------------+---------+

(user_id, page_id) is the primary key for this table.
Each row of this table indicates that user_id likes page_id.
 

Write an SQL query to recommend pages to the user with user_id = 1 using the pages that your friends liked. It should not recommend pages you already liked.

Return result table in any order without duplicates.


The following query works

select distinct page_id as recommended_page from Likes where user_id IN 
(select user2_id from Friendship where user1_id=1 union select user1_id from Friendship where user2_id=1) and page_id Not in (select page_id from likes where user_id=1) 


However if I switch the union with ""OR user_id IN"" it stops working. Why is that?",6,sql,2020-10-13
ilq28j,Prod access to business users,"One of the applications internal to our Organisation will go to Prod soon. We are using Azure SQL. Some business users want access to the production tables directly to connect from Power BI. They are ready to increase the DB DTUs/vCores if necessary. We have already developed 4 Power BI reports that refresh weekly. I think they also want a real time access to the DB. This will have around 3000 users in total. But, only about 10 will have the Prod tables access. 


Has any of you had to deal with such requests? I'm lost as to what I can come up with. This is not my primary role of my job. My boss has asked me to come up with approaches to handle this request.


So, far I am thinking of creating a PBI dataset with necessary tables they require and share this (can only be refreshed 8 times max/day). This way their queries don't hit the DB and also we don't have to worry about any blocking. But, I need to have at least one other alternative if they insist on connecting to the DB. Should this be avoided at all costs or is there any workaround to achieve this.
Thanks",14,sql,2020-10-13
ilky0q,[Question] MySQL vs PostgreSQL exercise question,"I was doing some Leetcode Exercises (with MySQL) and at the same time trying them on PostgreSQL. In one of them it the following query works in the leetcode website:

    SELECT
        t1.id
    FROM
        weather t1
        LEFT JOIN weather t2
            ON t2.recorddate = (
                SELECT MAX(recorddate)
                FROM weather t3
                WHERE t3.recorddate &lt; t1.recorddate
            )
    WHERE t1.temperature &gt; t2.temperature

When I try to do it on PGAdmin4 or in a Jupyter Notebook (with psycopg2)  it directly disconnects my session. It tells me:

&gt;OperationalError: (psycopg2.OperationalError) server closed the connection unexpectedly. This probably means the server terminated abnormally before or while processing the request.

Is there a difference in how this query should be structured in Postgres? 

The exercise table looks like this

&amp;#x200B;

https://preview.redd.it/vn4m4wm6fuk51.png?width=204&amp;format=png&amp;auto=webp&amp;s=3712c9198508d0d2e091eea21baffd4a97f5ffb7",1,sql,2020-10-13
ilk81u,Good alternatives to HF Korth's Data Base Management System book?,"That book is the best for most things I have found till now, but the problem is that book has some concepts not explained well, is there any other books that has clear cut explanations?",3,sql,2020-10-13
ilejl0,Report Builder Help,"Not sure if this is the best place to ask, but wondering if anyone is better at this than me?

I am trying to create a report that has columns for Workstation, User, Firefox Ver, Chrome, Ver, Adobe Reader Ver, Jave Ver.

I'm garbage at SQL so at the moment (from the below code) I'm getting One column with all apps in it.

So  I guess, how do I split that into one column for each app withing the  report or SQL code?(ran a query in SCCM then from log got executed SQL)

Any help is greatly appreciated.

CODE:

select  all SMS\_R\_System.ItemKey,

SMS\_R\_System.Netbios\_Name0,

SMS\_R\_System.AD\_Site\_Name0,

SMS\_R\_System.User\_Name0,

SMS\_R\_System.Full\_Domain\_Name0,

\_\_System\_ADD\_REMOVE\_PROGRAMS0.DisplayName00,

\_\_System\_ADD\_REMOVE\_PROGRAMS0.Version00  from vSMS\_R\_System AS SMS\_R\_System INNER JOIN Add\_Remove\_Programs\_DATA  AS \_\_System\_ADD\_REMOVE\_PROGRAMS0 ON  \_\_System\_ADD\_REMOVE\_PROGRAMS0.MachineID = SMS\_R\_System.ItemKey

where  ((\_\_System\_ADD\_REMOVE\_PROGRAMS0.DisplayName00 like N'Mozilla Firefox%'  OR \_\_System\_ADD\_REMOVE\_PROGRAMS0.DisplayName00 like N'Google Chrome%')  OR \_\_System\_ADD\_REMOVE\_PROGRAMS0.DisplayName00 like N'Adobe Reader%')  OPTION(USE HINT('FORCE\_LEGACY\_CARDINALITY\_ESTIMATION'))",1,sql,2020-10-13
ildqaw,"Issues with SQL exercise, no idea what they are asking",,47,sql,2020-10-13
ila3hv,SQL Server 2017 / SSMS Fatal error,"Upon trying to install SSMS after installing VS 2019 and SQL Server 2017 I come across this error

""Fatal error during installation (0x80070643)

Microsoft OLE DB Driver for SQL Server: There is a problem with this Windows installer package. A DLL required for this installation to complete could not be run""

I've tried using the Windows .Net Repair tool but to no avail, I still get this issue

Edit: 
SSMS Release 18.6",2,sql,2020-10-13
il7hy5,Why doesnt this query work ?,"This is the second problem in the exercises on https://sqlbolt.com/lesson/select_queries_with_nulls

I am trying to find Buildings with no employees.

Select Building_name from Buildings where Building_name NOT IN (Select Building from Employees)

I used this on sql bolt to find the buildings with no employees. Why doesnt it work?

I am not looking for an alternative solution. I just wanna know the mistake I am making.

Edit: As u/ichp suggested I wasnt checking for nulls.",9,sql,2020-10-13
il69xs,Generic terms that can be applied to both SQL TABLEs and VIEWs? (and sometimes functions too),"I'm writing a codegen/definitions system that automates a lot of stuff related to SQL + GraphQL schemas, and there's quite a lot of code where there's a variable that can take either a TABLE name or a VIEW name/definition object, as for certain purposes they're treated like the same thing.

So far I've just been using field names like:

* `table_or_view` - which has a value of literal strings `table` or `view`
* `table_or_view` - which has an object that contains the definition for that table/view
* `table_or_view_name`- which can hold the name of any SQL table/view

...and stuff like that.

And unfortunately there's probably even a few places in my code where I'm just using `table` even though the variable handles VIEWs too.

Are there any more generic terms that would be better than `table_or_view` ?  I guess at least it's pretty clear what it means... I'm big on naming things being as stupidly obvious as possible so that there's no ambiguity.

There's also cases where a SQL function/procedure might return a table too, so in that case I probably need a broader term.",2,sql,2020-10-13
il5zjf,Data-driven pivot/restructuring,"Hi all-

 I’m not new to SQL but I haven’t used CTEs.

 Is there a way take a table with this structure:

Date | Amount | Category
4/15/20, $24.57, Food
4/21/20, $123.45, Phone
4/22/20, $23.21, Gas
Etc

and return a result like this:

Q2_Food | Q2_Phone | Q2_Gas
$24.57, $123.45, $23.21

I’d like to create a VIEW that does this so that it’s always up to date.

Bear in mind that in practice, there would be more rows per category and I’d return sums or other aggregate measures. Also, the categories might change so I’d like to have a data-driven approach so I don’t need to pre-specify the categories.

I’ve looked for examples online but haven’t seen anything that covers this.

Thanks for your help!!",2,sql,2020-10-13
il1ivd,A Book to Learn SQL with Scientific Datasets?,"I'm reading Pratical SQL [No Starch Press] and it's amazing how interesting it is to learn SQL with real examples and analyzing data, I feel like a God. I wonder if there are more books of this kind but more science oriented like Astronomy, Physics, Biology etc. instead of the Sociological approach this book takes.

Thanks for your help.",38,sql,2020-10-13
ikyn08,Need a 10 minute consultation from a BigQuery expert. Anybody here kind enough to help?,It's an emergency,0,sql,2020-10-13
ikxqbd,Need a list of fields and datatype from a table,"I'm using SQL Server Management Studio  v18.  I have some databases and tables.  How can I get a list of all the fields in a table and their data type?  Such as:

name   varchar(15)  
address varchar(30)  
age   int  
state varchar(2)  
etc

I realize I can just look at them and type them up but I'm sure there's a way to export the fields and datatype easily.",2,sql,2020-10-13
ikw56n,CASE WHEN optimisation,"Hi all, I’m writing a query to create an extra column that sorts episodes into some categories. I’m using SSMS. 

The main table (table_a) has a primary key (episodes) that can have multiple entries in another table (let’s call it table_b) there is column x in table_b that I am using as part of my case when’s to assign categories.

I need something like:

CASE WHEN EXISTS (only one record from x where a.episode = b.episode AND  b.x IN (range of values)) 
AND NOT EXISTS (any record from b where x IN (range of values))
THEN newGroup1

(Same as above for a few other categories)

WHEN EXISTS (MORE than one record from x where a.episode = b.episode AND x IN (values)
THEN MultiGroup

ELSE ‘na’ END AS newcategory

So, basically I need to able to have some categories where there is only one result for the sub query and one where there are more than one. I was thinking of meeting ANOTHER sub query and using some kind HAVING count(*) = 1 

I can get it to run, but it is a little slow. It’s eventually going to run as an update statement, but just trying g to get the select query right first.",2,sql,2020-10-13
iku76l,Parser error with HAVING COUNT in [Google Charts Query],"I have a table from which I want to extract all rows that match the following criteria:

* either the value in column X = 'Y', or
* the concatenated values of column T and U in a given row are unique, which is to say that, for any given row returned, there's only one such row with that T and U in the original table.

I'm using [Google Charts' query language](https://developers.google.com/chart/interactive/docs/querylanguage#aggregation-functions), which is a gimped version of sql, but supports WHERE and HAVING , and COUNT, which is all I think I need to make this work.  I can make the first of the two criteria easily with a simple WHERE. I'm just getting a parser error whenever I try to use HAVING or COUNT. My latest attempt is this:

    select * where X = 'Y' or having count(concat(T,U))=1

But it raises this error (which I think is truncated because I'm doing this via Google Sheets):

    Unable to parse query string for Function QUERY parameter 2: PARSE_ERROR: Encountered "" &lt;ID&gt; ""having """" at line 1, column 35. Was expecting one of: ""("" ... ""("" ...

Any ideas?",1,sql,2020-10-13
iku45t,MAX SQL Help,"I am trying to create a query to pull back a name for different agencies based on which one has the highest sales count. 

Example: If an agency in the database has 2 different names (due to unclean data) and are grouped by a key(zip +another variable) so it returns two lines having sales counts of 2. 

My current query is below but since there are two records of 2 it pulls both in when I just want one. In these cases where it ties, it doesnt matter which it common name it pulls, I just need it to be one row.

&amp;#x200B;

https://preview.redd.it/91kdhnnjzlk51.png?width=596&amp;format=png&amp;auto=webp&amp;s=1c1b597dea44253d7a062cff2772bb209fc99f87

&amp;#x200B;

DROP TABLE IF EXISTS  #temp

SELECT AgencyKey,

CommonName,

GroupName,

COUNT(PolicyID) AS cnt

INTO #temp

FROM staging

GROUP BY AgencyKey,

CommonName,

GroupName

&amp;#x200B;

DROP TABLE IF EXISTS #FINAL

SELECT T.\*

	INTO #final 

	FROM 

(

SELECT DISTINCT AgencyKey, MAX(cnt) maxcnt FROM #temp t

GROUP BY AgencyKey 

)M

JOIN #temp T

ON M.AgencyKey = T.AgencyKey

AND M.maxcnt = T.cnt 

	WHERE T.AgencyKey ='110038 ME'

&amp;#x200B;

	SELECT \* FROM #FINAL 

	ORDER BY AgencyKey",2,sql,2020-10-13
iku3rh,Interesting SQL Problem I need same help with,"Hi everyone,

Basically I want to know how to count hours until a certain event. For instance, sales of hot dogs each hour until the baseball game starts. 

We have the game\_date as a time stamp. 

The output should be three columns for each hour until game\_date: hours, sale count, sales. 

Any input? Thanks!",2,sql,2020-10-13
iks2hd,Am I in over my head?,"Hi all,

I'm new to SQL but I've been dabbling in the basics for a few months. I have a solid understanding of ""the big 6"" and how to query the data I need from various tables in our database. I applied for a position that requires experience in data analysis in Excel (easy for me as my day-to-day is primarily excel analysis), but the recruiter thought I'd be a good fit for another analyst position that requires SQL experience, because I told her that I started to learn SQL on my own and that I have used it at a very low level for the past few months.

Did I get in over my head mentioning the fact that I'm slowly teaching myself SQL? I've read stories where people have said that they are intermediate level but quickly found out that they were far below that. I know I am a total noob, but is there anyway for me to brush up quickly so I can get to a place where I can say that I know the basics very well? How quickly can I boost my knowledge? Advice and resources are appreciated.

Update: Thank you all for your responses. What a community! I have a feeling I’ll be posting a few more questions while on my journey to learn SQL. This was really helpful!",43,sql,2020-10-13
iks1tt,Need help converting to date time,Hello! I’m trying to convert an integer field that’s currently formatted MMDDYY to a true date MM-DD-YYYY. I keep trying different convert and casts but I guess I don’t understand them because I just keep getting an error saying conversion date is outside of expected range or whatnot. It doesn’t sound too complicated but I’ve now been failing for hours- help!,1,sql,2020-10-13
ikryg1,"HELP - Transaction that updates data in a table if they key already exists, if the key does not exists it inserts from another table.","I apologize if this entire post is a bit disjointed, or off-base. I only recently started learning SQL, so all of my knowledge comes from being self taught in the last month and a half or so. Please do not hesitate to say if there is a better way to go about this, like I said I am very new. Let's get into it.

Essentially I am trying to calculate a monthly compensation target for each of the sales reps that I support. I have a created a view that does so effectively, however I am running into a problem when it comes to tracking history, which is essential to this process for auditing purposes. My current solution is to create a MonthlyTarget table that pulls data from the view. I want a single query that when run updates existing data on the table if a position code and date key match, if not I want the query to insert the missing lines from the view. The below is the code that I cannot seem to get to work. Any input would be very much appreciated!

view = the view i am trying to pull data from

source = the table i wanted update from data on the view

&amp;#x200B;

&amp;#x200B;

START TRANSACTION

WHERE EXISTS (SELECT \* FROM target WHERE target.position,target.asofdate = view.position,view.asofdate

INNER JOIN view

ON target.position = view.position

AND target.asofdate = view.asofdate)

BEGIN

UPDATE target

SET target.repname = view.repname,

	target.AnnualVariable = view.annualvariable,

target.monthlytarget = view.monthlytarget

WHERE target.position = view.position

END

ELSE

BEGIN

INSERT INTO target (Position,RepName,AnnualVariable,monthlytarget,AsOfDate)

SELECT Position,RepName,AnnualVariable,monthlytarget,AsOfDate

FROM view

END

COMMIT",1,sql,2020-10-13
ikom1x,"MSSQL - Query for missing documents, help please?","Hi SQL,

This should be pretty simple but I'm having a time figuring it out.  I just need to create a report of employees that have failed to turn in one or more of a set of required documents.

So, if the required documents are - drivers license, social security card, proof of insurance, fishing license

&amp;#x200B;

|Employee Name|Document Type|Date Submitted|
|:-|:-|:-|
|Fred Miller|Driver's License|2-2-2020|
|Joe Smith|Fishing License|1-1-2020|
|Joe Smith|Proof Of Insurance|1-1-2020|
|Joe Smith|Social Security Card|1-1-2020|
|Joe Smith|Driver's License|1-1-2020|

I need to show that Fred Miller has failed to turn in everything but his Driver's License:

Report of Missing Documents

Fred Miller - Social Security Card

Fred Miller - Proof of Insurance

Fred Miller - Fishing License

&amp;#x200B;

Thanks for any help!",5,sql,2020-10-13
ikmqyc,Keep getting duplicate rows,"Hi everyone,  


I am using subqueries and joins, but having trouble. Each of the subquery columns are all duplicates. It is all supposed to be unique based off of the users.user\_id. I might be doing this wrong entirely. For sure this is the longest command ive written. Ill be happy to explain more as well!

Here is the query:

SELECT users.user\_id, [users.email](https://users.email/),

( SELECT SUM(entries.entry\_fee)

FROM entries

JOIN users ON entries.user\_id = users.user\_id

JOIN games ON entries.game\_id = games.game\_id

WHERE entry\_date BETWEEN '2018-01-01' AND '2019-01-01' AND sport = 'NFL'

) AS Total\_Entry\_Fee\_NFL\_2018,

(SELECT SUM(entries.entry\_fee)

FROM entries

JOIN games ON entries.game\_id = games.game\_id

WHERE entries.entry\_date BETWEEN '2018-01-01' AND '2019-01-01' AND sport &lt;&gt; 'NFL'

) AS Total\_Entry\_Fee\_Others\_2018,

(SELECT COUNT(entries.winnings)

FROM entries

JOIN users ON entries.user\_id = users.user\_id

) AS Total\_Winning\_Entries, 

(SELECT (SUM(mobile\_entry) / COUNT(mobile\_entry))

FROM entries

WHERE entry\_date BETWEEN '2018-01-01' AND '2019-01-01'

) AS Percentage\_Of\_Mobile\_Entries,

MAX(payments.payment\_date) AS Last\_Paid\_Entry\_Date, SUM(payments.amount) AS Net\_Deposit\_Value

FROM users

INNER JOIN entries ON users.user\_id = entries.user\_id

INNER JOIN games ON entries.game\_id = games.game\_id

INNER JOIN payments ON users.user\_id = payments.user\_id

GROUP BY users.user\_Id, [users.email](https://users.email/);",3,sql,2020-10-13
ikm16k,Would you use RocksDB (MyRocks) as an Analytics/Reporting Database?,"In the MySQL world, there aren't that many high volume storage engines that you can use for analytics/reporting type OLAP workload. 

We used to have TokuDB, but that has been discontinued. 

I was wondering if anyone here has heard a case of using RocksDB for this purpose?",7,sql,2020-10-13
iklyqm,Applying a percentage to a running total,"I must be having a brain fart this morning because I just can't wrap my head around how to do this without over complicating it.

I have a balance amount and need to know how much will be paid out over 4 steps.  Step 1 pays out 50%, Step 2 pays out 33.33%, Step 3, pays out 50%, and the final step pays out the balance or 100%

Payout Step table:

|Step|Percent|
|:-|:-|
|1|.5|
|2|.3333|
|3|.5|
|4|1|

So if you had a $1000 balance you would be paid out like:

Desired Result output.

|Step|Amount|
|:-|:-|
|1|$500|
|2|$166.66|
|3|$166.66|
|4|$166.66|

I can't simply apply the percentage to the balance because while it would work for Step 1, the remaining steps would be off.  Instead I need to reduce the balance with each step and apply the percent.  Similar to a running balance I suppose.  Step 1 would have a starting balance of $1000 while Step 2 would have a starting balance of $500, Step 3 $333.34, and Step 4 $166.66.

EDIT: To be more clear I have a table of balances I link up to my table of payout steps and rates.  There could be anywhere from 1 to 12 different steps.  I'm looking for a result set that would give me the amount for each step. ",2,sql,2020-10-13
iklw92,SQL Noob: field no. 37032036 no defined in the employee table,"Hey all, I am in the middle of migrating our Microsoft Dynamics SQL 2005 accounting DB over to SQL 2016.

Backup of original DB goes fine, as does the restore to a new Windows 2016 server with brand new SQL 2016 install.  Client install of SW is fine locally and on remote systems and I'm able to open up the DB.  When I go to open up the Company within the DB, either on the local system or a remote client, I get the following error:

Field no. 37032036 is not defined in the Employee table.

I'm able to click though just fine and everything seems to be behaving itself, client SW does not seem adversely affected, and aside from that pop up it's a miracle this is working.

Research seems to show that this is not a big deal and I should just add the field to the employee table however me not know sql at all and me no good at things like that.  I can connect to the DB via SSMS and there is a table called employee but...yeaaaahhh...see above with me not knowing a darn thing about sql tables or any other hip hop like that.  Any insight into what I should be looking at to resolve this error?  

\-V",2,sql,2020-10-13
ikjzyq,I didn't know where to ask this question so I came here," 

I was given this task to practice for an exam but I can't solve it.I tried and I also looked for similar examples online but couldn't help them. If someone can help me solve it or provide a similar example I would be really careful

The task We are given the following information

The most important tables in a library information system are as follows.

Books(bid,author,title,publisher,year);

Members(mid,name,surname,address,phone);

Borrow(rid,bid,mid,sid,date);

Staff(sid,name,surname,address,phone)

In addition, we have the following data.

1 disk page = 8KB

|Books| = 1.000.000 records, 320 bytes/record, 25 records/page, 40.000 pages

|Members| = 3.000.000 records, 200 bytes/record, 40 records/page, 75.000 pages

|Borrow| = 300.000.000 records, 40 bytes/record, 200 records/page, 1.500.000 pages

|Staff| = 400 records, 200 bytes/record, 40 records/page, 10 pages

A database management system has a buffer pool with 1000 pages. Write all additional assumptions!

We have to

Suppose that a B+ tree index is defined using the key Borrow.date. The size of a page is 8KB, the size of record identifiers is 8B, the size of page identifiers is 6B, and the size of the date instance is 8B.

a) Calculate the size of the index as accurately as possible.

b) Estimate the number of blocks read from the index if the search condition is date&gt;1/1/2017. Write all additional assumptions.

Can someone please help me I spent I lot of time looking for the solution but couldn't find it",3,sql,2020-10-13
ikh94m,[help] My database has been compromised with push notifications that redirects user to ad pages.,"I found iframes hidden in WordPress pages, since WordPress pages are stored on DB, is there a query I can use to find them?

edit: typo",15,sql,2020-10-13
ikgu5q,What’s an example of how I would be using SQL at a company?,"Might be a dumb question, but where would the data from the company I’m using SQL for be coming from? Like will they have databases and tables set up for me, am I doing that myself, or it depends?

Can anyone give a specific example of how they use SQL on the job? 

Any help is appreciated thank you!!",4,sql,2020-10-13
ikfdas,How to Add data into existing table column in postgres,"I am trying to add a line via code (performing migration) where I have to add one line in existing column (which has a string and storing JSON as type of JSONB)

&amp;#x200B;

A particular table has 1269 records and I want to update at every location with business logic mention in the query below 

&amp;#x200B;

Just a note- using knex - and performing migration with up and down method

&amp;#x200B;

That column has below JSON as JSONB at 1269 records

&amp;#x200B;

&amp;#x200B;

&amp;#x200B;

        {
            ""roles"": [
                ""ADMIN"",
                ""USER""
            ],
            ""features"": {
                ""USER"": [
                    {
                        ""title"": ""Menu"",
                        ""submenu"": [
                            {
                                ""slug"": ""key"",
                                ""text"": ""key""
                            }
                        ]
                    }
                ],
                ""ADMIN"": [
                    {
                        ""title"": ""Menu"",
                        ""submenu"": [
                            {
                                ""slug"": ""dash"",
                                ""text"": ""dash""
                            },
                            {
                                ""slug"": ""user"",
                                ""text"": ""user""
                            }
                        ]
                    },
                    {
                        ""title"": ""Others"",
                        ""submenu"": [
                            {
                                ""slug"": ""activity"",
                                ""text"": ""Activity""
                            },
                            {
                                ""slug"": ""notification"",
                                ""text"": ""Notification""
                            },
                            {
                                ""slug"": ""issue"",
                                ""text"": ""issue""
                            }
                        ]
                    },
                    {
                        ""title"": """",
                        ""submenu"": [
                            {
                                ""slug"": ""others"",
                                ""text"": ""Others""
                            },
                            {
                                ""slug"": ""chat"",
                                ""text"": ""chat""
                            },
                            {
                                ""slug"": ""about-us"",
                                ""text"": ""About Us""
                            }
                        ]
                    }
                ]
            }
        }

Now I want to add one more value to the above JSON which should reflect all the correspondence records.

&amp;#x200B;

In Admin in above JSON I want to add on more value after notification.

The value looks like 

&amp;#x200B;

         { 
           ""slug"": ""students"",
           ""text"": ""Students""
         }

&amp;#x200B;

And The final table column I want to updated with all records with below result

&amp;#x200B;

        {
           ""roles"":[
              ""ADMIN"",
              ""USER""
           ],
           ""features"":{
              ""USER"":[
                 {
                    ""title"":""Menu"",
                    ""submenu"":[
                       {
                          ""slug"":""key"",
                          ""text"":""key""
                       }
                    ]
                 }
              ],
              ""ADMIN"":[
                 {
                    ""title"":""Menu"",
                    ""submenu"":[
                       {
                          ""slug"":""dash"",
                          ""text"":""dash""
                       },
                       {
                          ""slug"":""user"",
                          ""text"":""user""
                       }
                    ]
                 },
                 {
                    ""title"":""Others"",
                    ""submenu"":[
                       {
                          ""slug"":""activity"",
                          ""text"":""Activity""
                       },
                       {
                          ""slug"":""notification"",
                          ""text"":""Notification""
                       },
                       {
                          ""slug"":""students"",
                          ""text"":""Students""
                       },
                       {
                          ""slug"":""issue"",
                          ""text"":""issue""
                       }
                    ]
                 },
                 {
                    ""title"":"""",
                    ""submenu"":[
                       {
                          ""slug"":""others"",
                          ""text"":""Others""
                       },
                       {
                          ""slug"":""chat"",
                          ""text"":""chat""
                       },
                       {
                          ""slug"":""about-us"",
                          ""text"":""About Us""
                       }
                    ]
                 }
              ]
           }
        }
    

&amp;#x200B;

How Can I do it? This is the migration code I am performing 

&amp;#x200B;

&amp;#x200B;

        const table = `${users}.${subscription}`;
        
        
        const up = async(knex) =&gt; {
        report menu
        
        	await knex(table)
        		.whereNotNull('features')
        		.whereIn('type', ['BILLED']) // where type is BILLED
        		.update({
        			roles_features: knex.raw(''), // here I am confused what and how to update with new value? Like mentioned in above statements
        		});
        
        };
        
        //Same thing I am looking to remove the added logic here, like revert changes that added above
        const down = async(knex) =&gt; {
        	await knex(table)
        		.whereNotNull('features')
        		.whereIn('type', ['BILLED'])
        		.update({
        			roles_features: knex.raw(''),
        		});
        
        };
        
        module.exports = {
        	up,
        	down,
        };
    
    

And this is how the table looks like in PGADMIN

&amp;#x200B;

\[!\[enter image description here\]\[1\]\]\[1\]

&amp;#x200B;

&amp;#x200B;

Can anyone help me with this? Please Help

&amp;#x200B;

Thanks

&amp;#x200B;

  \[1\]: [https://i.stack.imgur.com/q3ojQ.png](https://i.stack.imgur.com/q3ojQ.png)",3,sql,2020-10-13
ikbyqg,Need SQL Help with pivot,"Hi!

I need some help with SQL and it is giving me hard times. I have 2 tables and I'm trying to create the 3rd one. Basically first table (Table1) has Ticket\_ID, Ticket\_category, start date and end date.

Table 2 has multiple records of modification (Sort of change log table). Structure is: Ticket\_id, Ticket\_mod\_date, old\_val, new\_val. I'm trying to create the 3rd table by pivoting the information in the flattened format.  Structure-

Ticket\_ID, Ticket\_Category, Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec

(table3 in picture). I'm trying to use pivot and it works fine if I do not use the table2 but as soon as I bring table2, It gets messy.  I'm not sure how to handle it in the query and pivot back.  appreciate any help! Thanks  
Edit: all the tables are in comments section",2,sql,2020-10-13
ikb3a7,Where to train SQL,"So i am learning SQL online but didn't got a lot of practice. i would like to know where you guys recommend to get some training, mainly to help memorizing basic and intermediate stuff. Preference to PostgreSQL.",34,sql,2020-10-13
ik9nd8,Query a Text File for word count/ frequency?,"Edit: Solved  

-----

Sorry for the vague-ness, I'm still new to SQL. I'm practicing with Google BigQuery and SQLite, if that helps.

I have a .txt file of a speech transcript and I am curious to practice counting words, lengths, remove common words, etc.

My question is: How can I turn a .txt word file into something SQL can query? Can anyone please help direct me?  

^*(my_google-ing_needs_work)*

I should add: I know some Python but that was proving to be difficult for me.",5,sql,2020-10-13
ik70kw,Sql or mysql,"For some who wants to work as a business analyst, would you recommended learning mysql or sql?

Does it really
Matter ?",0,sql,2020-10-13
ik6oig,percentage not showing up using sqlite,"I have this query but I cannot seem to make the pct column to work. It keeps outputting to 0 instead of showing a percentage.  Anybody can help me take a crack at this? Thanks in advance!

&amp;#x200B;

SELECT AT.testVariation, FVI.status, count(1)\*1 as users\_per\_teststatus, sum(TT.totalusers\_per\_test)\*1 as totalusers\_per\_test,  
count(1)\*10 / sum(TT.totalusers\_per\_test)\*10 as pct\_test  
FROM onboarding OBA, favorite FVA, abtesting AT, onboarding OBI, favorite FVI, (select count(1) as totalusers\_per\_test, testVariation  
from abtesting  
group by testVariation) TT  
WHERE OBA.userId = FVA.userId  
AND OBA.userId = AT.userId  
AND OBI.userId = AT.userId  
AND OBI.userId = FVI.userId  
AND TT.testVariation = AT.testVariation  
GROUP BY AT.testVariation, FVI.status  
;

&amp;#x200B;

Sample output below: 

&amp;#x200B;

|testVariation|Status|users\_per\_teststatus|totalusers\_per\_test|pct\_test|
|:-|:-|:-|:-|:-|
|A|active|90829|1123547|0|",1,sql,2020-10-13
ik64xd,How to join and multiply from different tables,"Hey guys,

I'm kinda new and I've been trying and trying, reading and reading, couldn't get it done. I need help! :(

API\_ITEMS

|ID|NAME|PRICEWITHVAT|VAT\_ID|
|:-|:-|:-|:-|
|1|computer|$10|1|
|2|tv|$15|2|

  
API\_VAT

|ID|NAME|AMOUNT|
|:-|:-|:-|
|1|10%|0.10|
|2|15%|0.15|

&amp;#x200B;

I need to ""create"" a new table (with Query on DBeaver) where I can see the items from API\_ITEMS without VAT on price, basically the cost.

So, how can I do that?

This is what I'm trying to do:  


|ID|NAME|COST (price without VAT)|
|:-|:-|:-|
|1|computer|$9 (this would be the result of $10-$10\*vat\_ID if that makes sense)|

&amp;#x200B;

Thank you so much for any help you can give me! I've read tons of tutorials and couldn't manage to do it :(",1,sql,2020-10-13
ik4vyx,Query to find the first entry of an identifier that has the output time greater than second entry of the same identifier,"I have a table of below format. The identifier is something common that can be used for multiple product. Here, the ID 1,2, 3 and 4 have the input time as '2020-01-02 08:30:26.100' and output time as '2020-02-02 08:30:26.100' except for identifier C and D. The identifier C that has ID as 3 has the output time greater than the same identifier with ID as 6. I want to write a query to find the identifier which falls into this category where the first entry of an identifier has the output time greater than second entry of the same identifier. The second entry for an identifier can be made to a different product only after the first entry output time is filled with a valid date (like identifier A)

    ID    Identifier    InputTime                         OutputTime             Product
    1         A       2020-01-02 08:30:26.100          2020-02-02 08:30:26.100     ABC     
    2         B       2020-01-02 08:30:26.100          2020-02-02 08:30:26.100     ABC      
    3         C       2020-01-02 08:30:26.100          2020-06-10 08:30:26.100     ABC      
    4         D       2020-01-02 08:30:26.100          2020-06-10 08:30:26.100     ABC      
    5         A       2020-06-02 08:30:26.100          2020-06-02 08:30:26.100     DEF      
    6         C       2020-06-02 08:30:26.100          2020-06-02 08:30:26.100     DEF      
    7         D       2020-06-02 08:30:26.100          2020-06-02 08:30:26.100     DEF",5,sql,2020-10-13
ik2e57,How to implement Depth first search on sql table,"Is it possible to do a depth first on a sql table?
How the table structure?
I was thinking of using format

id, value, breath index, depth index

I not sure how to traverse that using depth first search

Thanks.",3,sql,2020-10-13
ijy2in,recursive sql?,"I have one table with three coloumns. Data structure like this:

&gt;Id, NewId, EndID

The table holds information about company mergers.

* ID = The companys ID
* NewId = The new id of the company that was created by merging two id's
* EndID = if the company is still active (that is - not merged)

This means:

* All rows have id, and endID
* If Id is not merged - newid is null.
* IF there is a merger at any time, NewID is the new company.
* A minimum of two companies can have the same newID. This means that the new company will have three rows:

`id1, newid, endid`

`id2, newid, endid`

`newid, newid, endid`

I want to create a query that returns how many levels down the merging goes, and how many companies are ind each merger.

Data example for a single EndID

&amp;#x200B;

https://preview.redd.it/0avo5wgbbck51.png?width=193&amp;format=png&amp;auto=webp&amp;s=7af49cce3c66b0c4c680d752b2f98e9130efac78

My current query is this:

    select l1.endid as end_company, l1.level_ones as number_in_first_level, l2.level_twoes as number_in_second_level
    from
    (select endid, count(*) level_ones, Level from users
    where endid &lt;&gt; Id
    AND endid = NewId
    group by endid) l1
    left join 
    (select endid, count(*) level_twoes, Level from users
    where endid &lt;&gt; Id
    AND endid &lt;&gt; NewId
    group by endid) l2
    on l2.endid = l1.endid

This query is not very dynamic though. And it only works two levels down.

IS there a better way?

EDIT: [https://www.reddit.com/r/SQL/comments/ijy2in/recursive\_sql/g3kjzci/?utm\_source=reddit&amp;utm\_medium=web2x&amp;context=3](https://www.reddit.com/r/SQL/comments/ijy2in/recursive_sql/g3kjzci/?utm_source=reddit&amp;utm_medium=web2x&amp;context=3)",2,sql,2020-10-13
ijw9o5,Querying Time,I noticed today that when I was using python to query SQL it took 10 seconds whereas in SQL it was instantaneous. What could be the cause of it?,8,sql,2020-10-13
ijrk55,sql server express size limits,i am using sql server express 2014 (free version) and from what i understand is that it is limited to 10 GB. after doing some research i came across a post on stack that said its 10GB per database and not the total database. can anyone confirm this? i built a webscraper in python and have a pretty complex etl process going on and dont really want to switch over to postgres or maria as i use sql server for my day job. im @ 50% capacity now in terms of usage,2,sql,2020-10-13
ijiypk,Need help with a certain SQL question....,"Here's the website where the database is on: https://www.db-book.com/db7/university-lab-dir/sqljs.html

the question is: make a list consisting of “Student_name” and corresponding “Advisor_name”. Column names should be exactly same as given.

Thus far I've managed, 

select s_ID, i_ID from advisor /////displays the advisor list on Instructor id to student id.

select name from student join advisor on student.ID=advisor.s_ID; ////student id's to their names

select name from instructor join advisor on instructor.ID=advisor.i_ID; //// instructor id's to their names

I just have to get these 2 to add into one table but dunno how to make it happen.

I do get the logic, a=b; a=c and b=d, have to show c=d.

Thanks in advance!",4,sql,2020-10-13
ijhjr6,mkdir command syntax wrong. Why?,"Why is this command wrong?

    C:\App\db_home\WINDOWS.X64_193000_db_home&gt;mkdir -p /u01/pdb1/
    The syntax of the command is incorrect.

I'm trying to follow this tutorial to create a PDB from PDB$SEED:  [https://www.youtube.com/watch?v=sjXAzGObv9w](https://www.youtube.com/watch?v=sjXAzGObv9w)",0,sql,2020-10-13
ijgncg,"What is the role of ""technical owner""?","I unknowingly became the technical owner of a million dollar dashboard, and I'm still a bit unsure how it fell to me.  The dashboard ETL has a lot of issues, mostly around volume of data (hipaa data), lack of disciplined execution plan/logical read analysis during development, and not having Incremental load in the most expensive processes. 

I had virtually 0 contributions to development, and had little power to over-write the direction of the lead architects.  The entire development team, of about two dozen people, are offshore contractors.  We cut ties with them shortly after a very rough go-live, and knew the end is there when their code failed UAT performance testing very badly. 

Now we have a new contracting team for golive support, but they had no exposure to this project except for a short Knowledge transfer initiative.  But I am getting daily stress on this because we are barely meeting SLA,  etl is so heavy and tight that when our production server experienced memory leaks, we couldn't refresh anything for weeks.  Then I learned our processes might be causing other teams to not meet SLA.  Then the product owner left the company.  

I dont even know what to do.  It's so stressful, my team is offshore and not there during most of the day.  My boss is split too thin to be of assistance.   
Trying to communicate my concerns to the offshore team is hit or miss.  The new product owner never even liked the project and has historically expressed that"" we never shoulda greenlighted given the poor design and other limitations"".",21,sql,2020-10-13
ije18t,WHERE date &gt;= ‘2020-08-01’ runs in less than a second...but any date function to change that to the current month take 30 seconds to a minute. HELP!,"I have a PowerBi direct query that I need to optimize. I’m trying to get MTD data. When I hard code the date my query runs in less than a second. 

Using this took almost a minute:

    DATEADD(DAY, 1, EOMONTH([mydate], -1)) =&gt; DATEADD(MONTH, -1, getdate())

Lazily, I tried this and got it down to 33 seconds:

    MONTH(mydate) = MONTH(current_timestamp)
    AND YEAR(mydate) = YEAR(current_timestamp)

What’s the fastest way to achieve this?

MS SQL",37,sql,2020-10-13
ijd838,How do you plan your table structures?,"Do you generally write out your tables by hand first or on excel with the field data types and how you plan to connect each table? Or do you just start chugging away with SQL and just use ALTER modify/change when you need to change something? 

I’m a beginner and just learning but I was wondering how experienced folks go about it for personal projects and for professional work projects?",8,sql,2020-10-13
ij1cfy,Some general questions,"Im a senior in high school and thinking about learning sql simply because i have no idea what i want to do, my questions are is it truly possible to get a job with sql without a degree or experience? what job titles exactly are available? what is the typical salary range? how long does learning sql take with no knowledge and how can i go about it? and should i learn another language with sql or can i land a job just with sql? even a single answer would be much appreciated",16,sql,2020-10-13
iiyvmy,Getting data from multiple API sources into one DB for the use of PowerBI,"Hi all,

Is there a way to automatically get data from an API source and place that in a database (like a Google DB). I am using multiple SaaS solutions like Web Analytics and Billing services with the ability to get all the data through their APIs. My wish is to get all the data at midnight placed in one single DB to provide PowerBI the most accurate data.

Is there a simple solution or guide to accomplish that?

Thanks a lot!",7,sql,2020-10-13
iixo0p,"Always-on, ""progress"" of database in Reverting status?","We had to do a forced failover with data loss of an Availability Group. There are 10-20 DBs of varying sizes. All of the smaller ones went into REverting synch state and then Synchronizing... so I assume that's the normal scenario. 

Some of the bigger DBs are still in Reverting after a long time.  

Is there some ""progress data"" available via a DMV or something? Just trying to get some idea of when the dashboard will be ""all green"".

Thanks!",1,sql,2020-10-13
iiwquu,Looking for some basic help.,"Hey there. So I picked up ""Sam's teach yourself SQL in 10 minutes"" and I've run into a little bit of a problem. I've made it to about chapter 5 and realize the bracket (\[\]) Wildcard isn't supported in MySQL (Which is what I'm using) and I'm wondering if there is a way around brackets not being supported. The code below returns an empty table when it shouldn't. Sorry if I didn't do a good job explaining this. Very new to all this. 

`SELECT cust_contact`

`FROM customers`

`WHERE cust_contact LiKE '[JM]%'`

`ORDER BY cust_name;`",19,sql,2020-10-13
iive8g,MySQL stored procedure for multiple queries?,"Hi,

I am working through a course with some SQL  to help develop an app. The exercises have you work on a library database. I have the following SQL to simulate a patron taking a book out as a loan.  


\##make loaned book unavailable

UPDATE book

SET available = 0

WHERE book\_id = 1;

\# create a record of the loan

INSERT INTO loan(patron\_id, date\_out, book\_id)

VALUES (1, CURDATE(), 1);

\# update patron's loan status

UPDATE patron

SET loan\_id = 1

WHERE patron\_id = 1;

&amp;#x200B;

I would like help refactoring this. Can I have all of this inside reusable code like a function/stored procedure where I simply put values into it for patron\_id, book\_id? Should it be in more complex queries?",1,sql,2020-10-13
iiqm95,Scaling time series db,"I'm working on a data pipeline that's built on top of ethereum transactions and logs streamed from the ethereum etl (also used in bigquery). And our app needs a lot of analytical data on the large tables of transactions and logs, more specifically, we need a lot of averages, max/mins at any given point in time, so we can plot them for our client side app. So obviously querying directly from the large tables everytime we plot is unrealistic, that involves scanning through the entire table a lot of the times to get something like an 'all time average transaction cost'. So we came up with a quite complex snapshotting system, where we run the queries against the large tables at set time intervals, and store the query results (averages mostly) as what we call 'snapshots', then we can grab the needed amount of snapshots and plot them on the frontend.

And this system in practice has been causing us a lot of issues. If the snapshotting service goes down for a period of time, we're either left with falsy graphs, or we need to run a backdating service to recreate the missing snapshots. And over time querying the snapshots become quite slow as well (think 10 minute interval snapshots, over a couple of years).

So my question is how can we go about improving this process? If anyone's worked with crypto transactional data, what's your solution to this?",9,sql,2020-10-13
iihi2h,Database Design,"Hi all, I am in the process of Learning SQL. It is going splendid however, there is something that has been irking at me for sometime. After thought, I realize that entirety of SQL in practice seems to fall into two areas: the design of databases and the manipulation/utilization of the databases. I realize that my understanding in design of databases is severely limited. I have attempted to remedy my lacking by reading up on what I can find on the internet such as normalization principles. However I do not believe that I am being efficient, and hold that it is wise to ask those with greater experience about how this should be learned. So my question is, if I wanted to truly understand database design how should I go about this? any resource recommendations would be appreciated.",26,sql,2020-10-13
iiedmj,"[Oracle] Group by ID, then outer join groups","I have a table that looks like the following:

ID | Date | Amount
---|---|----
ID1 | 2020-08-01 | $101
ID1 | 2020-08-02 | $102
ID1 | 2020-08-03 | $103
ID1 | 2020-08-04 | $104
ID1 | 2020-08-05 | $105
ID2 | 2020-08-02 | $202
ID2 | 2020-08-03 | $203
ID2 | 2020-08-04 | $204
ID2 | 2020-08-05 | $205
ID2 | 2020-08-06 | $206
ID3 | 2020-08-03 | $303
ID3 | 2020-08-04 | $304
ID3 | 2020-08-05 | $305

What I want to do is the following:

1. Group by `ID`
2. Line up groups by date via `outer join` on the `Date` field.
3. Assign `Amount` to a new column based on `ID`


The expected output is the following:

Date | ID1 | ID2 | ID3
---|---|---|---
2020-08-01 | $101 | NULL | NULL
2020-08-02 | $102 | $202 | NULL
2020-08-03 | $103 | $203 | $303
2020-08-04 | $104 | $204 | $304
2020-08-05 | $105 | $205 | $305
2020-08-06 | NULL | $206 | NULL

Is this even possible? I've been looking into using `pivot` but I can't seem to find a way to do this.",3,sql,2020-10-13
ii2fgi,Find distinct IDs based on criteria of multiple columns [ANSI SQL],"I have a table which shows usage history of different tools of each user by date. What I want to do is find users who use any one of 3 particular tools but not any of two other particular types of tools.

&amp;#x200B;

[TABLE](https://preview.redd.it/tqxu4qak0pj51.png?width=687&amp;format=png&amp;auto=webp&amp;s=e95b03a0ddb930dc77a125801af93a808cc95837)

In the above example, say I want users who use either of a, b or c but don't use d or e simultaneously. So the values I want returned are ID - 3, 4 as they're using one or more of a, b, c but none of either d or e. In my example I've mentioned only one date but the data in the table is of a long duration. I'd like to see overall results from all time data that we have.

PS - I'm doing this on an analytics tool (zoho) and not a particular type of database. The tool supports querying in multiple SQL dialects.

&amp;#x200B;

&amp;#x200B;",5,sql,2020-10-13
ihvtne,SQL courses that focuses on Database Modeling and Design?,"I found one but I was wondering if there is a better one available at Udemy - https://www.udemy.com/course/sqldatabases/

Basically looking for a course that discusses Entity-Relationship modeling, Functional Dependencies, Normalization, Relational Algebra, Query Processing and Optimization, Database Transactions and Security etc.",56,sql,2020-10-13
iht0w0,"FREE SQL Course on Udemy with 5+ Hours of Video, Practical Exercises","Fellow SQL-ites,

Here's a complete course on the fundamentals of SQL, that I'm offering for free on Udemy for the next three days:

[https://www.udemy.com/course/sql-basics-crash-course-with-sql-server/?couponCode=FREE-SQL-TRAINING](https://www.udemy.com/course/sql-basics-crash-course-with-sql-server/?couponCode=FREE-SQL-TRAINING)

As a self-taught SQL programmer, I’ve learned the hard way that all the books, videos, and articles in the world won’t help without LOTS of structured practice, i.e. coding exercises. So I've included nearly 100 coding exercises in the course, covering every fundamental aspect of SQL programming.

And I walk through every subject in bite-sized videos ( averaging less than 10 minutes in length). Every concept is built up step by step, with no hand-waving at intermediate topics.

I hope you enjoy...and of course, reviews/feedback are greatly appreciated:)",8,sql,2020-10-13
ihszk7,Is it possible to have a condition determine either to rollback or commit a transaction?,"I've never seen it, but it would be really nice if you could add a case or if statement to either commit or rollback the transaction. Something like:

    IF x = y 
    THEN COMMIT
    ELSE ROLLBACK;

I googled a little bit and looked at the postgres documentation, but didn't see much. Short of a stored procedure, is there anyway to do this?",3,sql,2020-10-13
ihsysk,Adding duplicate child entity entry,"I'm creating a simple test project for a cook book which allows you to create your own recipes from a selection of ingredients. I've got a class for Recipe and class for Ingredient, each with a name and Id, and the recipe class contains an ICollection of ingredients. The ingredient class also contains a RecipeId and virutal Recipe object. I have a DB table of ingredients and a table for recipes. 

I want the user to pull ingredients from the DB ingredients table, create a custom recipe containing a list of the ingredients and then save the recipe in the recipes table. Whenever I do this the recipe saves in its own table but all the ingredients in said recipe are also saved back into the ingredients table, so everytime I create a new recipe and save it, the ingredients table gets filled with more ingredients it already previously contained (each with new Id's). In the DbContext.cs file I've included OnModelCreating and used a one-many configuration for the two entities but still no luck. Any ideas how to stop this from happening?",1,sql,2020-10-13
ihsnlj,[Teradata] Looking for good resources/tutorials related to advanced data analysis,"Hello, title explains it all.

&amp;#x200B;

I'm using a lot of SQL at my current job, using Teradata RDBMS. I'd like to get my hands on some valuable resources (tutorials, books, etc.) which will provide me some tips in the field of more advanced/complex use of SQL in data analytics. Nested queries, nested joins etcetera.

  
Anyone knows good assets where I could take more knowledge from? Help would be greatly appreciated. All the things I've seen on internet (udemy, youtube etc.) do have short tutorials regarding complex queries but these ain't so complex as I expected them to be :)",1,sql,2020-10-13
ihqgx7,Help with data base diagram," 

Hello  I was wondering if anyone could help me with my data base diagram, I  believe I have the tables made correctly but would like some help  understanding the primary and foreign keys relationships I should set  up. Here are the tables I have set up along with a description of what  the tables are suppose to represent. Thank you

[https://imgur.com/a/DHyMWza](https://imgur.com/a/DHyMWza)

MakeModel  - Make/model  – the data for this table 3 difference makes  (i.e. Ford,  Lexus, Chevy) of cars and 2 or 3 models (i.e. F150, Fusion,  Focus) for  each make

\- CarDescription - Car description – car color (limit to black, white, gray and yellow), car mileage, car price

\- CarLots– lot name, lot address

\- LotCarList - Cars Lot to list of cars at that lot

\- Customers – Username - FirstName - Lastname

\- PotentialSales – List of customers and cars they are interested in

\- Sold – list of cars sold, who they were sold to",2,sql,2020-10-13
ihkcxt,Calculate column value based in values in other tables,"Good afternoon, 

I have the following tables:

&amp;#x200B;

|Impact\_ID|Impact|Impact\_Score|
|:-|:-|:-|
|1|Safety|4|
|2|Factory|4|
|3|Line|3|
|4|Machine|2|
|5|Component|1|

&amp;#x200B;

|Likelihood\_ID|Likelihood|Likelihood\_Score|
|:-|:-|:-|
|1|1 Year|1|
|2|1 Month|2|
|3|Less than 1 month|3|

&amp;#x200B;

And an extra table where I fill numbers corresponding to the Impact\_ID and Likelihood\_ID

&amp;#x200B;

|Likelihood|Impact|Risk|
|:-|:-|:-|
|value from Likelihood\_ID|value from Impact\_ID|Impact\_Score\*Likelihood\_Score|

&amp;#x200B;

The question is how can I automatically fill the Risk column with Impact\_Score\*Likelihood\_Score based on the values from Likelihood and Impact",1,sql,2020-10-13
ihjg3h,ERD q...,Would you expect an ERD to contain all of the columns for each table?,1,sql,2020-10-13
ihhotv,Oracle University’s subtitle for their opening and closing jingle doesn’t give me great confidence their training is going to land 😂,,93,sql,2020-10-13
ihh1v0,"[SQL] I need to retrieve particular data from a view in python. Help me, you’re my only hope.","I don’t have access to the database per say, I only have access to a backup view. How can I retrieve a string placed at a particular place in the file and add it to a list. 

Right now I’m using a work around. 
I’m transforming the .sql file into a .txt file and using split(‘,’) to create different fields that are searchable. 

Is there another more elegant way?",3,sql,2020-10-13
ihfep4,SIMPLE BUT CHALLENGING. I am trying to case a between date range in the where statement but get nothing but errors. Please help! Using teradata.,,0,sql,2020-10-13
ihdonp,postgreSQL vs Oracle - for job outlook,"I am looking to shift my education into focusing on SQL to hopefully land a job one day.

I know the general basics of sql from doing some MySQL basics as a passing lesson in a bootcamp last year, but now that I know I want to focus on SQL, I feel like I’m being presented with two paths: Oracle or postgre - and I’m hoping someone can advise on which should I focus on first, if I absolutely had to pick one to start with. I understand that the ideal answer is probably something like “both.” However, am looking to see which would be the better path to start down in terms of job outlook and/or ease of learning.",2,sql,2020-10-13
ih9rrr,T-SQL Window partition based on values,"So I need to make a lookback in a window function partition to numbers in a logical range based on the current row. The values I need to base my partition on have skips, otherwise I would just use ROWS. As a dummy example, for each **customer**, I need to sum the **value** column but only for **id**s which are &lt;= 3 lower than the current row's **id.** I thought this would be simple, but it's really bugging me.

&amp;#x200B;

[initial data](https://preview.redd.it/c2ccg00fhfj51.png?width=193&amp;format=png&amp;auto=webp&amp;s=b6c6aad6c4e5be352b2052fce6aebd4379f1a496)

&amp;#x200B;

[solution in yellow](https://preview.redd.it/rowzi9axifj51.png?width=410&amp;format=png&amp;auto=webp&amp;s=6578f6ede640b1340bdb730ab8b839a8dfca7d0c)",3,sql,2020-10-13
ih8lbr,How can I merge two rows coalescing non-null values?,"I am having trouble grouping two sets of data together. I am trying to get these rows to merge using available data from columns `total1` and `total2`:

    city         | total1  | total2
    ----------------------------
    new york | 39147 | null
    new york | null     | 7917


The end result should look like:

`new york | 39147 | 7917`


Query:

    SELECT c.receiver_city     AS city,
           count(c.order_no) AS total1,
           NULL                AS total2
    FROM core c
    GROUP BY city
    
    UNION
    
    SELECT c.sender_city       AS city,
           NULL                AS total1,
           count(c.order_no) AS total2
    FROM core c
    GROUP BY city
    ORDER BY city",3,sql,2020-10-13
ih7qlo,PrestoDB multimap_agg Unnesting and Pivoting,"Note: this flair is for Postgres because I could not find Presto and I don't think Discussion sounded as appropriate.

Hi all,

I have a table of 1000 keywords.Each keyword has data for 10 dates.Each keyword has 100 positions.An `entity_ranked` is shown for each position. An `entity_ranked` can occupy multiple positions.

Basically, this is data for a Google search result. Here's an example:

https://preview.redd.it/d51zin8u7ej51.png?width=1748&amp;format=png&amp;auto=webp&amp;s=914064e9aa8547fdeb89f646bc540ff6a9848a97

I am trying to pivot this information by date.

If I use `map_agg`, then unfortunately I only get 1 position per `entity_ranked` (site). If I use `multimap_agg`, then I get multiple positions (see quizlet.com). But, the issue is that I am not able to figure out how to unnest this data.

https://preview.redd.it/g33dhnz97ej51.png?width=1714&amp;format=png&amp;auto=webp&amp;s=b1c651d215a0d4306fcf84b2084fed1cf7430de0

Here is the query for the above image:

    SELECT keyword
           , entity_ranked
           , t.ma['2020-07-19'] AS c1
           , t.ma['2020-08-09'] AS c2
           , t.ma['2020-08-23'] AS c3
    FROM (SELECT keyword
                 , IF (site IS NULL,COALESCE(rt1,rt2),site) AS entity_ranked
                 , multimap_agg(dt,position) ma
          FROM tbl1
          WHERE keyword = 'the ripened ovary of a flower, which is adapted to disperse seeds, is called a(n)'
          GROUP BY 1
                   , 2) t

I am trying to unnest it like so:

https://preview.redd.it/qhp3x8ip7ej51.png?width=1304&amp;format=png&amp;auto=webp&amp;s=d8b7a742664d9e00088579b5d341b59af8da55a9

When I use a typical CROSS JOIN UNNEST, I get a message like this:

    Column alias list has 1 entries but 't' has 2 columns available 

Any help would be appreciated.

Thanks in advance!",4,sql,2020-10-13
ih7ebh,Superior Syntax ?,"Hi everyone,

So I was working on a problem where I need to find how many students are younger than each student in the table and I came across two ways of writing the same thing:

1) The first query uses a SELECT inside the column definition and some kind of join 

2) The second seems more common and uses a traditional join syntax

\--

* How is the first type of query called ? 
* In which situation is it superior ? In which situation is it not ?
*  What's the difference between the two ?

Thank you !

&amp;#x200B;

https://preview.redd.it/0nxcx7qfvej51.png?width=1069&amp;format=png&amp;auto=webp&amp;s=afe5d0abea96dbd20686254f161e9f1c97426f00",0,sql,2020-10-13
ih743y,Need MS SQL Server DBA Crash Course,"I am interviewing for a role to be an Entry Level MS SQL Server DBA. They sound like they are willing to teach me on the job but I want to gain a better grasp of DBA fundamentals before the final interview by taking a crash course.

My background is primarily in Python performing analytics not in DBA. I usually do all my aggregations, data cleaning, and visualizations in python. I've worked in T-SQL some with window functions, group by's, joins, and order by's **but don't know the** ***true*** **fundamentals of relational DBs**.

&amp;#x200B;

**Does anyone have a MS SQL Server DBA crash course they would recommend? And what are some DBA fundamentals?**

* OR does anyone have experience with any of the courses below?

&amp;#x200B;

I've seen posts on  [Brent Ozar's SQL Server fundamentals](https://www.brentozar.com/product/fundamentals-of-database-administration/) but am unsure if it'll explain things like normalization, SQL data structures, query optimization, things that would prep me for the interview.

1. [Udemy: SQL &amp; Database Design A-Z™: Learn MS SQL](https://www.udemy.com/course/sqldatabases/) \- SuperDataScience Team  *- (Leaning towards this)*
2. [Plural Sight: Designing and Implementing SQL Server Tables and Views](https://www.pluralsight.com/paths/developing-sql-server-databases) \-  Gerald Britton
3. [Udemy: 70-462: SQL Server Database Administration](https://www.udemy.com/course/70-462-sql-server-database-administration-dba/#instructor-1) \- Phillip Burton
4. [Udemy: SQL Server DBA - Practicals](https://www.udemy.com/course/sql-server-administration-practicals/) \- Praveen Kumar
5. [Udemy:SQL Server Administration Part1](https://www.udemy.com/course/sql-server-administration-part1/) \- Raphael Asghar

&amp;#x200B;

\[Edit: an Entry Level MS SQL Server DBA; What are some DBA fundamentals?\]",29,sql,2020-10-13
ih11tj,An error in the SQL Cookbook [Anthony Molinaro] ?,"Hello everyone,

So I've been reading the famous SQL Cookbook \[Anthony Molinaro\] and I've encountered a problem in Appendix B where the solution seems to be wrong ... I'm not 100% sure but I'd like to have your opinion on it.

The problem is based on a Student table including the student number, age, and name. The question (Q5 Appendix B) is the following :

&gt;You want to find students who are older than at most two other students. Another way to think about the problem is to find only the students who are older than zero, one, or two other students. The final result set should be:

&amp;#x200B;

https://preview.redd.it/e93tqpus8dj51.png?width=348&amp;format=png&amp;auto=webp&amp;s=a9f54960e72c51c3f0a139fce1402d6ed43784f4

This is the code that I designed to answer this question

    SELECT 
    	s.sno
    	, s.sname
    	, s.age
    	, SUM(CASE WHEN s.age &gt; t.age THEN 1 ELSE 0 END) AS OlderCount
    FROM student s, student t
    GROUP BY s.sno, s.sname, s.age
    HAVING SUM(CASE WHEN s.age &gt; t.age THEN 1 ELSE 0 END) &lt;= 2 

Works fine, I get the same results, and then I check the solution which is

     SELECT sno,sname,age
    FROM 
    	(
    	SELECT sno,sname,age,
    	DENSE_RANK( ) OVER (ORDER BY age) AS dr
    	FROM student
    	) x
    WHERE dr &lt;= 3

This solution yields the same results as my solution but there is something that bugs me, I look at the subquery and I see the results

&amp;#x200B;

https://preview.redd.it/s2ezgod19dj51.png?width=202&amp;format=png&amp;auto=webp&amp;s=32fc6949ef548588531f6fdf432f4ef04086b160

I realize that the only reason why this query works is because of the data set. There are only two students who are 18 or 19.

If I tweak the original data set to add more 18 or 19 students the result seems completely wrong. Assume we add two students : ID 11 Gabriel 18 and ID 12 Alexia 18.

Here is what both queries return :

https://preview.redd.it/h282aqx29dj51.png?width=692&amp;format=png&amp;auto=webp&amp;s=35469f9f68f6b24a60cead4efefb2e4dd25e4b09

Maggie (age 19) is older than 3 students, same for the 20 years old who are older than 4 students. They should not be in the final result

Did I get it wrong or is there a serious mistake in the book ?

Thank you !!

    -- DATA (Original)
     /* table of students */
     create table student
     ( sno integer,
     sname varchar(10),
     age integer
     )
    
     insert into student values (1,'AARON',20)
     insert into student values (2,'CHUCK',21)
     insert into student values (3,'DOUG',20)
     insert into student values (4,'MAGGIE',19)
     insert into student values (5,'STEVE',22)
     insert into student values (6,'JING',18)
     insert into student values (7,'BRIAN',21)
     insert into student values (8,'KAY',20)
     insert into student values (9,'GILLIAN',20)
     insert into student values (10,'CHAD',21)

# Edit

Even the original answer (Rozenshtein) to this problem does not seem to be working with the two extra rows ID 11 Gabriel 18 and ID 12 Alexia 18.

https://preview.redd.it/h20omcrwodj51.png?width=754&amp;format=png&amp;auto=webp&amp;s=75837b943b29107ce498ebd37701275b57ed9705

https://preview.redd.it/01bx9ozuodj51.png?width=533&amp;format=png&amp;auto=webp&amp;s=c3398f554cc1c23afb1650804264b07982db8366",22,sql,2020-10-13
igx8ph,Removing Nulls and Fixing Alignment,"I am using SQL Server and I made the query using SMSS. I am not a full time SQL user, and I am trying to make some dashboards for our workers using SQL as the data collector with this query below.

The query that is *almost* working, but I need to get all my results to go in paired rows, instead of showing nulls. Here is the query I wrote:

`SELECT convert(varchar(11), start_time, 103) AS Date, DATENAME(weekday, start_time) AS Week_Day,`

`CASE WHEN CAST(start_time AS time) = '05:00:00'\`\``

`THEN name`

`END AS 'Morning',`

`CASE WHEN CAST(start_time AS time) ='12:59:59'`

`THEN name`

`END AS 'Afternoon',`

`CASE WHEN CAST(start_time AS time) = '20:59:59'`

`THEN name`

`END AS 'Evening'`

`FROM [somedb].[dbo].[tb_some_table]`

`WHERE [start_time] &gt;= dateadd(day, 2-datepart(dw, getdate()), CONVERT(date,getdate()))`

`AND [start_time] &lt; dateadd(day, 9-datepart(dw, getdate()), CONVERT(date,getdate()))`

&amp;#x200B;

Which gives me a result like this:

&amp;#x200B;

Date	              Week\_Day	             Morning       Afternoon           Evening

24/08/2020	        Monday                 	Fred              NULL	                NULL

24/08/2020	        Monday	                        Markus 	      NULL                	NULL

24/08/2020	        Monday	                        NULL	      Chuck                  	NULL

24/08/2020    	Monday                 	NULL	      Bill                            NULL

24/08/2020    	Monday	                        NULL	      NULL                	John

24/08/2020	        Monday                    	NULL	      NULL                	Wayne

&amp;#x200B;

&amp;#x200B;

But, I am trying to get this:

Date	              Week\_Day	             Morning           Afternoon               Evening

24/08/2020	        Monday                       Fred                  Chuck                       John

24/08/2020	        Monday	                      Markus 	        Bill                           Wayne

&amp;#x200B;

Can anyone help me? :/",7,sql,2020-10-13
igsoie,Help needed: Staggering more rows in database,"Hi

I'm working on an ambitious personal project that's dealing with an extremely large dataset. I want to do an analysis of 2019 on-time flights in the US.

The data that I'm given is, 12 files of each month breakdown of every domestic flight in the US (Jan, Feb, and so on). Each file has 600k rows. My laptop can't manually stagger 7.2M rows in Excel without crashing. I'm wondering whether there's a command in MS SQL to piece them altogether?

Example:

https://preview.redd.it/51l5ly308aj51.png?width=872&amp;format=png&amp;auto=webp&amp;s=a2962dc0adccab8ab9ccbd86fd54b52ea4b55555

Dataset example: [https://www.kaggle.com/shaivyac/us-airline-dataset](https://www.kaggle.com/shaivyac/us-airline-dataset)

Thank you!",0,sql,2020-10-13
igm0g6,Does anybody know how to get msSQLServer for free?.,I use MsSQl server in work but I want to practice on my own but the only option is a months trial which isn't that useful. Any suggestions appreciated.,2,sql,2020-10-13
igkcmr,Help Needed: Adding multiple ELSE to a query,"I'm new to SQL so i hope to do this right

Our company has technicians that have stock on their VAN and we have stock in our warehouse

This is the query:

CASE WHEN pl\_from.whos\_place = 'VAN' THEN pl\_from.phy\_svc\_grp\_d ELSE '02' END AS 'team\_id',

It is saying if the place for stock is a VAN (truck) then look at the Region of the user, Else use 02 (which is our main warehouse)

I need to add another ""Else"" (for a lack of a better term) to also say to look at another warehouse (the other one is called 'MLR')

how can i do this?",12,sql,2020-10-13
igj5r9,Stagger backup job times and make the times of the job dynamic?,"I’m new-ish to SQL and I’ve hit a wall. I’ve altered Ola Hellengren’s job script to tailor it to my company’s needs. I’m trying to make the job schedules dynamic and stagger the times to reduce overlaps. The script will be applied to multiple servers.

Do I accomplish this via the sysjobschedules table? If so, how would I go about implementing that into the script? Will I need to update the sysjobschedule table on all of the servers? Or is there more effective Keith is 

If someone wouldn’t mind pointing me in the right direction, I’d appreciate the help. 

Thank you!",3,sql,2020-10-13
igj4ru,Not sure why this index isn't used without the include (WorldWideImportersDW),"Hi All

I think I've been misunderstanding how indexes should work.

I have the following query:

    SELECT city
    FROM Dimension.City
    WHERE [State Province] = Florida'

It initially does an Index Scan and  reads 116295 rows though it only returns 4024 rows.

When I create the following index it does an Index Seek and only reads the 4024 rows which is perfect:

    CREATE NONCLUSTERED INDEX ix_indexpractice
    ON Dimension.City ([State Province])
    INCLUDE ([City])

However if I drop that index and create this one it goes back to doing an Index Scan and reads all 116295 rows:

    CREATE NONCLUSTERED INDEX ix_indexpractice
    ON Dimension.City ([State Province])

I was under the impression it would still do the Index Seek for the 4024 row IDs and then go to the Dimension.City table and get the City column values from the rows directly without having to scan the full table? So the index would filter the returning data set to 4024 rows and then SQL would scan the 4024 rows only for the city columns?",2,sql,2020-10-13
igj3n8,Help on searching DateTime With Date,"I have a table with a DateTime column that needs to return all entries on a specified day. The front end passes in a Date.  Is it possible to have my WHERE only look at the Date portion of the DateTime? 
Something like:

WHERE myDateTime[substring(0,8)] = @passedInDate",1,sql,2020-10-13
igdn4c,Can this column be eliminated or reduced?,"Haven't done SQL in a long time. I'm talking to a company that puts on events at several different venues--sometimes more than one event at different venues at the same time. For seat reservations, I want to consider that each venue might have different levels (upper, lower, and middle balconies). Each balcony might have different sections with rows and seat numbers.

If I set up a table for all that, such as:

`create table venue_seating (`

`venue_id,`

`balcony_id,`

`section_id,`

`row_id`

`);`

where that could eventually refer to the actual ""seat table"", I'd wind up with a long, long column of, perhaps, hundreds of venue\_id in that column. 

So, I thought I'd create a join table between the venue, the balcony, the section and row (and eventually the actual seat) but then I'd have a cascade of join tables. Maybe that is the correct way to go but I'm not experienced enough to know if I'm on the right or wrong path.

The eventual goal is to mark the seat as reserved along with customer name, payment info, etc. but I've done that part before. This is a sticking point for me.

I've seen demo code online for the same thing but it's often only for one row of seats, not something with this many layers.",5,sql,2020-10-13
igd9g5,"Combine table options into a ""range""","I have a table formatted like T1 listed below. In MS SQL, I need to query this DB to take the Vendor, to take the Vendor, and Zip Code, and adjust the ZipCode to be the first three digits, and a range of those 3-digit codes - the below table, for example, would end up looking like T2. I've got the ""easy"" part - limiting the zip codes down to distinct 3 digit codes, but I'm not sure how to go about the transformation piece to get the Dist\_GeoCode into the final table/result. 

&amp;#x200B;

`with GeoCode as (`

`select t1.Vendor, (left(t1.zipcode, 3)) GeoCode`

`from t1`

`), Dist_GeoCode as (`

`select distinct vendor, geocode as Geo_Range` 

`from GeoCode`

`) select vendor, (this is what I need help with)`

`from Dist_GeoCode`

&amp;#x200B;

T1: 

| Vendor | ZipCode |

|-|-|

| ABC | 12345 |

| ABC | 12445 |

| ABC | 12555 |

| ABC | 12755 |

| ABC | 12999 |

| DEF | 90210 |

| DEF | 90211 |

| DEF | 90411 |

| DEF | 90511 |

| DEF | 90666 |

| DEF | 90777 |

| DEF | 90990 |

| DEF | 90991 |

| DEF | 90992 |

&amp;#x200B;

T2:

| Vendor | GeoRange |

|-|-|

| ABC | 123-125 |

| ABC | 127-127 |

| ABC | 129-129 |

| DEF | 902-902 |

| DEF | 904-907 |

| DEF | 909-909 |",2,sql,2020-10-13
igcnkb,"1TB DB, rebuild/reindex and update stats","Hello Everyone,

I have a DB that is close to 1TB and I run a weekly rebuild/reindex and update stats which takes anywhere from 25-31hrs!! Any DBAs want to chime in on what I could do to archive historical data and make the DB smaller? That's probably a tough question to answer not knowing my DB, but in theory, is there a query I could run that could somehow archive data and insert it into another DB where records older than xxx date?",31,sql,2020-10-13
igb8sh,Traditional cluster vs always on cluster?,"Hey all I was wondering the difference between a traditional vs an always on cluster? 
I googled and have an idea but if someone could help explain how storage is provisioned and works in these 2 different types of cluster works would be amazing? Or maybe a video tutorial would be nice too!",0,sql,2020-10-13
igags4,Checking if a column is null screws up my query?,"Table: Actions

+---------------+---------+
| Column Name   | Type    |
+---------------+---------+

| user_id       | int     |

| post_id       | int     |

| action_date   | date    | 

| action        | enum    |

| extra         | varchar |
+---------------+---------+

There is no primary key for this table, it may have duplicate rows.

The action column is an ENUM type of ('view', 'like', 'reaction', 'comment', 'report', 'share').

The extra column has optional information about the action such as a reason for report or a type of reaction. 
 

Write an SQL query that reports the number of posts reported yesterday for each report reason. Assume today is 2019-07-05.

**When I use the following query it works**

select extra as report_reason,count(distinct post_id) as report_count from Actions where action='report' AND action_date='2019-07-04' group by report_reason 

**However when I add a check for null(Which I was doing earlier it stops working)**

select extra as report_reason,count(distinct post_id) as report_count from Actions where extra!=null AND action='report' AND action_date='2019-07-04' group by report_reason 

I get no result actually. What is happening here?",2,sql,2020-10-13
igaf1r,[MS SQL] Insert Results of Procedure Into Temp Table,,0,sql,2020-10-13
igaa4j,How to use Data Migration Assistant to assess on prem SQL databases for migration,,0,sql,2020-10-13
ig57yd,"How do I learn Data management (Data Governance, Metadeta and Master data management) ?",I’m looking for some online resource,4,sql,2020-10-13
ig2p0s,How to progress further?,"I’m in college for a MIS degree and recently completed a database design class. I really enjoyed it but i’m curious where I should go from here to advance my database and sql skills. 

In the class, we covered dependencies, normal forms, cardinality, ERD’s, sql queries from basic to using joins and sub queries, etc. 

Is a “beginner” Sql udemy course worth it for me or would it be going over all the basic stuff i already know?",6,sql,2020-10-13
ig1zhc,Practicing MySQL skills,,1,sql,2020-10-13
ifwlo9,"How do you answer the interview question ""How do you improve the performance of an SQL script""?","It's one of those questions I struggle with most. I *can* make a query faster by refactoring sub queries, using temp tables where appropriate, adding indexes,  limiting the usage of RBAR functions etc... but I never feel I've answered that question in a coherent and succinct way.

Edit: thanks for your answers guys and gals! Some great stuff here to consider.",60,sql,2020-10-13
ifv37u,Why does changing the timezone of a timestamptz using AT TIME ZONE strip the timezone from the output?,"I have a column of timestamptz data and a column of their corresponding time zones. I'd like to make a `timestamp_local` column, but preserve the local time zone in the output. In other words, I want my output to look like this:

         timestamp_utc       |       timezone         |     timestamp_local
    '2020-08-24 09:23:45+00' |  'America/Los_Angeles' | '2020-08-24 01:23:45-07'

However, when I try to make the `timestamp_local` column with `select timestamp_utc at time zone timezone`, the output doesn't retain the time zone.

1. Why? I know this is the intended behavior of AT TIME ZONE, but why is that desired? Doesn't make sense to me.
2. How can I change my query to get what I want?

We use local time zone for 99% of our queries, so ideally I'd like to just drop the `timestamp_utc` and `timezone` columns entirely and just keep the `timestamp_local` column. If a user needs the time in UTC, they can back it out of the `timestamp_local` column if it's in `timestamptz` format.

I'm using Redshift, but I believe this behavior is the same in vanilla Postgress.",3,sql,2020-10-13
iftfyk,Getting to know SQL Server Extended Events,,1,sql,2020-10-13
ifsy0w,I am trying to use DATEDIFF with a case statement for the start date and end date but not having much luck.,"I am issuing SQL Server on SSMS and am comparing two dates based on “Trans-Code.” The example: A service agreement invoice is opened on 1/1/2000 (Trans-code = x) and the payment for the invoice occurred on 1/3/2000 (trans-code = y) 

I am trying to find the difference in these days by using this datediff in the select statement:

DATEDIFF(day, case when trans-code = x then trans-date, case when trans-code = y then trans-date)

I am getting an “incorrect syntax error” on the “,” between the two case statements. Any suggestions/help would be appreciated!",1,sql,2020-10-13
ifqw8u,Aggregation confusing me,"Hello All,  
Can someone please explain me the following question:   
Is the a ordering the columns matter in GROUP BY clause?  
Like if we have  
Group by a,b,c  
OR  
Group by c,a,b?  
will it impact on a query result?  
Please assists!",5,sql,2020-10-13
ifqunh,What is the best way to learn SQL at home?,"Looking for some advice as I'd like to teach myself SQL. I currently work in research at a company where we work with data predominantly in Excel. I'd like to move into an analytics role in the new year and so am looking to expand my skillset. I have 2 questions I'd really appreciate some advice on:

1. What is/ are the best resource(s) for learning SQL (preferably free ones)?  I've come across loads online so would welcome thoughts on the best to go for.
2. Would you recommend working towards a certification so I can prove my ability? The problem I anticipate is that without having used SQL in previous job roles, recruiters will (understandably) be concerned that I won't be up to the required standard. If so, are there any certifications you'd recommend? 

Thanks in advance!",0,sql,2020-10-13
ifqagz,Best database schema for this problem,"Hi everyone, I am a programming student learning full stack web development.  


I have learned some MySQL and ORM, but I haven't studied a lot of database modeling and best practices.   


That is why I wanted to ask your opinion on the best way to model the next problem:  


  


[Problem](https://preview.redd.it/awjp0nssoyi51.png?width=377&amp;format=png&amp;auto=webp&amp;s=619a5ac1d0e2a00d3c5a2198df9c99e2438f9203)

It was given to me by a peer who got it as a task for a job interview recently. No further information is given about the problem. Only that it must be a relational database that will be structured with an API through ORM, and consumed by an Angular front-end.  


I am not really interested in the API or Angular part, but more in the correct or best way to model the database.  


I would like to know if it would be best to have only 1 table or if its better to use 2 tables. I would also like to know the best way to set the PK and FK, and any other consideration that might be important.  


Thank you for your time!",1,sql,2020-10-13
ifn6xi,Problems with my very first command: WHERE NOT XY IN,"Hey guys, 

(I work with Access, I hope the tag is right)

while the added ""Code"" works perfectly fine in my very small Test-Database, when I apply it to the large Database I wanna work with, my PC cannot process it. I guess I make a very basic mistake, that makes the task way more RAM-hungry than it needs to be?

    SELECT *
    FROM Test2
    WHERE NOT Key IN (Select Key
    From  List1)

Thanks a lot and sorry for wasting your time! There are so many good ressources on SQL, but I guess I make some fundamental error here.

&amp;#x200B;

&amp;#x200B;

Further Informations (if needed):

\+/- 30.000 Datasets in each table (that is not much, right?) 

8gb RAM

MS 365 - Access

Everything is saved local

What I wanna do: Gimme all Datasets from table ""Test2"" where ""Key"" is not found amoung ""Key"" in table ""List1""",20,sql,2020-10-13
iflz9d,Creating a new table with values from another table.,"Hello,

I have two tables of data, and with this I want to construct a new table that's populated with both values from the other tables, but also with new data that's based on wherever a condition is fulfilled by data from the existing tables. I realise this is quite vague, but I was just curious as to how this syntax would be written?

Should I create the table first and then populate it? Or is there a way to create the table and populate it in the first instance?",6,sql,2020-10-13
ifkp76,What is the difference between those 2 queries? I'm getting different results...,"https://pastebin.com/PwpMyLqs

My doubts are all inside that link, thanks for taking your time reading such a long code.",3,sql,2020-10-13
if5u07,SQL topics that are needed for the Data Engineer role?,"I am preparing for Data Engineering position and based on my research, I think I need to know 2 aspects of Database management:

1. SQL queries: Code writing, Data manipulation, Performance analysis and tuning, Query optimisation.


2. SysAdmin side: Linux, Database replication and backup, Creating/Modifying databases, Error handling when creating/updating databases, Database migration, Export/Import databases.

Did I miss anything?",29,sql,2020-10-13
if300x,What mistake am I making in these similar queries?,"I want to write a query to get the second highest salary of from a table.

I can do it using this way. It works.

    Select MAX(salary) from employee where salary&lt;(Select MAX(salary) from employee)
    
However I wanted to try another way. I thought of the following:

Select e1.salary as SecondHighestSalary from employee e1 where 1=(Select COUNT(Distinct Salary) from employee e2 where e2.salary&gt;e1.salary) 

Similary to get the Nth highest salary

Select salary as getNthHighestSalary from Employee e1 where N-1=(Select Count(Distinct e2.Salary) from Employee e2 where e2.salary&gt;e1.salary)

Both of these ways dont work. What mistake am I making here?

Edit:

You can try my queries here

1. https://leetcode.com/problems/second-highest-salary/

2. https://leetcode.com/problems/nth-highest-salary/

Like I said earlier I am not looking for alternative solutions, I already have alternative solutions. I wanna learn from my mistakes in this query and make them work.

**Edit2:**

I see my mistakes

I have to check for null and make sure I dont return more than one row.

1. Select IFNULL(
(Select Distinct e1.salary 
  from employee e1 
 where 1 = ( Select COUNT(Distinct Salary) 
               from employee e2 
              where e2.salary&gt;e1.salary )),NULL
)  as SecondHighestSalary

2.       Select IFNULL(
(Select Distinct e1.salary 
  from employee e1 
 where N-1 = ( Select COUNT(Distinct Salary) 
               from employee e2 
              where e2.salary&gt;e1.salary )),NULL
)  as SecondNthHighestSalary    
  );",1,sql,2020-10-13
if1oaa,Can we make a general sql discussion thread?,I am practicing sql nowadays and I want people to critique my queries especially if they are complicated. I dont want to make a separate thread every time I want people to critique my query. Can we make a daily general discussion thread? This will help all the noobs and experienced people who would like people to review their queries.,1,sql,2020-10-13
if1hdj,Need your opinion on MySQL vs MongoDb ( Some real great points of SQL which will knock out MongoDb ),"Hey !

**Background :**

We are a group of 5 college undergrads (just cpmpleted 2nd year) tasked with creating a dynamic form creator system ( like Google Forms, Typeforms etc ). Now the thing is the rest 4 of them are having a background in Javascript and the whole MEAN / MERN stack. But I work in Java, Go and SQL databases ( MySQL mainly ). We were given a week to finalise our tech stack and make a small working demo ( authentication, a profile page, a form creator page, form viewing and filling system and response viewing system ). Node.js was chosen as the backend language ( much to my unexpressed  disapproval , as 4 of them knew it and I was the only one knowing Go and Java ).  We were divided into 2 groups of 2 each ( 1 of us is our senior and sort of like project lead, he won't be making anything in demo but will help us decide the tech and help us in later phase of the project ).

Now, I implemented it perfectly in mysql ( used proper techniques like multi-table design, normalised tables etc. ) . I am having 14 tables in total ( user, form\_info, questions, placeholders,form\_aesthetic, input\_type,single\_line\_answers, radio\_btn\_answers ... etc. ) have broken down most of it to make it as normal as possible. I am dynamically creating the form each time some user wants to submitting it.

Now, the other team used monogdb. They are  inserting the whole html of the form at once in the database and not using any schemes, patterns etc. They are just plainly storing the whole HTML and retrieving it when user tries to submitting the form then storing the form with the value set. Also they are not following any kind of design scheme to make it easier ( at least I think so ).

We both presented our thing but the project lead went with their design i.e. storing the form directly as html into mongodb. Also he said to use mongodb. Now I am strictly against it as I have done some research on form creators and nearly all of them use SQL.

[https://docs.google.com/document/d/1HHjQDrBSQBUqSkZ\_cPyaWaIBj2A3egPU82S2-3j9p5M/edit?usp=sharing](https://docs.google.com/document/d/1HHjQDrBSQBUqSkZ_cPyaWaIBj2A3egPU82S2-3j9p5M/edit?usp=sharing).

( I have already shown this to them )

&amp;#x200B;

**My Problem :**

Now first of all they are using Node.js which itself is shit when compared with Java and Go ( Google Forms is made in Java ) and then they settled with MongoDb and on the top of that they are storing the whole form 'html' and rendering it again as it is. Now this may save developing time but it will be very very hard to scale up and customize in future ( Users can customize the forms which they have created like change fonts, colors etc ) and make our lives hell.

It won't be right but I am beginning to think them as script kiddies and novice.

They don't know about multi-table design ( not even the project lead ) or anything much about sql. Also most of them don't know any other programming language. They do everything in JS only.

They don't seem much willing to learn SQL ( project lead knows it though but basics only ). They are just using Mongo as they are comfortable with it. I think it will cause many problems in the future and will do more harm than good.

Now how can I convince them to use MySQL and kick out at-least Mongo ( as Node.js will be logical to use as except me rest of the team members know it well  ) ? I really want to use a SQL db as it'll be best for this project. Please help me put my point in front of them.

Also I am very bad at explaining stuff ( you must have know it by my writing style ).

&amp;#x200B;

**TLDR :** Have to convince some novice MERN and MEAN stack developers to use a SQL db for our project ( Form creator like google forms ) instead of Mongo.",4,sql,2020-10-13
ieyoup,Why is the link to the wiki of this subreddit broken?,I've written my question in the title. I hoped that the wiki would have links to database and SQL learning resources but all the links to wiki are broken.,2,sql,2020-10-13
iext3q,Efficient Sql Schema for an OID Database?,"I need to create a database to store hierarchical information associated with Object Identifier. For a refresher about OIDs: https://en.wikipedia.org/wiki/Object_identifier. If there a best practice for designing a relational schema for hierarchical data with an arbitrary depth?

Update: The final database will contain a list of skills associated with jobs. Every skill for every job. Organized in a hierarchy. For example you might have Professional/Programming/Javascript as a skill. Or Industrial/Welding/Arc/Underwater. Each level is assigned an integer, and the result is an object identifier composed of multiple integers separated by a decimal (0.53.48.2546.5 for example). As you can imagine the final database will be fairly large. The database will be used across languages, so the text representation isn't ideal for searching as it will be multilingual. I know that each record needs to store its child and parent ID,  and it appears that a Recursive CTE query is the way to search. But I just wanted to find what the best practice experience is from others who've worked with similar hierarchical datasets.",1,sql,2020-10-13
iewiiq,Assistance with SQL,"Hello,

If you are interested in learning SQL or have knowledge and wish to review SQL with others, I’ve created the following SQL discord channels.

Please feel free to join the community. 😊 

In my spare time I teach SQL to beginners and intermediate folks.

https://discord.gg/Xr593UW",1,sql,2020-10-13
iew3dk,Coalesce review,"Hi there. 

Basically, I need an explanation as to how this function can be used. Also providing format of code with an example would be helpful. Thank you in advance!",2,sql,2020-10-13
ietf9i,Intermediate SQL Courses,"I recently completed Jose Portilla's ""Complete SQL Bootcamp"" on Udemy and feel that I have a solid foundation to build upon. This course utilized PostgreSQL, which I enjoyed using. I am looking to learn on other programs as well, such as Oracle or MySQL.

I am searching for a more intermediate/advanced SQL course to really fine tune my skills and develop a deeper knowledge of the language. Are there any recommended courses that you have taken that helped further your skills?

So far I am looking at "" Advanced SQL : SQL Expert Certification Preparation Course "" on Udemy and "" The Complete Oracle SQL Certification Course"" by Imtiaz Ahmad. 

I'm sorry if i come off as lazy and incapable of doing my own research. I figured having some guidance from developers would help push me in the right direction. Thank you!",47,sql,2020-10-13
ieqibz,What is data discovery? How is it different from data profiling?,Please help,3,sql,2020-10-13
ieqab2,MS SQL: How do tries and catches work? Trying to design error handling for my sprocs.,"I have all my sprocs wrapped up in try/catch statements, but they don't seem to work.

For example, the other day one of my sprocs attempted to insert a row of data which would violate a PK constraint on a table. This wasn't a big deal, we just went in to modify the jobs logic to remove the 'duplicate' row from appearing, and reran it. But the job failed instead of logging an error which was the intent.

Another day we had a similar error because a value was being inserted into an INT column that was too large, so again, the job failed, and no error was logged.

Am I misunderstanding how a try/catch works, or is there any other way to do this?

In practice I have (1) sproc (the parent) that executes multiple child sprocs depending on various logic... in all it can trigger a total of about 30 children to run, and I have it also wrapped up in a ""meta"" try/catch. However, when it tries to run one of the children, and the child fails, everything stops and we have to go in and fix the problem.

All of the errors are supposed to captured to our logging table, and we will have an email get sent whenever an error is listed in the running of the parent.",14,sql,2020-10-13
ieq4i1,"Shorter way to insert many rows, with only one column changing?","if I wanted a table with 3 columns, first and third column staying constant, second column different each time. Example: have a row for every letter of the alphabet, same int 1 in column 1, same varchar 'triangle' in column 3, but changing column 2 to a, b, c...

INSERT INTO alphabet\_table (constant\_int, changing\_letter, constant\_varchar)

VALUES (1,'a','triangle'),

(1,'b','triangle'),

(1,'c','triangle'),

...the rest of the alphabet...

(1,'z','triangle');

Is there a short way of doing this? I realize this doesnt work, but something like:

INSERT INTO alphabet\_table (constant\_int,letter,constant\_varchar)

VALUES (1,\['a','b','c','d','e','f','g'...'z'\],'triangle');

I realize there are ways to set it up in sql logic to accomplish the same thing but I wanted to make sure I'm not missing some shorthand trick.",4,sql,2020-10-13
iepmwa,Rules about joins,"While I have some experience in writing basic queries in my computer science coureses, I am trying to cultivate wisdom about joins in practice. I understand the different types, but after talking to various people who use SQL regularly in their work, there seems to be opinions about joins that I am unfamiliar with. What are some of the rules about joins that you have from experience I may not be able to easily pick up from SQL references? Any resources or anecdotes welcome and appreciated from a student trying to gain some ""real-world"" knowledge.",14,sql,2020-10-13
ieobo6,Can someone explain how count works with groupby in this query?,"Select actor_id,director_id from ActorDirector Group by actor_id,director_id HAVING COUNT(*)&gt;2

This is a query to get the actors and directors who have collaborated at least three times. According to my understanding the group by shhould reduce the total number of rows. Plus I dont understand why there are two group by columns.",2,sql,2020-10-13
ieo1rz,Newbie SQL,"Hey there,
I'm just starting with SQL after some basic introductions, and wanted to know what is the best platform to use ? Any online courses, tutorials, databases and recommendations are welcome !",9,sql,2020-10-13
iel4y6,"Creating a view vs running query- speed, security?","Hello all,

I am programming in wordpress and using a lot of MYSQL queries for custom dashboards and other information. I think I know the answer but is it better to create a number of Views in MYSQl and store them there or query everything from WP custom shortcodes? Obviously no matter what I have to call the View from the short codes but I didnt know how much it mattered as far as speed and security. Thoughts?",5,sql,2020-10-13
iekr8p,What database and cloud service should I use for an Instagram-like app?,"I am a **beginner** in the world of databases and I’m so confused with the amount of tools available. I am building an Instagram like app in Flutter and wanted to know what database should I study for it? And which cloud service should I use, AWS or Azure?",3,sql,2020-10-13
ieihej,Guidance on conditional replace /modify of field content,"Hello together,

I'm in need of guidance in with the following scenario:

I have my Lightroom Catalog database file and there is tens-of-thousands of pictures in there. They are stored in a ""/photos/YYYY-MM-DDD/\[file\]"" directory setup. This catalog contains pictures from more than two decades, so the directory structure is becoming unhandy. I'm in the process to migrate the files to a ""/photos/\[YYYY\]/\[YYYY-MM-DD\]/\[file\]"" directory setup. I have easily been able to do this with a bash script and all files are at their intended new location now.

I have used DB Browser and identified the table that contains the info on the folders and the column that contains the respective data:

Table: ""AgLibraryFolder""; Column: ""pathFromRoot"";

I have successfully modified one of the entries manually, ""Photos/2020-08-20/"" was modified to ""Photos/2020/2020-08-20"". I saved the changes and opened the catalog in Lightroom again and it works fine.

&amp;#x200B;

Next step is: batch modify the lightroom catalog file to make the following change in all of the fields:

""Photos/YYYY-MM-DD/"" -&gt; ""Photos/YYYY/YYYY-MM-DD""

How does an SQL statement look like that does this?

&amp;#x200B;

Thanks &amp; Best regards,

Konzty

(an admin with 15 years of experience with Solaris, Linux, ZFS, NetApp, SAN-, NAS-, block- and object storage but not with databases)",13,sql,2020-10-13
ieg4i3,Select distinct (shuffle?),"Hi can someone tell me if it’s possible to make SELECT DISTINCT shuffle the distinct value(s) if two or more rows only have one of the same column values? So instead of always inserting or selecting the same row, it selects a random one all the time?",1,sql,2020-10-13
ieakzm,Parse error,"Hey Team!  


Very new to SQL and hit a road block straight away. 

Using freecodecamps guide   
 [https://www.youtube.com/watch?v=HXV3zeQKqGY&amp;list=PLh-G0-hF0tqsw6nXiClHBQUpRk8ryUM1r&amp;index=8&amp;t=878s](https://www.youtube.com/watch?v=HXV3zeQKqGY&amp;list=PLh-G0-hF0tqsw6nXiClHBQUpRk8ryUM1r&amp;index=8&amp;t=878s)   
And just created a data base and wanted to put in some properties to my first table.  
I've snagged the following error straight away and not sure why. I'm using PopSQL as a text-editor of sorts, with MySQL version 5.7.31for windows.  


 **ER\_PARSE\_ERROR: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 5** 

Any help would be greatly appreciated   


https://preview.redd.it/r28dbnjmtgi51.png?width=898&amp;format=png&amp;auto=webp&amp;s=de7d02f8c43dee7d6f57dad6030bd1094639dab6

https://preview.redd.it/1aagwzajtgi51.png?width=983&amp;format=png&amp;auto=webp&amp;s=080d3fd0b6862de6eb6ea0a9fa28e47ceeeaeb1d

https://preview.redd.it/sj9m3npetgi51.png?width=1340&amp;format=png&amp;auto=webp&amp;s=dd42e0f4678d72a5b6aeeb5b64141419412e6cb0",1,sql,2020-10-13
ie7b33,Maybe I'm being paranoid but I want to make sure I didn't change anything in my database.,"I was trying to find out the data type for certain columns in a table. I used the ""TYPE\_NAME"" function because that's what I found online that was supposed to help me. I ran a query like the one below to get that information:

`select TYPE_NAME(a.account_name) from account a`

&amp;#x200B;

But I didn't get the usual results, instead I got:

`Commands Completed Successfully`

Did I accidentally change data in the table? I thought that you couldn't do that with select statements? Any help would be hugely appreciated",7,sql,2020-10-13
ie3xcd,How to connect Sequel Pro with localhost MySQL on Mac?,"To begin, just an FYI I am completely new to SQL and trying to learn it to put on my resume for my job search.

I downloaded Sequel Pro to make it easier working with MySQL rather than just using terminal, but I’m having trouble connecting to my localhost. I know what to put for the host name, username, and password, but what do I put for the port # when trying to connect? Also, how do I find the port # using terminal? On terminal so far, I started the MySQL server by entering a password and have just created an empty practice database to get started. 

This is all new to me so sorry for any ambiguity, and let me know if I should try to explain something better. Thanks!",1,sql,2020-10-13
ie2pba,SQL career start,Hello! I'm in the process of learning SQL and wanted to know what roles serve for entry-level positions with the use of it. Thanks in advance.,39,sql,2020-10-13
ie17qg,Searching one dataset against another or merging?,"So I have two datasets:

Dataset1: A list of my cars  
Dataset2: A list of cars that have an energy certificate

What I want to do is to see which of my cars have energy certificates? So search my cars against the energy certificates dataset.  Not all of my cars will have certificates.  Is there a way to do this??  


I was using pandas/SQL and trying to merge my cars with the certificate dataset to see which cars ahve certificates, but i couldnt quite achieve this! 

&amp;#x200B;

All help is appreciated!",1,sql,2020-10-13
ie089g,Select max (date) from one column as constant value in new field,"This should be straightforward but i cant get it to work, so would be grateful of any help.

I only receive data when when there is a result and i want to create a complete time series - for all days with no value and i also need an interval for each row. The data is dynamic and will be updated daily.

All i want is the MaxTestDate value to appear for every single row including those currently null:

https://preview.redd.it/vgz4riejtdi51.png?width=755&amp;format=png&amp;auto=webp&amp;s=3b6d8bba5a0fdf00b205e821998702eaa49dbfec

I would have tried - to no avail -  playing around with:  max (case when ""MaxTestDate"" is null then ""MaxTestDate""  else ""MaxTestDate"" end)",5,sql,2020-10-13
idzrgt,"What's the best dynamic way to filter, sort, select &amp; paginate API that uses MySQL? (in NodeJS)","I use NodeJS and in some projects I use mongoDB (w/ mongoose) and in some projects I use MySQL...

In my NodeJS projects that I use mongoDB and mongoose I have the following class which in the proper routes I use and it ""magically"" handles all the filtering / sorting / selecting and paginating that the client provides in the query params, I wrote it based on a similar solution I saw in a udemy video and also I changed it a bit to be really dynamic and secure so that there'll be no data leaks.

    class APIFeatures {
        constructor(query, queryObj) {
            this.query = query;
            this.queryObj = queryObj;
        }
    
        filter(allowedFilterFields) {
            let queryObj = {};
            Object.keys(this.queryObj).forEach(key =&gt; {
                if(allowedFilterFields.includes(key)) {
                    queryObj[key] = this.queryObj[key]
                }
            })
    
            let queryStr = JSON.stringify(queryObj)
            queryStr = queryStr.replace(/\b(gte|gt|lte|lt)\b/g, match =&gt; `$${match}`)
            this.query.find(JSON.parse(queryStr))
            return this;
        }
    
        sort() {
            let sortBy = ""-createdAt"";
            if(this.queryObj.sort) {
                sortBy = this.queryObj.sort.split("","").join("" "");
            }
            this.query = this.query.sort(sortBy)
            return this;
        }
    
        limitFields(allowedSelectionFields) {
            let fields = ""-__v"";
            if(this.queryObj.fields) {
                fields = this.queryObj.fields
                    .split("","")
                    .filter(key =&gt; allowedSelectionFields.includes(key))
                    .join("" "")
            }
            this.query = this.query.select(fields)
            return this;
        }
    
        paginate(maxLimit = 1000) {
            const page = (this.queryObj.page || this.queryObj.offset) * 1 || 1;
            let limit = this.queryObj.limit * 1 || 100;
            limit = limit &gt; maxLimit ? maxLimit : limit;
            const skip = (page - 1) * limit;
            this.query = this.query.skip(skip).limit(limit);
            return this;
        }
    
    }
    
    module.exports = APIFeatures;

Anyways I want to build similar class with similar dynamic solution for my NodeJS projects where I use MySQL but I can't figure out what's the best dynamic way to do so... (for MySQL in NodeJS I use the regular npm mysql driver with no special libraries whatsoever)

Thanks in advance :)",9,sql,2020-10-13
idz4vz,(Beginner) SELECT statement to be based on a sequence,"Hi guys, 

I noticed the particular rows I want to retrieve has an ID that is based on a sequence where its every 5 rows (Inclusive) . Is there a way to write SQL in such a way to let it take row 5-8, then skip 9-12, then take 13-16 and onwards?

Note: I would truly appreciate if someone could rephrase my question for clarity.",3,sql,2020-10-13
idvww4,[Premature Optimization] Performance difference between select-then-update-difference and update-the-whole-thing?,"Obviously I know that there is not one, true, answer. I'm looking for what things to consider when making the choice, though. I also know that I'm supposed to just measure and see. But I don't know what to measure because I don't know all the things to consider and test against!

Basically the thought-experiment is that you get some data from ""somewhere"" that you want to use to update a row in your Table. Should you SELECT the existing row, compute which columns have changed, and then UPDATE? Or should you just UPDATE the whole thing? 

I'm NOT asking about what is more practical or easier or best practices. I'm simply asking to consider performance only. I am using MySQL, if that helps us be a little less abstract in our thought experiment. Let's also assume that all of our operations are happening inside an already-active transaction.

As an example: if your Table only has one column, then if you SELECT and see that the single value has not changed, you can save yourself a write by not doing the UPDATE at all.

Another example: let's say I have a Table where many of the columns are indexed and/or foreign keys. If I write the same value to a given column, is MySQL going to be smart enough to not recompute the indexes? What about triggers? I assume they would fire no matter what, right?

Example #3: now let's say I have an update where every column will change. Then the UPDATE statements will end up looking the same. Let's pretend that computing the diff is very cheap. Is doing an extra SELECT a non-negligible cost compared to the UPDATE? My intuition says it probably isn't- I would think SELECTs would be VERY cheap compared to UPDATE.

I'd be very thankful for any insight or musings or documentation about this specific kind of scenario.",6,sql,2020-10-13
idv461,How to sync my PostgresSQL database with 3rd party API database,"Hey all I am a new developer and can’t wrap my head around how to sync databases? Don’t know if that is the right terminology.

I will be using PostgresSQL as my database but want it to sync with the Shopify Admin API. The Shopify Admin API gives me access to the user’s product database like IDs and inventory levels.

1) If a user makes a change in the Shopify Dashboard, I want that change to reflect in my database.

2) In my application, if a user makes a change. I am not sure if I should make a (Mutation GraphQL) to the Shopify database that will then change my PostgresSQL database. Or should my app, change my PostgresSQL database that then changes the Shopify database?

3) Either way, changes will be happening both ways. I have specific data values only in my PostgresSQL that I want the Shopify database to be dependent on.

4) When a person selects new products from Shopify through my application, I want to be able create a new row of data in my table with default values for my columns.

This is a knowledge gap that I have, but don’t know the terminology of what this is all called. Can’t seem to put all the backend pieces together.",2,sql,2020-10-13
idv3pi,Nested query help,"Hello i'm pretty new to SQL and need help making a nested query work. I have this query:

SELECT itemPrice\*itemQuantity AS finalPrice FROM products;

I want to get the SUM of the values in the finalPrice column generated by this query but i'm not entirely sure how. Some help would be greatly appreciated;",5,sql,2020-10-13
idsvaw,"Path not found, error 76","I hope this is the right subreddit for this, as it seems to be SQL related.

I work for a small company and inherited the responsibilities of the IT guy when he left. I should preface my post by saying things are very very old school here, I've had to  *MacGyver* the fuck out of everything so far. I've been getting along okay by being able to Google things better than the average bear, but I really have no idea what to do with this scenario.

We have an in-house program which was developed I'm guessing around the early nineties or so - it's a Visual Basic application with a SQL back end which has been developed in [ASP.NET](https://ASP.NET) as far as I can tell. Essentially it's just a CRM type of thing from a recruitment perspective - saving all of the person's info, including a photo of the person. This is going to be important later. It uses Word for spell check, Excel for templates (such as printing a person's resume) and the basic functionality of this thing can be altered by simply going into the program files on the C drive. For instance, there can be an Excel file called TEMPLATE, which this program uses as a template. If you change the template, the output changes. As I understand it, the source code dictates that the program will only run effectively in Windows 7, and using early versions of Word and Excel, but I have successfully installed it on Windows 10. 

Here is my problem. I can run this application on damn near every computer, but the photos of the person do not appear on the interface. I am then greeted by this error:

&amp;#x200B;

&gt;An error has occured.  
&gt;  
&gt;Description: Path not found  
&gt;  
&gt;Source: (the application's name)  
&gt;  
&gt;Source: 76

&amp;#x200B;

Which also means I can't print the resume of the person when I have selected to print it with a photo. Without a photo? Fine, it will print. So there is an issue between the application and SQL pulling the photo of the person right? 

What I have noticed is that this only happens on ""newer"" chipsets. It's not a 32 or 64 bit situation, it happens on both. I have tried copying and pasting the contents of a working program's Program Files' contents into one that is giving me this error, to no avail. 

I hope this is making sense, please let me know if you need clarification on anything. I really hope someone can help me figure this out because it's driving me insane.",6,sql,2020-10-13
idocqw,[Meta] We really need a stickied resource guide to help beginners get started until they have more specific questions.,"I'm not saying anyone shouldn't be able to start a new conversation on the topic. But I also think some people would rather see a sticky up top that already answers their question.

We frequently have absolute beginners popping in and asking the same basic question about what resources we recommend to get started from square one or close to it. I'd suggest we could save them time and save everyone from re-posting the same resources or telling n00bs to use Google because there's so many resources.

I could contribute, but my strong area for learning and tooling is mostly SQL Server/Azure (and SSIS/SSRS/etc) and when it comes to other DBMSs I can't say I can recommend any 'better than average' resources in those areas.

What do y'all think?",80,sql,2020-10-13
idnhx8,[MS SQL] I Need A Little Help With a Complicated INSERT,"OK so I have a table with a bunch of record, all identified by OBJECTID.  (PK)

And then I have a second table with another bunch of records, each of which is a FK for the OBJID.  That second table is the one I need to insert some additional records into.  The tables look roughly like this:

    PRIMARY
    OBJECTID (PK)      TITLE
    101               ""FOUR SCORE""
    102               ""AND SEVEN""
    103               ""YEARS AGO""

    SECONDARY
    UID (PK)   OBJECTID (FK)      RANK                COMMENT
    1001        101                0                ""OUR FOREFATHERS""
    1002        101                1                ""BROUGHT FORTH""
    1003        103                0                ""ON THIS""
    1004        103                1                ""CONTINENT A""
    1005        103                2                ""NEW NATION""

The existence of COMMENTS for the primary records is optional, but you can have multiples.  Laid out in the order of RANK.

I want to search up a list of all OBJECTID in the first table, then insert an additional COMMENT into the second table.  It needs to get a unique UID, reference the OBJECTID, and have a rank equal to one more than the current MAX rank for that OBJECTID in the SECONDARY table.

I'd like to do it without cursors but who am I kidding?  I ain't proud.  I'll do it any way I can, since I've got &gt; 10,000 records to update.  (Well, insert, really.)",2,sql,2020-10-13
idj3i1,SQL Server Diagnostic Queries Part 4,,3,sql,2020-10-13
idiktf,Online SQL selection tool (reccomended platforms?),"I'd like to build an online tool/app that allows users to select audiences of people based on their country/interests etc.

What platforms/languages would you reccomend I learn to build something like this in?",2,sql,2020-10-13
idhmt5,How can I stop Dev's from making schema changes on our sql db's?,I'm not super savy with sql db administration but I created 2 domain groups (1 for dev's 1 for dev admins). I gave the dev admins group sysadmin role and the dev group public with dbreader\\dbwriter on our 2 main databases. They're saying they can still make schema changes so I'm not sure where to dumb down the permissions?,1,sql,2020-10-13
idgrwy,Can you recommend the free resources where I can learn SQL?,"Hi, dear sub! I am beginner to DBSM. I want to learn SQL. Do you have any recommendations? (Books, Websites and etc.)",20,sql,2020-10-13
idgqxx,Condition depending on a number returning a non numeric result,"Hello sub,

&amp;#x200B;

&amp;#x200B;

I've been trying to repair a query that should return one of 5 Region values.  It is setup so if the number of region values is more than 1, it returns a ""multiple"" value and if nothing matches it would classify it as NULL. The problem is that it seems to be pulling out the region value from a field that is empty 30% of the times. 

&amp;#x200B;

I identified the Master\_sn\_region.region to be the value we want to return. 

&amp;#x200B;

&amp;#x200B;

The original query for this section looks like this:

&amp;#x200B;

    CASE
     WHEN ((SELECT COUNT (*) FROM sn_change_region WHERE sn_change_region.change_number = sn_change.number) &gt; 1)
     THEN 'Multiple'
     WHEN ((SELECT COUNT (*) FROM sn_change_region WHERE sn_change_region.change_number = sn_change.number) = 1)
     THEN (SELECT region FROM sn_change_region WHERE sn_change_region.change_number = sn_change.number))
            (SELECT region_id FROM sn_change_region WHERE sn_change_region.change_number = sn_change.number))
     ELSE 'NULL' END AS [Change Region],

&amp;#x200B;

I believed I could change it into the following:

&amp;#x200B;

    CASE
     WHEN ((SELECT COUNT (*) FROM sn_change_region WHERE sn_change_region.change_number = sn_change.number) &gt; 1)
     THEN 'Multiple'
     WHEN ((SELECT COUNT (*) FROM sn_change_region WHERE sn_change_region.change_number = sn_change.number) = 1)
     THEN (SELECT master_sn_region.region FROM master_sn_region)
     ELSE 'NULL' END AS [Change Region],

Yet it returns the following:

&amp;#x200B;

&gt;Msg 512, Level 16, State 1, Line 1  
&gt;  
&gt;Subquery returned more than 1 value. This is not permitted when the subquery follows =, !=, &lt;, &lt;= , &gt;, &gt;= or when the subquery is used as an expression.

&amp;#x200B;

&amp;#x200B;

Can anybody please explain where my logic is failing?

&amp;#x200B;

&amp;#x200B;

Thanks in advance.",3,sql,2020-10-13
idgou5,Need help with selecting multiple MAX values.,"    ID    CODE  ORDERS
    11     5     1
    17     6     1
    14     2     1
    11     6     1
    14     5     8
    14     6     7
    11     7     3
    13     4     1
    15     5     2
    15     8     1
    12     7     1
    17     5     2
    16     5     4
    16     7     1     

So I have this table and I want to get the IDs and the CODEs  with the largest Values

Like this

    ID    CODE    ORDERS
    14    5       8
    11    7       3
    13    4       1
    16    5       4
    15    5       2
    12    7       1
    17    5       2
    

I have this code:

    CREATE view View1 AS
    SELECT Desert_id ID,Customer_code CODE,COUNT(order)orders FROM Restaurant
    GROUP BY ID,CODE;
    
    SELECT ID,CODE,MAX(orders) orders FROM View1
    GROUP BY ID,CODE
    HAVING orders =(SELECT MAX(orders) FROM View1)

And it only returns the one ID, one CODE, but I need every distinct of them with most orders.  
How can I do that?  
Thanks.",2,sql,2020-10-13
idf627,Career Changes in The DB World,"I am currently working as a Database Developer primarily focused on Data Warehousing and reporting. I've been doing this for about two years and have decided I definitely want to pursue a career in data, however, I am not sure which path I want to take.

I've been looking into the possibility of a DBA role, I've found myself very much enjoying troubleshooting issues throughout my time as a dev and as a bit of a workaholic who wants remote work opportunities, its seems like it could be a good fit.

I wanted to reach out to this community and see what opinions are out there when it comes to moving from development to a DBA role.",2,sql,2020-10-13
idexo2,Can you help me with this issue.,I have a timestamp column which has value 12/02/2019 02:00:00. But  when the months of daylight savings come the value automatically changes  to 12/02/2019 01:00:00.Now if I make the timezone to Europe/Istanbul it  becomes the original value. But I have to keep changing the timezone  every few months when daylight savings happens.I need the query to  return the original value. Again for normal months I have to set the  timezone to Asia/Istanbul otherwise the value changes forward.,1,sql,2020-10-13
idbtyq,Help with randomization on enormous tables?,"I've scoured for weeks now for a viable solution and just keep coming up empty so figured I'd throw this out there to see if I'm trying something impossible.

I need to run a query that captures 3 to 5 random records based on specified user IDs over a 7 day period. I've tried a myriad of iterations and they just don't work. The RAND, NEWID () function would be great if this were not a table with millions upon millions of records.

I tried using top 5 percent which executed pretty quickly but did not actually capture the data for every single user ID in my where statement which is what I need to achieve.

Because I need to pull in multiple columns from several tables on top of this, I'm adding to the stress I'm putting on the server but I need this supplemental data as well.

Am I out of luck in attempting to run this type of query?",1,sql,2020-10-13
idbe0d,Why does it return this value? Date math in SQL Server,"I'm trying to do some math on dates as floating number. When I enter the following statement. I get and expected output.

    SELECT CONVERT(float, CONVERT(DATETIME,'2013-08-05 17:23:33'))
    -
    (SELECT CONVERT(float, CONVERT(DATETIME,'2013-08-05 09:00:30')))
outputs: 0.3493402777749

However if  I add the following line to the end of the statement, I get a completely unexpected output.
  
     * 24
 outputs: -954255.28364583326

Even if I try to hard cast the 24  as a float, I still get the same output. Why don't I get the output of ~8.384166 (0.3493402777749 * 24) and what does the ~ -954255.283 represent?",1,sql,2020-10-13
id8n0e,Threat Protection for SQL IaaS VMs running on-premises using Azure Security Center,,3,sql,2020-10-13
id7u04,Help Sequelize Error: Unknown column 'cartItem.cartId' in field list,"Before, I get into it I will share some context. I am building a Apparel Store application using React, NodeJS, Sequelize and MySQL. I am currently building out the backend, I have the following features:

1. User Login/Signup using JWT
2. User can post products for sale (Add, delete, edit)
3. User can add products to cart and delete products from cart

**Information Relating to Problem**

Models (fields):

Product: id, title, price, imageUrl, description

Cart: id

CartItem: id, quantity

Associations:

`Cart.belongsToMany(Product, { through: CartItem });`

`Product.belongsToMany(Cart, { through: CartItem });`

**Question**

'CartItem' should have auto generated fields called 'cartId' and 'productId' linking 'Cart' and 'Product'? In the table I do not see 'cartId' column but do see 'productId' column.

**Problem**

Hello, I am getting the error message: Unknown column 'cartItem.cartId' in field

When I run the following code:

    let prodId = req.body.productId;
    try { 
        // Finding user in the database 
        const user = await User.findByPk(req.userData); 
        // Getting the 'Cart' associated with the user 
        const fetchedCart = await user.getCart(); 
        // Assume the product we are looking for is in the cart 
        // Getting a particular product from the 'Cart' associated to a 
        // particular 'User' 
        let product = await fetchedCart.getProducts({ where: { id: prodId } }); 
        // Nothing is shown 
        console.log(""product"", product);
    }...

&amp;#x200B;",2,sql,2020-10-13
id5ft9,Help performing a large diff on my database,"Hello, I just need some general guidance for what sort of approach would be a good idea in my case. I am using PostgreSQL

So I have a scenario where a user groups objects into a number of different groups. It is modeled as a simple many2many resolution table connecting the objects table and the groups table.

In the future, when the user wants to update the grouping, I need the following to happen.

For each object in the new grouping configuration, if it is in a new group, update its record in the membership table to the new group.

If an object was present in the old grouping, but not the new one, then delete its record from the membership table.

If a new group was created, create the group.

If an old group no longer has any members, delete the group.


Currently I've implemented this entire logic in my server code, but it's not atomic, and uses a lot of queries, so it can be slow when there are hundreds of objects.

I would love to reduce the number of transactions made to the database.

Is there a way I could better design my schema, or some more advanced way to query the database that I should look into? Thank you",2,sql,2020-10-13
id1rdo,Joining two tables with no commonalities,"I have two tables that I’m looking to join, but there are no commonalities between them. 

The first table contains dates and second contains names. I’m looking for a way to join the two so that for every date record, all names from the name table are pulled together.

Example:  
2020-01-01  Ben  
2020-01-01  Jerry  
2020-01-01  Matt  
2020-02-02  Ben  
2020-02-02  Jerry  
2020-02-02  Matt  
Etc...

Apologies for terrible formatting and lack of repeatable code - I’m on mobile right now away from my laptop.",3,sql,2020-10-13
id0riu,Losing my mind with MySQL 5.6.1 Syntax,"So I come from MSSQL. This mysql 5.6.1 syntax is so spotty.

The error is 

    Error Code: 1064. You have an error in your SQL syntax; 
check the manual that corresponds to your MySQL server version for the right syntax to use near 
    'DECLARE curr_table_name VARCHAR(200);       DECLARE sys_table_cursor CURSOR FOR ' at line 7

If I set line 7 to

    SET @curr_table_name = '';

Then it errors at 

    Error Code: 1064. You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DECLARE sys_table_cursor CURSOR FOR   SELECT `table_name`  FROM information_sche' at line 9

It does not seem to like the word DECLARE even though the documentation here shows it works fine

https://dev.mysql.com/doc/refman/5.6/en/cursors.html

Here is the code below... I'm losing my mind.

    DELIMITER $$
    CREATE PROCEDURE ext_sys_table_populate (
    	IN `table_schema` VARCHAR(200)
    )
    BEGIN
        TRUNCATE TABLE ext_sys_table;
        
        DECLARE curr_table_name VARCHAR(200);
        
    	DECLARE sys_table_cursor CURSOR FOR 
    	SELECT `table_name`
    	FROM information_schema.tables
    	WHERE `table_schema` = @table_schema
    	  AND `table_name` like 'sys\_%';
    
    	DECLARE CONTINUE HANDLER 
    	FOR NOT FOUND SET finished = 1;
    
    	OPEN sys_table_cursor;
    
    	getTables: LOOP
    		FETCH table_name INTO curr_table_name;
    		IF finished = 1 THEN 
    			LEAVE getTables;
    		END IF;
    
    		SET statement = CONCAT('
    		INSERT INTO ext_sys_table (
    			source_table,
    			id, 
    			asset_guid, 
    			value, 
    			start_date, 
    			end_date, 
    			timestamp	
    		)
    		SELECT 
    			',curr_table_name,',
    			id, 
    			asset_guid, 
    			value, 
    			start_date, 
    			end_date, 
    			timestamp	
    		FROM `',curr_table_name,'`');
    
    		SELECT statement
    
    	END LOOP getTables;
    	CLOSE sys_table_cursor;
    END$$
    DELIMITER ;",1,sql,2020-10-13
iczmx0,"[MsSQL] Adding a line for months with no data in a grouped output? Trying to have a clean view of the inventory ledger by item by month, with no missing months for each item.","SELECT 

ledger .""item no_"",  
         DATEADD(MONTH, DATEDIFF(MONTH, 0, ledger.""document date""), 0) [DATE],  
         SUM(ledger.quantity) [MONTH NET],   
         SUM(  CASE WHEN ledger.""entry type"" = 0 THEN ledger.quantity END) [Purchase],    
         SUM(  CASE WHEN ledger.""entry type"" = 1 THEN ledger.quantity END) [Sale],  
         SUM(  CASE WHEN ledger.""entry type"" = 2 THEN ledger.quantity END) [Pos Adj],  
         SUM(  CASE WHEN ledger.""entry type"" = 3 THEN ledger.quantity END) [Neg Adj],  
         SUM(  CASE WHEN ledger.""entry type"" = 4 THEN ledger.quantity END) [Transfe],  
         SUM(  CASE WHEN ledger.""entry type"" = 5 THEN ledger.quantity END) [Consumption],  
         SUM(  CASE WHEN ledger.""entry type"" = 6 THEN ledger.quantity END) [Output],  
         SUM( CASE WHEN ledger.""entry type"" = 7 THEN ledger.quantity END) [Blank(PO)],  
   SUM(SUM(ledger.quantity)) OVER (PARTITION BY ledger .""item no_""  
            ORDER BY DATEADD(MONTH, DATEDIFF(MONTH, 0, ledger.""document date""), 0)  
            RANGE   
            UNBOUNDED  
            PRECEDING -- from the current row to beginning  
            ) [RUNNING]  

   FROM ""MY DB"".dbo.""MY COMPANY$item ledger entry"" ""ledger""  
    WHERE ledger.""Item Category Code"" = 'CORK'

GROUP BY ledger .""item no_"", DATEADD(MONTH, DATEDIFF(MONTH, 0, ledger.""document date""), 0)  

   ORDER BY ledger .""item no_"", DATEADD(MONTH, DATEDIFF(MONTH, 0, ledger.""document date""), 0  
  
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  

Finally got this query working how I want it with 1 exception - it doesn't output anything if no transactions happened for that item in a given month.  I just want to add the months to the list.  I don't think I need to create a list of months since I never need to go out of the list of dates in the table. I made this code to create a list of months available in the table but I have no idea how to join it to the above without breaking both.
  
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  
SELECT DISTINCT DATEADD(MONTH, DATEDIFF(MONTH, 0, ledger.""document date""), 0)  
FROM ""MY DB"".dbo.""MY COMPANY$Item Ledger Entry"" ""ledger""
  
  
I found solutions like [this](https://stackoverflow.com/questions/19075098/how-to-fill-missing-dates-by-groups-in-a-table-in-sql) but couldn't seem to make them work :-(
TYIA",1,sql,2020-10-13
icxged,"Why does using the statement ""between"" increase my runtime more than tenfold",I have a query that pulls from a massive table.  If I try to pull between two dates say 2006 and 2010 the thing will run for like 40 mins.  If I pull everything greater than or equal to 2006 it takes \~2 mins. Why is that? (It has a few joins and a where statements in the query it's not just select \* from table where year &gt;= 2006),1,sql,2020-10-13
icw58x,How do I query when field value occurs more than once?,"I am doing count like -- Count(1) OVER (PARTITION BY PNumber) AS \[Num\] to get records that have matching PNumbers. The problem is, this is stripping out anything out the first record for everything.  How can I return ALL records when a duplicate value in a field is detected?

I changed the name of stuff so ignore minor syntax errors.

`;WITH cte AS (`

`SELECT Cust2.dbo.CustomFields.*, ROW_NUMBER() OVER (PARTITION BY PNumber ORDER BY PNumber) AS [Num]`

`FROM Cust.dbo.Header`

    `INNER JOIN Cust.dbo.CustomFields ON Cust.dbo.Header.BillNumber = Cust2.dbo.CustomFields.BillNumber`

`)`

`SELECT BillNumber, PNumber, CONVERT(Date,ShipmentDate)`

`FROM cte`

`WHERE cte.Num &gt; 1`

`AND ID IN ('2330', '2330-RKD', '2330-WRN', '2330-MAD', '2330-MKE') AND CONVERT(Date,ShipmentDate) &gt;= DATEADD(day,-7, GETDATE())`

&amp;#x200B;

WHERE cte.Num &gt; 1 is eliminating row 1, how can I return all rows if duplicate is found? It will eliminate if I use count or row number. Any way to not strip out first record?

&amp;#x200B;

\----

&amp;#x200B;

A very key piece to this is, I want to get all the records where a value occurs more than once but in a given time span. So say I am looking at the past 7 days. In those 7 days there are 4 of a single value. The query gives me those four which is great! But the count still returns the count for all time. So the count could say 112 for instance. Leading to confusion. Thanks for reading.",1,sql,2020-10-13
icu5pe,Msg 5133 level 16 state 1 line 1,"Systeme error 5 acces denied:
Currently trying to creare a DB with SSMS in a folder inside in Desktop, but keep getting this Acces denied error message",1,sql,2020-10-13
ict0v8,Where to find the corresponding string of an ID number,"I'm new to SQL and currently am doing a database migration for my work. We are an MSP and have our own in house MSSQL DB that was literally made before I was born.

Example: 

2772 is a HP ProLiant DL380 Generation 10 server. I can see this by matching the configuration in our database to what our front end program shows. I just want to see if theres a list in the SQL Server Management Studio or Azure Data Studio that can show me how the numbers match up to our corresponding hardware type. Please let me know if you need more info, I am a little tired lol

Edit to add: 2772 isn't the primary key, its the HardwareID which tells the front end what type of hardware this is. I just want to find a list of every HardwareID and what it is",1,sql,2020-10-13
ict0on,"How do I do this without using a cross-join? Using two tables, have to figure out number of absent employees for every manager in one month (May).",,1,sql,2020-10-13
icrorp,Error trying to pull SUM amount with intScalar,"I am attempting to pull a SUM amount from a mySql database, using an intScalar query.

This is the calling code (The DBConnect class connects to the database):

    DateTime reportStart = startDate.Date;
    DBConnect reportConn = new DBConnect();
    MySqlCommand reportQuery = new MySqlCommand();
    reportQuery.CommandText = @""SELECT sum(amount) as total
                                FROM dbo.table
                                where created &lt;= startDate"";
    
    reportQuery.Parameters.Add(""@startDate"", MySqlDbType.Date).Value = reportStart.Date;      
    int xOutstanding = reportConn.intScalar(reportQuery);
    lblRewardsDateX.Text = xOutstanding.ToString();

And the intScalar:

    public int intScalar(MySqlCommand cmd)
            {
                int returnInt = -1;
                try
                {
                    this.OpenConnection();
                    cmd.Connection = connection;
                    returnInt = Convert.ToInt32(cmd.ExecuteScalar());
                    this.CloseConnection();
                    return returnInt;
                }
                catch (Exception ex)
                {
                    MessageBox.Show(ex.Message);
                }
                return returnInt;
            }

However, it is throwing an exception: ""Object cannot be cast from DBNull to other types""

I have double-checked the parameter being passed to the command, and it is not null. So why is it throwing the exception?",1,sql,2020-10-13
icpk4m,What is the best resource to practice my sql online for interviews?,"I am looking for practice my sql skills online for an interview. I know sql and have worked with it before as a software engineer. I want to interview for a data scientist position and wanna sharpen my skills.

Thank you for your advice.",0,sql,2020-10-13
icp97e,Alternaitves to Lucid Chart (With exporting code capabilities?),"Hello all.

Not wanting to setup/need to have an internet connection while working on stuff, I've been looking a little while now for an alternative to Lucid Chart.

So, I've come to ask, is there an installable alternative to lucid chart that doesn't require me to sign up for anything, which has the ability to export my charts as SQL code?  


Thanks in advanced.",1,sql,2020-10-13
ico9yj,Introduction to SQL Server Statistics,,1,sql,2020-10-13
icn260,Divide Counts from two different tables with different where criteria and find ratio of the count values by month (ANSI SQL),"I have two tables in which I want to find the count in one table based on certain criteria and divide by the count of another table based on certain other criteria . I'm writing in **ANSI SQL** *(Implementing this on Zoho Analytics  -  Zoho Analytics currently supports SQL SELECT queries written in ANSI, Oracle, SQL Server, IBM DB2, MySQL, Sybase, Informix and PostgreSQL SQL dialects) (I'm new to SQL and programming in general)*

&amp;#x200B;

Basically what I want to achieve:

1. table1: count rows where column named calltype has field value as demo
2. table2: count rows where column named customertype has field value as 0
3. Group result in months based on a date column present in both tables and divide the two counts to obtain the percentage of trial users by month for whom we've done a demo

&amp;#x200B;

I've tried using sumcase but it doesn't return the correct values -

&amp;#x200B;

`SELECT`

`A.""Call Date"" as Period,`

`SUM(CASE WHEN A.""Call Type"" = 'Demo' THEN 1 ELSE 0 END) AS TotalDemos,`

`B.""modified"" as Period1,`

`SUM(CASE WHEN B.""customertype"" = 0 THEN 1 ELSE 0 END) AS TotalTrials`

`FROM ""customer_calls"" AS A, ""users"" AS B`

`WHERE B.""modified"" = A.""Call Date""`

`GROUP BY Period, Period1`

&amp;#x200B;

However, I have codes for calculating each of the count values from the individual tables which give the results perfectly -

Table1

`SELECT`

`""Call Date"" as Period,`

`Count(""Call Type"") as TotalDemos`

`FROM ""customer_calls""`

`WHERE ""Call Type"" = 'Demo'`

`GROUP BY Period`

&amp;#x200B;

Table2 (I could've avoided sumcase here but wanted to check if it gives correct results and it does)

`SELECT`

`B.""modified"" as Period1,`

`SUM(CASE WHEN B.""customertype"" = 0 THEN 1 ELSE 0 END) AS TotalTrials`

`FROM ""users"" AS B`

`GROUP BY Period1`

&amp;#x200B;

Basically as an end result I want to find the ratio of TotalDemos to TotalTrials by Month. Can someone point out where I'm going wrong in the first code or what I can do better?",1,sql,2020-10-13
icl72a,Number plate Is Not NULL .,,454,sql,2020-10-13
ickhcd,HackerRank Challenge - 'Interviews',"Hi guys, please help, I'm getting very confused with this problem. Link: [https://www.hackerrank.com/challenges/interviews/problem](https://www.hackerrank.com/challenges/interviews/problem)

I compared my answer to a solution posted on the discussions board but I'm not able to tell where I'm going wrong. I keep getting this: **ERROR 1054 (42S22) at line 1: Unknown column 'vs.challenge\_id' in 'on clause'** (and other similar errors)

Any help is appreciated, thank you!

My solution:

    SELECT contests.contest_id, contests.hacker_id, contests.name,
    sum(total_submissions), sum(total_accepted_submissions), sum(total_views), sum(total_unique_views)
    FROM contests
    JOIN colleges
    ON contests.contest_id = colleges.contest_id
    JOIN challenges
    ON colleges.college_id = challenges.college_id
    LEFT JOIN (SELECT sum(total_views) AS total_views, sum(total_unique_views) AS total_unique_views
    FROM view_stats GROUP BY challenge_id) vs ON challenges.challenge_id = vs.challenge_id
    LEFT JOIN (SELECT sum(total_submissions) as total_submissions, sum(total_accepted_submissions) AS total_accepted_submissions
    FROM submission_stats GROUP BY challenge_id) ss ON challenges.challenge_id = ss.challenge_id
    GROUP BY contests.contest_id, contests.hacker_id, contests.name
    HAVING (sum(total_views) + sum(total_unique_views) + sum(total_submissions) + sum(total_accepted_submissions))!=0
    ORDER BY contests.contest_id;",1,sql,2020-10-13
ickaig,"PHP object array seeded is saving as either 1 or 0, and not as strings in phpmyadmin","I have a php object array in my database seeder which i seeded into phpmyadmin and it was all ok.i then added 'weighting' and 'capability\_pillar' which are on some questions but not all

$questionnaires = \[ \[ 'name' =&gt; 'Old Mutual Tool', 'sections' =&gt; \[ \[ 'name' =&gt; 'Technology', 'weighting' =&gt; '0.15', 'questions' =&gt; \[ \[ 'title' =&gt; 'Question', 'type' =&gt; 'dropdown', 'weighting' =&gt; '0.25', 'capability\_pillar' =&gt; 'Data Governance', 'options' =&gt; \[ \[ 'answer' =&gt; 'A' \], \[ 'answer' =&gt; 'B' \], \[ 'answer' =&gt; 'C' \], \[ 'answer' =&gt; 'D' \], \] \] \] \]    \] \]

I am looping through them, so i have used isset `'weighting' =&gt; isset($section['weighting']),` otherwise it throws an error as they are not on all questions

    foreach ($questionnaires as $questionnaire) {
    
    	$newQuestionnaire = Questionnaire::create(
    		[
    			'name' =&gt; $questionnaire['name']
    		]);
    
    	$sectionOrder = 1;
    	foreach ($questionnaire['sections'] as $section) {
    
    		$newSection = Section::create(
    		[
    			'questionnaire_id' =&gt; $newQuestionnaire-&gt;id,
    			'name' =&gt; $section['name'],
    			'weighting' =&gt; isset($section['weighting']),
    			'ordering' =&gt; $sectionOrder++
    		]);
    
    		$questionOrder = 1;
    		foreach ($section['questions'] as $question) {
    			$newQuestion = Question::create(
    			[
    				'section_id' =&gt; $newSection-&gt;id,
    				'title' =&gt; $question['title'],
    				'weighting' =&gt; isset($question['weighting']),
    				'capability_pillar' =&gt; isset($question['capability_pillar']),
    				'type' =&gt; $question['type'] ?? 'dropdown',
    				'ordering' =&gt; $questionOrder++
    			]);
    
    			if (isset($question['options'])) {
    				foreach ($question['options'] as $option) {
    
    					$newOption = Option::create(
    					[
    						'question_id' =&gt; $newQuestion-&gt;id,
    						'answer' =&gt; $option['answer']
    					]);
    				}
    			}
    		}
    	}
    }

i then ran `php artisan migrate:refresh --seed`  and i've got the columns in my db now, but for every question, it just says 'capability\_pillar' has the value of 1, and if they are empty strings it has the value of 0 ... same with weightings, they are all either 1, or if no weightings were applied to questions at all, they are 0

in my migrations, they are set to strings, and decimals

    class CreateQuestionsTable extends Migration
    {
        /**
         * Run the migrations.
         *
         * @return void
         */
        public function up()
        {
            Schema::create('questions', function (Blueprint $table) {
                $table-&gt;id();
                $table-&gt;bigInteger('section_id');
                $table-&gt;string('title');
                $table-&gt;string('type');
                $table-&gt;string('capability_pillar');
                $table-&gt;string('placeholder')-&gt;nullable();
                $table-&gt;string('date_tag')-&gt;nullable();
                $table-&gt;integer('ordering');
                $table-&gt;decimal('weighting', 5,2);
                $table-&gt;timestamps();
                $table-&gt;softDeletes();
            });
        }
    
        /**
         * Reverse the migrations.
         *
         * @return void
         */
        public function down()
        {
            Schema::dropIfExists('questions');
        }
    }

anyone see where i am going wrong?",1,sql,2020-10-13
ick0ne,What are the biggest insights you have ever made with SQL that made you feel like an Omniscient God?,"I've recently started learning SQL with this amazing book (http://dl.booktolearn.com/ebooks2/computer/databases/9781593278274_Practical_SQL_A_Beginners_Guide_to_Storytelling_with_Data_4971.pdf) and I've felt like a God handling data with those mighty SQL clauses... My intuition tells me you can get very valuable information from such a tool till the point of achieving a new level of understanding of reality.

Maybe I'm wrong and it's not such a deal, maybe you're not that powerful by knowing how to query data and you can't get any wisdom/knowledge. What do you think?",6,sql,2020-10-13
icis11,Use of current_date in Redshift materialised views," 

Hi All,

I found in documentation that current\_date function can't be used in materialised views, is there an alternative to this? I need current date in a filter condition.

Thnx,

mc",1,sql,2020-10-13
icikzy,"Best Way to Join Multiple, Large Metrics Tables on Primary Key &amp; Date When Dates Vary?","As entitled, let's say I have 4 tables (growing at 1m+ rows per day) collecting user data on a website.

Each table collects different engagement data, on the basis of a timestamp and user ID. The tables, for example purposes are:

* registering an account
* creating a project
* purchasing project credits
* downloading a project

Table 1 may have a date X for user Y, but that date may not exist for that user in Table 2.

I am trying to create a master metrics table, where I can summarize all user data in one table, for a  set of overlapping dates. In other words, as long as one table has a date X for user Y, that row gets created. But, if no table has a date X for user Y, then that record will not be created.

What I thought about doing is creating a master list of dates and user\_ids that I can left join each table to:

    select user_id, 
    date(timestamp) as dt 
    from table1
    union
    select user_id, 
    date(timestamp) as dt 
    from table2
    union
    select user_id, 
    date(timestamp) as dt 
    from table3
    union
    select user_id, 
    date(timestamp) as dt 
    from table4

I also thought about:

    with user_ids as 
    ( select * from table x
    ),
    
    dates as (
    select distinct date(timestamp) as dt
    from table1
    )
    
    select user_id
    ,dt
    ,metric1
    ,metric2
    ,metric3
    ,metric4
    from user_ids ui
    cross join dates d
    left join table1 t1 on t1.user_id = ui.user_id and t1.dt = d.dt
    left join table2 t2 on t2.user_id = ui.user_id and t2.dt = d.dt
    left join table3 t3 on t3.user_id = ui.user_id and t3.dt = d.dt
    left join table4 t4 on t4.user_id = ui.user_id and t4.dt = d.dt

Perhaps a bunch of FULL JOINS work too?

In any case, I'm interested in knowing what might be **best practice**. Speed is important due to the sheer size of the tables.

I had trouble finding much information online, and I tried rephrasing my search a few times.

Any insight?

Thanks in advance.",6,sql,2020-10-13
icfxa4,"Learning SQL, read my User Story about sending myself a randomised workout of the day as practice. I also want a recommendation on what free online SQL database solution I could use for this","I am a fairly junior BA who just finished 1.5 years of experience due to Covid-19. I never got a chance to practice SQL so want to use this down time between jobs to really wrap my head around it. I thought of a real life project of mine that is relatively simple, I was just going to dive in myself but I figure this community could offer some advice around how I should approach this, and specifically how I should structure my data. User Story below:

# Theme

Improve fitness and health by implementing new processes and rules that I will actually adhere to

# Story

**Randomised full body workout list sent 5 times a week to myself in an easy to access format**

## Description

I have an education in sports and exercise science and have been going to the gym for over 10 years. I have found it very hard to stick to a program as I can wing it very well and don’t like the heaviness and admin of tracking and following a plan.

I now believe a full body split will be very good for me, and want specific body parts included each workout, but the order and exercise selection to be randomised. This will mean each workout is holistic, but no two workouts the same.

## Acceptance Criteria

* A workout is sent to myself at 9am five days per week, Monday-Friday
* Each workout includes all 7 body parts: Chest, Back, Legs, Biceps, Triceps, Delts, Abs
* Solution allows exact exercises to be easily customised, e.g. remove Bench Press from Chest options, or add Lunges to Legs options
* The order in which the body parts are listed in the workout are random each day, e.g. one day might be in he order of: Chest, Back, Legs, Biceps, Triceps, Delts, Abs, and the next day in order of: Legs, Abs, Back, Biceps, Chest, Triceps, Delts
* One exercise included from each body part category
* Exercises are selected randomly from each body part options
* The message sent contains only the exercises selected for the day in list format
* The message sent is easy to access, meaning no logging in or slow loading apps required. Options that could work include: Text Message, Email, Push Notification, Google Calendar entry etc

&amp;#x200B;

&amp;#x200B;

Thanks so much! &lt;3",8,sql,2020-10-13
icez8j,Do Views Refresh Data Source,"Lets say I have a data storage (or file storage: S3) and I have created a table to query from these files. Then I create a view (in Athena). to make a sub table from the table. If a new file is uploaded into S3, and I run that view it doesn't just pull data from the table, but also refreshes the query to create the table so I get the new data. Just trying to understand the logic of Views, do they always refresh their data source? Also how efficient would it be to create a view of multiple views to go multiple levels of refreshing?",5,sql,2020-10-13
icdp6h,SQL - Basic YoY Data Manipulation,"I am trying to create a table with some YoY data, and am wondering what the best approach generally is. I was thinking it involves converting dates to days of the year, then doing a pivot by year or a self-join? (I understand this can be done in some BI tools as well).

In any case, I wanted to see if I could do this a different way.

Below is some example data. I have two periods, with one metrics column:

* 2019-08-04 through 2019-08-17
* 2020-08-03 through 2020-08-16

https://preview.redd.it/kdqe1l67tuh51.png?width=149&amp;format=png&amp;auto=webp&amp;s=98f46f78515824fe26a564d4b25ba8ce6a3b6199

Essentially, if I were to pivot the data, it might look like this:

(2020-08-06 is missing because there were no metrics, so I have it there as a placeholder)

https://preview.redd.it/uhynuyv7tuh51.png?width=1000&amp;format=png&amp;auto=webp&amp;s=cc7dc4e223de32fe24d40d6fe8ab42c75ef15d5e

So far, with my query, I am only able to achieve this (1 column deliberately chosen)

Notice how 2020-08-06 is missing. I can't figure out how to introduce that value into my table.

https://preview.redd.it/10hbs9hetuh51.png?width=242&amp;format=png&amp;auto=webp&amp;s=4ea9bfd74b5815342e1ec5b31ac66061c8ce97fe

Here is my query:

    SELECT COALESCE(a.dt,date_add ('day',365,b.dt)) AS dt
           , a.data_2020
           , b.data_2019
    FROM ma
      LEFT JOIN a
             ON a.db_filename = ma.db_filename
            AND year (a.dt) = 2020
      FULL JOIN b
              ON b.db_filename = a.db_filename
             AND (b.dt = date_add ('day',-365,a.dt)
              OR a.dt IS NULL)
             AND year (b.dt) = 2019
    WHERE ma.db_filename = 7316149

Any thoughts on what I need to tweak in my query?

And how do you typically prepare your data for YoY analysis?

Thanks!",8,sql,2020-10-13
icb9yu,Can you group by criteria within a COLUMN?,"Sorry if this is a newbie question (I'm a few weeks into learning SQL) Can you group by criteria within a COLUMN? Example of what I mean below.

**How can I change this table:**

*Item	| Value*

Socks1	| 1.5

Socks2    | 1.2

Socks3	| 4

Shoes1	| 8

Shoes2	| 77

Shoes3	| 81

Hat1	| 40

Hat2	| 50

Hat3	| 55

**To this output:**

*AllItems	| SumValue*

Socks	| 6.7

Shoes	| 166

Hats	| 145

Hopefully this makes sense; I want to group multiple unique item names that share a common string/value. Possible?

&amp;#x200B;

EDITS: to make table more clear",1,sql,2020-10-13
ic7ypi,Overwrite existing CSV file with new sql results on every execution,"I am working on a python script that executes sql query and processes the data. My requirement here is that I want to store the results of the last successfully executed query into a csv file as a temporary backup of latest results fetched from the server incase the db is down or whatsoever.

So everytime the sql query runs it should overwrite the existing csv file and add the latest results obtained instead of appending. How should I ensure that the file is overwritten?
The query is scheduled for running every hour so i should have only the last hour results in my csv file. Any help or guidance would be great",1,sql,2020-10-13
ic7ses,pulling most recent results for each point based on date field,"hello there, so I have tried a few methods now mostly using max(date) and not really understanding row (in) and aggregate. I have two tables in which I am doing a join and formatting a field. I also have something like 36 fields I need to pull in additionally. I keep stumbling on where to make a change.

 this portion I know works:

^(SELECT a.auto\_id, a.circuitname, a.work\_verification\_status, ...)

^(FROM evm\_vp A)

^(LEFT JOIN TAT B)

^(ON UPPER(A.EVM\_SYNC\_ID) = REPLACE(REPLACE(B.tree\_global\_id, '{', ''), '}}', ''))

^(WHERE B.TREE\_GLOBAL\_ID IS NOT NULL)

&amp;#x200B;

this portion works, however I can't pull all the other fields like I need.

 

^(SELECT A.AUTO\_ID, MAX(A.EVM\_LAST\_EDITED), ...)

^(FROM evm\_vp A)

^(LEFT JOIN TAT B)

^(ON UPPER(A.EVM\_SYNC\_ID) = REPLACE(REPLACE(B.tree\_global\_id, '{', ''), '}}', ''))

^(GROUP BY A.AUTO\_ID)

^(ORDER BY A.AUTO\_ID)

The join is fairly important. Any insight appreciated.",10,sql,2020-10-13
ic616o,Question in SQLAgent.out about file paths that are not mounted,"I'm having some issues with a SQL server, I'm no sql  expert but I'm trying to learn.

&amp;#x200B;

We have an issue with SQL Agent losing response and when I go to check the SQLAgent.out log I see a line that says:

2020-08-17 22:37:08 - ! \[LOG\] Exception 5 caught at line 232 of file e:\\b\\s3\\sources\\sql\\mpu\\sqlagent\\src\\autostrt.cpp.  SQLServerAgent initiating self-termination

&amp;#x200B;

The thing is there is no E:\\ on this server, where does this file path come from? I wanted to check that file to see if it's causing the issue.

Any help would be greatly appreciated!",2,sql,2020-10-13
ic5mde,Why can't I use table.column%type?,"This code works if I don't use the %type

    INSERT INTO cpp /*+ ignore_row_on_dupkey_index ( cpp ( cpp ) ) */
    SELECT * FROM EXTERNAL (
        (
      cpp VARCHAR2 (50),
      rfu1 NUMBER (6, 2),
      rfu2 cpp.rfu1%type,
      mean_rfu NUMBER (6, 2),
      charge_ph7_4 NUMBER (2),
      hydropathy NUMBER (3, 1))
    
        TYPE ORACLE_LOADER
        DEFAULT DIRECTORY cpp_data 
        ACCESS PARAMETERS (
            RECORDS DELIMITED BY NEWLINE
            SKIP 1
            BADFILE cpp_data:'cpp_badfile.bad'
            FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '""'
            MISSING FIELD VALUES ARE NULL 
            ) 
        LOCATION ('LYS_cpp.CSV')
        REJECT LIMIT UNLIMITED) ext
        WHERE NOT EXISTS (
            SELECT * FROM cpp c
            WHERE c.cpp = cpp );

If I do, the error says:

    Error at Command Line : 39 Column : 16
    Error report -
    SQL Error: ORA-00911: invalid character
    00911. 00000 -  ""invalid character""
    *Cause:    The identifier name started with an ASCII character other than a
               letter or a number. After the first character of the identifier
               name, ASCII characters are allowed including ""$"", ""#"" and ""_"".
               Identifiers enclosed in double quotation marks may contain any
               character other than a double quotation. Alternate quotation
               marks (q'#...#') cannot use spaces, tabs, or carriage returns as
               delimiters. For all other contexts, consult the SQL Language
               Reference Manual.
    *Action:   Check the Oracle identifier naming convention. If you are
               attempting to provide a password in the IDENTIFIED BY clause of
               a CREATE USER or ALTER USER statement, then it is recommended to
               always enclose the password in double quotation marks because
               characters other than the double quotation are then allowed.",2,sql,2020-10-13
ic1ylp,Error when downloading MySQL on Linux,,10,sql,2020-10-13
ic1wm5,SQL Server 2019 Diagnostic Queries Part 3," I would love to hear any opinions or questions about my latest video. Thanks! 

 [https://www.youtube.com/watch?v=8SOnsv3Ok3w](https://www.youtube.com/watch?v=8SOnsv3Ok3w)",4,sql,2020-10-13
ic1wbm,MySQL Hardening,"Hi,

I'm using the MySQL Workbench interface and wanted to know the appropriate steps to harden my database through the workbench. I am completely new and working with a test DB. Any advice or guide is appreciated. Thank you!",0,sql,2020-10-13
ic1szs,SQL/MySQL course,"Hi! Has anyone recently done the Colt Steele udemy SQL course? I want to buy it but I don't know if it's outdated, it says it was updated this year but I dont know if the whole course was. Also, do you know any good PostgreSQL courses I could take after that? Thank you!",0,sql,2020-10-13
ibzcoz,[Question] Oracle Label Security,"I read somewhere that OLS improved MAC from (""No Read Up"", ""No Write Down"") to (""No Read Up"", ""No Write Up"", ""Limited Write Down"") to maintain Integrity of the data. I'm a bit confused by ""Limited Write Down"". May I ask some experts to elaborate on it, please?",1,sql,2020-10-13
ibyci2,Tranfrom JSON data model to SQL query builder,"Hello,

I have created a data model based on [quicktype.io](https://quicktype.io) where I paste the json response object and it models the data accordingly. What I would like to do now is convert the model to an SQL builder to create a table based on this data structure.

Any handy tools or VS code plugins that can help with this?",19,sql,2020-10-13
ibs9c7,Can I use a placeholder in date to return data for a given month? I hope i worded this right,"Total newbie but, I will try to elaborate as best as I can. My code is to retrieve data from an SQLITE table for a given month by the user. Instead of a while loop with 12 'if' statements, I am trying to shorten the code by creating a function to avoid repeating my code over and over.    
initial code:

    c.execute(''' SELECT TOTAL(amount) FROM expense WHERE date LIKE ""____-1%""''')
    jan=c.fetchall()
    jan_tot=int(jan[0][0])+(direct_debit)
    print(""\nJan_tot ""+str(jan_tot))

Am I able to use a placeholder like so?

    entry=[x]
    c.execute(''' SELECT TOTAL(amount) FROM expense WHERE date LIKE ""____-?%"";''',entry)",1,sql,2020-10-13
ibpm9l,SQL noob question...,"Hi everyone, 

Got a few general questions as I have recently begun reading ""Learning SQL"" from O'Reilly.

The book itself jumps right into SQL without much explanation of it's relationship to other things that confuse me.

SQL is a language that is used to interact with a relational database. 

Are ""servers"" where the relational database is stored? Like a local server would be my computer and what the following command line connects to?

    mysql -u root -p

Are AWS and Azure and Heroku cloud servers? Meaning the database isn't stored in my computer? How do I connect to these external servers using the command line (sort of like above?)

What are the pros and cons of hosting data in a local machine vs the cloud?

WHAT CAN I READ TO UNDERSTAND ALL OF THIS?",6,sql,2020-10-13
ibm5yf,What are some good learning materials for query optimization?,"I have been given the task of optimizing the select queries of our in-house BI tool because they are getting longer and longer to execute. One big problem (or blessing) for me is I don't have grants for modifying the database, so I can't meddle with existing indexes. I can only optimize queries and nothing else. Our DB guys are working to improve stuff on their end which will hopefully make queries run faster but I still need to do it.

Mind you that I am a junior dev and I got this job only 6 weeks ago or so, and I wasn't very good at SQL before. I only knew the basics when I got this job. I am learning as I go but I feel like I am lagging behind a bit on the task, so I need to get my pace up quickly. 

I started reading ""Use The Index, Luke"" today but I feel like I will need more than that.

Can you recommend must-know topics and learning materials for my case? It would be great if the material is focused on queries only rather than DB admin topics.",33,sql,2020-10-13
ibl8pt,Nested Loop Algorithm - How indexes improve it?,"I'm looking at how nested loop algorithm works for joins in SQL, but not able to comprehend how indexes can improve its performance. From what I understand this algorithm works very similar to any standard nested FOR loop, how can index on one of the tables can help as all the rows in both the tables have to be looped over anyhow?",10,sql,2020-10-13
ibkwce,Easy Way to Add Database.Schema to MSSQL Statements,"Does anyone know of a way to easily add the Database.Schema to a MSSQL statement?

There is only one Database.Schema and I would think there is an easier way than going line by line in a several hundred line SQL statement. 

I'm currently using Notepad++ and replacing on each line.

Thoughts?",2,sql,2020-10-13
ibjb6o,Display values above x,"Hello. Lets say I have a pivot table displaying customer_id as rows and years as columns. There are missing values, naturally.

I only wanna display the value  if it is above x. Can't wrap my head on how I'm going to do this properly because I am not able to put a having or where clause after defining the pivot. Oracle screams at me saying that Im missing right parenthesis.",1,sql,2020-10-13
ibgx2d,"[PostgreSQL] Advanced reusable SQL templates (sessionization, detecting user churn, product launches) + sample DB",,6,sql,2020-10-13
ibg7sh,Table of consumption by month,"Hello guys. I'm having trouble producing a query to display the consumption. Of customer by month. Does anyone know how to handle this? I kinda need something with the columns: customer_id, Jan2007_spent, Feb_2007, March_2007...


Does anyone know how I can achiev this from columns:invoice_value, invoice_id, customer_id, date?",1,sql,2020-10-13
ibejrw,Career Path,"Hello everyone in r/SQL!

I'm a 24 year old programmer, working in COBOL development for a bank, and recently I had to spend a bit more time doing some queries for the client, and I really didn't like SQL before this, and DB's was something really scary for me. But after this I started liking more about SQL. Since then I wanted to solidify and gain more knowledge, doing the free SQL course in Codecademy, and am doing the ""The Complete SQL Bootcamp"". In doing so, I more and more want to start shifting my career to creating and managing databases, and data analisys. Ending the Udemy course, in your opinion what should I focus on learning, wanting to primarily become a DBA or a Data Analyst?

I really appreciate your feedback since this is the first time I've felt so happy working, and learning new things.",34,sql,2020-10-13
ibd0la,SQL Server 2019 Diagnostic Queries Part 2,"I would love to hear any opinions or questions about my latest video. Thanks!

 [https://www.youtube.com/watch?v=PXW\_kaJS\_x4](https://www.youtube.com/watch?v=PXW_kaJS_x4)",23,sql,2020-10-13
ibbrd8,I made an app which allows you to run SQL queries in your phone.,"This is an open source app made in 2 weeks which shows data in tables and allow users to run most of the SQL queries (based on sqlite)

Google Play - https://play.google.com/store/apps/details?id=com.sql_playground

GitHub - https://github.com/ShivamJoker/SQL-Playground

Please leave a rating if you like the app",28,sql,2020-10-13
ibbpub,"SQL Server Profiler, underused and undervalued",,26,sql,2020-10-13
ibbnat,Help with a query,"I have a table that has repeating values in an 'ID' column to accommodate values in another column 'Color'. See sample rows below

|ID|Color|
|:-|:-|
|1|Gray|
|1|Blue|
|1|Black|
|1|Black|
|2|Black|
|3|Red|
|3|Blue|
|4|Red|
|4|Orange|
|4|Purple|
|4|Yellow|
|4|Gray|

&amp;#x200B;

If an ID has the value 'Black' OR 'Gray' in the 'Color' column in any row, I want to create a new column, 'is\_black\_or\_gray', and assign the value 'Y'. If not, the value in new column would be 'N'. In the end, I want the output to show a unique value in 'ID' that either has 'Y'/'N' in 'is\_black\_or\_gray', as shown in table below. 

&amp;#x200B;

|ID|is\_black\_or\_gray|
|:-|:-|
|1|Y|
|2|Y|
|3|N|
|4|Y|

I tried doing this with multiple case statements and rank functions but I feel like I am over-complicating things. Appreciate any help!",1,sql,2020-10-13
ibb465,SQL query significantly slows down after two joins,"I have a query with two inner joins. I will call them IJ1 and IJ2. This query takes 2 minutes to run.

If I remove IJ2 or IJ2 from the query, it will run super fast (less than 1 sec).

In other words when running the query with any of the joins, it will be quick. When running with both joins it runs for 2 minutes.

What could be the reason that?

5.5.5-10.4.13-MariaDB

This is a general question. Of course I am aware that ideally you could get a DB dump and take a look at the query, but maybe someone has an idea without going too much into detail.

Thanks in advance!",2,sql,2020-10-13
ib9tkf,Understanding surrogate keys in our data warehouse,"Hello,

We are currently in the middle of the implementation of a new ERP system including a datawarehouse, we are doing this with help of external consultants to guide us through the process.

Before this project I was working in a different function and I am now responsible for the BI part.

The project is doing well and I am learning alot about SQL and BI, however there are some concepts that are tough for me to understand.

The datawarehouse is designed as by the kimball methology. In this approach there are generated surrogate keys in the different fact/dimensional tables.

How does one generate a surrogate key associated with the natural key that always corresponds in all the tables before they are made? How is this logical created?

&amp;#x200B;

Thanks",13,sql,2020-10-13
ib9t3t,.SQL is a silly filename extension!,"Does it annoy anyone else how `.sql` is the ""standard"" filename extension for all SQL scripts?

None of them are really ever actually compatible with each other (aside from maybe a very short/trivial one-liner or something), and whatever program you're opening them in needs to figure out which DB it's for... so why should they have the same filename extension at all?  There's really no benefit over vendor-specific extensions.

It's very annoying having to constantly tell my IDEs/editors and other programs which ""dialect"" a file is and/or having them incorrectly detect it.

It really should be standard for the specific engine to be in the filename ext too... i.e.

* `.pgsql`
* `.mysql`
* `.mssql`
* etc...


Maybe `.litesql` or some alternative would be needed for SQLite, seeing that `.sqlite` is a common convention for the actual database itself.",0,sql,2020-10-13
ib4e12,Hello folks. I can not open Sql data base due to this error. Anyone knows how to resolve this error? Your help is greatly appreciated. Thanks in advance.,,1,sql,2020-10-13
ib61cp,Learning and Gathering Help with SQL,"Hello,

If you are interested in learning SQL or have knowledge and wish to review SQL with others, I’ve created the following SQL discord channels.

Please feel free to join the community. 😊 

In my spare time I teach SQL to beginners and intermediate folks.

https://discord.gg/Xr593UW

Update: Edited invite to not expire.",2,sql,2020-10-13
ib0nyv,Jobs regarding SQL,"Hello all, 

I’m in school for mechanical engineering but in the meantime am teaching myself sql on pgadmin4. Without a degree and just learning on sites like udemy can I get a job ? Is there a test companies give to know your skill level also what exactly are companies wanting you to know ?

Thank you",28,sql,2020-10-13
iaw8w1,API for multi-tenant database,"We have many schemas in database and have to get data for each tenant when he makes request.

When user makes log in to the session with selected schema. I want to store schema in global variable. And use it every time that user makes request to database. When another user makes the same thing pointing to different schema, would node application mix this up?",0,sql,2020-10-13
iavu4x,GUID as clustering key,"Is there any use case for using GUIDs as clustering key in a clustered index?
Brent Ozar has mentioned this in one of his streams and I was not able to find any cases where this makes sense. 
Help appreciated
Thanks.

Edit: I know this is bad in most cases",1,sql,2020-10-13
iatcuf,Need help with exporting .sql file as csv,"Hi,

&amp;#x200B;

I have a huge SQL file which I want to convert it to a readable excel file.

I tried importing sql file into MySQL Workbench but unable to find any option where I can export it as excel/csv.

&amp;#x200B;

Are there more steps to it? Or probably any other way?

I just want the sql file to be in a nice excel format.

&amp;#x200B;

Thank you!",1,sql,2020-10-13
iaszqy,Data Types keep changing during import,"Ok, so I have to start with the requisite warning:  Almost complete newbie here.   

I have around 4GB of data spread across several spreadsheets (xlsx or csv) that I need to import into SQL.  The issue that I keep running into is the matching of data types when I try to import into the same table using SQL management studio or bulk insert.  (.xlsx and .csv have the same issues).    It seems that no matter what I do SQL or SQL Management Studio will appropriately detect the right data types in one workbook, but when I go to upload another workbook that is formatted the exact same way, it detects a completely different datatype for different fields.    I have tried:  

* Importing csv or xlsx via SQL Management Studio
* Importing csv via Bulk Insert.   
* Have tried uploading to the same table and converting the fields that are causing issues during the import, but get a host of different errors because SQL Management Studio won't covert from Double to Float, from String to Float or from Float to String.    
* Have tried importing several tables and then UNION the tables, but get errors because of the mismatched data types.  When attempting to change the data types in 'design' I end up getting the same errors as above...it won't covert certain fields.  

What is most exasperating is that it is random.  Through the course of troubleshooting, SQL Management Studio will detect different data types on the exact same, unedited file over time.  Upload one time and everything is fine.   Upload a different time with the same file later and suddenly a field that has nothing but dates is showing up as data type = float.   

This is driving me nuts.  Any advice on how to deal with this?",2,sql,2020-10-13
iasrq1,Is it 3rd NF ?,"Hi everyone,

I recently had a discussion with someone about normalization and we could not come to a clear conclusion.

Can you guys tell me whether or not this table is in 3rd Normal Form please ?

I am not giving you my opinion in case it could influence the answers

This table could be called ""Recipes""

Nb : the third column is called ""PrimaryIngredient""

https://preview.redd.it/eimm9in5edh51.png?width=617&amp;format=png&amp;auto=webp&amp;s=1b8431e34f49f82f782f5b170aa2d0191b237d77",11,sql,2020-10-13
iaq832,Can I SELECT once in a subquery than use that table to do unions and other calculations,"I am trying figure out if I can make this query perform better by doing select only once than to the unions by filtering that results set:

    SELECT date(d.sale_date)        AS date,
           c.seller_name            AS seller,
           count(date(d.sale_date)) AS sale_amount
    FROM delivery_transaction AS d
             JOIN seller s ON d.seller_id = s.id
    WHERE d.sale_date BETWEEN '2020-08-01' AND '2020-08-02'
    GROUP BY date, company
    
    UNION
    
    SELECT date(d.sale_date)        AS date,
           '#Daily Total of JACK#'          AS seller,
           count(date(d.sale_date)) AS sale_amount
    FROM delivery_transaction AS d
             JOIN seller s ON d.seller_id = s.id
    WHERE d.sale_date BETWEEN '2020-08-01' AND '2020-08-02' and s.seller_name = 'Jack'
    GROUP BY date
    ORDER BY date DESC, sale_amount DESC
    
    UNION
    
    SELECT date(d.sale_date)        AS date,
           '#Daily Total#'          AS seller,
           count(date(d.sale_date)) AS sale_amount
    FROM delivery_transaction AS d
             JOIN seller s ON d.seller_id = s.id
    WHERE d.sale_date BETWEEN '2020-08-01' AND '2020-08-02'
    GROUP BY date
    ORDER BY date DESC, sale_amount DESC",2,sql,2020-10-13
iapvpt,How to optimise stored procedures?.,"Im using Microsoft sql server. 

My manager has given me the task of looking at a number of stored procedures  and investigate whether they need optimisation. I wonder if there is books, good websites or even keywords to Google that would help me to investigate, identify and correct inefficiencies. Cheers.",1,sql,2020-10-13
ianlp2,Can someone help me understand Correlated Subqueries?,"I’m a newbie reading a Microsoft SQL Server 2012 querying book. I’m having a hard time understanding the concept Correlated Subqueries. For one, it seems that the concept of Inner Joins is being violated from all Correlated Subqueries I’ve come across. Can someone please help me understand? Is there a way to write these Correlated Subqueries using joins? What is the best substitute for them?",2,sql,2020-10-13
iamrek,"List in an SQL column? Crossposting from Flask subreddit, ignore Flask-specific stuff","Hey all, I have a unique problem. I have a User model, with multiple users. Ideally, I'd like for each user to be able to have a list of attributes (strings) in a column - however, I learned that this isn't how SQL is meant to be used.

So, the way that I learned it should be instead used is to create a new table specifically for each user, where you can make multiple rows for each string in the list. How can I make said table for each user (User) within FlaskSQLAlchemy? Wouldn't I have to manually make a new Model for each user? What am I missing? How do I approach this?",1,sql,2020-10-13
ialwx7,Where to start in learning SQL?,"Hopefully there aren't too many of these posts lately, but company I work at has had me do a little work in programs that utilize SQL, even though I have 0 experience with it. And because of upper management decisions throughout the past year I want to start learning it for future careers.  


I'm not the best student because sitting in a class puts me to sleep so I'm trying to find something informative and interactive.  


So could you guys point me in the right direction? Any advice or tips I greatly appreciate!",1,sql,2020-10-13
iaerzh,Transitioning from T-SQL to PL/SQL. How much will I hate myself?,"I'm a SQL Server database developer with \~6 years experience, virtually all in SQL Server and C#. Got laid off recently due to COVID economic downturn, and decided to expand my horizons in hope of getting a job sooner. I have a second round interview in a week for a position that is an application developer/sql developer supporting IBM Maximo on an Oracle database, app written in Java. I've worked with other software similar to Maximo in the past, and have bounced over to Java a few times, and find it's very similar to C# for the stuff I've had to do(non-complex CRUD type stuff), but I've never touched Oracle or PL/SQL. I know it's vastly different in the realm of administration, but I won't have to worry about any of that(Index maintenance, backups, installs, etc). But how much of a learning curve is it, moving from T-SQL to PL/SQL?

Also, have any of you used/supported Maximo in the past? And if so, did you love/hate/tolerate it? It's IBM's enterprise asset management tool. Just wanna make sure I'm not going to want to suck on a barrel every day after work, if it's terrible.",34,sql,2020-10-13
iady77,Need help with INSERT INTO...,"[SOLVED] Hi I need some help with this... Let me first explain my database table. I have some rows in one of my tables that have the same names like this:

table = players

    |ID|NAME |CHANCE|
    |1 |TEST1|  50  | - 
    |2 |TEST2|  50  | - 
    |3 |TEST1|  50  | - 
    |4 |TEST3|  30  | 
    |5 |TEST2|  50  | - 
    |7 |     |      | 
    |8 |     |      | 
    |9 |     |      | 
    |10|     |      |     

What I want to do with my `INSERT INTO` is `INSERT * FROM players, users INTO user_items` BUT not two rows that have the same name. Meaning, if the `INSERT INTO` inserts row 1/2, it shouldn't insert row 3/5 depending on what row it picks to insert. And if it selects both row 1/3 and 2/5 it shouldn't `INSERT` the other rows that have the same name(s). What I'm trying to explain is it shouldn't be able `INSERT` two TEST1 and two TEST2, only one of each.

    $sql = ""INSERT INTO user_items (card_img, name, rating, price, position, club, club_img, country, country_img, card_type, walkout_img, chance, user_id) 
    SELECT card_img, players.name, rating, price, position, club, club_img, country, country_img, card_type, walkout_img, chance, id 
    FROM players
    JOIN (
        SELECT name
        FROM players
        GROUP BY name
        HAVING COUNT(*) = 1
    ) AS single_players ON players.name = single_players.name
    CROSS JOIN users 
    ORDER BY -LOG(1+RAND())*chance 
    LIMIT 4"";

Please tell me if you need better explaining.",1,sql,2020-10-13
ia8wbd,How should I start my project? Should I direct start creating tables at command line or should I first design in general over some software such as excel or something like that? What y'all do when you start a project from scratch?,"Hey I've finished the book Learn SQL in 10 Minutes and I think that now I've a good basic understanding of SQL and should do some work. I decided to create simple database of library mangement system which will keep records of books, author and library memebers. I'm don't understand where to start and I thought that if maybe you guys  could help me to give a little hint about what would be good writing my queries direct to MySQL command line or should I design a proper database system in Excel or some other software which exist and is meant for this propose. Which approach would be better for me?
I've watched a video on youtube a few weeks ago where they guy was showing his full database that he was about to create in a pdf form. 

Thank you",7,sql,2020-10-13
ia8a03,"Planning on delivering an ""SQLite for Data Scientists"" O'Reilly Course, next month; I would love some additional ideas on the structure/content from the community.",,15,sql,2020-10-13
ia6qrb,[SQL Server] Using functions for Business logic,"I've just started working in a Shop that because of legacy uses a SQL Server for their RDB. They strongly utilise the `FUNCTION` provided by the engine.

This question is two-fold.

Firstly, I understand the difference of `VIEW`s, `STORED PROCEDURE`s and `FUNCTION`s, but what really is the added benefit for a SP or F to be used over a query with a W with an additional `WHERE` clause?

And second, what are the usages one should consider letting the DB engine do the prosessing and not using the backend for it? Namely I'm thinking validation-wise: writing unit tests with the programming language in BE is trivial for the logic.

(There is a back end but it isn't .NET or C#)",2,sql,2020-10-13
ia48lg,"If I host a PostgreSQL server on my pc and only I am the one accessing it through editor from that same pc, can the database be hacked into? How to tighten the security?","As the title says, I am worried if someone can easily break into my database. I have the server set up with a default installation, meaning not custom.

What steps can I take to lessen the chances of unauthorized entry? 

Thank you!",10,sql,2020-10-13
ia3r2k,Integration service catalog option and SQL server agent missing in ssms,"Hi, please help me, as i want to know why I am not getting Integration service catalog option and SQL server agent in SQL(2012), I am using developer edition",1,sql,2020-10-13
ia0a25,Counting items for just the first week,"Hello,

I’m trying to count various items for just the first week of records for each unique identifier. 

Table A has the unique identifier as well as the start date (each identifier has a different start date)

Tables B and C have the unique identifiers, the dates of service, and the items provided at that service. I just want the first weeks worth of data for each identifier starting at the start date found in table A and to count the number of items provided in that week. 

Any additional info I can happily provide. Thanks!",1,sql,2020-10-13
i9zeei,Converting SQL Quota System from 8.0 to 5.5.62,"I have sql code that creates a quota system for a select system. When I run this, only x% of a certain skill will be chosen for a multitude of skills. It works perfectly but its in 8.0 and when I run it in 5.5.62 (my app is based on this) it doesn't work. Can someone modify my code to make it applicable to 5.562?

Thanks

Code:

[https://www.db-fiddle.com/f/rfQQg8uwfaRzmg2UU8Q6tx/0](https://www.db-fiddle.com/f/rfQQg8uwfaRzmg2UU8Q6tx/0)",1,sql,2020-10-13
i9xivq,Select distinct values and the number of times they appear in a table.,"Is there a way to select a name and how many times it appears in a table?

Let's say I have a table

    CREATE TABLE PEOPLE (
    FIRST_NAME VARCHAR2 (50),
    LAST_NAME VARCHAR2 (50));

And the output I want is

&amp;#x200B;

|First\_Name|Number of people with this name|
|:-|:-|
|Karen|3|
|Tom|5|
|Jack|1|

&amp;#x200B;

I'm attempting something like this:

    SELECT DISTINCT FIRST_NAME,
    COUNT (DISTINCT (FIRST_NAME)) AS ""Number of people with this name""
    FROM PEOPLE;

But I get an error saying

    00937. 00000 -  ""not a single-group group function""

Is it possible to do what i'm trying to do?",1,sql,2020-10-13
i9u5mn,Please Help - Number Comparison,"SQL newbie, please be kind.  I need to compare a number in Table1/column1

What I am looking to see is, is that number between 10-11 Million, 4-5 million, 14-15 million, 20-22 million.

There are a total of 8 ""codes"" the number could be, and it will either be between 1 of the 8 ranges, or not.  If it is between a range, I need a specific $$ amount stored in Table1/Column2.

If the original number does not fall between any range, I need $0.00 stored in Table1/Column2.

I just can't seem to wrap my head around how to do the comparison...

I can use MS-Access, MS-SQL Server, or MySQL as the DB engine....

ANy help is appreciated.",2,sql,2020-10-13
i9ryh1,Having trouble trying to find max date of a data set with similar rows of the same,"Using SQL server.

**As you can see I want to find the most recent (max) transaction for each Product ID and that date differs. Having trouble on doing this with SQL.**

Example: If I run a select Max(Transaction Date) from the table I get the result but once I put in the other column (Product ID) on the select statement, I need to use group by and then rather than the data being 3 rows as expected it shows multiple. If i took the current query I can easily pivot table and get the result expected but Idk how to bridge this gap in SQL.

https://preview.redd.it/1bvxltd4m0h51.png?width=540&amp;format=png&amp;auto=webp&amp;s=4d4bbb369c21a70cb956d32f859090f5f975e581",1,sql,2020-10-13
i9reyw,I'm new to Windows functions and came across this playlist. It has byte-sized videos with database and code. Definitely a must view for a beginner,,1,sql,2020-10-13
i9r9x4,Any way to access contents of someone else's temp table?,"What the title says.

A coworker ran some temps, and I would like to be able to access the contents before the tables disappear. They're not global temps, just regular session temps.

Obviously they're not designed to be accessed by others, so I can't query them with a normal SELECT, including a select that specifies tempdb and includes the whole temp name (#temptable............3F4AD or whatever), or right click to run top 1000.

Is there ANY workaround that will let me get into the data?",1,sql,2020-10-13
i9qt04,UAT TESTING HELP,"Hey guys new job learning on the fly. I have to create the query before I run it. meaning i cant test it does not exist yet

Hoping you can help below is the requirement and the two ideas i have. thanks for the help.

Uat will preform a test to cover positive/negative scenarios for the below result

Column 3 is a column that will be added to the table at end of month

Testcase 1

Column\_3 is populated if Column\_1 is ""CN""  and Column\_2 is = ""HR""

or if Column\_1 is ""DN""  and Column\_2 is ""HR""

&amp;#x200B;

my ideas are

select Column\_1, Column\_2, Column\_3

case

When Column\_1 =cn and Column\_ 2 =hr then 'true'

When Column\_1 =dn and Column\_2 =hr then 'true'

Else 'false'

End

from DBO.TABLE

&amp;#x200B;

OR

&amp;#x200B;

Select select Column\_1, Column\_2, Column\_3

from dbo.table

where Column\_1 =cn and Column\_ 2 =hr

where Column\_1 =dn and Column\_2 =hr

&amp;#x200B;

&amp;#x200B;

edit to make more sense

edit fix from guilty-property",1,sql,2020-10-13
i9q813,How do I set up an alert to trigger when a table has no entires over an interval of time (15minutes)?,"I’m trying to figure out a way to set this up in SSMS but not really sure how to go about it.  

It really is no more complex in scope as the subject reads.  Alert to trigger when no new rows have been entered into a specified table, 15 minutes from last entry.",1,sql,2020-10-13
i9pmd2,"How to select ""in"" text","Sort of like this pseudo-code:

`select all from files where filename contains "".txt""`

I can't figure this out, thanks!

I am using sqlite3 from python 3.",2,sql,2020-10-13
i9p9u8,You guys are amazing. Ive never been in a sub like this before. Thank you.,"The level of expertise, patience and goodwill here is unfathomable.",149,sql,2020-10-13
i9ntbx,[Help] Report Server Install Issue,"I'm hoping you can help with this seemingly simple issue! Trying to install a report server onto my PC, connecting to either a 2019/2017 server (I've tried both). But when creating the server via the report server configuration I always get this error- https://imgur.com/a/fTUeyav

Ive googled it, tried all their solutions with no success, has anyone else seen this issue and how do I get around it?

Thanking you!",1,sql,2020-10-13
i9nrdn,Recommendation for web based front end for MS SQL to replace Silverlight.,"We have an SQL setup where information can be displayed and modified using a web based application built in Silverlight. This needs to be replaced. I am not a programmer by trade, but I'm very good at picking stuff up and building to suit my needs. I'm confident that if you agree that product X is the best thing for this task that I could learn enough X to meet my needs. But I don't know where to look for what product X should be. 

It needs to run in Chrome and Firefox.",1,sql,2020-10-13
i9l429,Store Proc Select Statement contains another function or store proc with multiple columns,"Hi folks, I have multiple store procs that return query results that are all almost identical. Each store proc does different things but the ultimate query that is returned is only different for about three or four columns.

I was wondering if there was a way to create a function or another store proc that I could call during the query section of each store proc so i dont have to write out the entire select statement every time I create a new store proc? I would only need to had a few more columns to each select statement.

right now, each store proc ends with a huge select statement, but I would like it to look something like this:

`select tb1.name, tb2.date, tb3.sequence, storeproc(consisting of 10 other tables) from tb1, join tb2 on tb1.id = tb2.id, join tb3 on tb3.id = tb1.id`",1,sql,2020-10-13
i9jiq7,License control to a specific Sql database inside of a Sql Instance?,"I have a small company that provides a database product that works inside of a Sql Instance.  I would like to be able to control licensing of the data I provide on a year by year basis.  I am searching for a product that can do this, but so far not able to find.  This is in MS Sql and specifically is using Sql Express 2014.

Thanks for any advice.",1,sql,2020-10-13
i9hpae,[MySQL] Help for architecture of database for restaurant reservations and table combinations,"I have 3 tables in a reservation system for a restaurant. So far the software was used only by restaurant's staff, however we want to accept reservations online as well. We have some small tables for 2 that can be easily moved to each other and make room for bigger parties and I want to accept reservations automatically if all of the tables that can be combined are available. 

`tables`: holds all tables for each area in the restaurant.

| id | min_capacity | max_capacity | name | area   |
|----|--------------|--------------|------|--------|
| 1  | 2            | 4            | #1   | Inside |
| 2  | 6            | 8            | #2   | Inside |


`reservations`: holds reservation details

| id | datetime            | name     | status   |
|----|---------------------|----------|----------|
| 1  | 2020-09-01 20:00:00 | John Doe | Upcoming |
| 2  | 2020-09-05 13:00:00 | Jane Doe | Upcoming |


And one pivot table that holds reservation &lt;=&gt; table relation:

| id | table_id | reservation_id |
|----|----------|----------------|
| 1  | 1        | 1              |
| 2  | 2        | 2              |


How can I store different combinations of tables (manually entered) and ""attach"" reservations to tables/table combinations (so I can check if tables are available for specific time) efficiently?",15,sql,2020-10-13
i9f7zf,"[Help] Entity Framework 6 (c#): ""The selected procedure or function return no column"" when adding an import function from SQL.","I have a procedure that using Pivot table to generate multiple results (not a fixed number of columns ex: when input 2 then the procedure would return 2 columns but if the input is 4 then it would be 4 columns). The only solution I found on the internet was to create a temporary table with a fixed number of columns then insert the pivot data into that temporary table. But in my case, the columns are dynamically change depending on the user's input. May I ask that is there any way to fix it?",4,sql,2020-10-13
i9b9hj,I am not able to right click on a database in MS SQL Server MGMT Studio (Pic Inside),"I am brand new to MS SQL, I am used to using Hive Hadoop and GCP (BigQuery).  I am working w/a company as a consultant and they have given me remote desktop access to their database.  I was watching a Youtube tutorial that says if you right click on the database, you can view the top 1000 rows amongst other things.  Obviously very handy but I cannot right click.  I don't know if it's a permissions issue, that I am using a Mac and remote desktoping in but I am not able to replicate what's in the screen shot.  Anyone have any tips?

https://preview.redd.it/wcr4yx2fyug51.png?width=600&amp;format=png&amp;auto=webp&amp;s=f2ed885c18b17370adf9f2523c2453d9c93bfbe3",1,sql,2020-10-13
i95io1,"Doing the Impossible, using ASSISTANT to make a SQL Linter (and how you can make it lint whatever you want)",,0,sql,2020-10-13
i98ay7,"If I host a PostgreSQL server on a computer, can other computers on the same network access it through editors? How? What about connecting from a different network?","I would like to host PostgreSQL on an old computer, and I’ve been having trouble finding (or to be more precise, understanding) how I would go on about connecting to that database from another computer. 

Also, is it possible to connect through a different network, say when going on a trip?

Many thanks!",16,sql,2020-10-13
i97avg,can anyone please explain the last couple of lines?,"reddit automatically changed all the '' at the rate of'' symbols to ''u/''. please bear with it as i don't know how to fix it. So, this is a function to find the median. I am not able to understand the last couple of lines.

&amp;#x200B;

`set  @ct := (select count(4) from station);`

`set @row_id := 0;`

&amp;#x200B;

`select round(avg(lat_n),4) as median`

`from (select * from station order by lat_n)t`

`where (select u/row_id := @row_id + 1)`

`between @ct/2.0 and @ct/2.0 + 1`",4,sql,2020-10-13
i962jf,[Help]Get max date and field from a series of dates,"Using MSSQL 2008 with Tableau, I am trying to get a set of results that return the maximum date from a series of 15 different dates. I was also told that I'd need to get the field that the date comes from as well.

So, in the example below, if Date5 is the most recent, I'd like for it to return Date5 name, and the Date5 date value, instead of just the date value.

SELECT 

\[Last\_Active\_Date\] =

( SELECT 

isnull(MAX(MaxDate),'') AS \[Last\_Active\_Date\]

FROM      

( 

SELECT A.\[Date1\] as MaxDate UNION

SELECT A.\[Date2\] UNION

SELECT A.\[Date3\] UNION

SELECT A.\[Date4\] UNION

SELECT A.\[Date5\] UNION

SELECT A.\[Date6\] UNION

SELECT A.\[Date7\] UNION

SELECT A.\[Date8\] UNION

SELECT A.\[Date9\] UNION

SELECT A.\[Date10\] UNION

SELECT A.\[Date11\] UNION

SELECT A.\[Date12\] UNION

SELECT A.\[Date13\] UNION

SELECT A.\[Date14\] UNION

SELECT A.\[Date15\] UNION

SELECT A.\[Date16\] UNION

SELECT A.\[Date17\]

) B

)	    FROM table1 A 

WHERE

\[Field1\] = A.\[Field1\] and \[Field2\] = A.\[Field2\] and

\[Field3\] = A.\[Field3\] and \[Field4\] = A.\[Field4\];",1,sql,2020-10-13
i93sws,"New to SQL, What are some ways to improve efficiency of a query for large databases.","I need to check all entries that were updated on a certain date for another variable. Is it best for me to pull all entries that update on that day and then query that or...? 

Just wondering what best practices are for efficiency",1,sql,2020-10-13
i92hst,Need some assistance with SQL and IIS,"I don't know if this is the right place to post something like this or if anyone can help me, but I need someone to help me take a look at an older system that I have been tasked to ""fix"". 

I work at an MSP and our internal portal and database run off of a [ASP.NET](https://ASP.NET) and IIS framework. IIS ver 8.5 and SQL ver 11.0.2100 are what we use and I know that is outdated. We had an older programmer who used to work at the company but was recently let go because of COVID and my boss is entirely resistant to using anything other than our current system. I am having issues with speeds of data retrieval from the 2 servers and I am not in any way equipped to be able to troubleshoot or handle the code. 

Bottom line is that I need to find a way to speed up retrieval from the SQL server and I have no idea how to do it. Any help would be appreciated. 

Thank you!",1,sql,2020-10-13
i91m6y,Can you provide any basic examples of how SQL is best applied in an e-commerce setting?,"Looking into SQL as a way to strengthen my skillset. I primarily work with marketing automation but have been gravitating more and more towards general analytics - so it seems like the move. 

I'd like to convince my manager on the benefits my learning of SQL could bring to the company. The issue being I can't land on many concrete examples relative to our business model, as my know-how with big data is very limited.

We're a cannabis tele-medicine startup also operating an online marketplace and monthly subscription product. 

Any input appreciated! Thank you",0,sql,2020-10-13
i90zf3,How to calculate median in mss sql server,.,1,sql,2020-10-13
i8y39o,How to optimize select with CROSS APPLY to run faster?,,1,sql,2020-10-13
i8uvjp,How long does it take to learn Sqlite?,I need to create a database using SQLite within  a month. Is it possible to do so?,1,sql,2020-10-13
i8swe4,Trouble with Query,"Apologies for the vague title, but I couldn't figure out how to word one that made sense.

I am working on a project for school (simulating a hotel management system), and have a relationship table formatted like this:

&amp;#x200B;

|roomNum|locationID|packageID|
|:-|:-|:-|
|1|1|1|
|1|1|2|
|2|1|1|

&amp;#x200B;

It shows what room at which location has which packages. So for example, room 1 at location 1 includes both packages 1 and 2, but room 2 at location 1 only includes package 1. The composite key is all 3 fields.

What I am trying to figure out is how to query all rooms with specified packages. If I want to query for all rooms with package 1 OR 2, then I'm fine. But how can I query for all rooms with packages 1 AND 2?

&amp;#x200B;

EDIT: I figured out a solution. A join to itself seems to do the trick:

    select * from table1 p1
    join table1 p2
    	on p2.roomNum = p2.roomNum
               and p2.packageID = 2
               and p2.locationID = p1.locationID
    where p1.packageID = 1
    and   p1.locationID = 1

Leaving this open in case someone has a more elegant solution in mind",2,sql,2020-10-13
i8i7hf,How exactly am I supposed to tackle the following problem in MySQL?,"So I was recently parsing through a few sql based examples and stumbled upon the following:

 [https://www.chegg.com/homework-help/questions-and-answers/write-query-return-sales-details-customers-products-query-return-customers-even-customers--q45662394](https://www.chegg.com/homework-help/questions-and-answers/write-query-return-sales-details-customers-products-query-return-customers-even-customers--q45662394) 

I cannot figure out how to solve this question. Any help would be greatly appreciated.",0,sql,2020-10-13
i8qcvb,IMDB dataset preprocessing doubt,"Has anyone worked on IMDB dataset? 

What kind of preprocessing should i do?

And how do i know what kind of preprocessing is required on dataset?",2,sql,2020-10-13
i8lwzi,"If I have a table with an `id` and `table_name` column and 2 tables with a foreign key `id` linking to the first table, can I join a row in the first table with a row in the table with the name that is given by table_name in the first table","    CREATE TABLE animal (
        id BIGSERIAL PRIMARY KEY,
        name TEXT,
        table_name TEXT,
    );
    
    INSERT INTO animal (""garfield"", ""cat"")
    INSERT INTO animal (""scooby"", ""dog"")
    
    CREATE TABLE dog (
        id BIGINT PRIMARY KEY,
        agression INT,
        FOREIGN KEY(id) REFERENCES animal(id)
       );
    
    CREATE TABLE cat (
        id BIGINT PRIMARY KEY,
        aloofness INT,
        FOREIGN KEY(id) REFERENCES animal(id)
       );
    
    INSERT INTO cat (&lt;garfield_id&gt;, 5)
    INSERT INTO dog (&lt;scooby_id&gt;, 0)

Now I want a single query to select garfield and his cat data using a join and without knowing the table name before making the query.

Is this possible?",1,sql,2020-10-13
i8k5fu,How we used Postgres extended statistics to achieve a 3000x speedup,,4,sql,2020-10-13
i8jnft,Join is important,,430,sql,2020-10-13
i8hct6,Day/Month/Year/Quartal Sequences,"SO i have this table where I get informations from when which data got loaded into our Datawarehouse for different projects. this table look like this:

|reporting date|loadstart date|loadend date|status|project|
|:-|:-|:-|:-|:-|
|2020-08-10|2020-08-10|2020-08-11|finished|DHW-XY|
|2020-08-11|2020-08-11|2020-08-12|error|DWH-XX|

So is there a way, i can get a sequence (nr)of those dates for the different projects 

what I tried:

\-join this table with the date-table on dayID=reportingDate.

\-then:

    select
    reportingdate
    project,
    status,
    loadenddate, loadstartdate,
    datedif(day, select max(reportingdate) from table as t2 where t2.project=t1.project and t2.status='finished'),reportingdate)-1  // which would result that the max reportingdate would get -1
    ,timetable.monthid,timetable.yearid, timetable.weekID
    from table as t1
    full outer join timetable
    on timetable.dayid=t1.reportingdate

But one problem not every project gets every day loaded into our Datawarehouse. So often the sequences are wrong. Can somebody help me pls. Thanks in advance",1,sql,2020-10-13
i8gdeq,Rolling Reports But Getting Cumulative Totals EACH Week,"I am currently running a rolling reports that captures the previous 8 weeks.

So Week 1 is the prior week, Week 2 is 7-14 days ago, Week 3 is 14-21 days ago and so on. Since this is rolling, it updates each week so that Week 8 falls off and Week 7 now becomes Week 8.

These weeks are captured from a CreatedDate on a record. For each week, we captures different metrics. As of now, based on how the rolling week is captured, the total metric is broken down into each week. For example, if there are 400 cumulative records for a metric, 50 might be in Week 1, 60 in Week 2, 40 in Week 3, etc.

They want to see a cumulative for each week. So the cumulative might be 400 in Week 1. So next week that 400 will be the value in Week 2 and the new cumulative total for Week 1 might be 390. 

Does this make sense? I don't even have a code to share because it seems impossible to me. Only thing I can say is that we don't label the Weeks as Week 1/Week 2 etc. It's the actual date value based form a datediff. So if running today, Week 1 is 8/5/2020, Week 2 is 7/29/2020...Week 8 is 6/17/2020. If I ran tomorrow, those dates shift up a day.

Best I can think of is making a cumulative 8 week data table to do cumulative calculations from and then somehow still group by the week of values.",2,sql,2020-10-13
i8fs8m,Fast way to change table with foreign key constraint,I need to remove and add columns some of which have fk restraints to tables but cant use drop and create because of fk restraints that would be a pain to track down. How can I do this since i cant alter table?,1,sql,2020-10-13
i8eo99,[MS SQL] Need help combining multiple entries for each member into one row,"[SOLVED] - See several solutions below (depending on version of MS SQL).

Data is structured as such, with a new row for each service:

Member | Month | Service
---|---|----
1 | April | Wash
1 | April | Wax
1 | May | Wash
2 | April | Wash
2 | May | Wash
2 | May | Wax

I want just one row for each unique member and month:

Member | Month | Service
---|---|----
1 | April | Wash &amp; Wax
1 | May | Wash
2 | April | Wash
2 | May | Wash &amp; Wax

I don't know how to go about this.. have tried using temp tables and case when, but I'm missing something.",10,sql,2020-10-13
i8aflz,Need help editing SQL file in EmEditor," I have the data in the following format:

&amp;#x200B;

    (1,NULL,NULL,'Chief p','xxxx@email.com','new',4,'1ef7,0,2),(1,NULL,NULL,'Chief Pollster','xxxx@email.com','new',4,'1ef7,0,2),(1,NULL,NULL,'Chief Pollster','xxxx@email.com','new',4,'1ef7,0,2),(1,NULL,NULL,'Chief Pollster','xxxx@email.com','new',4,'1ef7,0,2),

I want to achieve the following:

    (1,NULL,NULL,'Chief p','xxxx@email.com','new',4,'1ef7,0,2),
    (1,NULL,NULL,'Chief Pollster','xxcxx@email.com','new',4,'1ef7,0,2),
    (1,NULL,NULL,'Chief Pollster','xxxxx@email.com','new',4,'1ef7,0,2),
    (1,NULL,NULL,'Chief Pollster','xxsxx@email.com','new',4,'1ef7,0,2),

 

So I tried the following regex

find

    ),\s*

 and replace it with 

    ),\n

But it says

&gt;The regex contains mismatched '(' and ')'

What am I doing wrong?

Is there any other way?",2,sql,2020-10-13
i89i3t,[SQLite3] Trying to join 4 tables and fetch based on ID,"I'm struggling to find the problem here. It works fine if I remove the 

    WHERE o.id = ?

But I actually want to only get the one ""Order""

    SELECT v.name as vehicle, p.name as product
    FROM Orders AS o WHERE o.id = ?
    INNER JOIN Vehicles AS v ON v.id = o.vehicleId
    INNER JOIN OrderItems AS oi ON oi.orderId = o.id
    INNER JOIN Products AS p ON p.id = oi.productId

*edit* 

The WHERE at the end solved it!

Perhaps I could also get an answer to why this query only fetches one Product even tho I have 3 OrderItems with the same orderId and different Product ids",1,sql,2020-10-13
i8480e,[PostgreSQL] Joining weather data with a table I already have,"Hey, I'm working on a project where I'm keeping track of the clothing I wear and rating my outfits. I'm doing this to put on my resume. I want to show that I know more than just inserting data points in a table. I was thinking I could import some weather data to add to my table but from a different thread I saw someone said that the OP shouldn't use SQL for this. Is there a way to do this in SQL or should I do something else? I would love recommendations if anyone has any.",2,sql,2020-10-13
i802f1,[MS SQL]Need help selecting 11 characters before a pattern.,"Hello, I am trying to figure out a way to extract the 11 characters prior to a pattern of @hotmail.com. For example if the string is asdb@gmail.com~12223334444@hotmail.com~zxcv@yahoo.com I want to return 12223334444. 

Thanks!",2,sql,2020-10-13
i7zyhw,NOLOCK vs SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED,Why is one better than the other when querying a DB? Is it better to use NOLOCK at certain times?,1,sql,2020-10-13
i7zl5x,[Presto] How can I truncate latitude and longitude without rounding or cutting off 0s?,"Hello, 

I have an issue where I am attempting to truncate latitude and longitude to 3 decimal places, but I don't want to ROUND because it will change the location.   


I tried **CAST((TRUNCATE(lat \* 100) / 100) AS VARCHAR)** but if I do that, it will remove trailing zeros (if the latitude is -122.200 it will return -122.2  


I thought I could use RPAD to select a portion of the string (in this case '.') and then pad it a certain number of spaces (in this case 3 spaces. But when I try **RPAD(CAST(lng AS VARCHAR), 3, '.')** it returns -12

Any ideas would  be appreciated. Thanks!",3,sql,2020-10-13
i7zdva,Working on a report for a colleague but not quite understanding how to use the PIVOT function in SQL Server,"I have a table that lists the customer numbers and the equipment that the customer has. What I was asked to do was to take all the Customer Equipment Models and list them as Column Headers and have the customer numbers in one column. If a customer has one of the Equipment Models then we want to return a “yes” or a “1” under the appropriate column header and if they don’t have the Equipment Model then return a “no” or a “0.” 

I believe the Pivot function is what I need but for some reason it only returns “0” even if the customer does have the equipment. Any help would be greatly appreciated!",22,sql,2020-10-13
i7z8t6,"Wikipedia says this relation conforms to 3NF, but I can't see how?","Wikipedia [shows this table as an example of a relation conforming to 3NF (although not in BCNF)](https://en.wikipedia.org/wiki/Database_normalization#Satisfying_3NF):



Title | Author | Author Nationality | Pages | Thickness | *Genre ID* | *Publisher ID*
---|---|----|----|----|----|----
Beginning MySQL Database Design and Optimization  | Chad Russell  | American | 520 | Thick | 1 | 1
The Relational Model for Database Management: Version 2  | E.F.Codd  | British |  538 | Thick | 2 | 2
SQL Cookbook   | Alan Beaulieu  | American | 338 | Slim | 1 | 3
Learning SQL  | Anthony Molinaro  | American | 636 | Thick | 1 | 3

I cannot see how is this table in 3NF? It seems to me there is a transitive functional dependency prohibited by 3NF, namely {Title} → {Author} → {Author Nationality}.

I'm trying to understand normal forms (required by an exam) and unfortunately it's a surprisingly hard task for me. 

What am I missing here and why is this table in 3NF?",1,sql,2020-10-13
i7z8lg,Is it bad i am struggling with SQL a lot?,"So i'm a new uni student learning SQL and i have learnt the basics but even still i just find it hard to think in sets i had to do 10 queries for my assessment simple stuff like finding who has what but i would spend 1-3 hours on one query.

It makes sense to me and after i have done it once i can 100% do it again as i understand the logic behind it but to start with trying to figure out how to get x result leaves me confused even when taking a logical approach.

&amp;#x200B;

It's getting easier now the more i do it and have begun to really understand how everything works together but everyone i talked to says they picked it up easy and never had the issue of struggling to define their question of what they want.

Is it normal to struggle this much when learning SQL to start with or do most people just grasp it and find it easy like the people i have talked to did.",1,sql,2020-10-13
i7yal1,Generating Scripts to insert and update many tables from stg to prod,"I have a BI effort that requires Inserting and or updating multiple tables from staging to prod. They are across two different databases though. Is there a quick way to do this?

The scripts would look something like INSERT INTO prod db (fields names\*) Select \* fields..",3,sql,2020-10-13
i7wyti,Implementing a column that saves a row's order/rank.,"I have been googling all day on how to do this, but I can't seem to think of the appropriate choice of words. I'm trying to add a column to a table that represents the ordering of the row in it's parent container (can't think of the correct word).

For example, let's say I have a table called Checklists (id, name), and another table called Items (id, checklist\_id, content, order). 

The order column should save the order in which the rows of the same checklist\_id are displayed. Initially, you could just append the row to the end, but how would you insert a row that you want in the middle of the *list?* 

I hope this makes sense. I'm having difficulty describing what I actually mean.",1,sql,2020-10-13
i7uxlw,"Need to ""COUNTIFS"" in SQL","Hi everyone, I'm pretty new to SQL, and I'm hitting a wall working on modifying a new query.

&amp;#x200B;

EDIT: To help clarify the mess below...

&amp;#x200B;

**Image:** Ex Result is basically the result I'm expecting to get from the distinct count of columns X and Y on a row by row basis based on that sample data. (worth noting, this is not actually what the data looks like. Data will be a string, not a value--just simplified for anonymity)

**CASE WHEN:** Columns A-D have 0 impact on the Columns X and Y. Those are other columns present in my CASE WHEN to define which rows are and aren't empty.

**My two main questions:**

1. How can I write something in SQL to create a distinct count of the (combined) values of column X and Y? (""Ex Results"" would be an example of what I'm looking for out of the equation in each row--these results can be visualized in a column if necessary, but otherwise it can just be an equation running in the CASE WHEN if that's possible)
2. Does the structure of my nested CASE WHEN generally make sense?

&amp;#x200B;

I have a CASE WHEN statement that I need to modify to define certain costs (I need to null certain rows out for accuracy), and one of the conditions I need to apply to this is ""if columns X and Y in row Z appear more than once in that same combination, then rule out the row based on another condition(s)."" If it's relevant, column X and Y are columns joined from two different tables.

&amp;#x200B;

Here's what I've got so far--because I don't have the distinct count piece I can't really test it, but the logic I'm working off of is: IF this AND this AND this, THEN that. Otherwise, IF this AND this AND this, THEN that. Otherwise, NULL.

&amp;#x200B;

CASE

    WHEN ColumnA = 1 AND ColumnB &gt; 0 AND \[insert DISTINCT COUNT here\] = 1
    
    THEN ColumnD
    
    ELSE
    
    	CASE
    
    		WHEN ColumnA = 1 AND ColumnB &gt; 0 AND \[insert DISTINCT COUNT here\]  &gt; 1 AND ColumnC = 1  
    		THEN Column D
    
    		ELSE NULL
    
    	END

END AS CostX

&amp;#x200B;

I attached a pic as well in case my description was unclear. Thanks in advance all!

&amp;#x200B;

&amp;#x200B;

https://preview.redd.it/96z0bojrheg51.png?width=206&amp;format=png&amp;auto=webp&amp;s=7b924244e27c8b8052d3dde183a2af67402a8bce",1,sql,2020-10-13
i7rk3p,Simple pivot/aggregate question,"Hi,

&amp;#x200B;

i want to do the next transformation:

&amp;#x200B;

ID 	| Name

1	| Peter

1	| Jane

1	| Nick

1	| Stu

1	| Nick

2	| Pete

2	| Mary

2	| Ed

2	| Mary

&amp;#x200B;

&amp;#x200B;

Transform to:

&amp;#x200B;

ID	| Names

1	| Peter, Jane, Nick, Stu

2	| Pete, Mary, Ed

&amp;#x200B;

There is a STRING\_AGG function in SQL 2016 and higher which can do this, but i don't have that unfortunately. So i need another solution to get this result. I have read quite some alternatives to the STRING\_AGG function but they just don't seem to do what i want. 

&amp;#x200B;

Any elegant ideas to do this?",1,sql,2020-10-13
i7qy8f,Get abbreviations with each letter at beginning of each word PostgreSQL (SOLUTION FOUND),"Hey everyone,

I haven't seen many results for getting more than 2 letters for abbreviations, so I thought I would share a solution with you all of you who use PostgreSQL:

    select 
    	""Product_Name"",
    	UPPER
    	(
    	SUBSTRING(split_part(""Product_Name""::TEXT,' ', 1),0,2) 
    	|| '' ||
    	SUBSTRING(split_part(""Product_Name""::TEXT,' ', 2),0,2)
    	|| '' ||
    	SUBSTRING(split_part(""Product_Name""::TEXT,' ', 3),0,2)
    	|| '' ||
    	SUBSTRING(split_part(""Product_Name""::TEXT,' ', 4),0,2)
    	|| '' ||
    	SUBSTRING(split_part(""Product_Name""::TEXT,' ', 5),0,2)
    	|| '' ||
    	SUBSTRING(split_part(""Product_Name""::TEXT,' ', 6),0,2)
    	|| '' ||
    	SUBSTRING(split_part(""Product_Name""::TEXT,' ', 7),0,2)
    	) AS Abbreviations
    		from ""Sample_Superstore""
    	LIMIT 3
    

The output is the following:

&amp;#x200B;

|Product\_Name (Column)|Abbreviations (Column)|
|:-|:-|
|Bush Somerset Collection Bookcase|BSCB|
|Hon Deluxe Fabric Upholstered Stacking Chairs, Rounded Back|HDFUSCR|
|Self-Adhesive Address Labels for Typewriters by Universal|SALFTBU|

Commas and apostrophes might cause issues sometimes though, so you'll probably have to delete them beforehand.",7,sql,2020-10-13
i7nzed,What is difference between these quarries. All three are giving same answers,"1.select city from station where city regexp '^t'


2. select city from station where city regexp '^t.'


3. select city from station where city regexp '^t.*'",0,sql,2020-10-13
i7kc7x,How to CAST int param as column's alias.,"I'm trying to assign my column's name to a dynamic param value (in a procedure) but I couldn't find a way to do it. I used SELECT ID, YEAR1 as CAST(@pYear as NVARCHAR(10)) or  YEAR1 as "" ' ""+CAST(@pYear as NVARCHAR(10)) + "" ' "" but none of them work. 

I'd appreciate all hint or help :D",2,sql,2020-10-13
i7jps3,How to Create a SQL Cluster(FCI) on RHEL,,2,sql,2020-10-13
i7j1mr,Entry level sql Career?,"I am getting a little worried, when I view IT/sql careers in Texas, 90% of them want a bachelors degree and right now I don’t think I will be able to afford that at the moment. I am afraid because right now all I have is an AS Information Technology. 

Many of the entry level jobs are that require a bachelor’s degree are only offering 40,000-45,000, is this normal or typical?",2,sql,2020-10-13
i7i3yd,Compete beginner to coding,"Hi everybody. I’ve tried for the last week understanding and learning MySQL via Khan Academy (started fine but got lost at the CASE part and never really understood anything after), a Microsoft course on edX for their version, the Oracle MySQL portal and a few other spots based on old threads. Unfortunately I feel like I’m so new to this I don’t really understand why things are happening and how, and listening to stuff that I don’t really understand. Another person has suggested learning Python first to just understand how coding works and give me a basis point but really am completely lost... I think at this point an interactive online course would help me but not looking to spend a lot of money and am working full time so seems options are limited. Thanks for all the input

*** preferably looking to learn MySQL",34,sql,2020-10-13
i7h94k,PLEASE HELP !! with MySQL syntax,"Hello, I'm quite new to SQL, and below are the tables I'm trying to create for my mini database. The second table, TAG, keeps giving me a syntax error that I cannot figure out on the 'FOREIGN KEY' line. I've successfully created both the EMPLOYEE and KEYCODE tables. I tried using [https://www.eversql.com/sql-syntax-check-validator/](https://www.eversql.com/sql-syntax-check-validator/) and entered all of the tables together, but it gave me the same syntax error. However, when testing each table separately, each table made successfully passes the syntax checker. Perhaps it's my use of the Foreign Key incorrectly?

CREATE TABLE EMPLOYEE(

EmployID varchar(30),

LastName varchar(30),

FirstName varchar(30),

PRIMARY KEY (EmployID)

);

CREATE TABLE TAG(

EmployID varchar(30),

TagID int NOT NULL,

PRIMARY KEY (TagID),

FOREIGN KEY (EmployID) REFERENCES EMPLOYEE(EmployID)

);

CREATE TABLE KEYCODE(

KeyCode varchar(255)

);",1,sql,2020-10-13
i7h8i1,garrylachman/ElectroCRUD | Themes added,,4,sql,2020-10-13
i7gf83,"Return last day of week, assuming 1st day of week is Sunday","Need to return the last day of the week, but assume the first day of the week is Sunday. Problem is, SQL function assumes the first day of the week is Monday. Here is what I thought would work, but I tried this and other various date\_trunc and date\_part, next day, etc functions:  


date\_trunc('week',transactiondate) +5",1,sql,2020-10-13
i7eqhr,SQLite Help!,"Hi everyone, I have a 45min SQLite technical interview for an analytics position at Tesla tomorrow. I use a Macbook Pro. 

I just completed the Intro and Full DataCamp SQL courses. Now I am trying to practice in Terminal on my MAC where SQLite is preinstalled. It is NOT user friendly at -all (especially compared to DataCamp's query.sql).

One specific issue, is being able to import a file into SQLite in Terminal. I assume for my interview they will share a file with me and I will have to take it from there. I can make my own file and add data, but can't find a source to help me import a file.

Alternatively, what would be the best IDE for me to download to most easily navigate SQLite.

&amp;#x200B;

THANK YOU",2,sql,2020-10-13
i7bngd,How can I prevent duplicates of natural keys when the surrogate key is the primary key? Am I misusing surrogate keys?,"So very basic problem I'm having (I'm new to databases). I want to create a table for ""words"" for an application I'm creating. I read about ""surrogate keys"" and their space saving benefits, and since I intend to be storing many words in the database, I figured it might be wise to use one for the words table. Thus, I decided the word table would have a primary key that is just an auto increment int, and then the only other field would be the word itself. 

Here's the problem I'm having with this design: I want to make sure there are no duplicate words in the table, but since the primary key is not the word, primary key uniqueness does not enforce this. Should this imply that I should not be using a surrogate key here, or if not what workaround should I take to prevent duplicate word entries?",5,sql,2020-10-13
i7ba35,How to round down to the next lowest number?,"Hi guys,i have a table

QTY

150

200

300

How do i get 150, 200 or round down to the next number if the  user enters 175 and 241 for example

Thanks",2,sql,2020-10-13
i7ap20,"Hello guys total SQL noob here I was wondering if there might be something one could write that will copy the data from one cell down to all the NULLS below it, and stop when it is not null. The repeat the process with the next cell with a value. Any help would be appreciated!",,40,sql,2020-10-13
i7a8tw,Can each database be brought to the fourth normal form?,"Wikipedia seems to contradict itself.

In the article [Database normalization](https://en.wikipedia.org/wiki/Database_normalization) there is a [table](https://en.wikipedia.org/wiki/Database_normalization#Normal_forms) according to which a database in 4NF satisfies all assumptions of BCNF. Is any database in 4NF, therefore, necessarily also in BCNF?

Because as Wikipedia itself mentions in the article [Boyce-Codd normal form](https://en.wikipedia.org/wiki/Boyce%E2%80%93Codd_normal_form):

&gt; In some cases, a non-BCNF table cannot be decomposed into tables that satisfy BCNF and preserve the dependencies that held in the original table. Beeri and Bernstein showed in 1979 that, for example, a set of functional dependencies {AB → C, C → B} cannot be represented by a BCNF schema.

On the other hand, in the article [Fourth normal form](https://en.wikipedia.org/wiki/Fourth_normal_form) Wikipedia says:

&gt; Ronald Fagin demonstrated that it is always possible to achieve 4NF.

(and this statement is sourced by a reference to Fagin)

Wait. If all databases in 4NF  must be in BCNF and it is not always possible to achieve BCNF... then doesn't this entail that it is NOT always possible to achieve 4NF?

I'm confused. Can 4NF be indeed always achieved? If so, then how to reconcile this with the claim that BCNF cannot always be achieved?

I have some vague memories from lectures that 4NF (and general anything above 3NF) can not always be achieved (which makes me doubt the aforementioned Wiki claim even harder) but like I said these are very vague memories and I may easily misremember what I was told.",5,sql,2020-10-13
i79ydq,SQL Query GUI for Non-Programmers,"Is there an application that I can use that will simply show the output of saved queries, preferably in a click to run way? I write a lot of SQL for people at my company to provide them with detailed information, but it becomes very time consuming trying to create web views for all of them and people can't seem to figure out how to refresh excel data sources. Any help would be greatly appreciated!",2,sql,2020-10-13
i79nki,counting distinct min date value,"No idea how to go about this so any push in the right direction is appreciated. 

Just like the title says. I need to count each distinct min date value

something like this COUNT( DISTINCT MIN(\[Date\])",1,sql,2020-10-13
i78m2o,MySQL Community Server/Workbench,"I'm new to SQL and wanting to learn more about it. I have MySQL Community Server/Workbench. Does anyone have recommendations on which videos (youtube, Linkedin Learning, etc)  you have found helpful to learn basics/how to use it? Preferably free resources!",2,sql,2020-10-13
i77qui,"Can the query SELECT * FROM Emp e, Dept d WHERE e.deptno = d.deptno ever return more rows than the number of rows in the Emp table times the number of rows in the Dept table?","A task from one of the former exams:

&gt; The tables `Emp` and `Dept` have E and D rows, respectively. Does the query `SELECT * FROM Emp e, Dept d WHERE e.deptno = d.deptno`:
&gt; a) Always has a non-empty response if D ⋅ E ≠ 0?
&gt; b) Have a pessimistic time complexity of O(D⋅E)?
&gt; c) May return D ⋅ E rows?

My answers: a) No, b) Yes, c) Yes. I'm pretty sure about a) and c) since I could provide a counterexample disproving a) and an example proving c).

But I'm not sure what to do with b). Can this query ever return more than E ⋅ D rows? I'm not sure how to check this? Ensuring that something can never happen is inherently difficult.

I can't see how could this query ever return more than E ⋅ D rows, but this may simply mean I don't know something I should know?

Could someone kindly tell me if the query `SELECT * FROM Emp e, Dept d WHERE e.deptno = d.deptno` can ever return more rows than the number of rows in the `Emp` table times the number of rows in the `Dept` table?

^(PS. I know there is the requirement to tag the post with the correct platform, but in this case I can't really do so since the exam doesn't specify one. In theory, the exam covers SQL and not MySQL or Postgres or whatever other platform.)",1,sql,2020-10-13
i75ri3,"Is ""MySQL 8.0 Database Developer Oracle Certified Professional"" certificate worth it for a fresh grad with &lt;1 year of experience who is looking into getting into Data Science?","Hey, I am a fresh grad and I want to get into Data Science. I started to work a few months back as an Associate Data Engineer for a company. The Data Science team is relatively small and often work is distributed on the basis of bandwidth and so I am getting to learn a lot of SQL, Data Analysis in Tableau, Data Management and Orchestration. This is pretty fun but taxing at the same time. I am learning and trying but it seems like a dead end.

 I have been learning and trying to improve my SQL and Analytics skills but lack confidence when questioned. This is negatively impacting my communication with my peers. I have started reading the following books for increasing my understanding of SQL and Data Applications - 

1. Paul Nielsen, Kalen Delaney, Adam Machanic, Kimberly Tripp, Paul Randal, Greg Low - SQL Server MVP Deep Dives-Manning Publications (2009)
2. Kalen Delaney - SQL Server MVP Deep Dives, Volume 2  -Manning Publications (2011)
3. Clean Code - A Handbook of Agile Software Craftsmanship by Robert C. Martin 
4. Martin Kleppmann - Designing Data-Intensive Applications\_ The Big Ideas Behind Reliable, Scalable, and Maintainable Systems-O’Reilly Media (2017)
5. Baron Schwartz, Peter Zaitsev, Vadim Tkachenko - High Performance MySQL, 3rd Edition\_ Optimization, Backups, and Replication-O'Reilly Media (2012)

(Please suggest more)

In addition to this I am considering to dedicate my time for **Certifications** in various fields of Data Science, namely - 

1. Database - MySQL 8.0 Database Developer Oracle Certified Professional
2. Data Analytics - Tableau Desktop Certified Associate
3. Machine Learning - TensorFlow Developer Certificate
4. Data Engineering - GCP Professional Data Engineer (As the company's whole infrastructure is hosted in GCP)
5. Or any other ... 

The main factors and expectations from reading and pursuing the above are -

1. Improved confidence
2. Greater Knowledge of Databases
3. Fluency in SQL 
4. 360 degree View of Data Science 
5. Improving chances of job opportunities with the certifications.

My question is, Would doing the above certifications benefit me considering that i have &lt; 1 year of experience and also increase my knowledge rapidly? 

&amp;#x200B;

**TL;DR** \- Fresh Grad (&lt;1 experience) wants to pursue data science, should he invest time in the above certifications.",1,sql,2020-10-13
i74c4h,"[Oracle] My script keeps throwing ""table or view does not exist"" for Departments, Employees and JobHistory - can anyone see/explain where I have gone wrong","Here is my SQL script:

DROP TABLE Departments;
DROP TABLE Employees;
DROP TABLE JobHistory;
DROP TABLE Locations;
DROP TABLE Countries;
DROP TABLE Jobs;

CREATE TABLE Jobs(
    job_id INTEGER,
    job_title VARCHAR(20),
    min_salary INTEGER,
    max_salary INTEGER,
    PRIMARY KEY (job_id));  
    
CREATE TABLE Countries(
    country_id INTEGER,
    country_name VARCHAR(20),
    PRIMARY KEY (country_id));
    
CREATE TABLE Employees(
    employee_id	INTEGER,
    first_name	VARCHAR(20),
    last_name	VARCHAR(20),
    phone_number INTEGER,
    hire_date	DATE,
    job_id	INTEGER,
    salary INTEGER,
    department_id INTEGER,
	PRIMARY KEY (employee_id),
  FOREIGN KEY (department_id) REFERENCES Departments(department_id));
  
CREATE TABLE Departments(
    department_id INTEGER,
    department_name VARCHAR(20),
    manager_id INTEGER,
    location_id INTEGER,
    PRIMARY KEY (department_id),
    FOREIGN KEY (manager_id) REFERENCES Employees(employee_id),
    FOREIGN KEY (location_id) REFERENCES Locations(location_id));
    
CREATE TABLE Locations(
    location_id INTEGER,
    street_address VARCHAR(40),
    postal_code INTEGER,
    city VARCHAR(20),
    state_province CHAR(3),
    country_id INTEGER,
    PRIMARY KEY (location_id),
    FOREIGN KEY (country_id) REFERENCES Countries(country_id)); 

CREATE TABLE JobHistory(
    employee_id INTEGER,
    start_date DATE,
    end_date DATE,
    job_id INTEGER,
    department_id INTEGER,
    PRIMARY KEY (employee_id, start_date, end_date),
    FOREIGN KEY (employee_id) REFERENCES Employees(employee_id), 
    FOREIGN KEY (job_id) REFERENCES Jobs(job_id), 
    FOREIGN KEY (department_id) REFERENCES Departments(department_id));",1,sql,2020-10-13
i72zmx,"MySQL Performance Tuning: Tips, Scripts and Tools",,26,sql,2020-10-13
i7005e,What is the best certified SQL course?,"What is the best, certified, online SQL course that is accepted by most employers? I am trying to better myself and am looking for a new job, most employers require a SQL qualification/certification, so I am looking for the best one to do. 

Any suggestions will be greatly appreciated.",1,sql,2020-10-13
i6rh4n,I can't think of any good use cases where NoSQL database is more practical the sql... what am I missing?,"So I'm working on a project that uses MongoDb, and I can't help but wonder why we didn't (original  developers) just use a sql database, and the more I think about the use cases for noSql,  the less I feel any are justified. 

  Does anyone here know of a good use cases where a NoSql e.g. is the clearly the best tool vs. traditional relation db?

The need to maintain a different   data storage stack when existing Sql.can do the job?

I understand noSql is easy to dump unstructured data into, but then you likely get a lot of duplication, plus if the data is very unstructured outside of key-value pairs how would you ever query and  find what your looking for.?",41,sql,2020-10-13
i6ny3n,I want to add 30 days to a date,"I want to create a 30 days window to check if a product has been ordered between that 30 day window 
How should I go about it 
If I directly add 30 like (date (column_name)+30) it changes the year also despite being only in February 
Can anyone help 
I am stumped",5,sql,2020-10-13
i6n4l8,How to add a constraint to a varchar attribute?,"I have a varchar attribute and need to constrain it such that it cannot contain spaces and must be between 8-10 characters long i.e. phone number. 
So far I’ve got ALTER TABLE ‘tablename’ ADD CONSTRAINT ‘constraintname’ CHECK (‘attributename’) 
Please help what could achieve this?
Originally defined as ‘attributename’ varchar(10)",0,sql,2020-10-13
i6m76n,Having trouble uploading AdventureWorks to PostgreSQL," I've downloaded a AdventureWorks zip file from the link below, which when unzipped, gave me 71 CSV files and one SQL file. When I try to restore the SQL file on Postgres, it keeps on failing. I've also tried running the script the link gives me below, but it also doesn't work. What am I doing wrong? 

    psql -c ""CREATE DATABASE \""Adventureworks\"";"" 
    psql -d Adventureworks &lt; install.sql

 [https://github.com/NorfolkDataSci/adventure-works-postgres](https://github.com/NorfolkDataSci/adventure-works-postgres)",0,sql,2020-10-13
i6f1w7,very newbie question. How do I return an integer object in Python from TOTAL function in SQLITE?,"I finished the basics in Python and I am working on a simple budgeting program as a practice project.   
I need to return the total of a column as an integer in Python but I am having troubles with it.   
Here's my code: 

    c.execute(''' SELECT TOTAL(amount) FROM expens WHERE exp_name = ""take out"" OR exp_name =""grocery"" AND date BETWEEN ""2020-01-01"" AND ""2020-07-30"" ''')  
    ##WORKING CODE ## NEED TO RETURN INTEGER VALUE
    
    grocery_month=c.fetchall()
    print(grocery_month)

the result is: 

    [(135.0,)] 

when I try: 

    print(int(grocery_month))

I get this error:

    TypeError: int() argument must be a string, a bytes-like object or a number, not 
    'list'    

I need a Python integer object so I can use it for later calculations.  
Thank you in advance :-)",2,sql,2020-10-13
i6daag,"New to SQL, suggestions","Hello! I am trying to find a way to download SQL on a Mac. Any suggestions? I’ve tried SQLiteStudio and didn’t work when I tried downloading. Is MySQL free to download, if so anyone have a link? I’m only seeing a subscription type of download. Soo many options, looking for suggestions!",0,sql,2020-10-13
i6as7x,Do you truly know SQL if you mainly use Bigquery?,Can you put down SQL on your resume if you only use bigquery or amazon redshift?,2,sql,2020-10-13
i69qx3,How to learn more than the basics?,"I did a SQL course in uni, we used northwind on MS SQL, learnt the basic stuff, select from, subqueries, WHERE, ORDERBY, GROUP BY, JOIN, create tables, add rows to them etc.

&amp;#x200B;

What would you recommend next? Any online course/book anything?",52,sql,2020-10-13
i66z48,Covid infection rate sample,"The below is a silly little model to give people starting out a real work example of some simple SQL tools

Variables (with data types)

CTE (common table expressions)

LAG functon
    
      declare @r decimal (14,4)
          declare @i float 
          declare @dayend float
    
          set @r=1.3
          set @i= 20
          set @dayend = 1
    
          ;with covid 
          (R, Infected, Nodays)
          as
          (Select @r as r,
          @i as infected,
          @dayend as Nodays
          Union all
          Select r, 
          sum(infected) over (order by Nodays+1)*@r as  Infected,
          covid.Nodays+1 as Nodays
          from covid where Nodays &lt;30)
          select 
          r, round(infected,2) as infected,isnull(
          round(infected,2)-(lag(round(infected,2),1) over (order by nodays)),0)as NewCases,
           Nodays from covid
           where nodays&lt;15



This gives you a *rough* idea of a potential rate of new cases per day (over 2 weeks) with a static R rate for covid infections.

It's not perfect btw but a good jumping off point.",18,sql,2020-10-13
i661kh,Oracle SQL vs PostgreSQL,"Im looking into learning SQL because a job I want to land requires me to learn SQL. On the job posting, it says they use Oracle SQL but finding info on Oracle SQL isn't as plentiful as tutorials on PostgreSQL and MySQL.

Should I learn specifically how to use Oracle SQL or is there a lot of carry-over between Oracle SQL and PostgreSQL. Total newb, sorry",2,sql,2020-10-13
i659vq,Anyone Have a Mnemonic or Rule-of-Thumb to Remember How DESC and ASC Work on Alphabetical and Numerical Data?,I keep getting mixed up between the two.,0,sql,2020-10-13
i613en,Advice on this query....,"This query works fine brings the information of every house if it has due , how much and the status of every month of the current year.

BUT... it takes a lot to procces.... any advice how can i optimize it. 

Thanks.

&amp;#x200B;

&gt;SELECT tbl\_torre.idtorre, tbl\_deptos.iddepto, tbl\_torre.torre, tbl\_deptos.depto, tbl\_deptos.id\_eup, tbl\_deptos.entregado,  
&gt;  
&gt;(  
&gt;  
&gt;	SELECT SUM(cantidadapagar+interes-descuento) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())   
&gt;  
&gt;	AND MONTH(datebelong) &lt; MONTH(NOW())   
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND payed = 0  
&gt;  
&gt;	AND idconcep IN (1,2,3)  
&gt;  
&gt;) as month\_due,  
&gt;  
&gt;  
&gt;  
&gt;(  
&gt;  
&gt;	SELECT count(idincome) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())   
&gt;  
&gt;	AND MONTH(datebelong) &lt; MONTH(NOW())   
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND payed = 0  
&gt;  
&gt;	AND idconcep IN (1,2,3)  
&gt;  
&gt;) as num\_due,  
&gt;  
&gt;  
&gt;  
&gt;(  
&gt;  
&gt;	SELECT SUM(cantidadapagar+interes-descuento) FROM tbl\_incomens   
&gt;  
&gt;	WHERE DATE(datebelong) &lt; DATE(NOW())   
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND payed = 0  
&gt;  
&gt;	AND idconcep IN (1,2,3)  
&gt;  
&gt;) as total\_due,  
&gt;  
&gt;  
&gt;  
&gt;(  
&gt;  
&gt;	SELECT CONCAT(  
&gt;  
&gt;(SELECT ROUND(SUM(payed)) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())  
&gt;  
&gt;	AND MONTH(datebelong) = 1  
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND idconcep IN (1,2,3)),'@',(SELECT COUNT(idincome) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())  
&gt;  
&gt;	AND MONTH(datebelong) = 1  
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND idconcep IN (1,2,3))  
&gt;  
&gt;)  
&gt;  
&gt;  
&gt;  
&gt;) as jan,  
&gt;  
&gt;  
&gt;  
&gt;(  
&gt;  
&gt;	SELECT CONCAT(  
&gt;  
&gt;(SELECT ROUND(SUM(payed)) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())  
&gt;  
&gt;	AND MONTH(datebelong) = 2  
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND idconcep IN (1,2,3)),'@',(SELECT COUNT(idincome) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())  
&gt;  
&gt;	AND MONTH(datebelong) = 2  
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND idconcep IN (1,2,3))  
&gt;  
&gt;)  
&gt;  
&gt;  
&gt;  
&gt;) as feb,  
&gt;  
&gt;  
&gt;  
&gt;(  
&gt;  
&gt;	SELECT CONCAT(  
&gt;  
&gt;(SELECT ROUND(SUM(payed)) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())  
&gt;  
&gt;	AND MONTH(datebelong) = 3  
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND idconcep IN (1,2,3)),'@',(SELECT COUNT(idincome) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())  
&gt;  
&gt;	AND MONTH(datebelong) = 3  
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND idconcep IN (1,2,3))  
&gt;  
&gt;)  
&gt;  
&gt;  
&gt;  
&gt;) as mar,  
&gt;  
&gt;  
&gt;  
&gt;(  
&gt;  
&gt;	SELECT CONCAT(  
&gt;  
&gt;(SELECT ROUND(SUM(payed)) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())  
&gt;  
&gt;	AND MONTH(datebelong) = 4  
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND idconcep IN (1,2,3)),'@',(SELECT COUNT(idincome) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())  
&gt;  
&gt;	AND MONTH(datebelong) = 4  
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND idconcep IN (1,2,3))  
&gt;  
&gt;)  
&gt;  
&gt;  
&gt;  
&gt;) as abr,  
&gt;  
&gt;  
&gt;  
&gt;(  
&gt;  
&gt;	SELECT CONCAT(  
&gt;  
&gt;(SELECT ROUND(SUM(payed)) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())  
&gt;  
&gt;	AND MONTH(datebelong) = 5  
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND idconcep IN (1,2,3)),'@',(SELECT COUNT(idincome) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())  
&gt;  
&gt;	AND MONTH(datebelong) = 5  
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND idconcep IN (1,2,3))  
&gt;  
&gt;)  
&gt;  
&gt;  
&gt;  
&gt;) as may,  
&gt;  
&gt;  
&gt;  
&gt;(  
&gt;  
&gt;	SELECT CONCAT(  
&gt;  
&gt;(SELECT ROUND(SUM(payed)) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())  
&gt;  
&gt;	AND MONTH(datebelong) = 6  
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND idconcep IN (1,2,3)),'@',(SELECT COUNT(idincome) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())  
&gt;  
&gt;	AND MONTH(datebelong) = 6  
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND idconcep IN (1,2,3))  
&gt;  
&gt;)  
&gt;  
&gt;  
&gt;  
&gt;) as jun,  
&gt;  
&gt;  
&gt;  
&gt;(  
&gt;  
&gt;	SELECT CONCAT(  
&gt;  
&gt;(SELECT ROUND(SUM(payed)) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())  
&gt;  
&gt;	AND MONTH(datebelong) = 7  
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND idconcep IN (1,2,3)),'@',(SELECT COUNT(idincome) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())  
&gt;  
&gt;	AND MONTH(datebelong) = 7  
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND idconcep IN (1,2,3))  
&gt;  
&gt;)  
&gt;  
&gt;) as jul,  
&gt;  
&gt;  
&gt;  
&gt;(  
&gt;  
&gt;	SELECT CONCAT(  
&gt;  
&gt;(SELECT ROUND(SUM(payed)) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())  
&gt;  
&gt;	AND MONTH(datebelong) = 8  
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND idconcep IN (1,2,3)),'@',(SELECT COUNT(idincome) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())  
&gt;  
&gt;	AND MONTH(datebelong) = 8  
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND idconcep IN (1,2,3))  
&gt;  
&gt;)  
&gt;  
&gt;) as ago,  
&gt;  
&gt;  
&gt;  
&gt;(  
&gt;  
&gt;	SELECT CONCAT(  
&gt;  
&gt;(SELECT ROUND(SUM(payed)) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())  
&gt;  
&gt;	AND MONTH(datebelong) = 9  
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND idconcep IN (1,2,3)),'@',(SELECT COUNT(idincome) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())  
&gt;  
&gt;	AND MONTH(datebelong) = 9  
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND idconcep IN (1,2,3))  
&gt;  
&gt;)  
&gt;  
&gt;) as sep,  
&gt;  
&gt;  
&gt;  
&gt;(  
&gt;  
&gt;	SELECT CONCAT(  
&gt;  
&gt;(SELECT ROUND(SUM(payed)) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())  
&gt;  
&gt;	AND MONTH(datebelong) = 10  
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND idconcep IN (1,2,3)),'@',(SELECT COUNT(idincome) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())  
&gt;  
&gt;	AND MONTH(datebelong) = 10  
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND idconcep IN (1,2,3))  
&gt;  
&gt;)  
&gt;  
&gt;) as oct,  
&gt;  
&gt;  
&gt;  
&gt;(  
&gt;  
&gt;	SELECT CONCAT(  
&gt;  
&gt;(SELECT ROUND(SUM(payed)) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())  
&gt;  
&gt;	AND MONTH(datebelong) = 11  
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND idconcep IN (1,2,3)),'@',(SELECT COUNT(idincome) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())  
&gt;  
&gt;	AND MONTH(datebelong) = 11  
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND idconcep IN (1,2,3))  
&gt;  
&gt;)  
&gt;  
&gt;) as nov,  
&gt;  
&gt;  
&gt;  
&gt;(  
&gt;  
&gt;	SELECT CONCAT(  
&gt;  
&gt;(SELECT ROUND(SUM(payed)) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())  
&gt;  
&gt;	AND MONTH(datebelong) = 12  
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND idconcep IN (1,2,3)),'@',(SELECT COUNT(idincome) FROM tbl\_incomens   
&gt;  
&gt;	WHERE YEAR(datebelong) = YEAR(NOW())  
&gt;  
&gt;	AND MONTH(datebelong) = 12  
&gt;  
&gt;	AND tbl\_incomens.iddpt = tbl\_deptos.iddepto  
&gt;  
&gt;	AND idconcep IN (1,2,3))  
&gt;  
&gt;)  
&gt;  
&gt;) as dic  
&gt;  
&gt;FROM tbl\_torre INNER JOIN tbl\_deptos ON tbl\_torre.idtorre = tbl\_deptos.idt",0,sql,2020-10-13
i60sex,Where I can find SQL data sheets with problems to learn data analytics,.,1,sql,2020-10-13
i5z7wt,Convert Update statements to Select statements,"How to can we effectively convert Update statements to Select statements. For example we can't use Update/Insert/Delete statements directly in Spark.SQL, hence we have to convert them to Select statements.

I know there are multiple ways to do this like using Left Join with Coalesce , Deleted dataframe Union  Updated dataframe  etc..I would like to know the best and effective way to do this. Also please share any documentation or tutorial of the same.",1,sql,2020-10-13
i5vvly,Advice for best practice creating a relational set of tables,"I am creating a set of tables to store data for a studio that rents a number of locations to different clients. However, now I would like to make the structure of the database more generic so that I can offer the same solution to others.

Originally, I had one table containing the details of each booking. Within this there was a column for each location option which is assigned a boolean value depending on if that location was included in the booking or not.

Now I have created:

* a ""Locations"" table to store the details of each location.
* a ""Bookings"" table to store the details of each booking.
* a ""Booking Location"" table to store the details of each combination of bookings and locations.

My idea was to fill the ""Booking Location"" table with one row for each combination generated on making a booking. So for instance, there could be between 1-10 new rows generated for each new booking (given 10 location choices).

My questions are:

1. Is this the best way to store this type of data?
2. What relationships do I need to set up between these tables?
3. Which columns need to be referenced for this to work?",1,sql,2020-10-13
i5vroj,Thoughts on Sticked Post for Newbies,"As a former SQL newbie and current and forever SQL learner, I'm always excited to see other people discovering this awesome community and getting into the world of SQL. Lately though, I feel like I see a lot of repetitive ""New to SQL. Where should I start?"" posts with a lot of the same comments. What are y'all's thoughts on getting the mods to create a stickied post so the community can post and grow a central ""database"" of helpful resources for the SQL newcomers? I'm not saying we should stop the ""Where should I start"" posts, but hopefully this will be another good starting point for newbies.",33,sql,2020-10-13
i5vpiz,Using anything other than ints for Primary Keys,"Hi all! So i have been using SQL for quite some time now, and i always use numbers as my primary keys, the usual 1,2,3,4 auto-increment etc. However, sometimes i have tables where it would be much more beneficial for me to store IDs for example as a Date or something like that, or strings, and my question is, is it slower? Should i still opt to use numbers everytime i can for my Primary Keys? I remember someone saying using strings as IDs can tank your performance and i can see that. But i have never tested it. ",1,sql,2020-10-13
i5tpgc,Is there a problem when you make your primary key visible in the UI?,"I'm thinking of using the autogenerated primary keys as sort of a control number for example, in a contribution number. Are there dangers to doing this? What's the best practice when it comes to auto-generating control numbers?",2,sql,2020-10-13
i5t7lc,Newbie here. I want to learn SQL. What are the best sources to start?,Also should I learn SQL or tableau first?,6,sql,2020-10-13
i5rvcg,Getting wrong counts in queries,"I am running these queries and am getting 1's and 0's as results which is wrong. Does anyone have a possible reason why this might be happening and how to solve it? Thanks in advance!  


`CREATE TABLE visits AS (`

	`SELECT u.patient_guid, count(distinct visits.visit_start_date) as num_visits` 

	`FROM`

		`aao_team.poag_dx_pull1 u`

		`left JOIN madrid2.patient_visit visits ON u.patient_guid = visits.patient_guid`

			`AND datediff(day, u.index_date, visit_start_date) BETWEEN 0 AND 365 = TRUE`

		`WHERE academic = '0'`

		`GROUP BY`

			`u.patient_guid,`

			`visit_start_date);`

`SELECT`

`'visits' AS category2,`

`'visits-min' AS value,`

`min(num_visits) AS cnt`

`FROM`

`visits GROUP BY`

`1,`

`2`

`UNION`

`SELECT`

`'visits' AS category2,`

`'visits-max' AS value,`

`max(num_visits) AS cnt`

`FROM`

`visits GROUP BY`

`1,`

`2`

`UNION`

`SELECT`

`'visits' AS category2,`

`'visits-mean' AS value,`

`avg(num_visits) AS cnt`

`FROM`

`visits GROUP BY`

`1,`

`2`

`UNION`

`SELECT`

`'visits' AS category2,`

`'std' AS value,`

`stddev(num_visits) AS cnt`

`FROM`

`visits GROUP BY`

`1,`

`2`

`UNION`

`SELECT`

`'visits' AS category2,`

`'.25q' AS value,`

`percentile_cont(0.25)`

`WITHIN GROUP (ORDER BY num_visits::float) AS cnt`

`FROM`

`visits GROUP BY`

`1,`

`2`

`UNION`

`SELECT`

`'visits' AS category2,`

`'.5q' AS value,`

`percentile_cont(0.5)`

`WITHIN GROUP (ORDER BY num_visits::float) AS cnt`

`FROM`

`visits GROUP BY`

`1,`

`2`",1,sql,2020-10-13
i5qg9u,Extremely basic question--Is this database design for a thesaurus OK?,"Hi, so I am an absolute beginner to databases. I'm working on a personal project where I need to store  what is essentially a thesaurus. Here is the data I want to store:

I have a set of primary words. Each of these words is connected to a set of meanings/definitions for it. Each meaning has associated with it a part of speech and a list of synonyms for that particular meaning of the word. Each synonym has an associated similarity number--a rating between 0 and 100 that says how good of a synonym it is.

I have come up with the following possible design:

    TABLE: primary_words [named 'primary_words' since entries in synonyms below are also words]
    Primary key: primary word ID
    Field: the word itself
    
    TABLE: parts_of_speech
    Primary key: PoS ID
    Field: the part of speech
    
    TABLE: meanings
    Primary key: meaning ID
    Field: definition/meaning
    Foreign key: part of speech ID
    Foreign key: primary word ID
    
    Table: synonyms 
    Primary key = synonym ID
    Field: similarity rating
    EDIT: Field: synonym itself
    Foreign key: meaning ID (the definition/meaning this synonym is for)

My questions are:

**1) Is this table design OK/normalized?** I've been reading about normalization but haven't fully internalized it. My understanding is that the reason it is better to not combine some of these--eg, I could remove the PoS table and put it in with meanings and/or remove the primary\_words table and just have a meanings table with a field for primary words--is because of database normalization. Is this correct?

**2) Is the pattern of having a table with just one field and a primary key of any benefit?** For instance, the PoS table is just a mapping of IDs to parts of speech. My understanding is that this is better than just having the parts of speeches be primary keys because integer primary keys make operations faster. Is that correct?

Thanks for any help!!!

EDIT: I've just remembered I actually want to support two thesauruses and keep track of which a synonym is from. One of the thesauruses is exactly as described above, but the other has no meanings and differentiates synonyms for the same word only by part of speech. It also lacks similarity ratings. How should I address these differences? My apologies as I realize this makes the question more complicated.

My current thoughts are the following:

\-Change the meanings table to a word\_usage table. Make the definition/meaning field optional. This way I'm mapping a particular usage of a word, which will be defined by the definition/meaning if it is present, or by the PoS otherwise.

\-make the similarity rating field optional

\-Create another table with IDs 1 and 2 which stores which map to the name of thesaurus 1 or thesaurus 2. Have a field with a foreign key into this table for primary\_words and for synonyms. Or just for synonyms if I expect all the words to be in both thesauruses.

This seems a little messy.",18,sql,2020-10-13
i5nir0,Pulling a phrase from a string in-between phrases of varying length,"Hi,

I have a string that looks like the following:

 {""custom\_fields"": {""cell\_passage\_no"": ""P22"", ""incubation\_date\_time"": null, ""cell\_growth\_mode"": ""adherent"", ""lot\_number"": null, ""number\_of\_plates"": 2, ""preferred\_loading\_time"": ""11:00 am - 12:00 pm""}, ""is\_multiguide"": false, ""workflow\_template\_type\_id"": ""757590e2-0e3d-4f7e-ae5f-cdb20a5ab776""} 

I am trying to pull the string after '""cell\_growth\_mode"":' but before ',""lot\_number""', aka 'adherent'

I understand that I should be doing a SUBSTRING query, as well as PATINDEX. However, whenever I have tried PATINDEX I get the following error: **function patindex(unknown, text) does not exist**  

I am using SQL Explorer",3,sql,2020-10-13
i5mxea,ElectroCRUD 2 | New Version 2.7.1 - Add New Account Bug Fixed + Theme Selection,,2,sql,2020-10-13
i5lw9m,"In data warehouse, what is better approach: keeping more number of columns better for performance (reading data from tables) or keeping the data in same column (which would increase the number of rows).","For eg. 
1st approach (more columns, less rows):
ID, product1sales, product2sales, product3sales....... product50sales

2nd approach (less columns, more rows):
ID, productname, sales


PS- As far as my browsing web knowledge goes, people often say about more columns giving better organization while less columns (and hence more rows) give faster query(probably data compression congress into action). At times some have mentioned that there is certain number of columns (say 200 max) upto which it won't hurt the query performance thereby retaining the organizational power of more column approach.

Please correct me on any point. Thanks for reading the question.",3,sql,2020-10-13
i5l2sz,Schema for warehousing and logistics companies,Does anyone have examples of schema for shipping and/or logistic companies,1,sql,2020-10-13
i5h5an,Trying to insert from external tables into Oracle. How can i find my badfile?,"Hello! I'm trying to load data into my table. It should reject some rows because they are duplicates. I see the logfile. It's in the ""data\_to\_input"" directory, but where is the badfile?

    insert /*+ ignore_row_on_dupkey_index ( enzyme ( enz_name ) ) */
    into enzyme
    SELECT enz_name FROM EXTERNAL ((
      construct_id NUMBER(10),
      n_term VARCHAR2 (50),
      enz_name VARCHAR2 (3),
      c_term VARCHAR2 (50),
      cpp VARCHAR2 (50),
      mutations VARCHAR2 (50),
      mw_kda NUMBER (7, 3))
    
        TYPE ORACLE_LOADER
        DEFAULT DIRECTORY data_to_input
        ACCESS PARAMETERS (
            RECORDS DELIMITED BY NEWLINE
            badfile 'badfile.bad'
            logfile 'logfile.log'
            skip 1
            FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '""'
            MISSING FIELD VALUES ARE NULL 
            ) 
        LOCATION ('CONSTRUCT.CSV')
        REJECT LIMIT UNLIMITED) ext
        where not exists (
            select * from enzyme e
            where e.enz_name = ext.enz_name
        );

&amp;#x200B;

When I run this query, it says ""0 rows inserted."", which is fine because it shouldn't insert any more records than what already exists in that table.

But I can't see the badfile anywhere. When I go to my directory that I got the data from, I only see the logfile. When I open the logfile, it says:

    LOG file opened at 08/07/20 12:23:52
    Bad File: SYS_TEMP_0FD9D6634_4A9761_5560_9656.bad

But where is the badfile??????",3,sql,2020-10-13
i5gcai,Tables referencing each other?,"Hello, I'm facing a situation where I'd make 2 tables reference each other, but I'm not sure it would be the correct way to proceed (it's never a good thing when elements become dependent of each other).

Basically, I have a project table containing project details, and a document table, storing documents and their informations + a reference to a project\_id ('cause a document must belong to a project).

Now, I want to be able to choose a document to be used by default on the project, and this is where I'm meeting my issue, 'cause then I'd reference a document id in my project, making it dependent of the document, which I don't want to. Anyone has a way to avoid this issue?",12,sql,2020-10-13
i5g6gz,Trouble Installing MS SQL,"I am trying to learn SQL and just tried installing the MS SQL Server(Developer Edition). I downloaded the installer, and installed the program. The installation was a success according to the installer. However, I could not find the program anywhere. The only thing I found was a folder in Program Files. How can I uninstall the program or better yet, get working?",2,sql,2020-10-13
i5fy8c,"When I join two tables, I am trying to match the counts of the table that is being left joined to the new table counts","I am aiming to match the counts that I have for table xxx with table xx using a left join. So far I am getting higher counts from table xx and am unsure on how to lower them. Table xxx has a count of \~2.1 mil and table xx has a count of \~2.5 mil. So I need table xx's counts to match \~2.1 mil exactly. I can't right join or inner join because I will be dropping counts from xxx that I need (they will be too low -- I cant just drop my missings). What else can I do?

\`\`\`\`drop table if exists x; CREATE TABLE x AS SELECT \* from (select DISTINCT ROW\_NUMBER() OVER (PARTITION BY patient\_guid ORDER BY procedure\_code) AS rn, patient\_guid, procedure\_date AS effective\_date, procedure\_code AS practice\_code, CASE WHEN procedure\_code ILIKE '%aaa%' THEN 'Aqueous Shunt' WHEN procedure\_code ILIKE '%aaa%' THEN 'Aqueous Shunt, revision' WHEN procedure\_code ILIKE '%aaa%' THEN 'Canaloplasty with stent' WHEN procedure\_code ILIKE '%aaa%' THEN 'Canaloplasty without stent' WHEN procedure\_code ILIKE '%aaa%' THEN 'Cataract surgery' WHEN procedure\_code ILIKE '%aaa%' THEN 'Endoscopic cyclophotocoagulation' WHEN procedure\_code ILIKE '%aaa%' THEN 'ExPress shunt' WHEN procedure\_code ILIKE '%aaa%' THEN 'Goniotomy/Trabeculotomy' WHEN procedure\_code ILIKE '%aaa%' THEN 'Laser trabeculoplasty' WHEN procedure\_code ILIKE '%aaa%' THEN 'Postoperative revisions' WHEN procedure\_code ILIKE '%aaa%' THEN 'Removal of device' WHEN procedure\_code ILIKE '%aaa%' THEN 'Suprachoroidal bypass, Cypass' WHEN procedure\_code ILIKE '%aaa%' THEN 'Trabecular bypass, iStent/Hydrus' WHEN procedure\_code ILIKE '%aaa%' THEN 'Trabeculectomy' WHEN procedure\_code ILIKE '%aaa%' THEN 'Trabeculectomy, Revision' WHEN procedure\_code ILIKE '%aaa%' THEN 'Transscleral cyclophotocoagulation' WHEN procedure\_code ILIKE '%aaa%' THEN 'central corneal thickness measurement' WHEN procedure\_code ILIKE '%aaa%' THEN 'gonioscopy' WHEN procedure\_code ILIKE '%aaa%' THEN 'optic nerve/nerve fiber layer imaging' WHEN procedure\_code ILIKE '%aaa%' THEN 'visual field testing' WHEN procedure\_code IS NULL THEN 'Missing' ELSE procedure\_description END AS category FROM madrid2.patient\_procedure WHERE ( category ILIKE '%Aqueous Shunt%' OR category ILIKE '%Aqueous Shunt, revision%' OR category ILIKE '%Canaloplasty with stent%' OR category ILIKE '%Canaloplasty without stent%' OR category ILIKE '%Cataract surgery%' OR category ILIKE '%Endoscopic cyclophotocoagulation%' OR category ILIKE '%ExPress shunt%' OR category ILIKE '%Goniotomy/Trabeculotomy%' OR category ILIKE '%Laser trabeculoplasty%' OR category ILIKE '%Postoperative revisions%' OR category ILIKE '%Removal of device%' OR category ILIKE '%Suprachoroidal bypass, Cypass%' OR category ILIKE '%Trabecular bypass, iStent/Hydrus%' OR category ILIKE '%Trabeculectomy%' OR category ILIKE '%Trabeculectomy, Revision%' OR category ILIKE '%Transscleral cyclophotocoagulation%' OR category ILIKE '%central corneal thickness%' OR category ILIKE '%gonioscopy%' OR category ILIKE '%optic nerve fiber layer%' OR category ILIKE '%visual field%') AND practice\_code ILIKE '%aaa%' OR practice\_code ILIKE '%aaa%' OR practice\_code ILIKE '%aaa%' OR practice\_code ILIKE '%aaa%' OR practice\_code ILIKE '%aaa%' OR practice\_code ILIKE '%aaa%' OR practice\_code ILIKE '%aaa%' OR practice\_code ILIKE '%aaa%' OR practice\_code ILIKE '%aaa%' OR practice\_code ILIKE '%aaa%' OR practice\_code ILIKE '%aaa%' OR practice\_code ILIKE '%aaa%' OR practice\_code ILIKE '%aaa%' OR practice\_code ILIKE '%aaa%' OR practice\_code ILIKE '%aaa%' OR practice\_code ILIKE '%aaa%' OR practice\_code ILIKE '%aaa%' OR practice\_code ILIKE '%aaa%' OR practice\_code ILIKE '%aaa%' OR practice\_code ILIKE '%v%' AND effective\_date BETWEEN '2013-01-01 00:00:00' AND '2019-12-31 00:00:00') where rn = '1'; 

&amp;#x200B;

&amp;#x200B;

drop table if exists xx; create table xx as select \* from ( select DISTINCT 'proc' as category2, proc.category,         u.patient\_guid,         count(distinct proc.effective\_date) as cnt,         ROW\_NUMBER() OVER (PARTITION BY u.patient\_guid ORDER BY category) AS rn     from         xxx u         LEFT join x on proc.patient\_guid = u.patient\_guid         and datediff(days, u.index\_date, proc.effective\_date) between 0 and 365 and academic = '1' group by 1, 2, 3) where rn = '1';\`\`\`",0,sql,2020-10-13
i5de38,"Transitioning from SQLite to MySQL. Editors / browsers have bad resolution, small text.","I'm new to SQL and I started out with DB Browser for SQLite. Now I want to transition to MySQL so I have more commands. I really liked the DB Browser so I was looking for a similar editor. I downloaded HeidiSQL and MySQL Workbench but both have terrible resolutions. I tried going to properties - compatibility - change high DPI settings and set it to application (others don't do anything) but then the text is so small my eyes hurt after 30 seconds of looking at it.

Can anyone recommend a solution, or a different editor that works normally with higher resolution (running 2560x1600)?

Thank you!",9,sql,2020-10-13
i5d9in,Little help with a silly thing please (backup software putting my DB into recovery pending),"Hello!

As the title says... my backup software is apparently locking the DB files when the server does not for some reason (it happens about once a week). Then the database/s are stuck in recovery pending.

I fix it by restarting the MSSQLSERVER, but it's a bit annoying.

Can i configure the server to retry after a few minutes somehow?

Alternatively, can I tell the server to retry via a command? (I've googled, and the answers where stuff like putting the DB into emergency mode, run error checks, etc, but I know my case is a dumb backup software grabbing the file lock, the db itself is fine).

Thanks in advance.",1,sql,2020-10-13
i5d2ac,"When multiple 'when' lines within a case statement conflict with eachother, how can I select which ones take precedence over the other ones?","So in my code i used 'in' to select a bunch of project codes I wanted to be assigned as 'Accrued Benefits', but when I run my query. It only assigns 'S' as 'Accrued Benefits'. 

So now that I'm thinking this out.. I am guessing that that there is a conflict with some of the other case statements.. (Example, some of those codes might have ChargeType = 'H' so they get assigned as 'Overhead' before they would get assigned as 'Accrued Benefits'. 

So how can I decide which case 'when' takes precedence over another 'when' line item within a case expression?

edit: it also seems like when i remove the other 2 case 'when chargetype' items, the previous case expression doesn't even get applied to everything in my 'in' list. It only gets applied to the 'S' in my list.

Does Case when not work in conjunction with 'in' ? 


    select APEX.*,
    case when PR.WBS1 in 
    ('PT',
    'V',
    'H',
    'FL',
    'S',
    'T',
    'SHS',
    'PL',
    'SHFL') then 'Accrued Benefits'
    when PR.ChargeType = 'P' then 'Promo'
    when PR.ChargeType = 'H' then 'Overhead'
    Else 'Direct Project'
    End as [Project Type],
    PR.LongName, 
    PR.Name[ShortName]
    from APEX 
    LEFT join PR on APEX.Project = PR.WBS1 and PR.Sublevel = 'Y'",1,sql,2020-10-13
i58v1g,What's a scalable way to implement a substring match constraint,,5,sql,2020-10-13
i568sy,Creating cost function for cost constrained traveling salesman problem,"I'm a software engineer, but I have some task that usually data scientists do. I'm solving an NP-hard cost constrained traveling salesman problem for my internship. I need to create a cost function based on the data I have. The data consists of stuff like reachability of the place, road conditions, package info, etc. There are 5-6 such MySQL tables.

I have to get a benchmark path cost based on the data I have. Also I need to get a range within which the costs of the paths will fall. I'm struggling with this.

Probably the wrong community, but please help if u can.",1,sql,2020-10-13
i55hi7,How to ignore duplicates IDs with 1 column variation?,"I have a list of students between param 1 and param 2. The param being the academic period. Param 1 shows all students that started during param 1.  Param 2 is just the cut of so no students past param 2 are seen.  So if param 1 is Fall 2019 and param 2 is Summer 2020 then it shows all students who started in Fall 2019.  It shows their last enrolled period up to param 2.  Each row is supposed to be a unique students with their major and total credits up to param 2.  But I'm having a major issue with duplicate rows due to the student concentration.  If a student changes their concentration I get the student twice. So it looks like this:

Name-----Major------------Concentration----Total Credits---- Last Academic Period Attended

Kelly B----BSADMIN------- null------------------12---------------------Fall-2019

Kelly B----BSADMIN------- Finance-------------24--------------------Winter-2019

&amp;#x200B;

&amp;#x200B;

Right now I have something like this:

    select 
        ,ast.name
        ,ast.major
        ,ast.concentration
        ,max(ast.period) as Last Academic Period Attended
        ,sum(sc.credits) as Total Credits
    
        from academic_study ast
        join student_course sc
        on  ast.id = sc.id 
        and ast.period = sc.period
        join( 
            select distinct(id) 
            from 
            academic_study ast
            period = param1
            and new_student = 'Yes') beginPeriod 
            on beginPeriod.id = ast.id
    
    where 
      academic_period between param1 and param2
    
    group by
        ,name
        ,major
        ,concentration
    ;

I don't want duplicate students and I want the max academic period, regardless of whatever the concentration is.",1,sql,2020-10-13
i54xd9,Pls help me log errors when inserting from an external table.,"I want to insert only unique non-duplicate data into my table. 

Here's my code: 


    insert /*+ ignore_row_on_dupkey_index ( enzyme ( enz_name ) ) */
    into enzyme
    SELECT enz_name FROM EXTERNAL ((
      construct_id NUMBER(10),
      n_term VARCHAR2 (50),
      enz_name VARCHAR2 (3),
      c_term VARCHAR2 (50),
      cpp VARCHAR2 (50),
      mutations VARCHAR2 (50),
      mw_kda NUMBER (6, 2))

        TYPE ORACLE_LOADER
        DEFAULT DIRECTORY data_to_input
        ACCESS PARAMETERS (
            RECORDS DELIMITED BY NEWLINE
            skip 1
            FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '""'
            MISSING FIELD VALUES ARE NULL 
           ) 
        LOCATION ('CONSTRUCT.CSV')
        LOG ERRORS INTO ERR$_ENZYME ('INSERT') REJECT LIMIT UNLIMITED) ext
        where not exists (
            select * from enzyme e
            where e.enz_name = ext.enz_name
        );

I get: 

    Error at Command Line : 81 Column : 5
    Error report -
    SQL Error: ORA-00907: missing right parenthesis
    00907. 00000 -  ""missing right parenthesis""

Line 81 is the LOG ERRORS line. What am i missing? This code works perfectly fine without the LOG ERRORS line. But I'd really like to log errors.",6,sql,2020-10-13
i53qxr,Analytics vs Programming,If I was interested in analytics/ analyst type of role- should I start learning sql or python?,6,sql,2020-10-13
i53jnd,Oracle 11g Express Edition - Installation,"Does it make sense for an intro class to be using Oracle 11g Express Edition? 

Can I install it if I have Windows 10? If not, would using a more recent version be that much different if I have to follow along with the text?",1,sql,2020-10-13
i53j8w,Oracle Express Edition 11g - Installation,"Does it make sense for an intro class to be using Oracle 11g Express Edition? 

Can I install it if I have Windows 10? If not, would using a more recent version be that much different if I have to follow along with the text?",0,sql,2020-10-13
i52lid,Selecting into a non existent table.. Can someone help me remember the syntax?,"I know you can do a ""select into #temp""

but i remember an alternate method of selecting into a temporary table that's not literally written into the database, it just exists in memory for the duration of the query.. 

it's like you are a creating an alias for that sql query which you can then subquery from as if it were an actual table

does anyone know?",1,sql,2020-10-13
i51orl,SQL,Hi i don’t know if this the right place to ask i’m interested in pursuing a career in SQL. i’ve no experience at all what are the programs i should learn first obviously Sql and once i have an understanding of that where should i go after that please.,0,sql,2020-10-13
i50ynv,4 SQL Tips For Data Scientists And Data Analysts,,58,sql,2020-10-13
i4zfnn,Memory red-lining after export is complete,"Hello! A (poorly-written by previous coworker) script that I run monthly is ramping my pc to 98% memory usage when I export a roughly 90 MB CSV. 

After I shut down MySQL Workbench 8.0 CE, the memory stays sky-high. I've restarted my computer, tried two versions of the script (both have been previously used without this issue), same deal. 

The file does grow each month. I have 16 MB ram. Do I just need more? Or a better script? Or both?",1,sql,2020-10-13
i4yob1,[MS SQL] help needed creating a running balance with recursive CTE,"I'm attempting to create a rolling balance column in a transactions table.  I've worked with CTEs in the past, but not recursive CTE's which I think this needs to be.

I have two tables, A transactions table with an accountid, date and amount and a Table containing starting balances and an accountid.

    create table tmptransactions
    (
	id int,
	accountid int,
	transDt datetime,
	transAmt float
    );
    insert into tmptransactions (id, accountid, transDt, transAmt) values (1, 1, '2020-01-01', 25);
    insert into tmptransactions (id, accountid, transDt, transAmt) values (2, 1, '2020-02-01', -50);
    insert into tmptransactions (id, accountid, transDt, transAmt) values (3, 1, '2020-03-01', 75);
    insert into tmptransactions (id, accountid, transDt, transAmt) values (4, 2, '2020-01-01', 100);
    insert into tmptransactions (id, accountid, transDt, transAmt) values (5, 2, '2020-02-01', -50);
    insert into tmptransactions (id, accountid, transDt, transAmt) values (6, 2, '2020-03-01', -10);
    insert into tmptransactions (id, accountid, transDt, transAmt) values (7, 3, '2020-01-01', 10);
    insert into tmptransactions (id, accountid, transDt, transAmt) values (8, 3, '2020-02-01', -50);
    insert into tmptransactions (id, accountid, transDt, transAmt) values (9, 3, '2020-03-01', 25);

    create table startbalance
    (
	id int,
	accountid int,
	year char(4),
	month char(2),
	start float
    );
    insert into startbalance (id, accountid, year, month, start) values (1, 1, '2020', '01', 1000);
    insert into startbalance (id, accountid, year, month, start) values (2, 2, '2020', '01', 1500);
    insert into startbalance (id, accountid, year, month, start) values (3, 3, '2020', '01', 500);

First, I created a view so that I could get a unique row number by accountid (recid).

    create view vtmpTransactions as
    select 
	row_number() over(partition by accountId order by transDt) as recid,  
	id,
	accountId,
	transDt,
	transAmt
    from tmpTransactions

Now that I have that, I'm trying to build the CTE.  I'm creating the anchor just fine I think, but the with the recursive member, I'm not sure how to relate
back to the anchor so that it is recursive by accountid, stopping at the last transaction for that acountid.

    with cte_transBal as (
	select 
		a.recid,
		a.id,
		a.accountid,
		a.transdt,
		a.transamt,
		(a.transamt + b.start) as currBalance
	from vtmpTransactions a
	inner join startbalance b
	on a.accountid = b.accountid
	where a.recid = 1

	union all

	-- Not sure about this part.  I'm just returning null for the current balance for now, but with the join 
	-- set up this way, it errors out with a max recurison (or recurses infinitely with maxrecurison 0)
	select 
		aa.recid,
		aa.id,
		aa.accountid,
		aa.transdt,
		aa.transamt,
		null as currBalance
	from vtmpTransactions aa
	inner join cte_transBal bb
	on aa.accountid = bb.accountid
	where aa.recid &gt; 1

    )
    select * from cte_transBal
    --option (maxrecursion 0)

Ultimately, I'm looking for this as a result set (last column is the running balance)

    1	1	2020-01-01 00:00:00.000	25	1025
    2	1	2020-02-01 00:00:00.000	-50	975
    3	1	2020-03-01 00:00:00.000	75	1050
    4	2	2020-01-01 00:00:00.000	100	1600
    5	2	2020-02-01 00:00:00.000	-50	1550
    6	2	2020-03-01 00:00:00.000	-10	1540
    7	3	2020-01-01 00:00:00.000	10	510
    8	3	2020-02-01 00:00:00.000	-50	460
    9	3	2020-03-01 00:00:00.000	25	485

Any help would be welcome.  Thanks!",3,sql,2020-10-13
i4ya3r,"been learning for a couple of weeks, but am stuck on an exercise","I've been learning sql for the past 2 weeks and I am struggling with an exercise.

I am using PostgresSQL/SQLite

I think this should be done with a subquery, in which I'd first try to get the revenue of the MIN(date), and then check in my outer SELECT if it's bigger than that revenue. However I just can't seem to make it work. I'd appreciate some help

**table ""users\_revenue"":**  
**user\_id - system user id, STRING**  
**date - date of revenues, DATE**  
**revenues - total revenues, DOUBLE** 

I want to find out all the dates in which the revenue from a user was greater than the revenue on their first day.  
For example for the user AAA, with the following data  


user\_id, date, revenues  
AAA, 2018-01-01, 30  
AAA, 2018-01-02, 28  
AAA, 2018-01-04, 45  
AAA, 2018-01-06, 55  


output:

user\_id, date, revenues  
AAA, 2018-01-04, 45  
AAA, 2018-01-06, 55",1,sql,2020-10-13
i4v9rg,[Oracle] Need to pivot without an aggregate function.,,26,sql,2020-10-13
i4ulxr,Storing variable type of data?,"What is the best practice for storing variable data types in SQL?

I've been working on a personal project to challenge my full stack skills.  It's an online donation platform that organizations could sign up for and get a page that people could use to donate to them

My question comes from this, every transaction should have a foreign key that references the payment method, but the payment methods vary.  Initially you would have the ability to pay with credit card or bank account, later I might add more.

Credit cards have different fields to store than bank accounts.  For CC I might need to store number, expiration date, CVV code, and zip code.  For BA I might need to store bank name, routing number, and account number.

My initial thought is to just have all those columns in one table, and leave the unrelated fields nil.  I realized that if I later added in PayPal, Apple pay, SamsungPay, etc, then it would get progressively more complex.

What is the best practice for handling this?

Edit: I'm not planning to actually use this, I recognize that there are a lot of security concerns around payment methods.  This is strictly a pet project.",3,sql,2020-10-13
i4th5b,Create schemas with properties of existing tables in other schema,"I have a schema where I created all my tables and their relations (foreign keys, triggers and functions). How can I duplicate that schema with it all properties but without rows.

To put simply, I have a database of a school. All its tables(students, groups, subjects etc) and their relations are already created. I want to make this database multi-tenant using Separate Schema for Each Tenant (for each school in my case). 

Thanks",1,sql,2020-10-13
i4qutf,How to extract the following queries?,"&amp;#x200B;

`TRANSACTIONS = {'PRIM_ID':                 {0: 10010001, 1: 10010002},`

`'TRAN_DATE_TS':            {0: Timestamp('2020-03-30 02:48:00'),`

`1: Timestamp('2020-03-30 05:24:00')},`

`'NAVIGATION_STTS_KEY':     {0: 228, 1: 228},`

`'TRAN_DATE_TS_month_year': {0: 'Mar 2020', 1: 'Mar 2020'},`

`'TRAN_DATE_TS_Year_month': {0: '2020-03', 1: '2020-03'}}\`\`\``

&amp;#x200B;

&amp;#x200B;

&amp;#x200B;

&amp;#x200B;

`PROFILE_MONTHLY = {'PROF_MONTH':             {0: '2020-03', 1: '2020-03'},`

`'PRIM_ID':                {0: 20040003, 1: 20030002},`

`'PLAN_TYPE':              {0: 'COMBO 2', 1: 'COMBO 4'}}`

&amp;#x200B;

&amp;#x200B;

&amp;#x200B;

`PROFILE_Daily =   {'PROF_MONTH':              {0: Timestamp('2020-03-01 00:00:00'),`

`1: Timestamp('2020-03-01 00:00:00')},`

`'ACTIVATION_DT':            {0: Timestamp('2018-04-03 00:00:00'),`

`1: Timestamp('2018-03-31 00:00:00')},`

`'PRIM_ID':                   {0: 20040003, 1: 20030002},`

`'PLAN_TYPE':                 {0: 'COMBO 2', 1: 'COMBO 4'}}`

&amp;#x200B;

&amp;#x200B;

&amp;#x200B;

**\*\*Question 1.\*\***

&amp;#x200B;

Assuming we have the following PROFILE\_MONTHLY table that stores the mobile plan type

profile of all subscribers (PRIM\_ID) for each month. PROF\_MONTH is in the format of YYYYMM.

For subscribers with ongoing contract across months, the record will be repeated (i.e. PRIM\_ID by itself is not unique). Similarly, subscribers that have terminated their contract will no longer appear as a record for the subsequent months. Combination of PROF\_MONTH and PRIM\_ID is unique. Correlate the PROFILE\_MONTHLY table with the TRANSACTION table from question 1 to derive the mobile plan type profile of our Monthly Active Users.

&amp;#x200B;

This is the expected output.

&amp;#x200B;

`expected output1 = {'TRAN_MONTH': {0: '2020-03',`

`1: '2020-03',`

`2: ' 2020-04',`

`3: '2020-04',`

`4: '2020-04'},`

`'PLAN_TYPE':    {0: 'COMBO 3',`

`1: 'COMBO 4',`

`2: 'COMBO 2',`

`3: 'COMBO 3',`

`4: 'COMBO 4'},`

`'UNIQUE_USERS': {0: 2, 1: 2, 2: 1, 3: 2, 4: 1}}`

&amp;#x200B;

I tried but this did not give me the output

&amp;#x200B;

*""SELECT TRAN\_DATE\_TS\_Year\_month as TRAN\_MONTH, PLAN\_TYPE, COUNT(DISTINCT PRIM\_ID) AS UNIQUE\_USERS FROM TRANSACTIONS INNER JOIN PROFILE\_MONTHLY USING(PRIM\_ID) GROUP BY PRIM\_ID""*

&amp;#x200B;

**\*\*Question 2:\*\***

&amp;#x200B;

Assuming we have the following PROFILE\_DAILY table that stores the mobile plan type profile and contract activation date (ACTIVATION\_DT) of all subscribers (PRIM\_ID) for each month, and subscribers who changed plans within the same month will have multiple records for that month. PROF\_MONTH is in the format of YYYYMM and ACTIVATION\_DT is in the format of YYYY-MM-DD. Combination of PROF\_MONTH and PRIM\_ID is NOT unique. Correlate the PROFILE\_DAILY table with the TRANSACTION table from question 1 to derive the mobile plan type profile of our Monthly Active Users, using the plan type profile (PLAN\_TYPE) of the most recent activation date (ACTIVATION\_DT) within the same month.

&amp;#x200B;

&amp;#x200B;

`expected_output2 = {'TRAN_MONTH': {0: '2020-03',`

`1: '2020-03',`

`2: ' 2020-04',`

`3: '2020-04',`

`4: '2020-04',`

`5: '2020-04'},`

`'PLAN_TYPE':    {0: 'COMBO 3',`

`1: 'COMBO 4',`

`2: 'COMBO 2',`

`3: 'COMBO 3',`

`4: 'COMBO 4',`

`5: 'COMBO 6'},`

`'UNIQUE_USERS': {0: 2, 1: 2, 2: 1, 3: 1, 4: 1, 5: 1}}`

I tried but did not get the answer.

 *""SELECT TRAN\_DATE\_TS\_Year\_month as TRAN\_MONTH, PLAN\_TYPE, COUNT(DISTINCT PRIM\_ID) AS UNIQUE\_USERS FROM TRANSACTIONS INNER JOIN PROFILE\_Daily USING(PRIM\_ID) group by PRIM\_ID""*

&amp;#x200B;

&amp;#x200B;

Could someone please help me out with the following queries?

&amp;#x200B;

Thank you!",0,sql,2020-10-13
i4odb9,I am Facing issue writing Trigger for this Statement. (MySQL),"&amp;#x200B;

I am using MySQL. In Bold text The Schema of Table **Project** is given. and below that are the conditions which are to be done.  

&amp;#x200B;

**Projects (CNIC, Name, Start\_Date, End\_Date, Type)**

\- Write a trigger which does not allow user to insert data in above Projects table unless following constraints are met

a. CNIC must contain 13 digits

b. Name must contain only alphabets

c. Start\_Date must be lesser than End\_Date

d. Duration of Project must not be more than 5 months

e. Type can be either ‘Dev’, ‘Construction’, ‘Management’ or ‘Labor’.

f. Not more than 3 projects of same type must be inserted.",2,sql,2020-10-13
i4muwf,Is it worth learning SQL if I am mainly looking to build web/mobile apps?,"I am looking to learn a bit more SQL after dipping my toes through SQLite3 in Python primarily for web dev using Django.

My sense is that I can get a better conceptual understanding of modules like SQLite3 and MySQL by learning SQL in general. This bootcamp is heavily discounted, I'm wondering whether it is worth it? Or if it isn't necessary to take this large a detour in my journey to web/app development:

[https://www.udemy.com/course/the-complete-sql-bootcamp/](https://www.udemy.com/course/the-complete-sql-bootcamp/)",1,sql,2020-10-13
i4jh38,Filling in field with data from separate table,"Hello there,

So I am fairly new to using sql on a large scale like this. I mostly would offer feedback or compose a script over a few days time for certain batch processes in my previous work. I have a GIS background. 

I have a table that has information that is missing from a region field. I have a separate table that contains this data to which I can do a join based on an unique ID. 

Can someone please help me or point me to a resource where I can fully understand how to carry about this process? I used w3schools and stackexchange. 

Also realizing I need more peers amongst what I do in the event of things like this. 

To reiterate:

I want to join or selection based on an ID and fill the field with data where the region is missing and have that as an export. This will then later be used with an AGOL feature.",2,sql,2020-10-13
i4jdzt,Student/Noob could use some help,"Hey guys, any suggestions on my issue/error...

**Context:**

* I'm working on a final project for school.
* Using Microsoft SQL.
* I'm attempting to set a PK to each of my four tables I've created.
* I loaded the columns, tables, and content via a .csv files.

**Issue:**

When I attempt to set the PK I receive the same error for each table:

`'Section' table- Unable to create index 'PK_Section'.The CREATE UNIQUE INDEX statement terminated because a duplicate key was found for the object name 'dbo.Section' and the index name 'PK_Section'. The duplicate key value is (1).Could not create constraint or index. See previous errors.`

`The statement has been terminated.`

* I'm not sure how I can have duplicate keys when there aren't any set (see attached screenshot)
* Nothing obvious comes up on Google. I've been researching this longer than I'd like to admit.
* Any help would be appreciated. I'm open to feedback if you see anything else glaring too.

https://preview.redd.it/d0p9trytmaf51.jpg?width=563&amp;format=pjpg&amp;auto=webp&amp;s=1c1a28c58e0f2071af030538611c1424645b8a91

https://preview.redd.it/7nr6whytmaf51.jpg?width=647&amp;format=pjpg&amp;auto=webp&amp;s=4150553bb16d131add239954d617d080afe793c9",2,sql,2020-10-13
i46hfq,😩,,76,sql,2020-10-13
i45c0r,🐕,,399,sql,2020-10-13
i4fu3n,How we implemented subqueries in our open-source golang SQL query engine,,2,sql,2020-10-13
i4f86z,How to exclude a row from a COUNT,"Hi can someone help me..I am trying to get a count of all rows except where one has a specific id. This is what I have an cant get it to work..Have tried NOT, != ,&lt;&gt; ,NOT IN, and all other suggestions online..

 SELECT COUNT(GuestId)TotalBooked FROM GuestStayDetails WHERE (@ArrivalDate = ArrivalDate) OR (@DepartureDate = DepartureDate)  OR (@ArrivalDate &lt; ArrivalDate AND u/DepartureDate = DepartureDate)  OR (@ArrivalDate = ArrivalDate AND u/DepartureDate &lt; DepartureDate) OR (@ArrivalDate &lt; ArrivalDate AND u/DepartureDate \&gt; DepartureDate) OR (@ArrivalDate &lt; DepartureDate AND u/DepartureDate \&gt; DepartureDate) OR (@ArrivalDate BETWEEN ArrivalDate AND DATEADD(Day, -1, DepartureDate)) OR (@DepartureDate BETWEEN DATEADD(Day, -1, ArrivalDate)AND DepartureDate) AND Student = 1 AND Cancelled = 0 AND GuestStayDetails.GuestId != u/GuestId

If I remove the last AND statement (GuestStayDetails.GuestId != [u/GuestId](https://www.reddit.com/u/GuestId/)) the query works fine and gives me the result I want but I need to exclude the specific GuestId from the count!",1,sql,2020-10-13
i4ea8x,Substring function without duplicates,"Hey everyone.

I have this query in SQLite:

    SELECT  Type || "" "" || Category || "" "" || Attackon, 
    substr(Dateandtime,7,4) || substr(Dateandtime, 3,3) || ""/"" || substr(Dateandtime,0,3),
    Type,
    Category,
    Attackon,
    Civiliankia,
    Enemykia,
    Iraqforceskilled,
    Coalitionforceskilled
    FROM Deaths_only
    ORDER by substr(Dateandtime,7,4) || substr(Dateandtime, 3,3) || ""/"" || substr(Dateandtime,0,3) ASC
    LIMIT 50

and I wanted to know if there was a way to select ""substr(Dateandtime,7,4) || substr(Dateandtime, 3,3) || ""/"" || substr(Dateandtime,0,3)"" WITHOUT duplicates (so, only 2004/01/01, not twice or more). How would one do that? I tried DISTINCT, but it didn't work.

The file is from Kaggle, and is called ""Deaths only.csv""",1,sql,2020-10-13
i4cooj,How can I query the counts for all records whose start dates are within a specified limit and end dates are within a specified limit.,"Example. I want to count how many students in a database table who where enrolled after 2002 and graduated before 2006. How can I set up my sql code?

\----- I have the below but it doesn't work -------

**SELECT COUNT (student\_id) FROM table\_name**

**WHERE start\_date = '2002%' AND completion\_date = '2006%';**",1,sql,2020-10-13
i49z9f,"Is it necessary to have a table with 1 unique key in JOIN, always?","As in, when we JOIN wrt a key, does the key have to be unique in any 1 of the table?

Edit: let's assume that it is compulsory to have a key.",3,sql,2020-10-13
i49isp,What does this error mean in SQL?,"ERROR:  relation ""conditions"" does not exist

&amp;#x200B;

CONDITIONS is a table name and certainly exists",2,sql,2020-10-13
i47fou,I need an SQL query that reads a date from another table and checks if one table does not have an ID.,"I am making an android app. I need the query to read if an ID does not exist in a table because this will tell me if the user has completed a survey. I already have a query that tells me if it does exist. I need the query to read their entry date because this will tell me how late they are on completing the survey.

I have been doing some research and  **NOT EXISTS** operator seems to be the way to go but I also need to join because I need ""date"" column from ""Users\_table"" and ""id"" - read if does not exist from ""survey table"". 

Survey Table:  **id ,Q1Medical,Q2Safety,Q3Completing,Q4TP,Q5Supervisor,Q6English,Q7Hours, Q8AdditionalTimeofCompletion** 

Users Table: id, name, email, start\_date, end date,",17,sql,2020-10-13
i44sg8,Select all record for a date less than another date field SQL.,"Hi im doing a query involving selecting records from two fields(approved\_at &amp; submitted\_at).Statement is considered true if approved\_at date is less than 4 days from submitted\_at date. 

eg : approved\_at = 8/4/2020

submitted\_at = 8/1/2020 

    SELECT * FROM companies
      WHERE approved_at &lt; DATE_ADD(submitted_at,INTERVAL 4 DAY);

Am i on the right path or totally delusional?

Some pointers on this would be appreciated.",1,sql,2020-10-13
i41aw4,What's the best place to host a free and easy to use database? Need to use SQL on this CSV dataset,"Hi guys, 

I'm playing around with SQL and have a dataset that I have in CSV format that I want to run queries against. What's the best way to put that in a platform/website/server that is free and easy to use? 

I don't need it to be extremely powerful, I just need to run queries against it. Preferably something that has a CSV import, is this even possible? 

Thanks for the help!",2,sql,2020-10-13
i3wcgu,ElectroCRUD - Over 1.1k Starts on Github | Join The Team &amp; Help us to deliver the best OpenSource CRUD Application.,,2,sql,2020-10-13
i3vhnn,Database design,"I want to create a database for storing communcations on different platforms such as sms, messenger, emails, phone calls, etc.

I dont know how i should design my database to support this structure where multiple tables have stuff in common, but some dont.

Regrouping all my different types of communication in a single table named ""Communications"" would result in rows always having some null values. For example, a phone call does not have a text body, sms and messenger dont have a subject and so on.

Ive read some articles about polymorphic relationships, but im still confused and unsure on what to do.",1,sql,2020-10-13
i3usom,SQLite IN() with Node Js,"I am trying to run a simple query from my node application that looks something like this:

`db.all('UPDATE players SET in_revote = 1 WHERE user_id IN (?)', [tiedPlayers])`

tiedPlayers is an array of integers, ex. \[2, 3\], and this is proven when I log it to the console.

I have even tried manually setting an array and passing it in:

`var testArray = [2, 3];`

`db.all('UPDATE players SET in_revote = 1 WHERE user_id IN (?)', [testArray])`

Neither of these things work, yet running the query from the SQLite workbench like this works:  
`UPDATE players SET in_revote = 1 WHERE user_id IN (2, 3)`

I am pretty sure I have narrowed the issue down to the fact that SQLite is not recognizing the array (the data type of user\_id in the db is INTEGER - I have also tried INT).

If anybody knows what is going on that would be great. Thank you!",1,sql,2020-10-13
i3u11b,How to convert string duration to time so that I can sum them? (Presto),"I currently have a column that have durations in the format ""HH:MM:SS"" which is saved as strings. Some of these are less than 24 hours, so can appear like a timestamp, but some are for example ""45:22:59"". I want to do some calculations with these durations to figure out the total time spent on a project or if the hours are more than a given int value, etc.

How can I do this in Presto SQL?",1,sql,2020-10-13
i3sziv,[MS SQL],"SQLeets,

I have an interesting problem that I need help solving.

Let me set up the scenario for you:
I have a set of accounts bound to a set of value metrics. (For clarity but not necessarily relevant, these metrics are recorded daily or monthly)

AccountID | MetricID
---|---
1 | 1001
1 | 1002
1 | 1003
1 | 1010
1 | 1011

MetricID | MetricName | MetricType
---|---|---
1001 | Lines Shipped | 1
1002 | Shipping Hours Worked | 1
1003 | Inspections Completed | 1
1004 | Inspection Hours Worked | 1
1010 | Deliveries Made | 1
1011 | Late Deliveries | 1
... | ...
2001 | Lines Shipped Per Hour | 2
2002 | Inspections Per Hour | 2
2003 | Late Delivery Percentage | 3

These value metrics then end up feeding into ""report"" or calculated metrics

MetricID | ValueMetricID | ValuePosition
---|---|---
2001 | 1001 | 1
2001 | 1002 | 2
2002 | 1003 | 1
2002 | 1003 | 2
2003 | 1011 | 1
2003 | 1010 | 2

What I need to do is select the metrics that are not only bound to a certain account, but also those that are able to be calculated, given an account id.

So if I provided @AccountID = 1, my result would look like



MetricID | MetricName 
---|---
1001 | Lines Shipped 
1002 | Shipping Hours Worked
1003 | Inspections Completed 
1010 | Deliveries Made
1011 | Late Deliveries
2001 | Lines Shipped Per Hour
2003 | Late Delivery Percentage 

I've been trying to use cursors and while loops but even small result sets take a long time that way and I'm usually working with 1000+ metrics per account.

I'll throw up some code I've tried here in a few hours when I'm not running late to my dad's birthday dinner.

Thanks in advance for your help.",2,sql,2020-10-13
i3r7rc,SQL Server 2019 CU6 Released,This is my post about SQL Server 2019 CU6 being released today.,3,sql,2020-10-13
i3p9fg,Question about doing a MYSQL job test,"I applied to a finance job and I made it really clear that I've only ever played around with SQL once in a while and did a Beginner to Adv course on udemy.  So anyways now I have to do this 2 hour SQL test within the next 2 weeks.  My 1st question is will the info I was taught be 100% applicable to this test? I know data is probably hosted on different servers but the code should all be the same right as long i'm doing MYSQL right?  I'm assuming MYSQL will be an option, but if it's some other SQL is that going to be a problem?

At this point i'm just redoing the course as a refresher.  Is there anything else I should 100% be prepared to do?  or any advice?",1,sql,2020-10-13
i3ovhd,Switching unit-level table from long to wide format,"Hi everyone,

I've spent hours searching but couldn't find a workable solution for my problem. It looks like pivot gets me the closest but I couldn't get it to work the way that I need it to work (it seems like pivot only works with aggregated data?).

I have a table that looks like this:

&amp;#x200B;

|ID|Test|Score|
|:-|:-|:-|
|123|SAT|1200|
|123|ACT|35|
|123|Other|65|
|456|SAT|1210|
|456|ACT|32|
|456|Other|81|
|789|ACT|25|
|789|Other|89|

&amp;#x200B;

I need to transform it to this:

&amp;#x200B;

|ID|Test\_1|Test\_1\_Score|Test\_2|Test\_2\_Score|Test\_3|Test\_3\_Score|
|:-|:-|:-|:-|:-|:-|:-|
|123|SAT|1200|ACT|35|Other|65|
|456|SAT|1210|ACT|32|Other|81|
|789|ACT|25|Other|89|||

&amp;#x200B;

Note that not all IDs have scores at all tests. Ideally, test\_# would always be the same test but if that's not possible, I can probably work with the data as is. SPSS would do this with the casestovars command but I can't find something that works as well with Oracle SQL. My table has around 20,000 records in it.

Thanks very much in advance!

&amp;#x200B;

Update: I was able to do this using the following code, thanks for the help!:

SELECT 

\* 

FROM

 

(SELECT 

ID

,TEST

,SCORE

&amp;#x200B;

FROM 

TEST\_TABLE

)

&amp;#x200B;

PIVOT(

SUM(SCORE)

FOR TEST\_COMPONENT IN ('SAT','ACT','OTHER')

)

&amp;#x200B;",1,sql,2020-10-13
i3nia8,Question with ToDo list storage,"For the past week or so I've been trying to find a way to store a ToDo list for different users. I know that creating a table for each user is not good practice, so I did a seemingly backwards way of solving it, and for context, I used SQLite. I created one table that stored an id, a user's name, and their task. Through this schema, the order in which the tasks were stored was based on who entered it in first so it would look somthing like this:

1, UserA, 'Feed the dog',
2, UserA, 'Do homework',
3, UserB, 'Get groceries',
4, UserC, 'Clean the house',
5, UserA, 'Walk the dog'

Of course this isn't a real example of my little app, but I hope it gets the point across; it's not well constructed. And trying to select the correct data out of this schema is very convoluted.

How would one store each user's tasks more efficiently? 

I am pretty new to all of this SQL madness; thank you",1,sql,2020-10-13
i3nbyr,[MS SQL] Help with insert trigger.,"I am doing a mass insert from one table to another, about 45,000 records in a SQL Express DB.  The table I am inserting into, Edits, does this just fine when it is empty.  If I try and do the insert when there are records already in there I get errors.  I have narrowed the errors to part of our insert trigger which converts an integer into a date string. Shown below.

    update Edits set rtrdate = [dbo].[fn_IntToDateString](Convert(int, i.rtrdate))
    FROM Edits
    inner join inserted i on i.EditID = Edits.EditID
    where 
	    NOT (i.rtrdate IS NULL)
            AND (i.rtrdate &lt;&gt; '')

The problem is that fn_IntToDate is being called on the records that have already been converted in the Edits table even though this does not set that value to rtrDate. I do not get why it would call that function on records that do not meet the inner join and where criteria.  I have also done a select on the inserted to see that the records with the ""Bad Date"" are not listed in there.

Here is what the message looks like:
Msg 245, Level 16, State 1, Procedure Trigger_EditsInsert, Line 31 [Batch Start Line 0]
Conversion failed when converting the nvarchar value '9/4/2018' to data type int.

Here is another version of the update I tried that produces the same error.

    update Edits set rtrdate = [dbo].[fn_IntToDateString](Convert(int, rtrdate))
    where 
        (Edits.EditID in (select EditID from INSERTED i)) 
        AND (NOT (Edits.rtrdate IS NULL))
        AND (Edits.rtrdate &lt;&gt; '')

Again this problem goes away if I truncate the Edits table or if I insert one record at a time.  It also does not occur if I comment out [dbo].[fn_IntToDateString](Convert(int, rtrdate)) and replace it with an arbitrary Date String '11/11/1950'.

Any help would be greatly appreciated.

*EDIT I may have figured out my solution with inspiration from quickdraw6906.

    update Edits set INVDate = [dbo].[fn_IntToDateString](Convert(int, i.rtrdate))
    FROM Edits
    inner join inserted i on i.EditID = Edits.EditID
    where ISNULL(i.rtrdate , '') &lt;&gt; ''

It seems that combining both parts of my where clause, with ISNULL, is giving me the results that I want.  If anybody could share why that is I would appreciate it.",1,sql,2020-10-13
i3mqj2,MySQL 5.6.10 not accepting multiple statements delimited by semicolon ;,"Does this version just not support multiple statements in a single call to the database?

My statement is like 

    CREATE TABLE yadada (
         columns yada
    );
    
    CREATE INDEX ix_yadada (
          column1,
          column2
    );

It throws an error that the CREATE INDEX statement stating there is a syntax error.

Curious if anyone has encountered this.",1,sql,2020-10-13
i3ly6a,SQL Server: Best ETL tools for importing large sets of data,"I'm finally throwing in the towel on SSIS. Just cant deal with all the random jankiness and errors anymore. Have approval to purchase a new ETL software and I'm hoping for some help. Has anyone had good experiences with an ETL tool bringing data (flat files, CSV's, excel, etc) into SQL server? I've heard Informatica suggested before but their marketing looks very cloud focused.",2,sql,2020-10-13
i3lhge,Getting started as a Database Administrator,"I'll be graduating in December with a degree in Information Management. I've worked with SQL in classes and played with MySql, but never worked with a real database. I want to get a job as a database admin, but I'm not sure if I'm qualified with what they're looking for and don't know how to get said experiences.
And advise from those who remember thier time at the bottom? 
I'm familiar with Access and MySql(need real world practice). Never worked with Oracle.
I think I'm mostly feeling anxious of wrapping up my degree and still not feeling qualified.",2,sql,2020-10-13
i3ldbo,"Can you help me fix this? im not sure what am I missing here , "" Missing right parenthesis""","       CREATE TABLE sales.contacts (
        contact_id INT (1,1) NOT NULL  ,
        first_name VARCHAR2(100) ,
        last_name VARCHAR2(100) ,
        email VARCHAR2(255) ,
           CONSTRAINT constraint_name PRIMARY KEY (contact_id)
    ); -- EDIT: I took the code from a website teaching about altering duplicates, could it be the INT ? ",1,sql,2020-10-13
i3gzuy,Glad I took the time to learn SQL...soft skills only get you so far,,318,sql,2020-10-13
i3f4v4,"Hello all! I'm currently a trainee management accountant in the UK (part qualified CIMA) and want to learn SQL to add to my skillset. Can anyone recommend a good course that doesn't take too long, cost too much and provides certification at the end?",,0,sql,2020-10-13
i3d84a,Learning oracle,"Hey guys,

I started a new job in which I have to learn SQL. It's my first programming language. So by now, I'm sitting with a sql basics book in front of my working pc and try to write some basic codes that work

Now my problem is we have our databank in which the format of the date is YYYYMMDD and my  task is I have to let it show as MM/YYYY. Now I tried using to_char, but I can't figure out how to do that.

Has someone an idea? Is there a online resource I could also use?",6,sql,2020-10-13
i3d13w,Using a variable in recursive query,"
I have a recursive query

    WITH RECURSIVE cte AS (
      SELECT id, follower, ARRAY[id] AS path
      FROM user
      UNION ALL
      SELECT id, follower, id || path
      FROM user
      JOIN cte ON user.id = cte.follower
      WHERE NOT path @&gt; Array[user.id]
    )
    SELECT * from cte

It gives the following result:

    id | follower    | depth | path
    ---|-------------|-------|-----
    1  | 2 (bob)     | 0     | {2}
    2  | 3 (charlie) | 0     | {3}
    3  | 3 (charlie) | 1     | {2, 3}

Notice that I'm using `path` column which is generated for each row. 

I want this `path` column to be an external variable instead. 

I can solve it in my code (Node.JS) by keeping a **global** cache (`path` equivalent).

    const path = {}; /* &lt;-- GLOBAL */
    function recurse(user) {
      for(const follower of user.followers) {
        if (!(follower.id in path)) {
          path[follower.id] = {...follower, depth}
          recurse(follower);
        }
      }
    }

How do I do the equivalent in SQL? I.e. use a global/external variable instead of a generated column?

I'm using Node.JS and PostgreSQL.",2,sql,2020-10-13
i3d02s,I’d like to learn coding....from scratch,"I’d very much like to learn coding...Mostly as a hobby... I do have some basic skills in SQL. Self taught skills....I haven’t tried taking any online courses because I’m not at all confident that I can learn coding by myself(not thru online school)....that’s why I’m here....any suggestions about how to find someone willing to teach me? Not in person of course, but thru zoom or skype...I’m willing to hire someone who can teach me....English speaking....

Thank you!",17,sql,2020-10-13
i39nt2,[HELP] Column attribute returning None,"&amp;#x200B;

UPDATE

Turns out I was pulling data from the wrong database which caused my test strings for users to return None.  Once I got that sorted they returned their actual values.

&amp;#x200B;

Hi folks,

I'm using SQLALCHEMY in Python and have the following tables:

    class Feedback(Base):
        __tablename__ = ""feedback""
        id = Column(Integer(), primary_key=True,autoincrement=True)
        post_id = Column(String(10), unique=True)
        author = Column(String(100))
        receiver = Column(String(100))
        user_id = Column(Integer(), ForeignKey(""users.id""), nullable=False)
        message = Column(Text(10000),default=None)
        feedback_type = Column(Integer())
        count_to_total = Column(Boolean(),default=True)
    
        def __init__(self, post_id, author, receiver, feedback_type, user_id, message=None, count_to_total=True):
            self.post_id = post_id
            self.author = author
            self.receiver = receiver
            self.message = message
            self.feedback_type = feedback_type
            self.count_to_total = count_to_total
            self.user_id = user_id
    
    class Users(Base):
        __tablename__ = 'users'
        id = Column(Integer(), primary_key=True, autoincrement=True)
        name = Column(String(100), unique=True)
        total = column_property(select([func.sum(Feedback.feedback_type)]).where(and_(Feedback.user_id==id, or_(Feedback.feedback_type==-1, Feedback.feedback_type==1))))
        feedback = relationship(""Feedback"")
    
        def __init__(self, name):
            self.name = name

&amp;#x200B;

In the Users table under the total attribute, I'm using column\_property to map a SQL expression that sum's all the feedback\_type values where feedback.user\_id is equal to [user.id](https://user.id).  The main issue is that I'm getting a none value back even though that person has feedback to be summed.

&amp;#x200B;

Let's say I have a user, John, who has 4 positive feedback.  When I do

    john = session.query(Users).filter_by(name==""john"").first()
    
    print(john)
    
    $ &lt;Users object at memorylocation&gt;
    
    print(john.name)
    
    $ john
    
    print(john.total)
    
    $ None

So, I know the following,

* John exists as a record in the database
* John's total attribute returns None

&amp;#x200B;

When I check his feedback and run the following similar query using SQL,

    SELECT SUM(feedback_type) FROM Feedback WHERE receiver==""John"";
    
    $ 4
    
    or
    
    SELECT SUM(feedback_type) FROM Feedback WHERE receiver==""John"" and (feedback_type==1 or feedback_type==-1);
    
    $ 4

I get the  SUM(feedback\_type) = 4.  So, I'm not sure why my issues are occurring the way they are.  Any advice?  I've followed the following examples and could not find a solution:

* [https://docs.sqlalchemy.org/en/13/orm/mapped\_sql\_expr.html](https://docs.sqlalchemy.org/en/13/orm/mapped_sql_expr.html)
* [https://stackoverflow.com/questions/56761314/sqlalchemy-column-property-based-on-other-rows](https://stackoverflow.com/questions/56761314/sqlalchemy-column-property-based-on-other-rows)
* [https://stackoverflow.com/questions/12171189/sqlalchemy-column-property-basics](https://stackoverflow.com/questions/12171189/sqlalchemy-column-property-basics)

&amp;#x200B;",3,sql,2020-10-13
i393rq,Open per week,"So I have a start date a.start_date and an end date a.end_date. I want to show an a.id per week when it was open. The week would be labeled as that Monday. 
08-03-2020
08-10-2020
Etc 

08-03-2020 would be every case with a start date less than or equal to the end of the week (08-09-2020) and the end date is either null or greater than the end of the week (08-10-2020)",1,sql,2020-10-13
i37a61,Looking for a CRUD system/front end to replace excel,"Hi, not sure if this is the correct sub for this question however I am looking for advice on how to implement a web-based CRUD system.

**Problem:** I need to track and schedule orders, these orders are raised and managed through a GUI which is not very practical to get a overview and I am limited on what additional data I can add.

The software is fairly old and development is slow, any request I make will either cost far too much or will take too long for the dev team to implement. The database is also fairly messy, although I have only had a brief look it does not seem to be the best maintained database...

**Current solution:** I am pulling the data into excel using ODBC and using PQ. I have a table which shows all the orders on the system which refreshes every 5 minutes. I then filter this to show the required information and then use conditional formatting/filters to give me a rough overview of the status of these orders.

I then have some additional columns which I can edit and store additional information (such as assigned staff, notes etc) this is then saved to the excel file and not sent back/stored in SQL.

**Limitations:** 

* I am unable to write back to the database (although I do have access I do not want to touch the backend of the production system)
* Excel is not the best option due to system crashes and quirks of using it in this manner.
* Unable to easily process the additional data I capture in other applications

**Proposed solution:** Mirrored SQL + Web based CRUD system

*Mirrored SQL*

I plan on setting up another database which syncs from the main MS SQL server, this would mean I can make all the changes I like without interfering with the production environment. I am in talks with our IT guy about this but we are unsure on the best way to do this? 

We do not want the original database to be put at risk, so we only want the sync to be one way with updates fairly frequently (say no more than 5 minutes, preferably less) while keeping the additional data from the second DB/Server.

Any input here would be appreciated  


*Web based CRUD system*

I then want to be able to display the data in multiple web applications/formats - first task is to create a ""scheduling"" table. For now I will be happy if I can copy what my Excel document does... simply shows the view of the order table but with additional column where I can input needed information (number of items, staff, end date, notes etc) I want/need to be able to edit the additional columns in-line (I want to avoid filling out a form for these changes). I will be spending quite some time looking at this screen so bonus points if it can be easy on the eye ;)

I was wondering if anyone could suggest some starting points for me to begin looking into, I was thinking of using either view.js or laravel for this as I have limited time to put into this and will be mainly doing the development out side of work/my time with the odd hour or two per week at work/lunch breaks. I was thinking of getting a premade template of sorts to save some time also.

I had a look at ag-Grid and this seems to do what I need (and more).. but I am open to ideas!",1,sql,2020-10-13
i373lx,[MySQL] Best Practices for Large Datasets,"I've started a new SQL based project and I was wondering if anyone could give me any advice on best practices for large datasets.

The data is airline arrival/departure data since 2016. I have 52 csv files, each with about 300k records in them (avg file size is about 150 mb). The files are all in a single folder and each named their applicable ""Month_Year"".

What's the best way to organize this amount of data in MySQL? My first inclination is a system like:

MasterDatabaseSchema

     - Year1DataTable

     - Year2DataTable

     - Year3DataTable

This seems like the right mix between breaking down the data into usable chunks while still letting me take advantage of things like views to get specific kinds of data, specifically around airport performance from month to month.



That being said, it already takes a lot of time to load a single month of data into the table view in workbench, so loading a years worth of data seems like it will be cumbersome.

My questions are twofold:

1. Does anyone have any suggestions on better ways to organize this data. Better can be based on usability or a ""more SQL"" way to organize it. I understand that the allure of using SQL is relational databases. So I could, for example, make a database of arrivals and a database of departures and a database of delays and use the airport as a PK, but that somewhat bypasses the issue that I have almost 16 million records and need to figure out how to manipulate them.

2. Are there better options for importing large csv's than just writing a script and letting it run for 2 days? Am I going to have issues with that much data once I'm in workbench?

Any advice would be welcome.",1,sql,2020-10-13
i36gwu,sqlzoo window lag problem #8 getting wrong dates but correct peak cases,,1,sql,2020-10-13
i32t9b,ANSI vs. Oracle joins - help my coworkers and I settle a debate!,"***In your opinion***, what is best practice for SQL joins?

ANSI style (in FROM)

or

Oracle style (in WHERE)

&amp;#x200B;

Obviously this is programmers discretion to a certain point, and there are times where one or the other is better, but I'm talking from a general standpoint.

About half of my office views it one way, half views it the other way. It's been a heated discussion multiple times on ""who is right"". (I normally stay out of it, and code the way I feel comfortable while trying to understand both so I can read either way, but thought it would be fun to know other opinions)",1,sql,2020-10-13
i318v4,LEFT JOIN returns extra rows,"I have a query that returns more rows than the number of records that exist in the table. Conceptually, how is this possible? The columns that I join on are a primary key on the left table and a foreign key on the table on the right. Foreign keys are unique, I thought, right? There couldn't be duplicates...

Let's say the query looks something like this:

    SELECT
        p.ID
        ,p.FirstName
        ,p.LastName
        ,n.PhoneNumber
        ,p.Email
    FROM
        dbo.People p
    LEFT JOIN
        dbo.PhoneNumber n ON p.ID = n.PersonID
    ORDER BY
        p.LastName
    GO

This query I'll say returns 106 rows. Whaaaat?

The People table contains 100 rows. The PhoneNumber table contains 95 rows (NULLs allowed in People).

If you do a COUNT() on PersonID in the PhoneNumber table, it returns only 1 for each row, indicating that there are no duplicates.

    SELECT
        ID
        ,Number
        ,PersonID
        ,COUNT(PersonID) AS 'Num'
    FROM
        PhoneNumber
    GROUP BY
        ID, Number, PersonID
    GO

This is not the actual data or numbers. Just an oversimplified example. Do I need to submit to a drug test?

edit: fixed column name",2,sql,2020-10-13
i30ejg,Would anybody be interested in an SQL to Pandas translator?,"I know there's already an sqllite3 library for python that creates a temp db to run queries on CSVs, so I'm checking if an SQL to Pandas tool would actually be useful for data scientists, especially those who find SQL far more intuitive (like me)",3,sql,2020-10-13
i30147,New Job - Need Direction Please,"I'm tasked with creating a data dictionary of our data warehouse, as well as re-create the ERD (as it doesn't seem to be accurate). I really don't even know what a data dictionary is - just listing out tables with their columns and attributes and descriptions? 

I am told I can ask for help anytime but I really don't know where to start. Like if the existing ERD isn't accurate, how do I go about investigating the db and creating a new one?

Any and all help is appreciated - sorry if these are noob questions.",3,sql,2020-10-13
i2yvem,"Hi, I am looking for a career change and was wondering if anyone could recommend any resources to begin learning SQL. I’ve taken a college course that had the basics but I do want to expand upon.",Graduated From college last year with a finance degree. having a difficult time finding a job and looking to change or further expand my knowledge to learning SQL and implementing it in a financial role.,43,sql,2020-10-13
i2yc1k,Isssue with Combining data within same table,"I have a table with data as follows

    InputTable:

    Name  DateofTraining  SourceofData
    Jack      14/4              A
    Jack      18/4              A
    Jack      20/4              A
    Jack      21/4              B

I want my latest record from 1st source ignored and instead replaced with the record from source B in case the name Jack has a source B,else display only the records from source A.

    My output should be as below: if 4th record was there in Input table
        
            Name  DateofTraining  SourceofData
            Jack      14/4              A
            Jack      18/4              A
            Jack      21/4              B
    
    My output should be as below: if 4th record was not there in Input table
        
            Name  DateofTraining  SourceofData
            Jack      14/4              A
            Jack      18/4              A
            Jack      20/4              A
 

How do I achieve this,any help would be appreciated.",1,sql,2020-10-13
i2yc08,Child in Parent or Parent in Child,"How do you know when to put the child id in the parent or put the parent id in the child say i have. POs with POline item its obviously a one to many and PO line is the child, but how would I know if I should put the poLineId in POs or PoID in POline table?",2,sql,2020-10-13
i2xhy6,PostgreSQL Beginner Guide,,5,sql,2020-10-13
i2x2b4,SSMS Query Problem,"Hello all

I recently made a script that counts the amount of rows in a table. Here is the script:

\_\_\_\_\_\_\_\_\_\_\_\_\_\_

Declare  CountingRowImport int = (select COUNT(\*) from DeviceManagmentImport772020)

print countingrowimport

While CountingRowImport &gt;= 0

Begin

print CountingRowImport

set CountingRowImport = CountingRowImport - 1

Select \* from ( Select ROW\_NUMBER() OVER(Order By Client) as RowNum , \* from DeviceManagmentImport772020 ) DeviceMGMT where RowNum = CountingRowImport 

End

\_\_\_\_\_\_\_

This script puts everything in different rows. How do I combine all these into ONE table? Any ideas?",2,sql,2020-10-13
i2w42q,"I(m31) mba candidate, trying to broaden knowledge with business and analytics but scared it might be too late..","hi just trying to find someone whom i can relate this feeling with..im 31, currently, taking an mba degree and hopefully will graduate by 2021. I just realized that the skills you learn in an mba degree, especially, analytics is like scratching the surface of its potential. now, ive decided to include sql with it. is too late for me?",5,sql,2020-10-13
i2vo06,How do I access a database stored on a local server?,,4,sql,2020-10-13
i2tliu,Help with SQL Query,"I am using postgres and I need to create a query that will pull out only rows where columns 'dsc' and 'name' are the only matching occurrences. For example if I have the following table with the data below.

I want to be able to execute a query like this \`SELECT id FROM x\_table WHERE dsc not in ('W2','W3')\` and have that query return the following ids: \[4, 5, 8, 9\]. So I want to exclude from the result all rows where 'W1' is not the only match for the name column in the table. If anyone could help me out with this it would be much appreciated. Thank You.

x\_table:

|id|name|dsc|
|:-|:-|:-|
|1|A|W1|
|2|A|W2|
|3|A|W3|
|4|B|W1|
|5|B|W1|
|6|C|W1|
|7|C|W2|
|8|D|W1|
|9|D|W1|",1,sql,2020-10-13
jakcjf,Best way to connect Postgresql to SQL?,"In my company there are only a handful of SQL users.... And like 50 people that only use spreadsheets. A huge problem is that sometimes they send each other spreadsheets rather than actually updating the database

What would be the best way of connecting excel to the database and let users just refresh the data rather than copying/exporting from the database onto excel?

I tried the odbc on the Postgresql but i wasn't successful. Also I'm on a mac but most people will have Windows",2,sql,2020-10-13
jajecc,"When I add a ""select"" statement, I jump from 3.6 results (correct) to 55K results. Why!?","I need a list of all students' answers to a quiz. There are 900 students &amp; 4 questions, so there should be 3,600 results. I'm inner joining all 9 tables needed to get from *students* table to the *questions* table and then the *answers selected* table.

With all these tables inner joined - INCLUDING the answers table - when I select only *students name* and *question text*, I get the correct 3.6K results - each student listed 4 times with the different question text.

e.g. 

    **With the answers table join but without the select answers statement**

    bob, cats or dogs?
    bob, coffee or tea?
    bob, ice cream or cake?
    bob, wine or beer?
    Sally, cats or dogs?
    Sally, coffee or tea?
    Sally, ice cream or cake?
    Sally, wine or beer?

Etc.

What I WANT is to have the student answers as well, like this:

    **So this is what I want**: 

    bob, cats or dogs? CATS
    bob, coffee or tea? TEA
    bob, ice cream or cake? CAKE
    bob, wine or beer? BEER
    Sally, cats or dogs? DOGS
    Sally, coffee or tea? TEA
    Sally, ice cream or cake? ICE CREAM
    Sally, wine or beer? WINE


So the solution should be just to add to the select statement, ""student answers"".

But when I do, this suddenly this jumps to around 55K results. A single student name now has 66 rows instead of 4 - it lists each question AND each answer, and some of the answers are listed multiple times. 

    **So what I get when I add to the select statement *student answers* is**

    bob, cats or dogs? CATS
    bob, cats or dogs? DOGS
    bob, coffee or tea? TEA
    bob, coffee or tea? TEA
    bob, coffee or tea? TEA
    bob, coffee or tea? COFFEE
    bob, ice cream or cake? CAKE
    bob, ice cream or cake? ICE CREAM
    bob, ice cream or cake? CAKE

Etc, going from the correct 3.6K rows to a whopping 55K rows.

I have no idea what's happening?! How does adding a select change the results? Please help!!

[**SQL in PasteBin here**](https://pastebin.pl/view/38fd1539)",2,sql,2020-10-13
jaj2ks,SQL BOOK,"I have completed all practical of sql but I want to learn what does it do,

like want to LEARN SQL THEORY FROM BEGINING.

PLEASE HELP",3,sql,2020-10-13
jae9rr,Oracle SQL: Help Addressing Date Comparison Logic,"&amp;#x200B;

|Rank|ID|Date|
|:-|:-|:-|
|1|001|7/15/2020|
|2|001|10/04/2020|
|3|001|10/14/2020|
|4|001|11/18/2020|
|5|001|2/25/2021|

Above is some fake sample data for a customer.  I have created a rank and partitioned the data based on ID and ordered by Date ascending.   Lets say this data is representing the days a customer purchased something and used a coupon.  The business rule is that you can only use a coupon every 90 days from the last valid coupon.  Based on these rule, I am trying to create a table like the following:

|Valid Coupon|Rank|ID|Date|
|:-|:-|:-|:-|
|1|1|001|7/15/2020|
|0|2|001|10/04/2020|
|1|3|001|10/14/2020|
|0|4|001|11/18/2020|
|1|5|001|2/25/2021|

The code will compare value rank 2 to 1. Then, since value 2 is less than 90, value 3 will compare to 1.  Since value 3 is &gt;=90 from 1, then 4 will compare to 3.  That value is less than 90, so value 5 will compare to value 3 and since that is &gt;=90 it is valid.

I have attempted using lag functions and nth\_value functions, but I am trying to avoid writing like 100 lines of code to account for every possible combination.  I figure there is an easier way to do this.  Any help would be greatly appreciated!",2,sql,2020-10-13
jada4u,Checks to avoid mistakes while querying the table.,"What are the checks or list you follow to make sure that the data you get is what you think you are getting.

For example, whenever I get the order details, I will always add an extra column with the count of distinct order day to make sure that the time period is correct.

Could you please share if you guys do something like this.

I am beginner and would appreciate any help.",2,sql,2020-10-13
jacrno,why is there a syntax error here?,"    select pid,
        max(case when rn = 1 then diff_seconds end) t1,
        max(case when rn = 2 then diff_seconds end) t2,
        max(case when rn = 3 then diff_seconds end) t3,
        max(case when rn = 4 then diff_seconds end) t4,
        max(case when rn = 5 then diff_seconds end) t5
    from (
        select t.*, 
            timestampdiff(second, start_time, end_time) diff_seconds,
            row_number() over(partition by pid order by id desc) rn
        from mytable t
    ) t
    where rn &lt;= 5
    group by id

mysql says syntax error:missing closing parenthesis on 'over'",2,sql,2020-10-13
jabp6x,[bgDB][OC] tiny relational database implemented from scratch,"Since COVID started I found my self with a bit of extra time during evenings and started building something that I wished to build for quite some time.

[bgDB](https://gitlab.com/aleksandartomic88/bgdb) is a tiny relational database, built from scratch, that aims to provide a platform for experimentation, make core database concepts more approachable and, well, make me happy while building it :)

It is still early in development, but it is starting to get in shape, so I hope that you guys will find it interesting.

It is still rough around the edges, but there is basic support for Write Ahead Logging, Buffer Pool, Read Committed Isolation, recovery and on Query Processing side it supports Aggregates/GroupBy, Joins and Filters.

If anyone is willing to join the development you are welcome, of course.

&amp;#x200B;

Hopefully this will be interesting to this community since it aims to make core database development concepts more approachable.",6,sql,2020-10-13
jabblx,Wrap your SQL into HTTP REST endpoints securely - #NoCode required,"For those interested in wrapping your SQL into HTTP REST endpoints, easily - Adding authentication and authorisation in the process :)

[https://www.youtube.com/watch?v=Ci6a\_ZVueXg](https://www.youtube.com/watch?v=Ci6a_ZVueXg)",17,sql,2020-10-13
jaarxr,Different course - new server or new DB for each?,I'm taking different classes on Udemy to learn SQL. Each class has their down data sets. How should I setup Postgres? Should I create a new server for each course? Or just create a new DB under the main PostgreSQL 13 Server? https://i.imgur.com/plHjj4n.png,5,sql,2020-10-13
ja8hle,SQL Courses?,"Hey so got an internship offer (paid at that) with a guaranteed job. They just want me to learn SQL, which I did briefly a few years ago when I took Database Management classes. Looking for a good course to take thats not super long, but will get me certified at the end.",4,sql,2020-10-13
ja8bae,How to check if multiple rows of the same ID have a SUM quantity over a certain amount?," Hey so I'm trying to find a ProductID from a table where the sum of the quantity of that id is above a certain amount. The table contains multiple rows of the same ProductID . I need to sum all of those ProductIDs quantities and put that ProductID into a different table.  

    INSERT INTO [Sales].[SpecialOfferProduct] (SpecialOfferID, ProductID)
    SELECT 17, [ProductID]
    FROM [Production].[ProductInventory]
    WHERE [Quantity] &gt; 1800;

 That's my code so far. Whats the syntax for getting the sum of the quantity of all the same IDs?",2,sql,2020-10-13
ja5lea,[SQLite] Recover data from Buku bookmark manager,"[Buku bookmark manager](https://github.com/jarun/Buku) uses SQLite3.  
My problem: I was using ArchLinux, with a separated partition for the HOME directory. Then I decided to do some distro hopping and switched to Manjaro with i3wm. However, I forgot to backup my buku list. Usually, I would have done something like this:   
`$ buku -e backupfile.md`   
, but I forgot to do that this time. Nonetheless, I still kept all the files in my previous home directory, including `HOMEDIR/.local/share/buku/bookmarks.db` ; although I do not know how to see any of my bookmarks.       
Is there anyway I can recover the list of all the bookmarks I had?",1,sql,2020-10-13
ja42mm,how to make future values for a view?,"Let's say i have this table (lets call this table1)





date | sku | cost
---|---|----
20190101 | A24 | 6
20190101 | B24 | 5

since i get my data feed once a week i need to make a view/query to blurt out this type of output:



date | sku | cost
---|---|----
20190101 | A24 | 6
20190101 | B24 | 5
20190102 | A24 | 6
20190102 | B24 | 5
20190103 | A24 | 6
20190103 | B24 | 5
20190104 | A24 | 6
20190104 | B24 | 5


is there a function/method im not thinking of to get this result?",2,sql,2020-10-13
ja3p1z,SQL Linked Server Question,"Hello All,

I am trying to write a SQL Code in MS SQL Server to extract a table from a linked server and insert it into my local server as a new table, where the linked server is a Server Object. The table to be extracted is very large. This code executes but seemingly takes forever:

 **SELECT \* INTO New\_Table\_Name FROM \[LinkedServer\].\[Linked\_Database\].\[Schema\].\[Table\_to\_be\_extracted\];**

I believe using this query would potentially be faster but I receive an error message 'Invalid Object Name' in reference to the new table name:

 **INSERT INTO \[Local\_Database\].schema.New\_Table\_Name SELECT \* FROM OPENQUERY(\[LinkedServer\], 'SELECT \* FROM \[Linked\_Database\].\[Schema\].\[Table\_to\_be\_extracted\]') ;**

Does anyone see why I may be receiving this error. Thank You!",1,sql,2020-10-13
ja3d09,Zheap – Reinvented PostgreSQL Storage,,1,sql,2020-10-13
ja26q5,Do people prefer to manipulate data in pandas or SQL?,"I know 2 types of people. One likes to do SELECT \* FROM table and calculate all metrics using pandas. The other kind likes to do everything in SQL and just execute query to get final result in pandas. Which kind are you?

&amp;#x200B;

&amp;#x200B;

[Pandas video](https://www.youtube.com/watch?v=4zLd9YEnABs) tutorial",2,sql,2020-10-13
ja01gj,"I feel like temp tables are almost always a better solution than a CTE or sub query, especially for long term maintainability. Agree, disagree?","I'm just looking for input. I wouldn't say I'm a DBA, but I'm probably as close as you could get being a back end dev, and frankly, feel qualified to at least do entry level DBA stuff, were that my wish.

So part of my job being senior is a lot of code reviews, and then the tasks I get are usually, we have no idea why this is broken/slow, but it involves our entire system to troubleshoot, go fix it.

In doing that I've ran across tons of times where we've had some sql that had been working fine for years, but finally hit a threshold, data wise, where they start to run super slow.

In almost every case, it's been a nested query, or CTE, or both. And the fix has usually been to break down what the script is doing into chunks and throw them into temp tables. 

Examples that come to mind are a script that grew over time to show purchases, but the purchase ""item"" came from one of three tables based on the purchase type so the query was coalescing things and doing 3 left joins. That got slow as data grew. The fix was to pull all the purchases you needed for that specific time, throw in a temp table, then run 3 updates based on inner joins. Now it's almost instant.

A different example is one I just worked on today. We had a nested select that basically joined exams back onto themselves. Essentially, you're trying to catch cheaters, so you select your set of exams, and within that, need to go back into the same table to check all other exams around the same time against it.

This query works great until you get into the million ish # of rows, then exponentially gets slower. 

The fix once again was to take the two selects, throw them in temp tables, then pull from the temp tables doing the calculations.  It took a 16 minute query down to &lt; 20 seconds. 

Am I doing things wrong or is this common? Like I said, I'm not a pure DBA so I'd love input, agreeing or not!",50,sql,2020-10-13
j9zwa1,Count records between time,"Hello

Question on Hive

I would like to count all the records every day that we get between 6:00 and 7.00

We have timestamp field in the table

How could I write a query for that the adapt every day for the current day ? 

Thanks",1,sql,2020-10-13
j9zpn2,"I'm about to tackle this SQL challenge, but I'm not sure where to start.","I'm doing [https://sqlzoo.net/](https://sqlzoo.net/)

I've done all the tutorials and quizzes. I'm at  ""Assessments: More involved examples for confident users | | ""Module Feedback"":  [https://sqlzoo.net/wiki/Module\_Feedback](https://sqlzoo.net/wiki/Module_Feedback)

When I look at the tables, I have no idea what's going on. With the previous examples, I took some time to try and understand the data in human terms. But, all these names don't make any sense.

Should I try to understand what each table means before attempting the problems? Or should I try to get at it in an abstract sense?",1,sql,2020-10-13
j9z3xy,Extract column names from JSON,"Currently if I want to extract JSON into a column, I have to do:

    json_fields-&gt;'phone_number' AS phone_number

Lets say I do not always know the number of keys stored in the json field, is there an easy way to dynamically add columns with the column name being the key name stored in the json field?

In addition, sometimes I have json nested within the key like:

    json_fields-&gt;'home_address'-&gt;'street' AS street

Would there be an easy way to also extract that information without having to specify the key for each field? Any help would be appreciated!",1,sql,2020-10-13
j9y7ho,Hard query,"Hey guys, I have a question regarding a query I need to make for an assignment.

It's a school schedule.For a particular part of the school schedule, I need to get a list of all EMPTY classrooms at a certain class time. There are two tables, the first one called ""lesson hour nr"" shows the column only the lesson hours, such as Monday the first lesson hour or Wednesday the seventh, and a key for each of these hours. the other table shows all lessons, including the class, the teacher, the subject, the lesson time and the room.So now I want when I enter a query, the query outcomes are all empty classrooms. So the classrooms where no lessons are given at that time. Can anyone help me with this query?

&amp;#x200B;

This is how the tables look like

Lessen(nl)/lessons(en):

    CREATE TABLE `lessen` (  `id_lessen` int(4) NOT NULL AUTO_INCREMENT,  `groep` varchar(6) DEFAULT NULL,  `lesuur` varchar(3) DEFAULT NULL,  `vak` varchar(3) DEFAULT NULL,  `docent` varchar(3) DEFAULT NULL,  `lokaal` varchar(3) DEFAULT NULL,  PRIMARY KEY (`id_lessen`) ) ENGINE=MyISAM AUTO_INCREMENT=1581 DEFAULT CHARSET=latin   

lesuurnr(nl)/lessonhournr(en):

    CREATE TABLE `lesuurnr` (  `lesuurnr` int(3) NOT NULL,  `lesuur` varchar(3) NOT NULL,  PRIMARY KEY (`lesuurnr`) ) ENGINE=MyISAM DEFAULT CHARSET=latin1

Unfortunately, I'm not allowed to create an extra table with all the rooms..

&amp;#x200B;

I tried this query

Dutch:

    SELECT `lessen`.`lokaal`, `lesuurnr`.`lesuur`  
    FROM `lesuurnr`, `lessen`  
    WHERE `lesuurnr`.`lesuur` = ""$"" 
    AND `lesuurnr`.`lesuur` NOT IN (SELECT `lessen`.`lesuur` FROM `lessen`);` 

English:

    SELECT `lessons`.`room`, `lessonhournr`.`lessonhour`  
    FROM `lessonhournr`, `lessons`  
    WHERE `lessonhournr`.`lessonhour` = ""$"" 
    AND `lessonhournr`.`lessonhour` NOT IN (SELECT `lessons`.`lessonhour`  FROM `lessons` 

$ is a variable for a lesson hour, like Monday first is 'ma1' ( Maandag is Monday in Dutch) and Tuesday 8th is 'di8'.

But it doesn't give me the output I want.

So the thing is when I enter a variable for a lesson hour, I'll get all the empty rooms for the entered lesson hour

EXAMPLE OUTPUT:

I want to see all the empty rooms for Tuesday 8th lessonhour (di8):

|Lessonhour|Room|
|:-|:-|
|di8|C10|
|di8|L22|

&amp;#x200B;

I think that in the FROM part of the query, you also need a table with all the rooms, but I'm not sure about that. Query for that is:

    SELECT lessen.lokaal 
    FROM lessen 
    GROUP BY lokaal 

English:

    SELECT lessons.room 
    FROM lessons 
    GROUP BY room",1,sql,2020-10-13
j9wxen,Query help question with ms access,"Hi. I have a table in a accdb thats consists of several columns. They include a social security number, several dates and monetary values. Im trying to query data in here ( there are over 600000 results in the accdb ) . I think ms access uses jet sql.

One social security can appear once or several times in a database. The dates and the monetary values that are on the same line ( in a different column ) can be different, or not.


So lets say my table looks like this:

Ssn      Date1         Date2       moneyvalue —————-
             123455 12-01-20  03-04-20     5.21           



Im trying to do several things:

First I want to only select the ssn that appear at least twice in the database (or more).

From those results i want to only get the ones where date1 is equal to date 2.

From those results i want to get the results where there are different values in moneyvalue per ssn.


Is this possible? How would i go on about this? I have to do this from within ms access sql window, i cant export the database to mssql as its protected.",3,sql,2020-10-13
j9ww7f,What is the best OS for SQL work?,"What operating system is best for SQL devs? For enterprise applications, is it mainly Windows or Linux? What OS would you recommend to someone who wants to become a DBA?",1,sql,2020-10-13
j9wiuy,Digesting XML Data,"Hello everyone. I'm anything but a SQL expert, but I've unfortunately been asked to knock out a data digestion job. I have a table with the following columns
Unique ID
DateTime
Value 530
Value 540
Value 550
Value 560

All values change at the same time and are tied to the same device (unique ID), so they are all to be contained in the same row. Basically, one unique ID, one time, and three associated values.

I have to get this data via an xml with the following format:

https://i.imgur.com/G5bF5Xb.png

I basically need to put the value correlating with the Data Number in the column with the same name as the Data Number. Ex/ Column 530 would contain 55.5555. 

I'm really struggling to see how to line up my 530 with the 530 column to deposit the data in the file. Any help would be greatly appreciated.

My goal is below:
https://i.imgur.com/HVqlvfX.png",2,sql,2020-10-13
j9vn5p,University Class Project Help,"Hi all, 

In my accounting class we went over SQL for two days and the professor just left it at that. We have a project due at the end of the month where we download data and answer the following questions. My partner and I do not remember much from class and do not want to rely on the professor's help too much. Any advice on how to tackle this project?

&amp;#x200B;

https://preview.redd.it/26125xe6bps51.png?width=432&amp;format=png&amp;auto=webp&amp;s=615ef7343d823d17acb84298b75c795ee65b3bfe",1,sql,2020-10-13
